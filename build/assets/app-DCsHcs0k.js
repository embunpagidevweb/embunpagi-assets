import"./bootstrap-z-Rg4TxU.js";var bq={exports:{}};(function(mn){(function(){var Fn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Kn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Xn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},po=function(e,n){return as(function(o,r){return e.eq(n(o),n(r))})},as=function(e){return{eq:e}},Vo=as(function(e,n){return e===n}),bn=Vo,Qn=function(e){return as(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},Ii=function(e,n){return po(Qn(e),function(o){return Xn(o,n)})},fs=function(e){return as(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!Ii(bn).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Ir=as(function(e,n){if(e===n)return!0;var o=Fn(e),r=Fn(n);return o!==r?!1:Kn(o)?e===n:o==="array"?Qn(Ir).eq(e,n):o==="object"?fs(Ir).eq(e,n):!1});const hc=Object.getPrototypeOf,er=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Wc=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&er(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},eo=e=>n=>Wc(n)===e,Nt=e=>n=>typeof n===e,pc=e=>n=>e===n,Gt=(e,n)=>ut(e)&&er(e,n,(o,r)=>hc(o)===r),ce=eo("string"),ut=eo("object"),Ao=e=>Gt(e,Object),Zn=eo("array"),le=pc(null),vn=Nt("boolean"),fn=pc(void 0),Tn=e=>e==null,Me=e=>!Tn(e),re=Nt("function"),is=Nt("number"),Hn=(e,n)=>{if(Zn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},kt=()=>{},k=(e,n)=>(...o)=>e(n.apply(null,o)),Mo=(e,n)=>o=>e(n(o)),et=e=>()=>e,Oo=e=>e,Kt=(e,n)=>e===n;function Ve(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const yo=e=>n=>!e(n),ks=e=>()=>{throw new Error(e)},it=e=>e(),Xt=e=>{e()},_e=et(!1),Ke=et(!0);class ${constructor(n,o){this.tag=n,this.value=o}static some(n){return new $(!0,n)}static none(){return $.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?$.some(n(this.value)):$.none()}bind(n){return this.tag?n(this.value):$.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:$.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Me(n)?$.some(n):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const tr=Array.prototype.slice,kn=Array.prototype.indexOf,zo=Array.prototype.push,co=(e,n)=>kn.call(e,n),Li=(e,n)=>{const o=co(e,n);return o===-1?$.none():$.some(o)},Ut=(e,n)=>co(e,n)>-1,Vn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},qt=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},pe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},Er=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},$o=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Bt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Lr=(e,n,o)=>(Er(e,(r,a)=>{o=n(o,r,a)}),o),Bn=(e,n,o)=>(pe(e,(r,a)=>{o=n(o,r,a)}),o),Oc=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return $.some(u);if(o(u,r))break}return $.none()},bo=(e,n)=>Oc(e,n,_e),_s=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return $.some(o)}return $.none()},fl=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Zn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);zo.apply(n,e[o])}return n},Bs=(e,n)=>fl(qt(e,n)),Yo=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},Io=e=>{const n=tr.call(e,0);return n.reverse(),n},Dc=(e,n)=>Bt(e,o=>!Ut(n,o)),gs=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},jn=(e,n)=>{const o=tr.call(e,0);return o.sort(n),o},Pa=(e,n)=>n>=0&&n<e.length?$.some(e[n]):$.none(),js=e=>Pa(e,0),Ss=e=>Pa(e,e.length-1),Tr=re(Array.from)?Array.from:e=>tr.call(e),Rc=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return $.none()},li=(e,n)=>{const o=[],r=re(n)?a=>Vn(o,u=>n(u,a)):a=>Ut(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},no=Object.keys,Fi=Object.hasOwnProperty,ct=(e,n)=>{const o=no(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},zn=(e,n)=>Kr(e,(o,r)=>({k:r,v:n(o,r)})),Kr=(e,n)=>{const o={};return ct(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},Gs=e=>(n,o)=>{e[o]=n},Za=(e,n,o,r)=>{ct(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},ya=(e,n)=>{const o={},r={};return Za(e,n,Gs(o),Gs(r)),{t:o,f:r}},Co=(e,n)=>{const o={};return Za(e,n,Gs(o),kt),o},Ca=(e,n)=>{const o=[];return ct(e,(r,a)=>{o.push(n(r,a))}),o},ja=e=>Ca(e,Oo),ho=(e,n)=>zt(e,n)?$.from(e[n]):$.none(),zt=(e,n)=>Fi.call(e,n),$s=(e,n)=>zt(e,n)&&e[n]!==void 0&&e[n]!==null,bc=(e,n,o=Ir)=>fs(o).eq(e,n),ql=e=>{const n={};return pe(e,o=>{n[o]={}}),no(n)},Kl=e=>e.length!==void 0,Xo=Array.isArray,nr=e=>{if(Xo(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ls=(e,n,o)=>{if(!e)return!1;if(o=o||e,Kl(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(zt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},vc=(e,n)=>{const o=[];return ls(e,(r,a)=>{o.push(n(r,a,e))}),o},Ba=(e,n)=>{const o=[];return ls(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},or=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Is=(e,n,o,r)=>{let a=fn(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},Uo=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},qs=e=>e[e.length-1],Mc=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Ga=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=a||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!C,D=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!x&&!C&&!D;return{isiPad:et(a),isiPhone:et(u),isTablet:et(C),isPhone:et(x),isTouch:et(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:et(D),isDesktop:et(M)}},gl=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Zc=(e,n)=>{const o=gl(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Yr(r(1),r(2))},Sd=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?he():Zc(e,o)},he=()=>Yr(0,0),Yr=(e,n)=>({major:e,minor:n}),$a={nu:Yr,detect:Sd,unknown:he},Ou=(e,n)=>Rc(n.brands,o=>{const r=o.brand.toLowerCase();return bo(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:$a.nu(parseInt(o.version,10),0)}))}),Du=(e,n)=>{const o=String(n).toLowerCase();return bo(e,r=>r.search(o))},No=(e,n)=>Du(e,n).map(o=>{const r=$a.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ru=(e,n)=>Du(e,n).map(o=>{const r=$a.detect(o.versionRegexes,n);return{current:o.name,version:r}}),ui=(e,n)=>e.substring(n),Xr=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Hi=(e,n)=>Jo(e,n)?ui(e,n.length):e,Ls=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?fn(r)?!0:a+n.length<=r:!1},Jo=(e,n)=>Xr(e,n,0),jc=(e,n)=>Xr(e,n,e.length-n.length),kr=e=>n=>n.replace(e,""),hs=kr(/^\s+|\s+$/g),di=kr(/^\s+/g),ra=kr(/\s+$/g),$n=e=>e.length>0,ur=e=>!$n(e),Ks=(e,n)=>n<=0?"":new Array(n+1).join(e),qa=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?$.none():$.some(o)},ca=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ys=e=>n=>Ls(n,e),Wo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ls(e,"edge/")&&Ls(e,"chrome")&&Ls(e,"safari")&&Ls(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ca],search:e=>Ls(e,"chrome")&&!Ls(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ls(e,"msie")||Ls(e,"trident")},{name:"Opera",versionRegexes:[ca,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ys("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ys("firefox")},{name:"Safari",versionRegexes:[ca,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ls(e,"safari")||Ls(e,"mobile/"))&&Ls(e,"applewebkit")}],rm=[{name:"Windows",search:Ys("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ls(e,"iphone")||Ls(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ys("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ys("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ys("linux"),versionRegexes:[]},{name:"Solaris",search:Ys("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ys("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ys("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Gc={browsers:et(Wo),oses:et(rm)},ao="Edge",hr="Chromium",pr="IE",Fs="Opera",mi="Firefox",Jr="Safari",Qr=()=>Nc({current:void 0,version:$a.unknown()}),Nc=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(ao),isChromium:r(hr),isIE:r(pr),isOpera:r(Fs),isFirefox:r(mi),isSafari:r(Jr)}},Pc={unknown:Qr,nu:Nc,edge:et(ao),chromium:et(hr),ie:et(pr),opera:et(Fs),firefox:et(mi),safari:et(Jr)},hl="Windows",Vi="iOS",fi="Android",Bc="Linux",_r="macOS",gi="Solaris",hi="FreeBSD",pl="ChromeOS",Ka=()=>Xs({current:void 0,version:$a.unknown()}),Xs=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(hl),isiOS:r(Vi),isAndroid:r(fi),isMacOS:r(_r),isLinux:r(Bc),isSolaris:r(gi),isFreeBSD:r(hi),isChromeOS:r(pl)}},Ya={unknown:Ka,nu:Xs,windows:et(hl),ios:et(Vi),android:et(fi),linux:et(Bc),macos:et(_r),solaris:et(gi),freebsd:et(hi),chromeos:et(pl)},yc={detect:(e,n,o)=>{const r=Gc.browsers(),a=Gc.oses(),u=n.bind(C=>Ou(r,C)).orThunk(()=>No(r,e)).fold(Pc.unknown,Pc.nu),f=Ru(a,e).fold(Ya.unknown,Ya.nu),b=Ga(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Yl=e=>window.matchMedia(e).matches;let Xl=Mc(()=>yc.detect(window.navigator.userAgent,$.from(window.navigator.userAgentData),Yl));const H=()=>Xl(),J=window.navigator.userAgent,ie=H(),Ne=ie.browser,Xe=ie.os,Pe=ie.deviceType,to=J.indexOf("Windows Phone")!==-1,_t={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ne.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ne.isIE(),windowsPhone:to,browser:{current:Ne.current,version:Ne.version,isChromium:Ne.isChromium,isEdge:Ne.isEdge,isFirefox:Ne.isFirefox,isIE:Ne.isIE,isOpera:Ne.isOpera,isSafari:Ne.isSafari},os:{current:Xe.current,version:Xe.version,isAndroid:Xe.isAndroid,isChromeOS:Xe.isChromeOS,isFreeBSD:Xe.isFreeBSD,isiOS:Xe.isiOS,isLinux:Xe.isLinux,isMacOS:Xe.isMacOS,isSolaris:Xe.isSolaris,isWindows:Xe.isWindows},deviceType:{isDesktop:Pe.isDesktop,isiPad:Pe.isiPad,isiPhone:Pe.isiPhone,isPhone:Pe.isPhone,isTablet:Pe.isTablet,isTouch:Pe.isTouch,isWebView:Pe.isWebView}},sn=/^\s*|\s*$/g,Qo=e=>Tn(e)?"":(""+e).replace(sn,""),N=(e,n)=>n?n==="array"&&Xo(e)?!0:typeof e===n:e!==void 0,Z=(e,n,o={})=>{const r=ce(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},te=zt,Se=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(zt(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Le=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ls(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Le(a,n,o,r),!0)))},je={trim:Qo,isArray:Xo,is:N,toArray:nr,makeMap:Z,each:ls,map:vc,grep:Ba,inArray:or,hasOwn:te,extend:Se,walk:Le,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Zn(e)?e:e===""?[]:vc(e.split(n||","),Qo),_addCacheSuffix:e=>{const n=_t.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Do=(e,n,o=Kt)=>e.exists(r=>o(r,n)),vr=(e,n,o=Kt)=>cn(e,n,o).getOr(e.isNone()&&n.isNone()),zi=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},cn=(e,n,o)=>e.isSome()&&n.isSome()?$.some(o(e.getOrDie(),n.getOrDie())):$.none(),qc=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?$.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):$.none(),Ia=(e,n)=>e?$.some(n):$.none(),sr=typeof window<"u"?window:Function("return this;")(),Po=(e,n)=>{let o=n??sr;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},La=(e,n)=>{const o=e.split(".");return Po(o,n)},uf=(e,n)=>La(e,n),wd=(e,n)=>{const o=uf(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},us=Object.getPrototypeOf,Mu=e=>wd("HTMLElement",e),cm=e=>{const n=La("ownerDocument.defaultView",e);return ut(e)&&(Mu(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(us(e).constructor.name))},ps=8,Ui=9,aa=11,xd=1,W=3,K=e=>e.dom.nodeName.toLowerCase(),Ce=e=>e.dom.nodeType,Be=e=>n=>Ce(n)===e,Ft=e=>Ce(e)===ps||K(e)==="#comment",Nn=e=>Cn(e)&&cm(e.dom),Cn=Be(xd),Bo=Be(W),Hs=Be(Ui),$c=Be(aa),ec=e=>n=>Cn(n)&&K(n)===e,Vs=(e,n,o)=>{if(ce(o)||vn(o)||is(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},zs=(e,n,o)=>{Vs(e.dom,n,o)},dr=(e,n)=>{const o=e.dom;ct(n,(r,a)=>{Vs(o,a,r)})},tc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Kc=(e,n)=>$.from(tc(e,n)),As=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},bs=(e,n)=>{e.dom.removeAttribute(n)},bl=e=>{const n=e.dom.attributes;return n==null||n.length===0},kg=e=>Bn(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Ed=(e,n)=>{const o=tc(e,n);return o===void 0||o===""?[]:o.split(" ")},df=(e,n,o)=>{const a=Ed(e,n).concat([o]);return zs(e,n,a.join(" ")),!0},vb=(e,n,o)=>{const r=Bt(Ed(e,n),a=>a!==o);return r.length>0?zs(e,n,r.join(" ")):bs(e,n),!1},Nu=e=>e.dom.classList!==void 0,Pu=e=>Ed(e,"class"),Bu=(e,n)=>df(e,"class",n),Sa=(e,n)=>vb(e,"class",n),lp=(e,n)=>Ut(Pu(e),n)?Sa(e,n):Bu(e,n),$u=(e,n)=>{Nu(e)?e.dom.classList.add(n):Bu(e,n)},_g=e=>{(Nu(e)?e.dom.classList:Pu(e)).length===0&&bs(e,"class")},am=(e,n)=>{Nu(e)?e.dom.classList.remove(n):Sa(e,n),_g(e)},up=(e,n)=>{const o=Nu(e)?e.dom.classList.toggle(n):lp(e,n);return _g(e),o},Ag=(e,n)=>Nu(e)&&e.dom.classList.contains(n),im=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Iu(r.childNodes[0])},Og=(e,n)=>{const r=(n||document).createElement(e);return Iu(r)},dp=(e,n)=>{const r=(n||document).createTextNode(e);return Iu(r)},Iu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:im,fromTag:Og,fromText:dp,fromDom:Iu,fromPoint:(e,n,o)=>$.from(e.dom.elementFromPoint(n,o)).map(Iu)},Td=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Fa=(e,n)=>{const o=e.dom;if(o.nodeType!==xd)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},yb=e=>e.nodeType!==xd&&e.nodeType!==Ui&&e.nodeType!==aa||e.childElementCount===0,Cb=(e,n)=>{const o=n===void 0?document:n.dom;return yb(o)?[]:qt(o.querySelectorAll(e),ne.fromDom)},lm=(e,n)=>{const o=n===void 0?document:n.dom;return yb(o)?$.none():$.from(o.querySelector(e)).map(ne.fromDom)},_n=(e,n)=>e.dom===n.dom,Ic=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ia=e=>ne.fromDom(e.dom.ownerDocument),Lu=e=>Hs(e)?e:ia(e),fp=e=>ne.fromDom(Lu(e).dom.documentElement),um=e=>ne.fromDom(Lu(e).dom.defaultView),Yc=e=>$.from(e.dom.parentNode).map(ne.fromDom),mf=e=>$.from(e.dom.parentElement).map(ne.fromDom),vl=(e,n)=>{const o=re(n)?n:_e;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ne.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Dg=e=>{const n=o=>Bt(o,r=>!_n(e,r));return Yc(e).map(Fr).map(n).getOr([])},Jl=e=>$.from(e.dom.previousSibling).map(ne.fromDom),Xc=e=>$.from(e.dom.nextSibling).map(ne.fromDom),Sb=e=>Io(Td(e,Jl)),dm=e=>Td(e,Xc),Fr=e=>qt(e.dom.childNodes,ne.fromDom),wa=(e,n)=>{const o=e.dom.childNodes;return $.from(o[n]).map(ne.fromDom)},Jc=e=>wa(e,0),kd=e=>wa(e,e.dom.childNodes.length-1),mm=e=>e.dom.childNodes.length,gp=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ne.fromDom(n)},fm=e=>$c(e)&&Me(e.dom.host),Wi=e=>ne.fromDom(e.dom.getRootNode()),gm=e=>fm(e)?e:gp(Lu(e)),Yv=e=>fm(e)?e:ne.fromDom(Lu(e).dom.body),hp=e=>{const n=Wi(e);return fm(n)?$.some(n):$.none()},wb=e=>ne.fromDom(e.dom.host),Xv=e=>{if(Me(e.target)){const n=ne.fromDom(e.target);if(Cn(n)&&Rg(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return js(o)}}return $.from(e.target)},Rg=e=>Me(e.dom.shadowRoot),_d=e=>{const n=Bo(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return hp(ne.fromDom(n)).fold(()=>o.body.contains(n),Mo(_d,wb))};var pp=(e,n,o,r,a)=>e(o,r)?$.some(o):re(a)&&a(o)?$.none():n(o,r,a);const ws=(e,n,o)=>{let r=e.dom;const a=re(o)?o:_e;for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r);if(n(u))return $.some(u);if(a(u))break}return $.none()},Os=(e,n,o)=>pp((a,u)=>u(a),ws,e,n,o),Fu=(e,n)=>{const o=e.dom;return o.parentNode?yl(ne.fromDom(o.parentNode),r=>!_n(e,r)&&n(r)):$.none()},yl=(e,n)=>{const o=a=>n(ne.fromDom(a));return bo(e.dom.childNodes,o).map(ne.fromDom)},bp=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=ne.fromDom(r.childNodes[a]);if(n(u))return $.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return $.none()};return o(e.dom)},Ar=(e,n,o)=>ws(e,r=>Fa(r,n),o),$t=(e,n)=>lm(n,e),Hu=(e,n,o)=>pp((a,u)=>Fa(a,u),Ar,e,n,o),Jv=e=>Hu(e,"[contenteditable]"),Xa=(e,n=!1)=>_d(e)?e.dom.isContentEditable:Jv(e).fold(et(n),o=>mo(o)==="true"),mo=e=>e.dom.contentEditable,Vu=e=>e.style!==void 0&&re(e.style.getPropertyValue),ff=(e,n,o)=>{if(!ce(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Vu(e)&&e.style.setProperty(n,o)},Mg=(e,n)=>{Vu(e)&&e.style.removeProperty(n)},vp=(e,n,o)=>{const r=e.dom;ff(r,n,o)},Sn=(e,n)=>{const o=e.dom;ct(n,(r,a)=>{ff(o,a,r)})},Js=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!_d(e)?hm(o,n):a},hm=(e,n)=>Vu(e)?e.style.getPropertyValue(n):"",pm=(e,n)=>{const o=e.dom,r=hm(o,n);return $.from(r).filter(a=>a.length>0)},Ha=e=>{const n={},o=e.dom;if(Vu(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},xa=(e,n)=>{const o=e.dom;Mg(o,n),Do(Kc(e,"style").map(hs),"")&&bs(e,"style")},pi=e=>e.dom.offsetWidth,qo=(e,n)=>{Yc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Zi=(e,n)=>{Xc(e).fold(()=>{Yc(e).each(a=>{Or(a,n)})},r=>{qo(r,n)})},Ad=(e,n)=>{Jc(e).fold(()=>{Or(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Or=(e,n)=>{e.dom.appendChild(n.dom)},Ql=(e,n)=>{qo(e,n),Or(n,e)},Ds=(e,n)=>{pe(n,(o,r)=>{const a=r===0?e:n[r-1];Zi(a,o)})},zu=(e,n)=>{pe(n,o=>{Or(e,o)})},bm=e=>{e.dom.textContent="",pe(Fr(e),n=>{Zo(n)})},Zo=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},eu=e=>{const n=Fr(e);n.length>0&&Ds(e,n),Zo(e)},xb=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Fr(ne.fromDom(r))},yp=e=>qt(e,ne.fromDom),Rs=e=>e.dom.innerHTML,Ng=(e,n)=>{const r=ia(e).dom,a=ne.fromDom(r.createDocumentFragment()),u=xb(n,r);zu(a,u),bm(e),Or(e,a)},ji=e=>{const n=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return Or(n,o),Rs(n)},Cp=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),In=e=>{const n=ne.fromDom(Xv(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=k(r,o);return Cp(n,e.clientX,e.clientY,o,r,a,e)},gf=(e,n)=>o=>{e(o)&&n(In(o))},Pg=(e,n,o,r,a)=>{const u=gf(o,r);return e.dom.addEventListener(n,u,a),{unbind:Ve(O,e,n,u,a)}},w=(e,n,o,r)=>Pg(e,n,o,r,!1),O=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},I=(e,n)=>({left:e,top:n,translate:(r,a)=>I(e+r,n+a)}),Q=I,ae=e=>{const n=e.getBoundingClientRect();return Q(n.left,n.top)},ze=(e,n)=>e!==void 0?e:n!==void 0?n:0,Zt=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return Q(o.offsetLeft,o.offsetTop);const u=ze(r==null?void 0:r.pageYOffset,a.scrollTop),f=ze(r==null?void 0:r.pageXOffset,a.scrollLeft),b=ze(a.clientTop,o.clientTop),C=ze(a.clientLeft,o.clientLeft);return gn(e).translate(f-C,u-b)},gn=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Q(r.offsetLeft,r.offsetTop):_d(e)?ae(n):Q(0,0)},an=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Q(o,r)},Pt=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},xs=(e,n)=>{H().browser.isSafari()&&re(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},yr=e=>{const n=e===void 0?window:e;return H().browser.isFirefox()?$.none():$.from(n.visualViewport)},Qc=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Uu=e=>{const n=e===void 0?window:e,o=n.document,r=an(ne.fromDom(o));return yr(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return Qc(r.left,r.top,u,f)},a=>Qc(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},hf=(e,n)=>Bt(Fr(e),n),Eb=(e,n)=>{let o=[];return pe(Fr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Eb(r,n))}),o},Ea=(e,n)=>Cb(n,e),Tb=(e,n,o)=>ws(e,n,o).isSome(),ES=(e,n)=>Fu(e,n).isSome(),Qv=(e,n)=>bp(e,n).isSome();class Hr{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Sp="\uFEFF",Vr=" ",wp=e=>e===Sp,bi=e=>e.replace(/\uFEFF/g,""),Yt=/^[ \t\r\n]*$/,Cl=e=>Yt.test(e),TS=e=>{for(const n of e)if(!wp(n))return!1;return!0},ey=e=>" \f	\v".indexOf(e)!==-1,xp=e=>e===`
`||e==="\r",ty=(e,n)=>n<e.length&&n>=0?xp(e[n]):!1,Sl=(e,n=4,o=!0,r=!0)=>{const a=Ks(" ",n),u=e.replace(/\t/g,a);return Bn(u,(b,C)=>ey(C)||C===Vr?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||ty(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Vr}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:xp(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},Wu=e=>n=>!!n&&n.nodeType===e,pf=e=>!!e&&!Object.getPrototypeOf(e),pt=Wu(1),wl=e=>pt(e)&&Nn(ne.fromDom(e)),ny=e=>pt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Bg=e=>{const n=e.toLowerCase();return o=>Me(o)&&o.nodeName.toLowerCase()===n},xl=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Ut(n,r)}return!1}},Ep=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(pt(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},bf=e=>n=>pt(n)&&n.hasAttribute(e),Od=e=>pt(e)&&e.hasAttribute("data-mce-bogus"),Tp=e=>pt(e)&&e.getAttribute("data-mce-bogus")==="all",tu=e=>pt(e)&&e.tagName==="TABLE",kS=e=>n=>!!(wl(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Ms=xl(["textarea","input"]),qe=Wu(3),Va=Wu(4),vf=Wu(7),rr=Wu(8),$g=Wu(9),nc=Wu(11),fo=Bg("br"),kp=Bg("img"),Fe=kS("true"),go=kS("false"),kb=xl(["td","th"]),zr=xl(["td","th","caption"]),ea=xl(["video","audio","object","embed"]),El=Bg("li"),oy=Bg("details"),vm=Bg("summary"),sy={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},vi=(e,n,o)=>{const r=ne.fromDom(n),a=ne.fromDom(e),u=o.getWhitespaceElements();return Tb(a,b=>zt(u,K(b)),Ve(_n,r))},lo=e=>pt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Zu=(e,n)=>pt(e)&&zt(n.getNonEmptyElements(),e.nodeName),_p=bf("data-mce-bookmark"),Ur=e=>mf(ne.fromDom(e)).exists(n=>!Xa(n)),_b=(e,n,o)=>Cl(e.data)&&!vi(e,n,o),ju=(e,n,o,r)=>qe(e)&&!_b(e,n,o)&&(!r.includeZwsp||!TS(e.data)),Ap=(e,n,o,r)=>re(r.isContent)&&r.isContent(n)||Zu(n,e)||_p(n)||lo(n)||ju(n,o,e,r)||go(n)||Fe(n)&&Ur(n),oc=(e,n,o)=>{const r={...sy,...o};if(r.checkRootAsContent&&Ap(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new Hr(a,n);do{if(r.skipBogus&&pt(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(rr(a)){a=f.next(!0);continue}if(fo(a)){u++,a=f.next();continue}if(Ap(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},la=(e,n,o)=>oc(e,n.dom,{checkRootAsContent:!0,...o}),ve=(e,n,o)=>Ap(e,n,n,{includeZwsp:sy.includeZwsp,...o}),ds=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},ry=e=>{const n=ds($.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set($.some(b))}}},mr=e=>{const n=ds($.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set($.some(setInterval(b,e)))}}},Cc=()=>{const e=ry(kt);return{...e,on:o=>e.get().each(o)}},Sc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},vs=e=>Sc(e)!=="html",Ab=e=>vs(e.nodeName),ym=e=>Sc(e.nodeName),_S=["svg","math"],Op=()=>{const e=Cc(),n=()=>e.get().map(ym).getOr("html");return{track:a=>(Ab(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},Ja="data-mce-block",Vk=e=>Bt(no(e),n=>!/[A-Z]/.test(n)),cy=e=>qt(Vk(e),n=>{const o=CSS.escape(n);return`${o}:`+qt(_S,r=>`not(${r} ${o})`).join(":")}).join(","),AS=(e,n)=>Me(n.querySelector(e))?(n.setAttribute(Ja,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Ja),!1),OS=(e,n)=>{const o=cy(e.getTransparentElements()),r=cy(e.getBlockElements());return Bt(n.querySelectorAll(o),a=>AS(r,a))},DS=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(oc(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},yf=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();DS(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();DS(e,f,!1),oc(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),oc(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),oc(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},Ig=(e,n,o)=>{const r=e.getBlockElements(),a=ne.fromDom(n),u=b=>K(b)in r,f=b=>_n(b,a);pe(yp(o),b=>{ws(b,u,f).each(C=>{const x=hf(b,D=>u(D)&&!e.isValidChild(K(C),K(D)));if(x.length>0){const D=mf(C);pe(x,M=>{ws(M,u,f).each(P=>{yf(e,P.dom,M.dom)})}),D.each(M=>OS(e,M.dom))}})})},kR=(e,n,o)=>{pe([...o,...Cf(e,n)?[n]:[]],r=>pe(Ea(ne.fromDom(r),r.nodeName.toLowerCase()),a=>{Lg(e,a.dom)&&eu(a)}))},Dp=(e,n)=>{const o=OS(e,n);Ig(e,n,o),kR(e,n,o)},ay=(e,n)=>{if(Db(e,n)){const o=cy(e.getBlockElements());AS(o,n)}},iy=(e,n,o)=>{const r=u=>_n(u,ne.fromDom(n)),a=vl(ne.fromDom(o),r);Pa(a,a.length-2).filter(Cn).fold(()=>Dp(e,n),u=>Dp(e,u.dom))},Ob=e=>e.hasAttribute(Ja),Gi=(e,n)=>zt(e.getTransparentElements(),n),Db=(e,n)=>pt(n)&&Gi(e,n.nodeName),Cf=(e,n)=>Db(e,n)&&Ob(n),Lg=(e,n)=>Db(e,n)&&!Ob(n),Rb=(e,n)=>n.type===1&&Gi(e,n.name)&&ce(n.attr(Ja)),RS=H().browser,ly=e=>bo(e,Cn),zk=e=>RS.isFirefox()&&K(e)==="table"?ly(Fr(e)).filter(n=>K(n)==="caption").bind(n=>ly(dm(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,wc=(e,n)=>e.children&&Ut(e.children,n),nu=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Js(ne.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!wc(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!wc(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=zk(ne.fromDom(n))}return{x:r,y:a}},Cm=(e,n={})=>{let o=0;const r={},a=ne.fromDom(e),u=Lu(a),f=oe=>{n.referrerPolicy=oe},b=oe=>{n.contentCssCors=oe},C=oe=>{Or(gm(a),oe)},x=oe=>{const fe=gm(a);$t(fe,"#"+oe).each(Zo)},D=oe=>ho(r,oe).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=oe=>new Promise((fe,ge)=>{let be;const He=je._addCacheSuffix(oe),Qe=D(He);r[He]=Qe,Qe.count++;const yt=(Ct,It)=>{pe(Ct,Xt),Qe.status=It,Qe.passed=[],Qe.failed=[],be&&(be.onload=null,be.onerror=null,be=null)},Re=()=>yt(Qe.passed,2),Ee=()=>yt(Qe.failed,3);if(fe&&Qe.passed.push(fe),ge&&Qe.failed.push(ge),Qe.status===1)return;if(Qe.status===2){Re();return}if(Qe.status===3){Ee();return}Qe.status=1;const Ue=ne.fromTag("link",u.dom);dr(Ue,{rel:"stylesheet",type:"text/css",id:Qe.id}),n.contentCssCors&&zs(Ue,"crossOrigin","anonymous"),n.referrerPolicy&&zs(Ue,"referrerpolicy",n.referrerPolicy),be=Ue.dom,be.onload=Re,be.onerror=Ee,C(Ue),zs(Ue,"href",He)}),P=(oe,fe)=>{const ge=D(oe);r[oe]=ge,ge.count++;const be=ne.fromTag("style",u.dom);dr(be,{rel:"stylesheet",type:"text/css",id:ge.id}),be.dom.innerHTML=fe,C(be)},z=oe=>Promise.allSettled(qt(oe,ge=>M(ge).then(et(ge)))).then(ge=>{const be=$o(ge,He=>He.status==="fulfilled");return be.fail.length>0?Promise.reject(qt(be.fail,He=>He.reason)):qt(be.pass,He=>He.value)}),G=oe=>{const fe=je._addCacheSuffix(oe);ho(r,fe).each(ge=>{--ge.count===0&&(delete r[fe],x(ge.id))})};return{load:M,loadRawCss:P,loadAll:z,unload:G,unloadRawCss:oe=>{ho(r,oe).each(fe=>{--fe.count===0&&(delete r[oe],x(fe.id))})},unloadAll:oe=>{pe(oe,fe=>{G(fe)})},_setReferrerPolicy:f,_setContentCssCors:b}},Mb=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Wi(o).dom;return $.from(e.get(u)).getOrThunk(()=>{const f=Cm(u,r);return e.set(u,f),f})}}})(),yi=e=>e.nodeName.toLowerCase()==="span",Rp=(e,n)=>Me(e)&&(ve(n,e)||n.isInline(e.nodeName.toLowerCase())),Nb=(e,n,o)=>{const r=new Hr(e,n).prev(!1),a=new Hr(e,n).next(!1),u=fn(r)||Rp(r,o),f=fn(a)||Rp(a,o);return u&&f},Pb=e=>yi(e)&&e.getAttribute("data-mce-type")==="bookmark",Tl=(e,n,o)=>qe(e)&&e.data.length>0&&Nb(e,n,o),kl=e=>pt(e)?e.childNodes.length>0:!1,MS=e=>nc(e)||$g(e),qi=(e,n,o,r)=>{var a;const u=r||n;if(pt(n)&&Pb(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)qi(e,f[b],o,u);if(pt(n)){const b=n.childNodes;b.length===1&&Pb(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!MS(n)&&!ve(o,n)&&!kl(n)&&!Tl(n,u,o)&&e.remove(n),n},wf=je.makeMap,ou=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gu=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xf=/[<>&\"\']/g,Uk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Mp={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Sm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Wk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},cr=e=>{const n=ne.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Bb=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Sm[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},su=Bb("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ef=(e,n)=>e.replace(n?ou:Gu,o=>Sm[o]||o),Np=e=>(""+e).replace(xf,n=>Sm[n]||n),ru=(e,n)=>e.replace(n?ou:Gu,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Sm[o]||"&#"+o.charCodeAt(0)+";"),xc=(e,n,o)=>{const r=o||su;return e.replace(n?ou:Gu,a=>Sm[a]||r[a]||a)},xm={encodeRaw:Ef,encodeAllRaw:Np,encodeNumeric:ru,encodeNamed:xc,getEncodeFunc:(e,n)=>{const o=Bb(n)||su,r=(f,b)=>f.replace(b?ou:Gu,C=>Sm[C]!==void 0?Sm[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),a=(f,b)=>xc(f,b,o),u=wf(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:xc:u.numeric?ru:Ef},decode:e=>e.replace(Uk,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Mp[o]||String.fromCharCode(o)):Wk[n]||su[n]||cr(n))},sc=(e,n)=>(e=je.trim(e),e?e.split(n||" "):[]),Ib=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Lb=e=>ut(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Zk=e=>{const n=o=>Zn(o)?qt(o,n):Lb(o)?new RegExp(o.source,o.flags):ut(o)?zn(o,n):o;return n(e)},NS=e=>{const n=/^(~)?(.+)$/;return Bs(sc(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Em=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Tf=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},za=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Tf(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},Ci={html4:Mc(()=>za("html4")),html5:Mc(()=>za("html5")),"html5-strict":Mc(()=>za("html5-strict"))},Si=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=Ci[e]();return n==="blocks"?$.some(o):n==="phrasing"?$.some(r):n==="flow"?$.some(a):$.none()},Pp=e=>{const n=Em(e),{phrasingContent:o,flowContent:r}=Tf(e),a={},u=(C,x,D)=>{a[C]={attributes:gs(x,et({})),attributesOrder:x,children:gs(D,et({}))}},f=(C,x="",D="")=>{const M=sc(D),P=sc(C);let z=P.length;const G=[...n,...sc(x)];for(;z--;)u(P[z],G.slice(),M)},b=(C,x)=>{const D=sc(C),M=sc(x);let P=D.length;for(;P--;){const z=a[D[P]];for(let G=0,U=M.length;G<U;G++)z.attributes[M[G]]={},z.attributesOrder.push(M[G])}};return e!=="html5-strict"&&(pe(sc("acronym applet basefont big font strike tt"),D=>{f(D,"",o)}),pe(sc("center dir isindex noframes"),D=>{f(D,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&pe([a.video,a.audio],C=>{delete C.children.audio,delete C.children.video}),pe(sc("a form meter progress dfn"),C=>{a[C]&&delete a[C].children[C]}),delete a.caption.children.table,delete a.script,a},Bp=e=>e==="-"?"remove":"add",Fg=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return $.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},uy=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Bs(sc(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?Bp(a):"replace",f=r[2],b=Bs(sc(r[3],"|"),C=>Fg(C).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},PS=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return pe(sc(e,"|"),f=>{const b=o.exec(f);if(b){const C={},x=b[1],D=b[2].replace(/[\\:]:/g,":"),M=b[3],P=b[4];if(x==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(D),C.required=!0),x==="-"){delete a[D],u.splice(je.inArray(u,D),1);return}if(M&&(M==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:D,value:P}),C.defaultValue=P):M==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:D,value:P}),C.forcedValue=P):M==="<"&&(C.validValues=je.makeMap(P,"?"))),r.test(D)){const z=C;n.attributePatterns=n.attributePatterns||[],z.pattern=Ib(D),n.attributePatterns.push(z)}else a[D]||u.push(D),a[D]=C}})},BS=(e,n)=>{ct(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},dy=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Bs(sc(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],C=a[4],x=a[5],D={attributes:{},attributesOrder:[]};if(e.each(M=>BS(M,D)),u==="#"?D.paddEmpty=!0:u==="-"&&(D.removeEmpty=!0),C==="!"&&(D.removeEmptyAttrs=!0),x&&PS(x,D),b&&(D.outputName=f),f==="@")if(e.isNone())e=$.some(D);else return[];return[b?{name:f,element:D,aliasName:b}:{name:f,element:D}]}else return[]})},Hg={},An=je.makeMap,Dt=je.each,Tm=je.extend,Fb=je.explode,Hb=(e,n={})=>{const o=An(e," ",An(e.toUpperCase()," "));return Tm(o,n)},my=e=>Hb("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Vb=(e,n)=>{if(e){const o={};return ce(e)&&(e={"*":e}),Dt(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?An(r,/[, ]/):Fb(r,/[, ]/)}),o}else return},Eo=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(Rt,Jn,Us)=>{const qr=e[Rt];if(qr)return An(qr,/[, ]/,An(qr.toUpperCase(),/[, ]/));{let fc=Hg[Rt];return fc||(fc=Hb(Jn,Us),Hg[Rt]=fc),fc}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",x=Pp(C);e.verify_html===!1&&(e.valid_elements="*[*]");const D=Vb(e.valid_styles),M=Vb(e.invalid_styles,"map"),P=Vb(e.valid_classes,"map"),z=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),G=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),U=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),X=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",fe=b("non_empty_elements",oe+" pre svg textarea summary",U),ge=b("move_caret_before_on_enter_elements",oe+" table",U),be="h1 h2 h3 h4 h5 h6",He=b("text_block_elements",be+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Qe=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",He),yt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Re=b("transparent_elements","a ins del canvas map"),Ee=b("wrap_block_elements","pre "+be);Dt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Rt=>{f[Rt]=new RegExp("</"+Rt+"[^>]*>","gi")});const Ue=Rt=>{const Jn=$.from(o["@"]),Us=/[*?+]/;pe(dy(Jn,Rt??""),({name:qr,element:fc,aliasName:$r})=>{if($r&&(o[$r]=fc),Us.test(qr)){const Ws=fc;Ws.pattern=Ib(qr),a.push(Ws)}else o[qr]=fc})},Ct=Rt=>{a=[],pe(no(o),Jn=>{delete o[Jn]}),Ue(Rt)},It=(Rt,Jn)=>{var Us,qr;delete Hg.text_block_elements,delete Hg.block_elements;const fc=Jn.extends?!dl(Jn.extends):!1,$r=Jn.extends;if(r[Rt]=$r?r[$r]:{},u[Rt]=$r??Rt,fe[Rt.toUpperCase()]={},fe[Rt]={},fc||(Qe[Rt.toUpperCase()]={},Qe[Rt]={}),$r&&!o[Rt]&&o[$r]){const Ws=Zk(o[$r]);delete Ws.removeEmptyAttrs,delete Ws.removeEmpty,o[Rt]=Ws}else o[Rt]={attributesOrder:[],attributes:{}};if(Zn(Jn.attributes)){const Ws=Wa=>{Zs.attributesOrder.push(Wa),Zs.attributes[Wa]={}},Zs=(Us=o[Rt])!==null&&Us!==void 0?Us:{};delete Zs.attributesDefault,delete Zs.attributesForced,delete Zs.attributePatterns,delete Zs.attributesRequired,Zs.attributesOrder=[],Zs.attributes={},pe(Jn.attributes,Wa=>{const ku=Em(C);Fg(Wa).each(({preset:sm,name:bd})=>{sm?bd==="global"&&pe(ku,Ws):Ws(bd)})}),o[Rt]=Zs}if(vn(Jn.padEmpty)){const Ws=(qr=o[Rt])!==null&&qr!==void 0?qr:{};Ws.paddEmpty=Jn.padEmpty,o[Rt]=Ws}if(Zn(Jn.children)){const Ws={},Zs=ku=>{Ws[ku]={}},Wa=ku=>{Si(C,ku).each(sm=>{pe(sm,Zs)})};pe(Jn.children,ku=>{Fg(ku).each(({preset:sm,name:bd})=>{sm?Wa(bd):Zs(bd)})}),r[Rt]=Ws}$r&&ct(r,(Ws,Zs)=>{Ws[$r]&&(r[Zs]=Ws=Tm({},r[Zs]),Ws[Rt]=Ws[$r])})},On=Rt=>{pe(NS(Rt??""),({name:Jn,cloneName:Us})=>{It(Jn,{extends:Us})})},Dn=Rt=>{ut(Rt)?ct(Rt,(Jn,Us)=>It(Us,Jn)):ce(Rt)&&On(Rt)},vo=Rt=>{pe(uy(Rt??""),({operation:Jn,name:Us,validChildren:qr})=>{const fc=Jn==="replace"?{"#comment":{}}:r[Us],$r=Zs=>{Jn==="remove"?delete fc[Zs]:fc[Zs]={}},Ws=Zs=>{Si(C,Zs).each(Wa=>{pe(Wa,$r)})};pe(qr,({preset:Zs,name:Wa})=>{Zs?Ws(Wa):$r(Wa)}),r[Us]=fc})},Ro=Rt=>{const Jn=o[Rt];if(Jn)return Jn;let Us=a.length;for(;Us--;){const qr=a[Us];if(qr.pattern.test(Rt))return qr}},ir=()=>{e.valid_elements?(Ct(e.valid_elements),Dt(x,(Rt,Jn)=>{r[Jn]=Rt.children})):(Dt(x,(Rt,Jn)=>{o[Jn]={attributes:Rt.attributes,attributesOrder:Rt.attributesOrder},r[Jn]=Rt.children}),Dt(sc("strong/b em/i"),Rt=>{const Jn=sc(Rt,"/");o[Jn[1]].outputName=Jn[0]}),Dt(yt,(Rt,Jn)=>{o[Jn]&&(e.padd_empty_block_inline_children&&(o[Jn].paddInEmptyBlock=!0),o[Jn].removeEmpty=!0)}),Dt(sc("ol ul blockquote a table tbody"),Rt=>{o[Rt]&&(o[Rt].removeEmpty=!0)}),Dt(sc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Rt=>{o[Rt]&&(o[Rt].paddEmpty=!0)}),Dt(sc("span"),Rt=>{o[Rt].removeEmptyAttrs=!0})),delete o.svg,Dn(e.custom_elements),vo(e.valid_children),Ue(e.extended_valid_elements),vo("+ol[ul|ol],+ul[ul|ol]"),Dt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Rt,Jn)=>{o[Jn]&&(o[Jn].parentsRequired=sc(Rt))}),e.invalid_elements&&Dt(Fb(e.invalid_elements),Rt=>{o[Rt]&&delete o[Rt]}),Ro("span")||Ue("span[!data-mce-type|*]")},Br=et(D),Ac=et(M),at=et(P),Mt=et(X),so=et(Qe),ht=et(He),jt=et(yt),Qt=et(Object.seal(U)),gt=et(G),En=et(fe),Pn=et(ge),Gr=et(z),Fo=et(Re),pa=et(Ee),Mi=et(Object.seal(f)),om=(Rt,Jn)=>{const Us=r[Rt.toLowerCase()];return!!(Us&&Us[Jn.toLowerCase()])},Ma=(Rt,Jn)=>{const Us=Ro(Rt);if(Us)if(Jn){if(Us.attributes[Jn])return!0;const qr=Us.attributePatterns;if(qr){let fc=qr.length;for(;fc--;)if(qr[fc].pattern.test(Jn))return!0}}else return!0;return!1},dl=Rt=>zt(so(),Rt),Tu=Rt=>!Jo(Rt,"#")&&Ma(Rt)&&!dl(Rt),ba=Rt=>zt(pa(),Rt)||Tu(Rt),Ni=et(u);return ir(),{type:C,children:r,elements:o,getValidStyles:Br,getValidClasses:at,getBlockElements:so,getInvalidStyles:Ac,getVoidElements:Qt,getTextBlockElements:ht,getTextInlineElements:jt,getBoolAttrs:Mt,getElementRule:Ro,getSelfClosingElements:gt,getNonEmptyElements:En,getMoveCaretBeforeOnEnterElements:Pn,getWhitespaceElements:Gr,getTransparentElements:Fo,getSpecialElements:Mi,isValidChild:om,isValid:Ma,isBlock:dl,isInline:Tu,isWrapper:ba,getCustomElements:Ni,addValidElements:Ue,setValidElements:Ct,addCustomElements:Dn,addValidChildren:vo}},fy=e=>({value:$S(e)}),$S=e=>Hi(e,"#").toUpperCase(),gy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ie=e=>{const n=gy(e.red)+gy(e.green)+gy(e.blue);return fy(n)},Vg=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,IS=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,kf=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),LS=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return kf(a,u,f,b)},Dd=e=>Vg.test(e)?"rgb":IS.test(e)?"rgba":"other",zb=e=>{const n=Vg.exec(e);if(n!==null)return $.some(LS(n[1],n[2],n[3],"1"));const o=IS.exec(e);return o!==null?$.some(LS(o[1],o[2],o[3],o[4])):$.none()},_f=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,$p=e=>zb(e).map(Ie).map(n=>"#"+n.value).getOr(e),km=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const C=Sp;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let M=0;M<x.length;M++)u[x[M]]=C+M,u[C+M]=x[M];const D={parse:M=>{const P={};let z=!1;const G=e.url_converter,U=e.url_converter_scope||D,X=(Re,Ee,Ue)=>{const Ct=P[Re+"-top"+Ee];if(!Ct)return;const It=P[Re+"-right"+Ee];if(!It)return;const On=P[Re+"-bottom"+Ee];if(!On)return;const Dn=P[Re+"-left"+Ee];if(!Dn)return;const vo=[Ct,It,On,Dn];let Ro=vo.length-1;for(;Ro--&&vo[Ro]===vo[Ro+1];);Ro>-1&&Ue||(P[Re+Ee]=Ro===-1?vo[0]:vo.join(" "),delete P[Re+"-top"+Ee],delete P[Re+"-right"+Ee],delete P[Re+"-bottom"+Ee],delete P[Re+"-left"+Ee])},oe=Re=>{const Ee=P[Re];if(!Ee)return;const Ue=Ee.indexOf(",")>-1?[Ee]:Ee.split(" ");let Ct=Ue.length;for(;Ct--;)if(Ue[Ct]!==Ue[0])return!1;return P[Re]=Ue[0],!0},fe=(Re,Ee,Ue,Ct)=>{oe(Ee)&&oe(Ue)&&oe(Ct)&&(P[Re]=P[Ee]+" "+P[Ue]+" "+P[Ct],delete P[Ee],delete P[Ue],delete P[Ct])},ge=Re=>(z=!0,u[Re]),be=(Re,Ee)=>(z&&(Re=Re.replace(/\uFEFF[0-9]/g,Ue=>u[Ue])),Ee||(Re=Re.replace(/\\([\'\";:])/g,"$1")),Re),He=Re=>String.fromCharCode(parseInt(Re.slice(1),16)),Qe=Re=>Re.replace(/\\[0-9a-f]+/gi,He),yt=(Re,Ee,Ue,Ct,It,On)=>{if(It=It||On,It)return It=be(It),"'"+It.replace(/\'/g,"\\'")+"'";if(Ee=be(Ee||Ue||Ct||""),!e.allow_script_urls){const Dn=Ee.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Dn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Dn))return""}return G&&(Ee=G.call(U,Ee,"style")),"url('"+Ee.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,Ee=>Ee.replace(/[;:]/g,ge));let Re;for(;Re=r.exec(M);){r.lastIndex=Re.index+Re[0].length;let Ee=Re[1].replace(a,"").toLowerCase(),Ue=Re[2].replace(a,"");if(Ee&&Ue){if(Ee=Qe(Ee),Ue=Qe(Ue),Ee.indexOf(C)!==-1||Ee.indexOf('"')!==-1||!e.allow_script_urls&&(Ee==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ue)))continue;Ee==="font-weight"&&Ue==="700"?Ue="bold":(Ee==="color"||Ee==="background-color")&&(Ue=Ue.toLowerCase()),Dd(Ue)==="rgb"&&zb(Ue).each(Ct=>{Ue=$p(_f(Ct)).toLowerCase()}),Ue=Ue.replace(o,yt),P[Ee]=z?be(Ue,!0):Ue}}X("border","",!0),X("border","-width"),X("border","-color"),X("border","-style"),X("padding",""),X("margin",""),fe("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(M,P)=>{let z="";const G=(X,oe)=>{const fe=oe[X];if(fe)for(let ge=0,be=fe.length;ge<be;ge++){const He=fe[ge],Qe=M[He];Qe&&(z+=(z.length>0?" ":"")+He+": "+Qe+";")}},U=(X,oe)=>{if(!b||!oe)return!0;let fe=b["*"];return fe&&fe[X]?!1:(fe=b[oe],!(fe&&fe[X]))};return P&&f?(G("*",f),G(P,f)):ct(M,(X,oe)=>{X&&U(oe,P)&&(z+=(z.length>0?" ":"")+oe+": "+X+";")}),z}};return D},ms={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},qu=e=>e instanceof Event||re(e.initEvent),FS=e=>e.isDefaultPrevented===Ke||e.isDefaultPrevented===_e,Rd=e=>Tn(e.preventDefault)||qu(e),hy=(e,n)=>{const o=n??{};for(const r in e)zt(ms,r)||(o[r]=e[r]);return Me(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Me(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Me(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Af=(e,n,o,r)=>{var a;const u=hy(n,r);return u.type=e,Tn(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Rd(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ke,re(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ke,re(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ke,u.stopPropagation()},FS(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ke:_e,u.isPropagationStopped=u.cancelBubble===!0?Ke:_e,u.isImmediatePropagationStopped=_e)),u},py="mce-data-",by=/^(?:mouse|contextmenu)|click/,Ta=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},zg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},jk=e=>Me(e)&&by.test(e.type),_m=(e,n)=>{const o=Af(e.type,e,document,n);if(jk(e)&&fn(e.pageX)&&!fn(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},Gk=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{zg(e,"DOMContentLoaded",f),zg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():Ta(e,"DOMContentLoaded",f),o.domLoaded||Ta(e,"load",f)};class Of{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=py+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,C=P=>{u.executeHandlers(_m(P||b.event),x)};if(!n||qe(n)||rr(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),a=a||n;const D=o.split(" ");let M=D.length;for(;M--;){let P=D[M],z=C,G=!1,U=!1;if(P==="DOMContentLoaded"&&(P="ready"),u.domLoaded&&P==="ready"&&n.readyState==="complete"){r.call(a,_m({type:P}));continue}!u.hasFocusIn&&(P==="focusin"||P==="focusout")&&(G=!0,U=P==="focusin"?"focus":"blur",z=X=>{const oe=_m(X||b.event);oe.type=oe.type==="focus"?"focusin":"focusout",u.executeHandlers(oe,x)}),f=u.events[x][P],f?P==="ready"&&u.domLoaded?r(_m({type:P})):f.push({func:r,scope:a}):(u.events[x][P]=f=[{func:r,scope:a}],f.fakeName=U,f.capture=G,f.nativeHandler=z,P==="ready"?Gk(n,z,u):Ta(n,U||P,z,G))}return n=f=null,r}unbind(n,o,r){if(!n||qe(n)||rr(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],x=u[C];if(x){if(r){let D=x.length;for(;D--;)if(x[D].func===r){const M=x.nativeHandler,P=x.fakeName,z=x.capture,G=x.slice(0,D).concat(x.slice(D+1));G.nativeHandler=M,G.fakeName=P,G.capture=z,u[C]=G}}(!r||x.length===0)&&(delete u[C],zg(n,x.fakeName||C,x.nativeHandler,x.capture))}}}else ct(u,(f,b)=>{zg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(zt(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||qe(n)||rr(n))return this;const a=_m({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||qe(n)||rr(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Of.Event=new Of;const Ub=je.each,qk=je.grep,Ip="data-mce-style",cu=je.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ua=(e,n,o)=>{Tn(o)||o===""?bs(e,n):zs(e,n,o)},Ye=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Ug=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&qe(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},rc=(e,n)=>{const o=tc(n,"style"),r=e.serialize(e.parse(o),K(n));ua(n,Ip,r)},vy=(e,n)=>is(e)?zt(cu,n)?e+"":e+"px":e,yy=(e,n,o)=>{const r=Ye(n);Tn(o)||o===""?xa(e,r):vp(e,r,vy(o,r))},Cy=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,C)=>{const x=ne.fromDom(f);re(n.url_converter)&&Me(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const D="data-mce-"+C;ua(x,D,b),ua(x,C,b)},get:(f,b)=>{const C=ne.fromDom(f);return tc(C,"data-mce-"+b)||tc(C,b)}},u={style:{set:(f,b)=>{const C=ne.fromDom(f);r&&ua(C,Ip,b),bs(C,"style"),ce(b)&&Sn(C,e.parse(b))},get:f=>{const b=ne.fromDom(f),C=tc(b,Ip)||tc(b,"style");return e.serialize(e.parse(C),K(b))}}};return r&&(u.href=u.src=a),u},Ko=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,C=Mb.forElement(ne.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],D=n.schema?n.schema:Eo({}),M=km({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),P=n.ownEvents?new Of:Of.Event,z=D.getBlockElements(),G=we=>ce(we)?zt(z,we):pt(we)&&(zt(z,we.nodeName)||Cf(D,we)),U=we=>we&&e&&ce(we)?e.getElementById(we):we,X=we=>{const xe=U(we);return Me(xe)?ne.fromDom(xe):null},oe=(we,xe,rt="")=>{let Je;const en=X(we);if(Me(en)&&Cn(en)){const oo=Bk[xe];oo&&oo.get?Je=oo.get(en.dom,xe):Je=tc(en,xe)}return Me(Je)?Je:rt},fe=we=>{const xe=U(we);return Tn(xe)?[]:xe.attributes},ge=(we,xe,rt)=>{Mt(we,Je=>{if(pt(Je)){const en=ne.fromDom(Je),oo=rt===""?null:rt,lr=tc(en,xe),vd=Bk[xe];vd&&vd.set?vd.set(en.dom,oo,xe):ua(en,xe,oo),lr!==oo&&n.onSetAttrib&&n.onSetAttrib({attrElm:en.dom,attrName:xe,attrValue:oo})}})},be=(we,xe)=>we.cloneNode(xe),He=()=>n.root_element||e.body,Qe=we=>{const xe=Uu(we);return{x:xe.x,y:xe.y,w:xe.width,h:xe.height}},yt=(we,xe)=>nu(e.body,U(we),xe),Re=(we,xe,rt)=>{Mt(we,Je=>{const en=ne.fromDom(Je);yy(en,xe,rt),n.update_styles&&rc(M,en)})},Ee=(we,xe)=>{Mt(we,rt=>{const Je=ne.fromDom(rt);ct(xe,(en,oo)=>{yy(Je,oo,en)}),n.update_styles&&rc(M,Je)})},Ue=(we,xe,rt)=>{const Je=U(we);if(!(Tn(Je)||!wl(Je)&&!ny(Je)))return rt?Js(ne.fromDom(Je),Ye(xe)):(xe=xe.replace(/-(\D)/g,(en,oo)=>oo.toUpperCase()),xe==="float"&&(xe="cssFloat"),Je.style?Je.style[xe]:void 0)},Ct=we=>{const xe=U(we);if(!xe)return{w:0,h:0};let rt=Ue(xe,"width"),Je=Ue(xe,"height");return(!rt||rt.indexOf("px")===-1)&&(rt="0"),(!Je||Je.indexOf("px")===-1)&&(Je="0"),{w:parseInt(rt,10)||xe.offsetWidth||xe.clientWidth,h:parseInt(Je,10)||xe.offsetHeight||xe.clientHeight}},It=we=>{const xe=U(we),rt=yt(xe),Je=Ct(xe);return{x:rt.x,y:rt.y,w:Je.w,h:Je.h}},On=(we,xe)=>{if(!we)return!1;const rt=Zn(we)?we:[we];return Vn(rt,Je=>Fa(ne.fromDom(Je),xe))},Dn=(we,xe,rt,Je)=>{const en=[];let oo=U(we);Je=Je===void 0;const lr=rt||(He().nodeName!=="BODY"?He().parentNode:null);if(ce(xe))if(xe==="*")xe=pt;else{const vd=xe;xe=Ul=>On(Ul,vd)}for(;oo&&!(oo===lr||Tn(oo.nodeType)||$g(oo)||nc(oo));){if(!xe||xe(oo))if(Je)en.push(oo);else return[oo];oo=oo.parentNode}return Je?en:null},vo=(we,xe,rt)=>{const Je=Dn(we,xe,rt,!1);return Je&&Je.length>0?Je[0]:null},Ro=(we,xe,rt)=>{let Je=xe;if(we){ce(xe)&&(Je=en=>On(en,xe));for(let en=we[rt];en;en=en[rt])if(re(Je)&&Je(en))return en}return null},ir=(we,xe)=>Ro(we,xe,"nextSibling"),Br=(we,xe)=>Ro(we,xe,"previousSibling"),Ac=we=>re(we.querySelectorAll),at=(we,xe)=>{var rt,Je;const en=(Je=(rt=U(xe))!==null&&rt!==void 0?rt:n.root_element)!==null&&Je!==void 0?Je:e;return Ac(en)?Tr(en.querySelectorAll(we)):[]},Mt=function(we,xe,rt){const Je=rt??this;if(Zn(we)){const en=[];return Ub(we,(oo,lr)=>{const vd=U(oo);vd&&en.push(xe.call(Je,vd,lr))}),en}else{const en=U(we);return en?xe.call(Je,en):!1}},so=(we,xe)=>{Mt(we,rt=>{ct(xe,(Je,en)=>{ge(rt,en,Je)})})},ht=(we,xe)=>{Mt(we,rt=>{const Je=ne.fromDom(rt);Ng(Je,xe)})},jt=(we,xe,rt,Je,en)=>Mt(we,oo=>{const lr=ce(xe)?e.createElement(xe):xe;return Me(rt)&&so(lr,rt),Je&&(!ce(Je)&&Je.nodeType?lr.appendChild(Je):ce(Je)&&ht(lr,Je)),en?lr:oo.appendChild(lr)}),Qt=(we,xe,rt)=>jt(e.createElement(we),we,xe,rt,!0),gt=xm.decode,En=xm.encodeAllRaw,Pn=(we,xe,rt="")=>{let Je="<"+we;for(const en in xe)$s(xe,en)&&(Je+=" "+en+'="'+En(xe[en])+'"');return ur(rt)&&zt(D.getVoidElements(),we)?Je+" />":Je+">"+rt+"</"+we+">"},Gr=we=>{const xe=e.createElement("div"),rt=e.createDocumentFragment();rt.appendChild(xe),we&&(xe.innerHTML=we);let Je;for(;Je=xe.firstChild;)rt.appendChild(Je);return rt.removeChild(xe),rt},Fo=(we,xe)=>Mt(we,rt=>{const Je=ne.fromDom(rt);return xe&&pe(Fr(Je),en=>{Bo(en)&&en.dom.length===0?Zo(en):qo(Je,en)}),Zo(Je),Je.dom}),pa=we=>Mt(we,xe=>{const rt=xe.attributes;for(let Je=rt.length-1;Je>=0;Je--)xe.removeAttributeNode(rt.item(Je))}),Mi=we=>M.parse(we),om=(we,xe)=>M.serialize(we,xe),Ma=we=>{if(Au!==Ko.DOM&&e===document){if(o[we])return;o[we]=!0}let xe=e.getElementById("mceDefaultStyles");if(!xe){xe=e.createElement("style"),xe.id="mceDefaultStyles",xe.type="text/css";const rt=e.head;rt.firstChild?rt.insertBefore(xe,rt.firstChild):rt.appendChild(xe)}xe.styleSheet?xe.styleSheet.cssText+=we:xe.appendChild(e.createTextNode(we))},dl=we=>{we||(we=""),pe(we.split(","),xe=>{a[xe]=!0,C.load(xe).catch(kt)})},Tu=(we,xe,rt)=>{Mt(we,Je=>{if(pt(Je)){const en=ne.fromDom(Je),oo=xe.split(" ");pe(oo,lr=>{Me(rt)?(rt?$u:am)(en,lr):up(en,lr)})}})},ba=(we,xe)=>{Tu(we,xe,!0)},Ni=(we,xe)=>{Tu(we,xe,!1)},Rt=(we,xe)=>{const rt=X(we),Je=xe.split(" ");return Me(rt)&&Yo(Je,en=>Ag(rt,en))},Jn=we=>{Mt(we,xe=>xa(ne.fromDom(xe),"display"))},Us=we=>{Mt(we,xe=>vp(ne.fromDom(xe),"display","none"))},qr=we=>{const xe=X(we);return Me(xe)&&Do(pm(xe,"display"),"none")},fc=we=>(we||"mce_")+u++,$r=we=>{const xe=X(we);return Me(xe)?pt(xe.dom)?xe.dom.outerHTML:ji(xe):""},Ws=(we,xe)=>{Mt(we,rt=>{pt(rt)&&(rt.outerHTML=xe)})},Zs=(we,xe)=>{const rt=U(xe);return Mt(we,Je=>{const en=rt==null?void 0:rt.parentNode,oo=rt==null?void 0:rt.nextSibling;return en&&(oo?en.insertBefore(Je,oo):en.appendChild(Je)),Je})},Wa=(we,xe,rt)=>Mt(xe,Je=>{var en;const oo=Zn(xe)?we.cloneNode(!0):we;return rt&&Ub(qk(Je.childNodes),lr=>{oo.appendChild(lr)}),(en=Je.parentNode)===null||en===void 0||en.replaceChild(oo,Je),Je}),ku=(we,xe)=>{if(we.nodeName!==xe.toUpperCase()){const rt=Qt(xe);return Ub(fe(we),Je=>{ge(rt,Je.nodeName,oe(we,Je.nodeName))}),Wa(rt,we,!0),rt}else return we},sm=(we,xe)=>{let rt=we;for(;rt;){let Je=xe;for(;Je&&rt!==Je;)Je=Je.parentNode;if(rt===Je)break;rt=rt.parentNode}return!rt&&we.ownerDocument?we.ownerDocument.documentElement:rt},bd=(we,xe,rt)=>Ao(xe)?oc(D,we,{...rt,isContent:en=>{const oo=en.nodeName.toLowerCase();return!!xe[oo]}}):oc(D,we,rt),op=()=>e.createRange(),sp=(we,xe,rt)=>{let Je=op(),en,oo;if(we&&xe&&we.parentNode&&xe.parentNode){const lr=we.parentNode;return Je.setStart(lr,Ug(we)),Je.setEnd(xe.parentNode,Ug(xe)),en=Je.extractContents(),Je=op(),Je.setStart(xe.parentNode,Ug(xe)+1),Je.setEnd(lr,Ug(we)+1),oo=Je.extractContents(),lr.insertBefore(qi(Au,en,D),we),rt?lr.insertBefore(rt,we):lr.insertBefore(xe,we),lr.insertBefore(qi(Au,oo,D),we),Fo(we),rt||xe}else return},af=(we,xe,rt,Je)=>{if(Zn(we)){let en=we.length;const oo=[];for(;en--;)oo[en]=af(we[en],xe,rt,Je);return oo}else return n.collect&&(we===e||we===r)&&x.push([we,xe,rt,Je]),P.bind(we,xe,rt,Je||Au)},_u=(we,xe,rt)=>{if(Zn(we)){let Je=we.length;const en=[];for(;Je--;)en[Je]=_u(we[Je],xe,rt);return en}else{if(x.length>0&&(we===e||we===r)){let Je=x.length;for(;Je--;){const[en,oo,lr]=x[Je];we===en&&(!xe||xe===oo)&&(!rt||rt===lr)&&P.unbind(en,oo,lr)}}return P.unbind(we,xe,rt)}},Eg=(we,xe,rt)=>P.dispatch(we,xe,rt),Kv=(we,xe,rt)=>P.dispatch(we,xe,rt),rp=we=>{if(we&&wl(we)){const xe=we.getAttribute("data-mce-contenteditable");return xe&&xe!=="inherit"?xe:we.contentEditable!=="inherit"?we.contentEditable:null}else return null},Au={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:x,styles:M,schema:D,events:P,isBlock:G,root:null,clone:be,getRoot:He,getViewPort:Qe,getRect:It,getSize:Ct,getParent:vo,getParents:Dn,get:U,getNext:ir,getPrev:Br,select:at,is:On,add:jt,create:Qt,createHTML:Pn,createFragment:Gr,remove:Fo,setStyle:Re,getStyle:Ue,setStyles:Ee,removeAllAttribs:pa,setAttrib:ge,setAttribs:so,getAttrib:oe,getPos:yt,parseStyle:Mi,serializeStyle:om,addStyle:Ma,loadCSS:dl,addClass:ba,removeClass:Ni,hasClass:Rt,toggleClass:Tu,show:Jn,hide:Us,isHidden:qr,uniqueId:fc,setHTML:ht,getOuterHTML:$r,setOuterHTML:Ws,decode:gt,encode:En,insertAfter:Zs,replace:Wa,rename:ku,findCommonAncestor:sm,run:Mt,getAttribs:fe,isEmpty:bd,createRng:op,nodeIndex:Ug,split:sp,bind:af,unbind:_u,fire:Kv,dispatch:Eg,getContentEditable:rp,getContentEditableParent:we=>{const xe=He();let rt=null;for(let Je=we;Je&&Je!==xe&&(rt=rp(Je),rt===null);Je=Je.parentNode);return rt},isEditable:we=>{if(Me(we)){const xe=pt(we)?we:we.parentElement;return Me(xe)&&wl(xe)&&Xa(ne.fromDom(xe))}else return!1},destroy:()=>{if(x.length>0){let we=x.length;for(;we--;){const[xe,rt,Je]=x[we];P.unbind(xe,rt,Je)}}ct(a,(we,xe)=>{C.unload(xe),delete a[xe]})},isChildOf:(we,xe)=>we===xe||xe.contains(we),dumpRng:we=>"startContainer: "+we.startContainer.nodeName+", startOffset: "+we.startOffset+", endContainer: "+we.endContainer.nodeName+", endOffset: "+we.endOffset},Bk=Cy(M,n,et(Au));return Au};Ko.DOM=Ko(document),Ko.nodeIndex=Ug;const Kk=Ko.DOM,Df=0,Md=1,Wg=2,Sy=3;class Ku{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=Kk;let u;const f=()=>{a.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},x=a.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=je._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Wg}markDone(n){this.states[n]=Wg}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Df),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,x)=>{ho(o.scriptLoadedCallbacks,x).each(D=>{pe(D,M=>M[C](x))}),delete o.scriptLoadedCallbacks[x]},a=C=>{const x=Bt(C,D=>D.status==="rejected");return x.length>0?Promise.reject(Bs(x,({reason:D})=>Zn(D)?D:[D])):Promise.resolve()},u=C=>Promise.allSettled(qt(C,x=>o.states[x]===Wg?(r("resolve",x),Promise.resolve()):o.states[x]===Sy?(r("reject",x),Promise.reject(x)):(o.states[x]=Md,o.loadScript(x).then(()=>{o.states[x]=Wg,r("resolve",x);const D=o.queue;return D.length>0?(o.queue=[],u(D).then(a)):Promise.resolve()},()=>(o.states[x]=Sy,r("reject",x),Promise.reject(x)))))),f=C=>(o.loading=!0,u(C).then(x=>{o.loading=!1;const D=o.queueLoadedCallbacks.shift();return $.from(D).each(Xt),a(x)})),b=ql(n);return o.loading?new Promise((C,x)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,x)})}):f(b)}}Ku.ScriptLoader=new Ku;const HS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},fr=e=>ut(e)&&zt(e,"raw"),Wb=e=>Zn(e)&&e.length>1,To={},wy=ds("en"),ka=()=>ho(To,wy.get()),iu={getData:()=>zn(To,e=>({...e})),setCode:e=>{e&&wy.set(e)},getCode:()=>wy.get(),add:(e,n)=>{let o=To[e];o||(To[e]=o={});const r=qt(no(n),a=>a.toLowerCase());ct(n,(a,u)=>{const f=u.toLowerCase();f!==u&&HS(r,f)?(zt(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=ka().getOr({}),o=f=>re(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return zt(n,b)?o(n[b]):ho(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(fr(e))return o(e.raw);if(Wb(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(C,x)=>zt(f,x)?o(f[x]):C);return u(b)}return u(a(e))},isRtl:()=>ka().bind(e=>ho(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>zt(To,e)},da=()=>{const e=[],n={},o={},r=[],a=(U,X)=>{const oe=Bt(r,fe=>fe.name===U&&fe.state===X);pe(oe,fe=>fe.resolve())},u=U=>zt(n,U),f=U=>zt(o,U),b=U=>{if(o[U])return o[U].instance},C=(U,X)=>{const oe=iu.getCode(),fe=","+(X||"")+",";!oe||X&&fe.indexOf(","+oe+",")===-1||Ku.ScriptLoader.add(n[U]+"/langs/"+oe+".js")},x=(U,X)=>{da.languageLoad!==!1&&(u(U)?C(U,X):G(U,"loaded").then(()=>C(U,X)))},D=(U,X)=>(e.push(X),o[U]={instance:X},a(U,"added"),X),M=U=>{delete n[U],delete o[U]},P=(U,X)=>ce(X)?ce(U)?{prefix:"",resource:X,suffix:""}:{prefix:U.prefix,resource:X,suffix:U.suffix}:X,z=(U,X)=>{if(n[U])return Promise.resolve();let oe=ce(X)?X:X.prefix+X.resource+X.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=da.baseURL+"/"+oe),n[U]=oe.substring(0,oe.lastIndexOf("/"));const fe=()=>(a(U,"loaded"),Promise.resolve());return o[U]?fe():Ku.ScriptLoader.add(oe).then(fe)},G=(U,X="added")=>X==="added"&&f(U)||X==="loaded"&&u(U)?Promise.resolve():new Promise(oe=>{r.push({name:U,state:X,resolve:oe})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:D,remove:M,createUrl:P,load:z,waitFor:G}};da.languageLoad=!0,da.baseURL="",da.PluginManager=da(),da.ThemeManager=da(),da.ModelManager=da();const jg=(e,n)=>{let o=null;return{cancel:()=>{le(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{le(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},jb=(e,n)=>{let o=null;const r=()=>{le(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Gb=(e,n,o)=>Ar(e,n,o).isSome(),Gg=et("mce-annotation"),Am=et("data-mce-annotation"),Yu=et("data-mce-annotation-uid"),qg=et("data-mce-annotation-active"),Om=et("data-mce-annotation-classes"),Nd=et("data-mce-annotation-attrs"),Rf=e=>n=>_n(n,e),Lp=(e,n)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),a=ne.fromDom(e.getBody()),u=n.fold(()=>"."+Gg(),C=>`[${Am()}="${C}"]`),f=wa(r,o.startOffset).getOr(r);return Hu(f,u,Rf(a)).bind(C=>Kc(C,`${Yu()}`).bind(x=>Kc(C,`${Am()}`).map(D=>{const M=xy(e,x);return{uid:x,name:D,elements:M}})))},qb=e=>Cn(e)&&Ag(e,Gg()),zS=(e,n)=>As(e,"data-mce-bogus")||Gb(e,'[data-mce-bogus="all"]',Rf(n)),xy=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Ea(o,`[${Yu()}="${n}"]`);return Bt(r,a=>!zS(a,o))},Kg=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Ea(o,`[${Am()}="${n}"]`),a={};return pe(r,u=>{if(!zS(u,o)){const f=tc(u,Yu()),b=ho(a,f).getOr([]);a[f]=b.concat([u])}}),a},US=(e,n)=>{const o=ds({}),r=()=>({listeners:[],previous:Cc()}),a=(M,P)=>{u(M,z=>(P(z),z))},u=(M,P)=>{const z=o.get(),G=ho(z,M).getOrThunk(r),U=P(G);z[M]=U,o.set(z)},f=(M,P,z)=>{a(M,G=>{pe(G.listeners,U=>U(!0,M,{uid:P,nodes:qt(z,X=>X.dom)}))})},b=M=>{a(M,P=>{pe(P.listeners,z=>z(!1,M))})},C=(M,P)=>{pe(xy(e,M),z=>{P?zs(z,qg(),"true"):bs(z,qg())})},x=jb(()=>{const M=jn(n.getNames());pe(M,P=>{u(P,z=>{const G=z.previous.get();return Lp(e,$.some(P)).fold(()=>{G.each(U=>{b(P),z.previous.clear(),C(U,!1)})},({uid:U,name:X,elements:oe})=>{Do(G,U)||(G.each(fe=>C(fe,!1)),f(X,U,oe),z.previous.set(U),C(U,!0))}),{previous:z.previous,listeners:z.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(M,P)=>{u(M,z=>({previous:z.previous,listeners:z.listeners.concat([P])}))}}},Xk=(e,n)=>{const o=Am(),r=u=>$.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(Yu(),null),u.attr(Am(),null),u.attr(qg(),null);const C=$.from(u.attr(Nd())).map(P=>P.split(",")).getOr([]),x=$.from(u.attr(Om())).map(P=>P.split(",")).getOr([]);pe(C,P=>u.attr(P,null));const D=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],M=Dc(D,[Gg()].concat(x));u.attr("class",M.length>0?M.join(" "):null),u.attr(Om(),null),u.attr(Nd(),null)};e.serializer.addTempAttr(qg()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},Kb=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>ho(e,a).map(u=>u.settings),getNames:()=>no(e)}},Ey=(e,n,o)=>Math.min(Math.max(e,n),o),Fp=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Ty=0;const Yg=e=>{const o=new Date().getTime(),r=Math.floor(Fp()*1e9);return Ty++,e+"_"+r+Ty+String(o)},AR=(e,n)=>{pe(n,o=>{$u(e,o)})},OR=(e,n)=>{pe(n,o=>{am(e,o)})},Xg=(e,n)=>ne.fromDom(e.dom.cloneNode(n)),Al=e=>Xg(e,!1),Hp=e=>Xg(e,!0),WS=(e,n)=>{const o=ne.fromTag(n),r=kg(e);return dr(o,r),o},ZS=(e,n)=>{const o=WS(e,n);Zi(e,o);const r=Fr(e);return zu(o,r),Zo(e),o},jS=(e,n,o=_e)=>{const r=new Hr(e,n),a=u=>{let f;do f=r[u]();while(f&&!qe(f)&&!o(f));return $.from(f).filter(qe)};return{current:()=>$.from(r.current()).filter(qe),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Mf=(e,n)=>{const o=n||(f=>e.isBlock(f)||fo(f)||go(f)),r=(f,b,C,x)=>{if(qe(f)){const D=x(f,b,f.data);if(D!==-1)return $.some({container:f,offset:D})}return C().bind(D=>r(D.container,D.offset,C,x))};return{backwards:(f,b,C,x)=>{const D=jS(f,x??e.getRoot(),o);return r(f,b,()=>D.prev().map(M=>({container:M,offset:M.length})),C).getOrNull()},forwards:(f,b,C,x)=>{const D=jS(f,x??e.getRoot(),o);return r(f,b,()=>D.next().map(M=>({container:M,offset:0})),C).getOrNull()}}},Nf=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?$.from(u.dom.nodeValue):$.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Bo,"text"),Jg=e=>Nf.get(e),GS=e=>Nf.getOption(e),Qg=(e,n)=>Nf.set(e,n),Jk=["td","th"],ky=["thead","tbody","tfoot"],qS=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],KS=["li","dd","dt"],Lc=["ul","ol","dl"],RR=["pre","script","textarea","style"],Dm=e=>{let n;return o=>(n=n||gs(e,Ke),zt(n,K(o)))},Qk=e=>K(e)==="table",Pd=e=>Cn(e)&&K(e)==="br",Qa=Dm(qS),lu=Dm(Lc),Pf=Dm(KS),YS=Dm(ky),Vp=Dm(Jk),Yb=Dm(RR),Rm=e=>{const n=[];let o=e.dom;for(;o;)n.push(ne.fromDom(o)),o=o.lastChild;return n},_y=e=>{const n=Ea(e,"br"),o=Bt(Rm(e).slice(-1),Pd);n.length===o.length&&pe(o,Zo)},uu=()=>{const e=ne.fromTag("br");return zs(e,"data-mce-bogus","1"),e},Xu=e=>{bm(e),Or(e,uu())},e_=(e,n)=>{kd(e).each(o=>{Jl(o).each(r=>{n.isBlock(K(e))&&Pd(o)&&n.isBlock(K(r))&&Zo(o)})})},Wr=Sp,zp=wp,Ki=bi,Xb=e=>e.insertContent(Wr,{preserve_zwsp:!0}),Ay=pt,Bf=qe,Mm=e=>(Bf(e)&&(e=e.parentNode),Ay(e)&&e.hasAttribute("data-mce-caret")),Ol=e=>Bf(e)&&zp(e.data),Yi=e=>Mm(e)||Ol(e),XS=e=>e.firstChild!==e.lastChild||!fo(e.firstChild),t_=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Wr),u=e.parentNode;if(n){const f=e.previousSibling;if(Bf(f)){if(Yi(f))return f;if(ta(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Bf(f)){if(Yi(f))return f;if(Gn(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},Ju=e=>{const n=e.container();return qe(n)?n.data.charAt(e.offset())===Wr||e.isAtStart()&&Ol(n.previousSibling):!1},Bd=e=>{const n=e.container();return qe(n)?n.data.charAt(e.offset()-1)===Wr||e.isAtEnd()&&Ol(n.nextSibling):!1},Jb=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(uu().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Gn=e=>Bf(e)&&e.data[0]===Wr,ta=e=>Bf(e)&&e.data[e.data.length-1]===Wr,$f=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Od(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},eh=e=>e&&e.hasAttribute("data-mce-caret")?($f(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,es=e=>Mm(e.startContainer),If=Math.round,$d=e=>e?{left:If(e.left),top:If(e.top),bottom:If(e.bottom),right:If(e.right),width:If(e.width),height:If(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},JS=(e,n)=>(e=$d(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),n_=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,QS=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,ts=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:QS(n.top-e.bottom,e,n)},Up=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:QS(n.bottom-e.top,e,n),o_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ew=e=>Bn(e,(n,o)=>n.fold(()=>$.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return $.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),$.none()),Lf=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},Dl=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Wp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Id=(e,n)=>{if(pt(e)&&e.hasChildNodes()){const o=e.childNodes,r=Ey(n,0,o.length-1);return o[r]}else return e},xt=(e,n)=>{if(!(n<0&&pt(e)&&e.hasChildNodes()))return Id(e,n)},tw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Qb=e=>ce(e)&&e.charCodeAt(0)>=768&&tw.test(e),nw=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},ow=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Oy=Fe,Dy=go,th=fo,Zp=qe,Ff=xl(["script","style","textarea"]),e0=xl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),nh=xl(["table"]),t0=Yi,Rl=e=>t0(e)?!1:Zp(e)?!Ff(e.parentNode):e0(e)||th(e)||nh(e)||n0(e),s_=e=>pt(e)&&e.getAttribute("unselectable")==="true",n0=e=>!s_(e)&&Dy(e),o0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(n0(o))return!1;if(Oy(o))return!0}return!0},r_=e=>n0(e)?!Bn(Tr(e.getElementsByTagName("*")),(n,o)=>n||Oy(o),!1):!1,c_=e=>e0(e)||r_(e),sw=(e,n)=>Rl(e)&&o0(e,n),jp=pt,rw=Rl,Ry=Ep("display","block table"),a_=Ep("float","left right"),Gp=ow(jp,rw,yo(a_)),oh=yo(Ep("white-space","pre pre-line pre-wrap")),Nm=qe,s0=fo,My=Ko.nodeIndex,r0=xt,Ny=e=>e?e.createRange():Ko.DOM.createRng(),Py=e=>ce(e)&&/[\r\n\t ]/.test(e),By=e=>!!e.setStart&&!!e.setEnd,cw=e=>{const n=e.startContainer,o=e.startOffset;if(Py(e.toString())&&oh(n.parentNode)&&qe(n)){const r=n.data;if(Py(r[o-1])||Py(r[o+1]))return!0}return!1},ei=e=>{const n=e.ownerDocument,o=Ny(n),r=n.createTextNode(Vr),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=$d(o.getBoundingClientRect());return a.removeChild(r),u},Hf=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&qe(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Pm(u)}else return null},aw=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Pm=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=$d(r[0]):o=$d(e.getBoundingClientRect()),!By(e)&&s0(e)&&aw(o)?ei(e):aw(o)&&By(e)&&(n=Hf(e))!==null&&n!==void 0?n:o},Vf=(e,n)=>{const o=JS(e,n);return o.width=1,o.right=o.left+1,o},$y=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&n_(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=Ny(f.ownerDocument);if(b<f.data.length){if(Qb(f.data[b]))return;if(Qb(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!cw(C))){o(Vf(Pm(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),cw(C)||o(Vf(Pm(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),cw(C)||o(Vf(Pm(C),!0)))},a=e.container(),u=e.offset();if(Nm(a))return r(a,u),n;if(jp(a))if(e.isAtEnd()){const f=r0(a,u);Nm(f)&&r(f,f.data.length),Gp(f)&&!s0(f)&&o(Vf(Pm(f),!1))}else{const f=r0(a,u);if(Nm(f)&&r(f,0),Gp(f)&&e.isAtEnd())return o(Vf(Pm(f),!1)),n;const b=r0(e.container(),e.offset()-1);Gp(b)&&!s0(b)&&(Ry(b)||Ry(f)||!Gp(f))&&o(Vf(Pm(b),!1)),Gp(f)&&o(Vf(Pm(f),!0))}return n},De=(e,n,o)=>{const r=()=>(Nm(e),n===0),a=()=>Nm(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const D=Ny(e.ownerDocument);return D.setStart(e,n),D.setEnd(e,n),D},f=()=>(o||(o=$y(De(e,n))),o),b=()=>f().length>0,C=D=>D&&e===D.container()&&n===D.offset(),x=D=>r0(e,D?n-1:n);return{container:et(e),offset:et(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:C,getNode:x}};De.fromRangeStart=e=>De(e.startContainer,e.startOffset),De.fromRangeEnd=e=>De(e.endContainer,e.endOffset),De.after=e=>De(e.parentNode,My(e)+1),De.before=e=>De(e.parentNode,My(e)),De.isAbove=(e,n)=>cn(js(n.getClientRects()),Ss(e.getClientRects()),ts).getOr(!1),De.isBelow=(e,n)=>cn(Ss(n.getClientRects()),js(e.getClientRects()),Up).getOr(!1),De.isAtStart=e=>e?e.isAtStart():!1,De.isAtEnd=e=>e?e.isAtEnd():!1,De.isTextPosition=e=>e?qe(e.container()):!1,De.isElementPosition=e=>!De.isTextPosition(e);const Ml=(e,n)=>{qe(n)&&n.data.length===0&&e.remove(n)},zf=(e,n,o)=>{n.insertNode(o),Ml(e,o.previousSibling),Ml(e,o.nextSibling)},i_=(e,n,o)=>{const r=$.from(o.firstChild),a=$.from(o.lastChild);n.insertNode(o),r.each(u=>Ml(e,u.previousSibling)),a.each(u=>Ml(e,u.nextSibling))},qp=(e,n,o)=>{nc(o)?i_(e,n,o):zf(e,n,o)},Xi=qe,sh=Od,iw=Ko.nodeIndex,lw=e=>{const n=e.parentNode;return sh(n)?lw(n):n},na=e=>e?Is(e.childNodes,(n,o)=>(sh(o)&&o.nodeName!=="BR"?n=n.concat(na(o)):n.push(o),n),[]):[],c0=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Xi(o);)n+=o.data.length;return n},uw=e=>n=>e===n,l_=e=>{let n,o;n=na(lw(e)),o=Uo(n,uw(e),e),n=n.slice(0,o+1);const r=Is(n,(a,u,f)=>(Xi(u)&&Xi(n[f-1])&&a++,a),0);return n=Ba(n,xl([e.nodeName])),o=Uo(n,uw(e),e),o-r},dw=e=>(Xi(e)?"text()":e.nodeName.toLowerCase())+"["+l_(e)+"]",u_=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},mw=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(Xi(r))u=c0(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(dw(r));let f=u_(e,r);return f=Ba(f,yo(Od)),o=o.concat(vc(f,b=>dw(b))),o.reverse().join("/")+","+u},d_=(e,n,o)=>{let r=na(e);return r=Ba(r,(a,u)=>!Xi(a)||!Xi(r[u-1])),r=Ba(r,xl([n])),r[o]},m_=(e,n)=>{let o=e,r=0;for(;Xi(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!Xi(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return Xi(e)&&n>e.data.length&&(n=e.data.length),De(e,n)},fw=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=Is(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),d_(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!Xi(u)&&u.parentNode){let f;return a==="after"?f=iw(u)+1:f=iw(u),De(u.parentNode,f)}return m_(u,parseInt(a,10))},rh=go,f_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&qe(a);a=a.previousSibling)r+=e(a.data).length;return r},gw=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(qe(u))b.push(o?f_(n,u,f):f);else{let x=0;const D=u.childNodes;f>=D.length&&D.length&&(x=1,f=Math.max(0,D.length-1)),b.push(e.nodeIndex(D[f],o)+x)}for(let x=u;x&&x!==C;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},g_=(e,n,o,r)=>{const a=n.dom,u=gw(a,e,o,r,!0),f=n.isForward(),b=es(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=gw(a,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},Ts=(e,n,o)=>{let r=0;return je.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},Iy=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(pt(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},hw=e=>(Iy(e,!0),Iy(e,!1),e),pw=(e,n)=>{if(pt(e)&&(e=Id(e,n),rh(e)))return e;if(Yi(e)){qe(e)&&Mm(e)&&(e=e.parentNode);let o=e.previousSibling;if(rh(o)||(o=e.nextSibling,rh(o)))return o}},Ly=e=>pw(e.startContainer,e.startOffset)||pw(e.endContainer,e.endOffset),Zr=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||rh(r)){const f=r.nodeName;return{name:f,index:Ts(o.dom,f,r)}}const u=Ly(a);if(u){const f=u.tagName;return{name:f,index:Ts(o.dom,f,u)}}return g_(e,o,n,a)},wi=e=>{const n=e.getRng();return{start:mw(e.dom.getRoot(),De.fromRangeStart(n)),end:mw(e.dom.getRoot(),De.fromRangeEnd(n)),forward:e.isForward()}},bw=e=>({rng:e.getRng(),forward:e.isForward()}),Fy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Hy=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:Ts(o,b,f)};const x=hw(r.cloneRange());if(!u){x.collapse(!1);const M=Fy(o,a+"_end",n);qp(o,x,M)}r=hw(r),r.collapse(!0);const D=Fy(o,a+"_start",n);return qp(o,r,D),e.moveToBookmark({id:a,keep:!0,forward:C}),{id:a,forward:C}},h_=(e,n,o=!1)=>n===2?Zr(Ki,o,e):n===3?wi(e):n?bw(e):Hy(e,!1),a0=Ve(Zr,Oo,!0),vw=e=>{const n=u=>u(e),o=et(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ke,isError:_e,map:u=>Dr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>$.some(e)};return a},Kp=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:_e,isError:Ke,map:n,mapError:r=>Dr.error(r(e)),bind:n,exists:_e,forall:Ke,getOr:Oo,or:Oo,getOrThunk:it,orThunk:it,getOrDie:ks(String(e)),each:kt,toOptional:$.none};return o},Dr={value:vw,error:Kp,fromOption:(e,n)=>e.fold(()=>Kp(n),vw)},Ji={generate:e=>{if(!Zn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return pe(e,(r,a)=>{const u=no(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Zn(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const x=C.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[a].apply(null,C)},match:M=>{const P=no(M);if(n.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+P.join(","));if(!Yo(n,G=>Ut(P,G)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+n.join(", "));return M[f].apply(null,C)},log:M=>{console.log(M,{constructors:n,constructor:f,params:C})}}}}),o}};Ji.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ys=e=>{const n=[],o=[];return pe(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},Qu=e=>e.type==="inline-command"||e.type==="inline-format",ch=e=>e.type==="block-command"||e.type==="block-format",Vy=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,Yp=e=>{var n;const o=a=>Dr.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(Zn(e.format)){if(!Yo(e.format,ce))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(ce(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return Dr.value(u(b))}else return e.cmd!==void 0?ce(e.cmd)?Dr.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!ut(e))return o("Raw pattern is not an object");if(!ce(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ce(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ce(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Dr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},Cw=e=>Bt(e,ch),Bm=e=>Bt(e,Qu),Fc=(e,n)=>({inlinePatterns:Bm(e),blockPatterns:Cw(e),dynamicPatternsLookup:n}),ed=(e,n)=>({...e,blockPatterns:Bt(e.blockPatterns,o=>Vy(o,n))}),Sw=e=>{const n=ys(qt(e,Yp));return pe(n.errors,o=>console.error(o.message,o.pattern)),n.values},b_=e=>n=>{const o=e(n);return Sw(o)},zy=H().deviceType,i0=zy.isTouch(),Uy=Ko.DOM,Wy=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Bn(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[hs(u)]=hs(f),o},{})},l0=e=>Gt(e,RegExp),Et=e=>n=>n.options.get(e),Xp=e=>ce(e)||ut(e),Zy=(e,n="")=>o=>{const r=ce(o);if(r)if(o.indexOf("=")!==-1){const a=Wy(o);return{value:ho(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},ww=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Zy(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Zy(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ce(o)&&$n(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Ut(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>vn(o)?{valid:!0,value:o}:ce(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ce(o)||Hn(o,ce);return r?ce(o)?{value:qt(o.split(","),hs),valid:r}:Zn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Zf(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ce(o)||Hn(o,ce);return r?{value:Zn(o)?o:qt(o.split(","),hs),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=vn(o)||ce(o);return r?o===!1||zy.isiPhone()||zy.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!i0}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ce(o)||re(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ce(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=Hn(o,ce);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Xp}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Xp}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Xp}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Xp}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ce(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Hn(o,ut)||o===!1?{value:Sw(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>re(o)?{value:b_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Hn(o,l0)?{value:o,valid:!0}:l0(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Ut(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Ut(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:iu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Uy.getAttrib(e.getElement(),"placeholder")})})},v_=Et("iframe_attrs"),Hc=Et("doctype"),xw=Et("document_base_url"),$m=Et("body_id"),Ew=Et("body_class"),jy=Et("content_security_policy"),Tw=Et("br_in_pre"),Vc=Et("forced_root_block"),Im=Et("forced_root_block_attrs"),Gy=Et("newline_behavior"),Uf=Et("br_newline_selector"),y_=Et("no_newline_selector"),Rr=Et("keep_styles"),Mr=Et("end_container_on_empty_block"),Ec=Et("automatic_uploads"),Nr=Et("images_reuse_filename"),wo=Et("images_replace_blob_uris"),Cr=Et("icons"),u0=Et("icons_url"),qy=Et("images_upload_url"),Ky=Et("images_upload_base_path"),Yy=Et("images_upload_credentials"),kw=Et("images_upload_handler"),_w=Et("content_css_cors"),Jp=Et("referrer_policy"),d0=Et("language"),Qp=Et("language_url"),Aw=Et("indent_use_margin"),MR=Et("indentation"),Wf=Et("content_css"),ti=Et("content_style"),C_=Et("font_css"),S_=Et("directionality"),Qi=Et("inline_boundaries_selector"),ah=Et("object_resizing"),ih=Et("resize_img_proportional"),td=Et("placeholder"),ma=Et("event_root"),Xy=Et("service_message"),Lm=Et("theme"),Ow=Et("theme_url"),m0=Et("model"),Jy=Et("model_url"),e1=Et("inline_boundaries"),f0=Et("formats"),Dw=Et("preview_styles"),Rw=Et("format_empty_lines"),Mw=Et("format_noneditable_selector"),t1=Et("custom_ui_selector"),Zf=Et("inline"),n1=Et("hidden_input"),w_=Et("submit_patch"),Qy=Et("add_form_submit_trigger"),x_=Et("add_unload_trigger"),g0=Et("custom_undo_redo_levels"),E_=Et("disable_nodechange"),Nw=Et("readonly"),T_=Et("editable_root"),Pw=Et("content_css_cors"),o1=Et("plugins"),Bw=Et("external_plugins"),_a=Et("block_unsupported_drop"),e2=Et("visual"),$w=Et("visual_table_class"),t2=Et("visual_anchor_class"),s1=Et("iframe_aria_text"),k_=Et("setup"),__=Et("init_instance_callback"),A_=Et("urlconverter_callback"),h0=Et("auto_focus"),Iw=Et("browser_spellcheck"),n2=Et("protect"),o2=Et("paste_block_drop"),r1=Et("paste_data_images"),s2=Et("paste_preprocess"),Lw=Et("paste_postprocess"),Fw=Et("newdocument_content"),Hw=Et("paste_webkit_styles"),O_=Et("paste_remove_styles_if_webkit"),Vw=Et("paste_merge_formats"),r2=Et("smart_paste"),zw=Et("paste_as_text"),Fm=Et("paste_tab_spaces"),Uw=Et("allow_html_data_urls"),D_=Et("text_patterns"),R_=Et("text_patterns_lookup"),p0=Et("noneditable_class"),Nl=Et("editable_class"),b0=Et("noneditable_regexp"),v0=Et("preserve_cdata"),c2=Et("highlight_on_focus"),Ww=Et("xss_sanitization"),Sr=Et("init_content_sync"),Zw=e=>e.options.isSet("text_patterns_lookup"),lh=e=>je.explode(e.options.get("font_size_style_values")),Hm=e=>je.explode(e.options.get("font_size_classes")),y0=e=>e.options.get("encoding")==="xml",jw=e=>je.explode(e.options.get("images_file_types")),M_=Et("table_tab_navigation"),N_=Et("details_initial_state"),Gw=Et("details_serialized_state"),c1=Et("sandbox_iframes"),a2=e=>e.options.get("sandbox_iframes_exclusions"),P_=Et("convert_unsafe_embeds"),uh=Et("license_key"),qw=Et("api_key"),Kw=pt,Yw=qe,i2=e=>{const n=e.parentNode;n&&n.removeChild(e)},C0=e=>{const n=Ki(e);return{count:e.length-n.length,text:n}},Xw=e=>{let n;for(;(n=e.data.lastIndexOf(Wr))!==-1;)e.deleteData(n,1)},Vm=(e,n)=>(jf(e),n),B_=(e,n)=>{const o=C0(e.data.substr(0,n.offset())),r=C0(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Xw(e),De(e,n.offset()-o.count)):n},Jw=(e,n)=>{const o=n.container(),r=Li(Tr(o.childNodes),e).map(a=>a<n.offset()?De(o,n.offset()-1):n).getOr(n);return jf(e),r},Qw=(e,n)=>Yw(e)&&n.container()===e?B_(e,n):Vm(e,n),S0=(e,n)=>n.container()===e.parentNode?Jw(e,n):Vm(e,n),$_=(e,n)=>De.isTextPosition(n)?Qw(e,n):S0(e,n),jf=e=>{Kw(e)&&Yi(e)&&(XS(e)?e.removeAttribute("data-mce-caret"):i2(e)),Yw(e)&&(Xw(e),e.data.length===0&&i2(e))},w0=go,a1=ea,ex=kb,dh="*[contentEditable=false],video,audio,embed,object",mh=(e,n,o)=>{const r=JS(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},I_=e=>{var n,o;const r=Ea(ne.fromDom(e),dh);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(ta(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Gn(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},tx=(e,n,o,r)=>{const a=Cc();let u,f;const b=Vc(e),C=e.dom,x=(U,X)=>{let oe;if(D(),ex(X))return null;if(o(X)){const fe=Jb(b,X,U),ge=mh(n,X,U);C.setStyle(fe,"top",ge.top),C.setStyle(fe,"caret-color","transparent"),f=fe;const be=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(be,{...ge}),C.add(n,be),a.set({caret:be,element:X,before:U}),U&&C.addClass(be,"mce-visual-caret-before"),M(),oe=X.ownerDocument.createRange(),oe.setStart(fe,0),oe.setEnd(fe,0)}else return f=t_(X,U),oe=X.ownerDocument.createRange(),Gf(f.nextSibling)?(oe.setStart(f,0),oe.setEnd(f,0)):(oe.setStart(f,1),oe.setEnd(f,1)),oe;return oe},D=()=>{I_(n),f&&(jf(f),f=null),a.on(U=>{C.remove(U.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},M=()=>{u=setInterval(()=>{a.on(U=>{r()?C.toggleClass(U.caret,"mce-visual-caret-hidden"):C.addClass(U.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:D,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(U=>{const X=mh(n,U.element,U.before);C.setStyles(U.caret,{...X})})},destroy:()=>clearInterval(u)}},L_=()=>_t.browser.isFirefox(),Gf=e=>w0(e)||a1(e),fh=e=>(Gf(e)||tu(e)&&L_())&&mf(ne.fromDom(e)).exists(Xa),l2=Fe,u2=go,F_=ea,d2=Ep("display","block table table-cell table-row table-caption list-item"),nx=Yi,ox=Mm,gh=pt,sx=qe,x0=Rl,zm=e=>e>0,Ld=e=>e<0,i1=(e,n)=>{let o;for(;o=e(n);)if(!ox(o))return o;return null},l1=(e,n,o,r,a)=>{const u=new Hr(e,r),f=u2(e)||ox(e);let b;if(Ld(n)){if(f&&(b=i1(u.prev.bind(u),!0),o(b)))return b;for(;b=i1(u.prev.bind(u),a);)if(o(b))return b}if(zm(n)){if(f&&(b=i1(u.next.bind(u),!0),o(b)))return b;for(;b=i1(u.next.bind(u),a);)if(o(b))return b}return null},H_=(e,n)=>{const o=a=>l2(a.dom),r=a=>a.dom===n;return ws(ne.fromDom(e),o,r).map(a=>a.dom).getOr(n)},ni=(e,n)=>{for(;e&&e!==n;){if(d2(e))return e;e=e.parentNode}return null},du=(e,n,o)=>ni(e.container(),o)===ni(n.container(),o),m2=(e,n)=>{if(!n)return $.none();const o=n.container(),r=n.offset();return gh(o)?$.from(o.childNodes[r+e]):$.none()},V_=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},NR=(e,n,o)=>ni(n,e)===ni(o,e),Um=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&nx(u)&&(u=u[r]),u2(u)||F_(u)){if(NR(n,u,a))return u;break}if(x0(u))break;a=a.parentNode}return null},hh=Ve(V_,!0),Tc=Ve(V_,!1),f2=(e,n,o)=>{let r;const a=Ve(Um,!0,n),u=Ve(Um,!1,n),f=o.startContainer,b=o.startOffset;if(Mm(f)){const C=sx(f)?f.parentNode:f,x=C.getAttribute("data-mce-caret");if(x==="before"&&(r=C.nextSibling,fh(r)))return hh(r);if(x==="after"&&(r=C.previousSibling,fh(r)))return Tc(r)}if(!o.collapsed)return o;if(qe(f)){if(nx(f)){if(e===1){if(r=u(f),r)return hh(r);if(r=a(f),r)return Tc(r)}if(e===-1){if(r=a(f),r)return Tc(r);if(r=u(f),r)return hh(r)}return o}if(ta(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?hh(r):o;if(Gn(f)&&b<=1)return e===-1&&(r=a(f),r)?Tc(r):o;if(b===f.data.length)return r=u(f),r?hh(r):o;if(b===0)return r=a(f),r?Tc(r):o}return o},E0=(e,n)=>m2(e?0:-1,n).filter(u2),qf=(e,n,o)=>{const r=f2(e,n,o);return e===-1?De.fromRangeStart(r):De.fromRangeEnd(r)},u1=e=>$.from(e.getNode()).map(ne.fromDom),z_=e=>$.from(e.getNode(!0)).map(ne.fromDom),g2=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},d1=(e,n)=>{const o=du(e,n);return!o&&fo(e.getNode())?!0:o};var kc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(kc||(kc={}));const h2=go,el=qe,p2=pt,ph=fo,bh=Rl,b2=c_,Fd=sw,v2=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},y2=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,C2=(e,n)=>{if(zm(e)){if(bh(n.previousSibling)&&!el(n.previousSibling))return De.before(n);if(el(n))return De(n,0)}if(Ld(e)){if(bh(n.nextSibling)&&!el(n.nextSibling))return De.after(n);if(el(n))return De(n,n.data.length)}return Ld(e)?ph(n)?De.before(n):De.after(n):De.before(n)},nd=(e,n)=>{const o=n.nextSibling;return o&&bh(o)?el(o)?De(o,0):De.before(o):T0(kc.Forwards,De.after(n),e)},T0=(e,n,o)=>{let r,a,u,f;if(!p2(o)||!n)return null;if(n.isEqual(De.after(o))&&o.lastChild){if(f=De.after(o.lastChild),Ld(e)&&bh(o.lastChild)&&p2(o.lastChild))return ph(o.lastChild)?De.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(el(b)){if(Ld(e)&&C>0)return De(b,--C);if(zm(e)&&C<b.length)return De(b,++C);r=b}else{if(Ld(e)&&C>0&&(a=y2(b,C-1),bh(a)))return!b2(a)&&(u=l1(a,e,Fd,a),u)?el(u)?De(u,u.data.length):De.after(u):el(a)?De(a,a.data.length):De.before(a);if(zm(e)&&C<b.childNodes.length&&(a=y2(b,C),bh(a)))return ph(a)?nd(o,a):!b2(a)&&(u=l1(a,e,Fd,a),u)?el(u)?De(u,0):De.before(u):el(a)?De(a,0):De.after(a);r=a||f.getNode()}if(r&&(zm(e)&&f.isAtEnd()||Ld(e)&&f.isAtStart())&&(r=l1(r,e,Ke,o,!0),Fd(r,o)))return C2(e,r);a=r&&l1(r,e,Fd,o);const x=qs(Bt(v2(b,o),h2));return x&&(!a||!x.contains(a))?(zm(e)?f=De.after(x):f=De.before(x),f):a?C2(e,a):null},zc=e=>({next:n=>T0(kc.Forwards,n,e),prev:n=>T0(kc.Backwards,n,e)}),rx=(e,n,o)=>{const r=e?De.before(o):De.after(o);return xi(e,n,r)},S2=e=>fo(e)?De.before(e):De.after(e),w2=e=>De.isTextPosition(e)?e.offset()===0:Rl(e.getNode()),cx=e=>{if(De.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Rl(e.getNode(!0))},x2=(e,n)=>!De.isTextPosition(e)&&!De.isTextPosition(n)&&e.getNode()===n.getNode(!0),ax=e=>!De.isTextPosition(e)&&fo(e.getNode()),ix=(e,n,o)=>e?!x2(n,o)&&!ax(n)&&cx(n)&&w2(o):!x2(o,n)&&w2(n)&&cx(o),xi=(e,n,o)=>{const r=zc(n);return $.from(e?r.next(o):r.prev(o))},Wm=(e,n,o)=>xi(e,n,o).bind(r=>du(o,r,n)&&ix(e,o,r)?xi(e,n,r):$.some(r)),lx=(e,n,o,r)=>Wm(e,n,o).bind(a=>r(a)?lx(e,n,a,r):$.some(a)),Kf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return qe(o)?$.some(De(o,e?0:o.data.length)):o?Rl(o)?$.some(e?De.before(o):S2(o)):rx(e,n,o):$.none()},fa=Ve(xi,!0),oi=Ve(xi,!1),ga=Ve(Kf,!0),Ei=Ve(Kf,!1),k0="_mce_caret",Ti=e=>pt(e)&&e.id===k0,Yf=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ti(o))return o;o=o.parentNode}return null},ux=e=>ce(e.start),PR=e=>zt(e,"rng"),U_=e=>zt(e,"id"),E2=e=>zt(e,"name"),W_=e=>je.isArray(e.start),_0=e=>!E2(e)&&vn(e.forward)?e.forward:!0,_c=(e,n)=>(pt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),m1=(e,n)=>{const o=$.from(fw(e.getRoot(),n.start)),r=$.from(fw(e.getRoot(),n.end));return cn(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:_0(n)}})},f1=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Wr);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},Zm=e=>!e.hasChildNodes(),T2=(e,n)=>Ei(e).fold(_e,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),A0=(e,n,o)=>Zm(n)&&Yf(e,n)?(f1(n,o),!0):!1,k2=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let C=a.length-1;f&&C>=1;C--){const x=f.childNodes;if(A0(u,f,r))return!0;if(a[C]>x.length-1)return A0(u,f,r)?!0:T2(f,r);f=x[a[C]]}qe(f)&&(b=Math.min(a[0],f.data.length)),pt(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},O0=e=>qe(e)&&e.data.length>0,_2=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):O0(r.nextSibling)?(f=r.nextSibling,b=0):O0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):O0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const C=r.previousSibling,x=r.nextSibling;je.each(je.grep(r.childNodes),M=>{qe(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let D;for(;D=e.get(o.id+"_"+n);)e.remove(D,!0);if(qe(x)&&qe(C)&&!_t.browser.isOpera()){const M=C.data.length;C.appendData(x.data),e.remove(x),f=C,b=M}}return $.some(De(f,b))}else return $.none()},vh=(e,n)=>{const o=e.createRng();return k2(e,!0,n,o)&&k2(e,!1,n,o)?$.some({range:o,forward:_0(n)}):$.none()},Hd=(e,n)=>{const o=_2(e,"start",n),r=_2(e,"end",n);return cn(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(_c(e,a.container()),a.offset()),f.setEnd(_c(e,u.container()),u.offset()),{range:f,forward:_0(n)}})},g1=(e,n)=>$.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Xf=(e,n)=>{const o=e.dom;if(n){if(W_(n))return vh(o,n);if(ux(n))return m1(o,n);if(U_(n))return Hd(o,n);if(E2(n))return g1(o,n);if(PR(n))return $.some({range:n.rng,forward:_0(n)})}return $.none()},Vd=(e,n,o)=>h_(e,n,o),dx=(e,n)=>{Xf(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},si=e=>pt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",jm=(e=>n=>e===n)(Vr),Jf=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,D0=e=>!Jf(e)&&!jm(e)&&!wp(e),R0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Z_=e=>Bs(e,n=>{const o=Wp(n);return o?[ne.fromDom(o)]:[]}),j_=e=>R0(e).length>1,mx=e=>Bt(Z_(e),Vp),fx=e=>Ea(e,"td[data-mce-selected],th[data-mce-selected]"),Qf=(e,n)=>{const o=fx(n);return o.length>0?o:mx(e)},yh=e=>Qf(R0(e.selection.getSel()),ne.fromDom(e.getBody())),h1=(e,n)=>Ar(e,"table",n),G_=e=>{const n=e.startContainer,o=e.startOffset;return qe(n)?o===0?$.some(ne.fromDom(n)):$.none():$.from(n.childNodes[o]).map(ne.fromDom)},gx=e=>{const n=e.endContainer,o=e.endOffset;return qe(n)?o===n.data.length?$.some(ne.fromDom(n)):$.none():$.from(n.childNodes[o-1]).map(ne.fromDom)},p1=e=>Jc(e).fold(et([e]),n=>[e].concat(p1(n))),M0=e=>kd(e).fold(et([e]),n=>K(n)==="br"?Jl(n).map(o=>[e].concat(M0(o))).getOr([]):[e].concat(M0(n))),O2=(e,n)=>cn(G_(n),gx(n),(o,r)=>{const a=bo(p1(e),Ve(_n,o)),u=bo(M0(e),Ve(_n,r));return a.isSome()&&u.isSome()}).getOr(!1),hx=(e,n,o,r)=>{const a=o,u=new Hr(o,a),f=Co(e.schema.getMoveCaretBeforeOnEnterElements(),(C,x)=>!Ut(["td","th","table"],x.toLowerCase()));let b=o;do{if(qe(b)&&je.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},N0=e=>{const n=e.selection.getSel();return Me(n)&&n.rangeCount>0},Ch=(e,n)=>{const o=yh(e);o.length>0?pe(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},px=(e,n,o)=>{const r=Hy(e,n);o(r),e.moveToBookmark(r)},eg=e=>is(e==null?void 0:e.nodeType),Yn=e=>pt(e)&&!si(e)&&!Ti(e)&&!Od(e),zd=(e,n)=>{if(Yn(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Gm=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=go(u);px(r,!0,()=>{n()}),f&&go(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&P0(a,r)},P0=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!zd(e,b)&&pt(u)){const C=u.childNodes,x=e.getRoot();let D;if(f<C.length){const M=C[f];D=new Hr(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:x)}else{const M=C[C.length-1];D=new Hr(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:x),D.next(!0)}for(let M=D.current();M;M=D.next()){if(e.getContentEditable(M)==="false")return;if(qe(M)&&!v1(M)){a.setStart(M,0),n.setRng(a);return}}}},D2=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(pt(e)||!v1(e))return e}},b1=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Cf(e,n),tg=(e,n,o)=>e.schema.isValidChild(n,o),v1=(e,n=!1)=>{if(Me(e)&&qe(e)){const o=n?e.data.replace(/ /g," "):e.data;return Cl(o)}else return!1},B0=e=>Me(e)&&qe(e)&&e.length===0,bx=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Mw(e),a=ur(r)?o:`${o},${r}`;return Fa(ne.fromDom(n),a)},q_=(e,n)=>{const o=e.dom;return Yn(n)&&o.getContentEditable(n)==="false"&&bx(e,n)&&o.select('[contenteditable="true"]',n).length===0},ng=(e,n)=>re(e)?e(n):(Me(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),$0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),qm=(e,n)=>{if(Tn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=$p(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},R2=(e,n,o)=>{const r=e.getStyle(n,o);return qm(r,o)},M2=(e,n)=>{let o;return e.getParent(n,r=>pt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},og=(e,n,o)=>e.getParents(n,o,e.getRoot()),N2=(e,n,o)=>{const r=e.formatter.get(n);return Me(r)&&Vn(r,o)},vx=(e,n)=>N2(e,n,r=>{const a=u=>re(u)||u.length>1&&u.charAt(0)==="%";return Vn(["styles","attributes"],u=>ho(r,u).exists(f=>{const b=Zn(f)?f:ja(f);return Vn(b,a)}))}),yx=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Co(u,(f,b)=>Vn(r,C=>C===b));return N2(e,n,u=>{const f=a(u);return N2(e,o,b=>{const C=a(b);return bc(f,C)})})},od=e=>$s(e,"block"),Cx=e=>od(e)&&e.wrapper===!0,I0=e=>od(e)&&e.wrapper!==!0,tl=e=>$s(e,"selector"),cc=e=>$s(e,"inline"),K_=e=>tl(e)&&cc(e)&&Do(ho(e,"mixed"),!0),mu=e=>tl(e)&&e.expand!==!1&&!cc(e),Y_=e=>{const n=[];let o=e;for(;o;){if(qe(o)&&o.data!==Wr||o.childNodes.length>1)return[];pt(o)&&n.push(o),o=o.firstChild}return n},Sx=e=>Y_(e).length>0,y1=e=>Ti(e.dom)&&Sx(e.dom),Sh=si,wx=og,xx=v1,BR=b1,$R=e=>fo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ex=(e,n)=>{let o=n;for(;o;){if(pt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},bt=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},ac=(e,n,o)=>bt(e,n,o,r=>jm(r)||Jf(r)),L0=(e,n,o)=>bt(e,n,o,D0),ic=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(D,M,P)=>{const z=Mf(e),G=a?z.backwards:z.forwards;return $.from(G(D,M,(U,X)=>Sh(U.parentNode)?-1:(f=U,P(a,U,X)),b))};return C(o,r,ac).bind(D=>u?C(D.container,D.offset+(a?-1:0),L0):$.some(D)).orThunk(()=>f?$.some({container:f,offset:a?0:f.length}):$.none())},nl=(e,n,o,r,a)=>{const u=r[a];qe(r)&&ur(r.data)&&u&&(r=u);const f=wx(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const x=n[C];if(!(Me(x.collapsed)&&x.collapsed!==o.collapsed)&&tl(x)&&e.is(f[b],x.selector))return f[b]}return r},P2=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(od(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(qe(o)?o.parentNode:o,x=>x!==f&&BR(e.schema,x),C)}if(u&&od(b)&&b.wrapper&&(u=wx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!$0(u,"br")););return u||o},C1=(e,n,o,r)=>{const a=o.parentNode;return Me(o[r])?!1:a===n||Tn(a)||e.isBlock(a)?!0:C1(e,n,a,r)},wh=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(qe(o)&&!xx(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const x=qe(C)&&!C1(e,b,C,f);if(!Sh(C)&&!$R(C)&&!xx(C,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Tx=e=>Sh(e.parentNode)||Sh(e),Km=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return pt(a)&&a.hasChildNodes()&&(a=Id(a,u),qe(a)&&(u=0)),pt(f)&&f.hasChildNodes()&&(f=Id(f,n.collapsed?b:b-1),qe(f)&&(b=f.data.length)),a=Ex(e,a),f=Ex(e,f),Tx(a)&&(a=Sh(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,qe(a)&&(u=n.collapsed?a.length:0)),Tx(f)&&(f=Sh(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,qe(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(ic(e,e.getRoot(),a,u,!0,r).each(({container:M,offset:P})=>{a=M,u=P}),ic(e,e.getRoot(),f,b,!1,r).each(({container:M,offset:P})=>{f=M,b=P})),(cc(C)||C.block_expand)&&((!cc(C)||!qe(a)||u===0)&&(a=wh(e,o,a,u,!0)),(!cc(C)||!qe(f)||b===f.data.length)&&(f=wh(e,o,f,b,!1))),mu(C)&&(a=nl(e,o,n,a,"previousSibling"),f=nl(e,o,n,f,"nextSibling")),(od(C)||tl(C))&&(a=P2(e,o,a,"previousSibling"),f=P2(e,o,f,"nextSibling"),od(C)&&(e.isBlock(a)||(a=wh(e,o,a,u,!0),qe(a)&&(u=0)),e.isBlock(f)||(f=wh(e,o,f,b,!1),qe(f)&&(b=f.data.length)))),pt(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),pt(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},xh=(e,n,o)=>{var r;const a=n.startOffset,u=Id(n.startContainer,a),f=n.endOffset,b=Id(n.endContainer,f-1),C=X=>{const oe=X[0];qe(oe)&&oe===u&&a>=oe.data.length&&X.splice(0,1);const fe=X[X.length-1];return f===0&&X.length>0&&fe===b&&qe(fe)&&X.splice(X.length-1,1),X},x=(X,oe,fe)=>{const ge=[];for(;X&&X!==fe;X=X[oe])ge.push(X);return ge},D=(X,oe)=>e.getParent(X,fe=>fe.parentNode===oe,oe),M=(X,oe,fe)=>{const ge=fe?"nextSibling":"previousSibling";for(let be=X,He=be.parentNode;be&&be!==oe;be=He){He=be.parentNode;const Qe=x(be===X?be:be[ge],ge);Qe.length&&(fe||Qe.reverse(),o(C(Qe)))}};if(u===b)return o(C([u]));const P=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return M(u,P,!0);if(e.isChildOf(b,u))return M(b,P);const z=D(u,P)||u,G=D(b,P)||b;M(u,z,!0);const U=x(z===u?z:z.nextSibling,"nextSibling",G===b?G.nextSibling:G);U.length&&o(C(U)),M(b,G)},X_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],J_=e=>Bo(e)&&Jg(e)===Wr,Q_=(e,n,o,r)=>Yc(n).fold(()=>"skipping",a=>r==="br"||J_(n)?"valid":qb(n)?"existing":Ti(n.dom)?"caret":Vn(X_,u=>Fa(n,u))?"valid-block":!tg(e,o,r)||!tg(e,K(a),o)?"invalid-child":"valid"),kx=(e,n)=>{const o=Km(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},sg=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;$u(e,Gg()),zs(e,`${Yu()}`,f),zs(e,`${Am()}`,r);const{attributes:C={},classes:x=[]}=a(f,b);if(dr(e,C),AR(e,x),u){x.length>0&&zs(e,`${Om()}`,x.join(","));const D=no(C);D.length>0&&zs(e,`${Nd()}`,D.join(","))}},Eh=e=>{am(e,Gg()),bs(e,`${Yu()}`),bs(e,`${Am()}`),bs(e,`${qg()}`);const n=Kc(e,`${Nd()}`).map(r=>r.split(",")).getOr([]),o=Kc(e,`${Om()}`).map(r=>r.split(",")).getOr([]);pe(n,r=>bs(e,r)),OR(e,o),bs(e,`${Om()}`),bs(e,`${Nd()}`)},rg=(e,n,o,r,a)=>{const u=ne.fromTag("span",e);return sg(u,n,o,r,a,!1),u},F0=(e,n,o,r,a,u)=>{const f=[],b=rg(e.getDoc(),o,u,r,a),C=Cc(),x=()=>{C.clear()},D=()=>C.get().getOrThunk(()=>{const G=Al(b);return f.push(G),C.set(G),G}),M=G=>{pe(G,P)},P=G=>{switch(Q_(e,G,"span",K(G))){case"invalid-child":{x();const X=Fr(G);M(X),x();break}case"valid-block":{x(),sg(G,o,u,r,a,!0);break}case"valid":{const X=D();Ql(G,X);break}}},z=G=>{const U=qt(G,ne.fromDom);M(U)};return xh(e.dom,n,G=>{x(),z(G)}),f},ki=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=yh(e).length>0,b=Yg("mce-annotation");if(u.collapsed&&!f&&kx(e,u),a.getRng().collapsed&&!f){const C=rg(e.getDoc(),b,r,n,o.decorate);Ng(C,Vr),a.getRng().insertNode(C.dom),a.select(C.dom)}else px(a,!1,()=>{Ch(e,C=>{F0(e,C,b,n,o.decorate,r)})})})},fu=e=>{const n=Kb();Xk(e,n);const o=US(e,n),r=ec("span"),a=u=>{pe(u,f=>{r(f)?eu(f):Eh(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{ki(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Lp(e,$.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();ct(Kg(e,u),(b,C)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Kg(e,u);return zn(f,b=>qt(b,C=>C.dom))}}},cg=e=>({getBookmark:Ve(Vd,e),moveToBookmark:Ve(dx,e)});cg.isBookmarkNode=si;const Th=(e,n,o)=>o.collapsed?!1:Vn(o.getClientRects(),r=>o_(r,e,n)),H0=(e,n)=>e.dispatch("PreProcess",n),V0=(e,n)=>e.dispatch("PostProcess",n),e4=e=>{e.dispatch("remove")},t4=e=>{e.dispatch("detach")},n4=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},o4=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},_x=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},Ax=e=>{e.dispatch("PreInit")},B2=e=>{e.dispatch("PostRender")},z0=e=>{e.dispatch("Init")},oa=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},ol=(e,n,o)=>{e.dispatch(n,o)},_i=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},S1=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},$2=(e,n)=>e.dispatch("BeforeSetContent",n),Ox=(e,n)=>e.dispatch("SetContent",n),U0=(e,n)=>e.dispatch("BeforeGetContent",n),s4=(e,n)=>e.dispatch("GetContent",n),W0=(e,n)=>{e.dispatch("AutocompleterStart",n)},r4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},Z0=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},c4=e=>{e.dispatch("AutocompleterEnd")},a4=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Dx=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),j0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),jo=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),vt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||vt.metaKeyPressed(e),metaKeyPressed:e=>_t.os.isMacOS()||_t.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},gu="data-mce-selected",Rx="table,img,figure.image,hr,video,span.mce-preview-object,details",I2=Math.abs,kh=Math.round,G0={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},w1=e=>e.type==="longpress"||e.type.indexOf("touch")===0,L2=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,C,x,D,M,P,z,G,U,X,oe,fe,ge,be,He,Qe;const yt=gt=>Me(gt)&&(kp(gt)||o.is(gt,"figure.image")),Re=gt=>ea(gt)||o.hasClass(gt,"mce-preview-object"),Ee=(gt,En)=>{if(w1(gt)){const Pn=gt.touches[0];return yt(gt.target)&&!Th(Pn.clientX,Pn.clientY,En)}else return yt(gt.target)&&!Th(gt.clientX,gt.clientY,En)},Ue=gt=>{const En=gt.target;Ee(gt,n.selection.getRng())&&!gt.isDefaultPrevented()&&n.selection.select(En)},Ct=gt=>o.hasClass(gt,"mce-preview-object")&&Me(gt.firstElementChild)?[gt,gt.firstElementChild]:o.is(gt,"figure.image")?[gt.querySelector("img")]:[gt],It=gt=>{const En=ah(n);return!En||n.mode.isReadOnly()||gt.getAttribute("data-mce-resize")==="false"||gt===n.getBody()?!1:o.hasClass(gt,"mce-preview-object")&&Me(gt.firstElementChild)?Fa(ne.fromDom(gt.firstElementChild),En):Fa(ne.fromDom(gt),En)},On=(gt,En)=>{if(Re(En))return gt.create("img",{src:_t.transparentSrc});if(tu(En)){const Gr=Jo(x.name,"n")?js:Ss,Fo=En.cloneNode(!0);return Gr(gt.select("tr",Fo)).each(pa=>{const Mi=gt.select("td,th",pa);gt.setStyle(pa,"height",null),pe(Mi,om=>gt.setStyle(om,"height",null))}),Fo}else return En.cloneNode(!0)},Dn=(gt,En,Pn)=>{if(Me(Pn)){const Gr=Ct(gt);pe(Gr,Fo=>{Fo.style[En]||!n.schema.isValid(Fo.nodeName.toLowerCase(),En)?o.setStyle(Fo,En,Pn):o.setAttrib(Fo,En,""+Pn)})}},vo=(gt,En,Pn)=>{Dn(gt,"width",En),Dn(gt,"height",Pn)},Ro=gt=>{let En,Pn,Gr,Fo,pa;En=gt.screenX-M,Pn=gt.screenY-P,ge=En*x[2]+U,be=Pn*x[3]+X,ge=ge<5?5:ge,be=be<5?5:be,(yt(f)||Re(f))&&ih(n)!==!1?Gr=!vt.modifierPressed(gt):Gr=vt.modifierPressed(gt),Gr&&(I2(En)>I2(Pn)?(be=kh(ge*oe),ge=kh(be/oe)):(ge=kh(be/oe),be=kh(ge*oe))),vo(b,ge,be),Fo=x.startPos.x+En,pa=x.startPos.y+Pn,Fo=Fo>0?Fo:0,pa=pa>0?pa:0,o.setStyles(C,{left:Fo,top:pa,display:"block"}),C.innerHTML=ge+" &times; "+be,x[2]<0&&b.clientWidth<=ge&&o.setStyle(b,"left",z+(U-ge)),x[3]<0&&b.clientHeight<=be&&o.setStyle(b,"top",G+(X-be)),En=u.scrollWidth-He,Pn=u.scrollHeight-Qe,En+Pn!==0&&o.setStyles(C,{left:Fo-En,top:pa-Pn}),fe||(o4(n,f,U,X,"corner-"+x.name),fe=!0)},ir=()=>{const gt=fe;fe=!1,gt&&(Dn(f,"width",ge),Dn(f,"height",be)),o.unbind(r,"mousemove",Ro),o.unbind(r,"mouseup",ir),a!==r&&(o.unbind(a,"mousemove",Ro),o.unbind(a,"mouseup",ir)),o.remove(b),o.remove(C),o.remove(D),Br(f),gt&&(_x(n,f,ge,be,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Br=gt=>{ht();const En=o.getPos(gt,u),Pn=En.x,Gr=En.y,Fo=gt.getBoundingClientRect(),pa=Fo.width||Fo.right-Fo.left,Mi=Fo.height||Fo.bottom-Fo.top;f!==gt&&(at(),f=gt,ge=be=0);const om=n.dispatch("ObjectSelected",{target:gt});It(gt)&&!om.isDefaultPrevented()?ct(G0,(Ma,dl)=>{const Tu=Ni=>{const Rt=Ct(f)[0];M=Ni.screenX,P=Ni.screenY,U=Rt.clientWidth,X=Rt.clientHeight,oe=X/U,x=Ma,x.name=dl,x.startPos={x:pa*Ma[0]+Pn,y:Mi*Ma[1]+Gr},He=u.scrollWidth,Qe=u.scrollHeight,D=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(D,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=On(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Pn,top:Gr,margin:0}),vo(b,pa,Mi),b.removeAttribute(gu),u.appendChild(b),o.bind(r,"mousemove",Ro),o.bind(r,"mouseup",ir),a!==r&&(o.bind(a,"mousemove",Ro),o.bind(a,"mouseup",ir)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},U+" &times; "+X)};let ba=o.get("mceResizeHandle"+dl);ba&&o.remove(ba),ba=o.add(u,"div",{id:"mceResizeHandle"+dl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+dl+"-resize; margin:0; padding:0"}),o.bind(ba,"mousedown",Ni=>{Ni.stopImmediatePropagation(),Ni.preventDefault(),Tu(Ni)}),Ma.elm=ba,o.setStyles(ba,{left:pa*Ma[0]+Pn-ba.offsetWidth/2,top:Mi*Ma[1]+Gr-ba.offsetHeight/2})}):at(!1)},Ac=jg(Br,0),at=(gt=!0)=>{Ac.cancel(),ht(),f&&gt&&f.removeAttribute(gu),ct(G0,(En,Pn)=>{const Gr=o.get("mceResizeHandle"+Pn);Gr&&(o.unbind(Gr),o.remove(Gr))})},Mt=(gt,En)=>o.isChildOf(gt,En),so=gt=>{if(fe||n.removed||n.composing)return;const En=gt.type==="mousedown"?gt.target:e.getNode(),Pn=Hu(ne.fromDom(En),Rx).map(Fo=>Fo.dom).filter(Fo=>o.isEditable(Fo.parentElement)||Fo.nodeName==="IMG"&&o.isEditable(Fo)).getOrUndefined(),Gr=Me(Pn)?o.getAttrib(Pn,gu,"1"):"1";if(pe(o.select(`img[${gu}],hr[${gu}]`),Fo=>{Fo.removeAttribute(gu)}),Me(Pn)&&Mt(Pn,u)&&n.hasFocus()){jt();const Fo=e.getStart(!0);if(Mt(Fo,Pn)&&Mt(e.getEnd(!0),Pn)){o.setAttrib(Pn,gu,Gr),Ac.throttle(Pn);return}}at()},ht=()=>{ct(G0,gt=>{gt.elm&&(o.unbind(gt.elm),delete gt.elm)})},jt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{jt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",so),n.on("keyup compositionend",gt=>{f&&f.nodeName==="TABLE"&&so(gt)}),n.on("hide blur",at),n.on("contextmenu longpress",Ue,!0)}),n.on("remove",ht),{isResizable:It,showResizeRect:Br,hideResizeRect:at,updateResizeRect:so,destroy:()=>{Ac.cancel(),f=b=D=null}}},Mx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},F2=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Nx=(e,n,o)=>{const r=e.document.createRange();return Mx(r,n),F2(r,o),r},x1=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},ag=Ji.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),q0=(e,n,o)=>n(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),i4=(e,n)=>n.match({domRange:o=>({ltr:et(o),rtl:$.none}),relative:(o,r)=>({ltr:Mc(()=>Nx(e,o,r)),rtl:Mc(()=>$.some(Nx(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Mc(()=>x1(e,o,r,a,u)),rtl:Mc(()=>$.some(x1(e,a,u,o,r)))})}),l4=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>ag.rtl(ne.fromDom(a.endContainer),a.endOffset,ne.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>q0(e,ag.ltr,o)):q0(e,ag.ltr,o)},u4=(e,n)=>{const o=i4(e,n);return l4(e,o)};ag.ltr,ag.rtl;const Uc={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},_h=(e,n,o)=>{var r;return $.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return $.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),$.some(u)})},IR=(e,n,o)=>{var r;return $.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},d4=(e,n,o)=>e.caretPositionFromPoint?_h(e,n,o):e.caretRangeFromPoint?IR(e,n,o):$.none(),m4=(e,n,o)=>{const r=e.document;return d4(r,n,o).map(a=>Uc.create(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset))},Un=Ji.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),f4=(e,n,o,r)=>e.fold(n,o,r),g4=e=>e.fold(Oo,Oo,Oo),H2=Un.before,LR=Un.on,FR=Un.after,Ym={before:H2,on:LR,after:FR,cata:f4,getStart:g4},E1=Ji.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),h4=e=>E1.exact(e.start,e.soffset,e.finish,e.foffset),p4=e=>e.match({domRange:n=>ne.fromDom(n.startContainer),relative:(n,o)=>Ym.getStart(n),exact:(n,o,r,a)=>n}),V2=E1.domRange,K0=E1.relative,Y0=E1.exact,HR=e=>{const n=p4(e);return um(n)},b4=Uc.create,T1={domRange:V2,relative:K0,exact:Y0,exactFromRange:h4,getWin:HR,range:b4},z2=(e,n)=>{const o=K(e);return o==="input"?Ym.after(e):Ut(["br","img"],o)?n===0?Ym.before(e):Ym.after(e):Ym.on(e,n)},v4=(e,n)=>{const o=e.fold(Ym.before,z2,Ym.after),r=n.fold(Ym.before,z2,Ym.after);return T1.relative(o,r)},Px=(e,n,o,r)=>{const a=z2(e,n),u=z2(o,r);return T1.relative(a,u)},Jt=e=>e.match({domRange:n=>{const o=ne.fromDom(n.startContainer),r=ne.fromDom(n.endContainer);return Px(o,n.startOffset,r,n.endOffset)},relative:v4,exact:Px}),X0=(e,n)=>{const r=document.createDocumentFragment();return pe(e,a=>{r.appendChild(a.dom)}),ne.fromDom(r)},l=e=>{const n=T1.getWin(e).dom,o=(a,u,f,b)=>x1(n,a,u,f,b),r=Jt(e);return u4(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>m4(e,n,o),p=(e,n,o)=>{const r=um(ne.fromDom(o));return m(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},v=(e,n)=>Me(e)&&Me(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,E=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},A=(e,n,o)=>E(e,n,o)!==null,B=(e,n,o)=>A(e,n,r=>r.nodeName===o),V=(e,n)=>Yi(e)&&!A(e,n,Ti),q=(e,n,o)=>{const r=n.parentNode;if(r){const a=new Hr(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(fo(u))return!0}return!1},se=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},ye=(e,n)=>{let o=n;for(;o&&o!==e;){if(go(o))return!0;o=o.parentNode}return!1},Ge=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let C,x;if(!b)return $.none();const D=e.getParent(b,e.isBlock)||u;if(r&&fo(a)&&n&&e.isEmpty(D))return $.some(De(b,e.nodeIndex(a)));const M=new Hr(a,D);for(;x=M[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||V(x,u))return $.none();if(qe(x)&&x.data.length>0)return B(x,u,"A")?$.none():$.some(De(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return $.none();C=x}return rr(C)?$.none():o&&C?$.some(De(C,0)):$.none()},mt=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const x=pt(b)&&C===b.childNodes.length,D=e.schema.getNonEmptyElements();let M=o;if(Yi(b))return $.none();if(pt(b)&&C>b.childNodes.length-1&&(M=!1),$g(b)&&(b=a,C=0),b===a){if(M&&(u=b.childNodes[C>0?C-1:0],u&&(Yi(u)||D[u.nodeName]||tu(u))))return $.none();if(b.hasChildNodes()){if(C=Math.min(!M&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=qe(b)&&x?b.data.length:0,!n&&b===a.lastChild&&tu(b)||ye(a,b)||Yi(b)||oy(b))return $.none();if(b.hasChildNodes()&&!tu(b)){u=b;const P=new Hr(b,a);do{if(go(u)||Yi(u)){f=!1;break}if(qe(u)&&u.data.length>0){C=M?0:u.data.length,b=u,f=!0;break}if(D[u.nodeName.toLowerCase()]&&!zr(u)){C=e.nodeIndex(u),b=u.parentNode,M||C++,f=!0;break}}while(u=M?P.next():P.prev())}}}return n&&(qe(b)&&C===0&&Ge(e,x,n,!0,b).each(P=>{b=P.container(),C=P.offset(),f=!0}),pt(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&fo(u)&&!se(u,"A")&&!q(e,u,!1)&&!q(e,u,!0)&&Ge(e,x,n,!0,u).each(P=>{b=P.container(),C=P.offset(),f=!0}))),M&&!n&&qe(b)&&C===b.data.length&&Ge(e,x,n,!1,b).each(P=>{b=P.container(),C=P.offset(),f=!0}),f&&b?$.some(De(b,C)):$.none()},lt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=De.fromRangeStart(n);return mt(e,o,!0,r).each(u=>{(!o||!De.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||mt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?$.none():$.some(r)},tt=(e,n)=>e.splitText(n),At=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&qe(n)){if(o>0&&o<n.data.length)if(r=tt(n,o),n=r.previousSibling,a>o){a=a-o;const u=tt(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(qe(n)&&o>0&&o<n.data.length&&(n=tt(n,o),o=0),qe(r)&&a>0&&a<r.data.length){const u=tt(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},We=e=>({walk:(u,f)=>xh(e,u,f),split:At,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Km(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>lt(e,u).fold(_e,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});We.compareRanges=v,We.getCaretRangeFromPoint=p,We.getSelectedNode=Wp,We.getNode=Id;const st=((e,n)=>{const o=(b,C)=>{if(!is(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const x=b.dom;Vu(x)&&(x.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const x=Js(b,e);return parseFloat(x)||0}return C},a=r,u=(b,C)=>Bn(C,(x,D)=>{const M=Js(b,D),P=M===void 0?0:parseInt(M,10);return isNaN(P)?x:x+P},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,C,x)=>{const D=u(b,x);return C>D?C-D:0}}})("height",e=>{const n=e.dom;return _d(e)?n.getBoundingClientRect().height:n.offsetHeight}),nn=e=>st.get(e),Wn=()=>ne.fromDom(document),ko=(e,n)=>e.view(n).fold(et([]),r=>{const a=e.owner(r),u=ko(e,a);return[r].concat(u)}),ns=(e,n)=>{const o=n.owner(e);return ko(n,o)};var hu=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?$.none():$.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ne.fromDom)},owner:e=>Lu(e)});const ig=e=>{const n=Wn(),o=an(n),r=ns(e,hu),a=gn(e),u=Lr(r,(f,b)=>{const C=gn(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return Q(u.left+a.left+o.left,u.top+a.top+o.top)},sd=e=>K(e)==="textarea",Go=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Aa=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Oa=(e,n)=>{const o=Fr(e);if(o.length===0||sd(e))return{element:e,offset:n};if(n<o.length&&!sd(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return sd(r)?{element:e,offset:n}:K(r)==="img"?{element:r,offset:1}:Bo(r)?{element:r,offset:Jg(r).length}:{element:r,offset:Fr(r).length}}},sl=(e,n)=>{const o=Zt(e),r=nn(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},hn=(e,n)=>{const o=Oa(e,n),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Wr+"</span>");return qo(o.element,r),sl(r,()=>Zo(r))},Ua=e=>sl(ne.fromDom(e),kt),Pr=(e,n,o,r)=>{sa(e,(a,u)=>Ud(e,n,o,r),o)},J0=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(Go(e,u))return;const f=an(n).top;o(e,n,f,r,a),Aa(e,u)},Ud=(e,n,o,r)=>{const a=ne.fromDom(e.getBody()),u=ne.fromDom(e.getDoc());pi(a);const f=hn(ne.fromDom(o.startContainer),o.startOffset);J0(e,u,n,f,r),f.cleanup()},xn=(e,n,o,r)=>{const a=ne.fromDom(e.getDoc());J0(e,a,o,Ua(n),r)},sa=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(ne.fromDom(r),ne.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},Q0=(e,n,o,r,a)=>{const u=n.pos;if(r)Pt(u.left,u.top,a);else{const f=u.top-o+n.height;Pt(-e.getBody().getBoundingClientRect().left,f,a)}},ev=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,C=a.bottom,x=C-b>=r;b<o?Q0(e,a,r,u!==!1,n):b>f?Q0(e,a,r,x?u!==!1:u===!0,n):C>f&&!x&&Q0(e,a,r,u===!0,n)},Bx=(e,n,o,r,a)=>{const u=um(n).dom.innerHeight;ev(e,n,o,u,r,a)},Xm=(e,n,o,r,a)=>{const u=um(n).dom.innerHeight;ev(e,n,o,u,r,a);const f=ig(r.element),b=Uu(window);f.top<b.y?xs(r.element,a!==!1):f.top>b.bottom&&xs(r.element,a===!0)},lg=(e,n,o)=>Pr(e,Bx,n,o),tv=(e,n,o)=>xn(e,n,Bx,o),y4=(e,n,o)=>Pr(e,Xm,n,o),k1=(e,n,o)=>xn(e,n,Xm,o),vF=(e,n,o)=>{(e.inline?tv:k1)(e,n,o)},ug=(e,n,o)=>{(e.inline?lg:y4)(e,n,o)},_1=(e,n=!1)=>e.dom.focus({preventScroll:n}),VR=e=>{const n=Wi(e).dom;return e.dom===n.activeElement},$x=(e=Wn())=>$.from(e.dom.activeElement).map(ne.fromDom),yF=e=>$x(Wi(e)).filter(n=>e.dom.contains(n.dom)),zR=(e,n)=>{const o=Bo(n)?Jg(n).length:Fr(n).length+1;return e>o?o:e<0?0:e},CF=e=>T1.range(e.start,zR(e.soffset,e.start),e.finish,zR(e.foffset,e.finish)),C4=(e,n)=>!pf(n.dom)&&(Ic(e,n)||_n(e,n)),SF=e=>n=>C4(e,n.start)&&C4(e,n.finish),wF=e=>e.inline||_t.browser.isFirefox(),UR=e=>T1.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),S4=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?$.none():$.from(n.getRangeAt(0))).map(UR)},w4=e=>{const n=um(e);return S4(n.dom).filter(SF(e))},x4=(e,n)=>$.from(n).filter(SF(e)).map(CF),WR=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),$.some(n)}catch{return $.none()}},U2=e=>{const n=wF(e)?w4(ne.fromDom(e.getBody())):$.none();e.bookmark=n.isSome()?n:e.bookmark},Ix=e=>(e.bookmark?e.bookmark:$.none()).bind(o=>x4(ne.fromDom(e.getBody()),o)).bind(WR),Lx=e=>{Ix(e).each(n=>e.selection.setRng(n))},E4={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},xF=(e,n)=>(is(n)||(n=0),setTimeout(e,n)),ZR=(e,n)=>(is(n)||(n=0),setInterval(e,n)),Pl={setEditorTimeout:(e,n,o)=>xF(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ZR(()=>{e.removed?clearInterval(r):n()},o);return r}},jR=e=>e.type==="nodechange"&&e.selectionChange,GR=(e,n)=>{const o=()=>{n.throttle()};Ko.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Ko.DOM.unbind(document,"mouseup",o)})},qR=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},EF=(e,n)=>{qR(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{jR(o)||U2(e)})},TF=e=>{const n=jg(()=>{U2(e)},0);e.on("init",()=>{e.inline&&GR(e,n),EF(e,n)}),e.on("remove",()=>{n.cancel()})};let nv;const T4=Ko.DOM,kF=e=>pt(e)&&E4.isEditorUIElement(e),k4=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Fx=(e,n)=>{const o=t1(e);return T4.getParent(n,a=>kF(a)||(o?e.dom.is(a,o):!1))!==null},_4=e=>{try{const n=Wi(ne.fromDom(e.getElement()));return $x(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},Hx=(e,n)=>{const o=n.editor;TF(o);const r=(a,u)=>{if(c2(a)&&a.inline!==!0){const f=ne.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;k4(_4(o))&&r(o,$u),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Pl.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!k4(_4(o))||a!==o)&&r(o,am),!Fx(o,_4(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),nv||(nv=a=>{const u=e.activeEditor;u&&Xv(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!Fx(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},T4.bind(document,"focusin",nv))},KR=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&nv&&(T4.unbind(document,"focusin",nv),nv=null)},_F=e=>{e.on("AddEditor",Ve(Hx,e)),e.on("RemoveEditor",Ve(KR,e))},YR=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),XR=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,AF=e=>e.collapsed?$.from(Id(e.startContainer,e.startOffset)).map(ne.fromDom):$.none(),OF=(e,n)=>AF(n).bind(o=>YS(o)?$.some(o):Ic(e,o)?$.none():$.some(e)),JR=(e,n)=>{OF(ne.fromDom(e.getBody()),n).bind(o=>ga(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},Vx=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},DF=e=>VR(e)||yF(e).isSome(),QR=e=>Me(e.iframeElement)&&VR(ne.fromDom(e.iframeElement)),eM=e=>{const n=e.getBody();return n&&DF(ne.fromDom(n))},zx=e=>{const n=Wi(ne.fromDom(e.getElement()));return $x(n).filter(o=>!k4(o.dom)&&Fx(e,o.dom)).isSome()},ov=e=>e.inline?eM(e):QR(e),tM=e=>ov(e)||zx(e),A4=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{Ix(f).each(b=>{f.selection.setRng(b),r=b})};!ov(e)&&e.hasEditableRoot()&&a(e);const u=YR(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){XR(e,u)||Vx(o),Vx(u),e.hasEditableRoot()||a(e),JR(e,r),O4(e);return}e.inline||(_t.browser.isOpera()||Vx(o),e.getWin().focus()),(_t.browser.isFirefox()||e.inline)&&(Vx(o),JR(e,r)),O4(e)},O4=e=>e.editorManager.setActive(e),nM=(e,n)=>{e.removed||(n?O4(e):A4(e))},D4=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),R4=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return $.from(u).map(ne.fromDom).map(b=>!r||!n.collapsed?wa(b,a(b,f)).getOr(b):b).bind(b=>Cn(b)?$.some(b):Yc(b).filter(Cn)).map(b=>b.dom).getOr(e)},oM=(e,n,o=!1)=>R4(e,n,!0,o,(r,a)=>Math.min(mm(r),a)),sM=(e,n,o=!1)=>R4(e,n,!1,o,(r,a)=>a>0?a-1:a),rM=(e,n)=>{const o=e;for(;e&&qe(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},RF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),qe(o)&&qe(r)&&(o.length===a?o=rM(o.nextSibling,!0):o=o.parentNode,u===0?r=rM(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=qe(f)?f.parentNode:f;return wl(b)?b:e},Ux=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||oM(u,n,n.collapsed),e.isBlock),b=e.getParent(r||sM(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let C;const x=new Hr(f,u);for(;(C=x.next())&&C!==b;)e.isBlock(C)&&a.push(C)}return b&&f!==b&&b!==u&&a.push(b),a},cM=(e,n,o)=>$.from(n).bind(r=>$.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(hx(e,f,r,!0),hx(e,f,r,!1)),f})),Wx=(e,n)=>qt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),aM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},W2=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},MF=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Cl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},iM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class ci{static create(n,o){const r=new ci(n,aM[n]||1);return o&&ct(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ce(n))return Me(n)&&ct(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new ci(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=W2(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=W2(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(iM(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||iM(f))return!1}if(f.type===8||f.type===3&&!MF(f)||f.type===3&&f.parent&&o[f.parent.name]&&Cl((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=W2(f,u));return!0}walk(n){return W2(this,null,n)}}const NF=je.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),lM=e=>ce(e.nodeValue)&&e.nodeValue.includes(Wr),uM=e=>`${e.length===0?"":`${qt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,PF=(e,n)=>n.querySelectorAll(uM(e)),dM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>lM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),mM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(lM(n)){const o=n.parentNode;return o&&zt(NF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),BF=e=>dM(e).nextNode()!==null,$F=e=>mM(e).nextNode()!==null,IF=(e,n)=>n.querySelector(uM(e))!==null,Zx=(e,n)=>{pe(PF(e,n),o=>{const r=ne.fromDom(o);tc(r,"data-mce-bogus")==="all"?Zo(r):pe(e,a=>{As(r,a)&&bs(r,a)})})},M4=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},fM=k(M4,dM),LF=k(M4,mM),gM=(e,n)=>{const o=[{condition:Ve(IF,n),action:Ve(Zx,n)},{condition:BF,action:fM},{condition:$F,action:LF}];let r=e,a=!1;return pe(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},hM=e=>{const n=Ea(e,"[data-mce-bogus]");pe(n,o=>{tc(o,"data-mce-bogus")==="all"?Zo(o):Pd(o)?(qo(o,ne.fromText(Sp)),Zo(o)):eu(o)})},pM=e=>{const n=Ea(e,"input");pe(n,o=>{bs(o,"name")})},FF=(e,n)=>{const o=Vc(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},HF=(e,n)=>{const o=e.getDoc(),r=Wi(ne.fromDom(e.getBody())),a=ne.fromTag("div",o);zs(a,"data-mce-bogus","all"),Sn(a,{position:"fixed",left:"-9999999px",top:"0"}),Ng(a,n.innerHTML),hM(a),pM(a);const u=Yv(r);Or(u,a);const f=Ki(a.dom.innerText);return Zo(a),f},bM=(e,n,o)=>{let r;return n.format==="raw"?r=je.trim(Ki(gM(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=HF(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=FF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Yb(ne.fromDom(o))&&ce(r)?je.trim(r):r},VF=(e,n)=>$.from(e.getBody()).fold(et(n.format==="tree"?new ci("body",11):""),o=>bM(e,n,o)),N4=je.makeMap,P4=e=>{const n=[];e=e||{};const o=e.indent,r=N4(e.indent_before||""),a=N4(e.indent_after||""),u=xm.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,x)=>{if(o&&r[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let D=0,M=C.length;D<M;D++){const P=C[D];n.push(" ",P.name,'="',u(P.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&a[b]&&n.length>0){const D=n[n.length-1];D.length>0&&D!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&a[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ah=(e={},n=Eo())=>{const o=P4(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:C=>{var x;o.text((x=C.value)!==null&&x!==void 0?x:"",C.raw)},8:C=>{var x;o.comment((x=C.value)!==null&&x!==void 0?x:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var x;o.doctype((x=C.value)!==null&&x!==void 0?x:"")},4:C=>{var x;o.cdata((x=C.value)!==null&&x!==void 0?x:"")},11:C=>{let x=C;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=C=>{var x;const D=f[C.type];if(D)D(C);else{const M=C.name,P=M in n.getVoidElements();let z=C.attributes;if(u&&z&&z.length>1){const G=[];G.map={};const U=n.getElementRule(C.name);if(U){for(let X=0,oe=U.attributesOrder.length;X<oe;X++){const fe=U.attributesOrder[X];if(fe in z.map){const ge=z.map[fe];G.map[fe]=ge,G.push({name:fe,value:ge})}}for(let X=0,oe=z.length;X<oe;X++){const fe=z[X].name;if(!(fe in G.map)){const ge=z.map[fe];G.map[fe]=ge,G.push({name:fe,value:ge})}}z=G}}if(o.start(M,z,P),vs(M))ce(C.value)&&o.text(C.value,!0),o.end(M);else if(!P){let G=C.firstChild;if(G){(M==="pre"||M==="textarea")&&G.type===3&&((x=G.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(G);while(G=G.next)}o.end(M)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},vM=new Set;pe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{vM.add(n)});const yM=new Set;pe(["background-color"],n=>{yM.add(n)});const CM=["font","text-decoration","text-emphasis"],zF=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),sv=(e,n)=>no(zF(e,n)),UF=e=>vM.has(e),WF=e=>yM.has(e),SM=(e,n)=>Vn(sv(e,n),o=>UF(o)),ZF=(e,n)=>SM(e,n)&&Vn(sv(e,n),o=>WF(o)),jF=e=>Bt(e,n=>Vn(CM,o=>Jo(n,o))),GF=(e,n,o)=>{const r=sv(e,n),a=sv(e,o),u=f=>{var b,C;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",D=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return $n(x)&&$n(D)&&x!==D};return Vn(r,f=>{const b=C=>Vn(C,x=>x===f);if(!b(a)&&b(CM)){const C=jF(a);return Vn(C,u)}else return u(f)})},wM=(e,n,o)=>$.from(o.container()).filter(qe).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),B4=Ve(wM,!0,Jf),$4=Ve(wM,!1,Jf),qF=e=>{const n=e.container();return qe(n)&&(n.data.length===0||zp(n.data)&&cg.isBookmarkNode(n.parentNode))},Oh=(e,n)=>o=>m2(e?0:-1,o).filter(n).isSome(),xM=e=>kp(e)&&Js(ne.fromDom(e),"display")==="block",EM=e=>go(e)&&!Tp(e),Ht=Oh(!0,xM),TM=Oh(!1,xM),rv=Oh(!0,ea),Z2=Oh(!1,ea),jx=Oh(!0,tu),I4=Oh(!1,tu),Dh=Oh(!0,EM),Rh=Oh(!1,EM),KF=e=>e.slice(0,-1),YF=(e,n,o)=>Ic(n,e)?KF(vl(e,r=>o(r)||_n(r,n))):[],j2=(e,n)=>YF(e,n,_e),Jm=(e,n)=>[e].concat(j2(e,n)),kM=(e,n,o)=>lx(e,n,o,qF),XF=e=>n=>e.isBlock(K(n)),ln=(e,n,o)=>bo(Jm(ne.fromDom(n.container()),e),XF(o)),_M=(e,n,o,r)=>kM(e,n.dom,o).forall(a=>ln(n,o,r).fold(()=>!du(a,o,n.dom),u=>!du(a,o,n.dom)&&Ic(u,ne.fromDom(a.container())))),dn=(e,n,o,r)=>ln(n,o,r).fold(()=>kM(e,n.dom,o).forall(a=>!du(a,o,n.dom)),a=>kM(e,a.dom,o).isNone()),Gx=Ve(dn,!1),JF=Ve(dn,!0),Fj=Ve(_M,!1),QF=Ve(_M,!0),Hj=e=>u1(e).exists(Pd),L4=(e,n,o,r)=>{const a=Bt(Jm(ne.fromDom(o.container()),n),f=>r.isBlock(K(f))),u=js(a).getOr(n);return xi(e,u.dom,o).filter(Hj)},F4=(e,n,o)=>u1(n).exists(Pd)||L4(!0,e,n,o).isSome(),qx=(e,n,o)=>z_(n).exists(Pd)||L4(!1,e,n,o).isSome(),tn=Ve(L4,!1),e6=Ve(L4,!0),AM=e=>De.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),OM=(e,n,o)=>{const r=Bt(Jm(ne.fromDom(n.container()),e),a=>o.isBlock(K(a)));return js(r).getOr(e)},cv=(e,n,o)=>AM(n)?$4(n):$4(n)||oi(OM(e,n,o).dom,n).exists($4),H4=(e,n,o)=>AM(n)?B4(n):B4(n)||fa(OM(e,n,o).dom,n).exists(B4),t6=e=>Ut(["pre","pre-wrap"],e),V4=e=>u1(e).bind(n=>Os(n,Cn)).exists(n=>t6(Js(n,"white-space"))),n6=(e,n)=>oi(e.dom,n).isNone(),DM=(e,n)=>fa(e.dom,n).isNone(),o6=(e,n,o)=>n6(e,n)||DM(e,n)||Gx(e,n,o)||JF(e,n,o)||qx(e,n,o)||F4(e,n,o),Vj=e=>Me(e)&&go(e)&&d2(e),s6=(e,n)=>o=>Vj(new Hr(o,e)[n]()),r6=(e,n)=>{const o=fa(e.dom,n).getOr(n),r=s6(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},c6=(e,n)=>{const o=oi(e.dom,n).getOr(n),r=s6(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},RM=(e,n,o)=>V4(n)?!1:o6(e,n,o)||cv(e,n,o)||H4(e,n,o),G2=(e,n,o)=>V4(n)?!1:Gx(e,n,o)||Fj(e,n,o)||qx(e,n,o)||cv(e,n,o)||c6(e,n),MM=e=>{const n=e.container(),o=e.offset();return qe(n)&&o<n.data.length?De(n,o+1):e},q2=(e,n,o)=>V4(n)?!1:JF(e,n,o)||QF(e,n,o)||F4(e,n,o)||H4(e,n,o)||r6(e,n),wn=(e,n,o)=>G2(e,n,o)||q2(e,MM(n),o),z4=(e,n)=>jm(e.charAt(n)),K2=(e,n)=>Jf(e.charAt(n)),NM=e=>{const n=e.container();return qe(n)&&Ls(n.data,Vr)},PM=e=>{const n=e.split("");return qt(n,(o,r)=>jm(o)&&r>0&&r<n.length-1&&D0(n[r-1])&&D0(n[r+1])?" ":o).join("")},U4=(e,n,o,r)=>{const a=n.data,u=De(n,0);return!o&&z4(a,0)&&!wn(e,u,r)?(n.data=" "+a.slice(1),!0):o&&K2(a,0)&&G2(e,u,r)?(n.data=Vr+a.slice(1),!0):!1},BM=e=>{const n=e.data,o=PM(n);return o!==n?(e.data=o,!0):!1},W4=(e,n,o,r)=>{const a=n.data,u=De(n,a.length-1);return!o&&z4(a,a.length-1)&&!wn(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&K2(a,a.length-1)&&q2(e,u,r)?(n.data=a.slice(0,-1)+Vr,!0):!1},a6=(e,n,o)=>{const r=n.container();if(!qe(r))return $.none();if(NM(n)){const a=U4(e,r,!1,o)||BM(r)||W4(e,r,!1,o);return Ia(a,n)}else if(wn(e,n,o)){const a=U4(e,r,!0,o)||W4(e,r,!0,o);return Ia(a,n)}else return $.none()},$M=e=>{const n=ne.fromDom(e.getBody());e.selection.isCollapsed()&&a6(n,De.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},IM=(e,n,o,r)=>{if(o===0)return;const a=ne.fromDom(e),u=ws(a,x=>r.isBlock(K(x))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&q2(u,De(e,e.data.length),r),C=n===0&&G2(u,De(e,0),r);e.replaceData(n,o,Sl(f,4,C,b))},Kx=(e,n,o)=>{const r=e.data.slice(n),a=r.length-di(r).length;IM(e,n,a,o)},Z4=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-ra(r).length;IM(e,n-a,a,o)},j4=(e,n,o,r,a=!0)=>{const u=ra(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),Zo(ne.fromDom(b)),r&&Kx(f,u,o),f},i6=(e,n)=>{const o=e.container(),r=e.offset();return!De.isTextPosition(e)&&o===n.parentNode&&r>De.before(n).offset()},l6=(e,n)=>i6(n,e)?De(n.container(),n.offset()-1):n,u6=e=>qe(e)?De(e,0):De.before(e),d6=e=>qe(e)?De(e,e.data.length):De.after(e),Yx=e=>Rl(e.previousSibling)?$.some(d6(e.previousSibling)):e.previousSibling?Ei(e.previousSibling):$.none(),Xx=e=>Rl(e.nextSibling)?$.some(u6(e.nextSibling)):e.nextSibling?ga(e.nextSibling):$.none(),m6=(e,n)=>$.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>oi(e,De.before(o))).orThunk(()=>fa(e,De.after(n))),f6=(e,n)=>fa(e,De.after(n)).orThunk(()=>oi(e,De.before(n))),g6=(e,n)=>Yx(n).orThunk(()=>Xx(n)).orThunk(()=>m6(e,n)),h6=(e,n)=>Xx(n).orThunk(()=>Yx(n)).orThunk(()=>f6(e,n)),p6=(e,n,o)=>e?h6(n,o):g6(n,o),b6=(e,n,o)=>p6(e,n,o).map(Ve(l6,o)),LM=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},v6=e=>n=>n.dom===e,FM=(e,n)=>n&&zt(e.schema.getBlockElements(),K(n)),y6=(e,n,o)=>{if(la(e,n)){const r=ne.fromHtml('<br data-mce-bogus="1">');return o?pe(Fr(n),a=>{y1(a)||Zo(a)}):bm(n),Or(n,r),$.some(De.before(r.dom))}else return $.none()},C6=(e,n,o,r)=>{const a=Jl(e).filter(Bo),u=Xc(e).filter(Bo);return Zo(e),qc(a,u,n,(f,b,C)=>{const x=f.dom,D=b.dom,M=x.data.length;return j4(x,D,o,r),C.container()===D?De(x,M):C}).orThunk(()=>(r&&(a.each(f=>Z4(f.dom,f.dom.length,o)),u.each(f=>Kx(f.dom,0,o))),n))},A1=(e,n)=>zt(e.schema.getTextInlineElements(),K(n)),O1=(e,n,o,r=!0,a=!1)=>{const u=b6(n,e.getBody(),o.dom),f=ws(o,Ve(FM,e),v6(e.getBody())),b=C6(o,u,e.schema,A1(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>y6(e.schema,C,a)).fold(()=>{r&&LM(e,n,b)},C=>{r&&LM(e,n,$.some(C))})},HM=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,S6=e=>HM.test(e),D1=(e,n)=>Fa(ne.fromDom(n),Qi(e))&&!Cf(e.schema,n)&&e.dom.isEditable(n),G4=e=>{var n;return Ko.DOM.getStyle(e,"direction",!0)==="rtl"||S6((n=e.textContent)!==null&&n!==void 0?n:"")},VM=(e,n,o)=>Bt(Ko.DOM.getParents(o.container(),"*",n),e),dg=(e,n,o)=>{const r=VM(e,n,o);return $.from(r[r.length-1])},zM=(e,n,o)=>{const r=ni(n,e),a=ni(o,e);return Me(r)&&r===a},ai=e=>Ju(e)||Bd(e),pu=(e,n)=>{const o=n.container(),r=n.offset();return e?Ol(o)?qe(o.nextSibling)?De(o.nextSibling,0):De.after(o):Ju(n)?De(o,r+1):n:Ol(o)?qe(o.previousSibling)?De(o.previousSibling,o.previousSibling.data.length):De.before(o):Bd(n)?De(o,r-1):n},UM=Ve(pu,!0),WM=Ve(pu,!1),ZM=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},w6=e=>{e.execCommand("delete")},Qm=e=>ZM(e,"Delete"),jM=e=>ZM(e,"ForwardDelete"),x6=e=>n=>Do(Yc(n),e,_n),Ns=e=>Qa(e)||Pf(e),R1=(e,n)=>Ic(e,n)?Os(n,Ns,x6(e)):$.none(),Mh=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},GM=(e,n,o)=>cn(ga(o),Ei(o),(r,a)=>{const u=pu(!0,r),f=pu(!1,a),b=pu(!1,n);return e?fa(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):oi(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),M1=e=>(Ft(e)?Jl(e):kd(e)).bind(M1).orThunk(()=>$.some(e)),Bl=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=M1(o).getOr(o),f=ne.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?Mh(e,r):la(e.schema,f,{checkRootAsContent:!1})&&(Xu(f),r&&e.selection.setCursorLocation(f.dom,0)),!_n(o,f)){const b=Do(Yc(f),o)?[]:Dg(f);pe(b.concat(Fr(o)),C=>{!_n(C,f)&&!Ic(C,f)&&la(e.schema,C)&&Zo(C)})}},Y2=e=>n=>_n(e,n),Lo=e=>Ea(e,"td,th"),av=(e,n)=>h1(ne.fromDom(e),n),qM=e=>cn(e.startTable,e.endTable,(n,o)=>{const r=Qv(n,u=>_n(u,o)),a=Qv(o,u=>_n(u,n));return!r&&!a?e:{...e,startTable:r?$.none():e.startTable,endTable:a?$.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),KM=e=>qM(e),q4=(e,n)=>{const o=av(e.startContainer,n),r=av(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=cn(o,r,_n).getOr(!1);return KM({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},X2=(e,n)=>({start:e,end:n}),K4=(e,n,o)=>({rng:e,table:n,cells:o}),N1=Ji.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),P1=(e,n)=>Hu(ne.fromDom(e),"td,th",n),Jx=e=>!_n(e.start,e.end),Y4=(e,n)=>h1(e.start,n).bind(o=>h1(e.end,n).bind(r=>Ia(_n(o,r),o))),YM=(e,n)=>!Jx(e)&&Y4(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),XM=(e,n)=>{const o=P1(e.startContainer,n),r=P1(e.endContainer,n);return cn(o,r,X2)},JM=e=>n=>h1(n,e).bind(o=>Ss(Lo(o)).map(r=>X2(n,r))),QM=e=>n=>h1(n,e).bind(o=>js(Lo(o)).map(r=>X2(r,n))),Nh=e=>n=>Y4(n,e).map(o=>K4(n,o,Lo(o))),X4=(e,n,o,r)=>{if(o.collapsed||!e.forall(Jx))return $.none();if(n.isSameTable){const a=e.bind(Nh(r));return $.some({start:a,end:a})}else{const a=P1(o.startContainer,r),u=P1(o.endContainer,r),f=a.bind(JM(r)).bind(Nh(r)),b=u.bind(QM(r)).bind(Nh(r));return $.some({start:f,end:b})}},Qx=(e,n)=>_s(e,o=>_n(o,n)),J4=e=>cn(Qx(e.cells,e.rng.start),Qx(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),E6=(e,n,o)=>e.exists(r=>YM(r,o)&&O2(r.start,n)),Q4=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},eN=(e,n,o,r)=>X4(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=J4(a).getOr([]);if(u&&a.cells.length===f.length)return $.some(N1.fullTable(a.table));if(f.length>0){if(u)return $.some(N1.partialTable(f,$.none()));{const b=Q4(o,n);return $.some(N1.partialTable(f,$.some({...n,rng:b})))}}else return $.none()}),tN=(e,n,o,r)=>X4(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(J4).getOr([]),b=u.bind(J4).getOr([]);if(f.length>0&&b.length>0){const C=Q4(o,n);return $.some(N1.multiTable(f,b,C))}else return $.none()}),eE=(e,n)=>{const o=Y2(e),r=XM(n,o),a=q4(n,o);return E6(r,n,o)?r.map(u=>N1.singleCellTable(n,u.start)):a.isMultiTable?tN(r,a,n,o):eN(r,a,n,o)},eA=e=>pe(e,n=>{bs(n,"contenteditable"),Xu(n)}),nN=(e,n)=>$.from(e.dom.getParent(n,e.dom.isBlock)).map(ne.fromDom),oN=(e,n,o)=>{o.each(r=>{n?Zo(r):(Xu(r),e.selection.setCursorLocation(r.dom,0))})},tE=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),nE(e,a,n,!1).each(u=>u())},tA=e=>{const n=yh(e),o=ne.fromDom(e.selection.getNode());kb(o.dom)&&la(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Vn(n,r=>_n(r,o))&&zs(o,"data-mce-selected","1")},nA=(e,n,o)=>$.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=nN(e,f?u.endContainer:u.startContainer);u.deleteContents(),oN(e,f,b.filter(Ve(la,e.schema)));const C=f?n[0]:n[n.length-1];return tE(e,C,r,f),la(e.schema,C)?$.none():$.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);eA(a),tA(e)}),sN=(e,n,o,r)=>$.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];tE(e,u,a,!0),tE(e,f,a,!1);const b=la(e.schema,u)?n:n.slice(1),C=la(e.schema,f)?o:o.slice(0,-1);eA(b.concat(C)),r.deleteContents(),tA(e)}),nE=(e,n,o,r=!0)=>$.some(()=>{Bl(e,n,o,r)}),rN=(e,n)=>$.some(()=>O1(e,!1,n)),cN=(e,n,o)=>eE(n,o).bind(r=>r.fold(Ve(nE,e),Ve(rN,e),Ve(nA,e),Ve(sN,e))),oA=(e,n)=>J2(e,n),aN=(e,n,o,r)=>oE(n,r).fold(()=>cN(e,n,o),a=>oA(e,a)),iN=(e,n,o)=>{const r=ne.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?nA(e,o,$.none()):aN(e,r,a,n)},sA=(e,n)=>bo(Jm(n,e),Vp),oE=(e,n)=>bo(Jm(n,e),ec("caption")),lN=(e,n,o,r,a)=>Wm(o,e.getBody(),a).bind(u=>sA(n,ne.fromDom(u.getNode())).bind(f=>_n(f,r)?$.none():$.some(kt))),J2=(e,n)=>$.some(()=>{Xu(n),e.selection.setCursorLocation(n.dom,0)}),rA=(e,n,o,r)=>ga(e.dom).bind(a=>Ei(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),sE=(e,n)=>J2(e,n),cA=(e,n,o)=>oE(e,ne.fromDom(o.getNode())).fold(()=>$.some(kt),r=>Ia(!_n(r,n),kt)),rE=(e,n,o,r,a)=>Wm(o,e.getBody(),a).fold(()=>$.some(kt),u=>rA(r,o,a,u)?sE(e,r):cA(n,r,u)),uN=(e,n,o,r)=>{const a=De.fromRangeStart(e.selection.getRng());return sA(o,r).bind(u=>la(e.schema,u,{checkRootAsContent:!1})?J2(e,u):lN(e,o,n,u,a))},cE=(e,n,o,r)=>{const a=De.fromRangeStart(e.selection.getRng());return la(e.schema,r)?J2(e,r):rE(e,o,n,r,a)},aE=(e,n)=>e?jx(n):I4(n),Q2=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return aE(n,o)||xi(n,e.getBody(),o).exists(r=>aE(n,r))},aA=(e,n,o)=>{const r=ne.fromDom(e.getBody());return oE(r,o).fold(()=>uN(e,n,r,o).orThunk(()=>Ia(Q2(e,n),kt)),a=>cE(e,n,r,a))},iE=(e,n)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=yh(e);return e.selection.isCollapsed()&&r.length===0?aA(e,n,o):iN(e,o,r)},rd=(e,n)=>{let o=n;for(;o&&o!==e;){if(Fe(o)||go(o))return o;o=o.parentNode}return null},iA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],lA=je.each,Ph=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const D={};return lA(n.getAttribs(x),M=>{const P=M.nodeName.toLowerCase();P!=="style"&&!a(P)&&(D[P]=n.getAttrib(x,P))}),D},C=(x,D)=>{for(const M in x)if(zt(x,M)){const P=D[M];if(fn(P)||x[M]!==P)return!1;delete D[M]}for(const M in D)if(zt(D,M))return!1;return!0};return pt(u)&&pt(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!si(u)&&!si(f)},a=u=>Vn(iA,f=>Jo(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},mg=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),dN=e=>e.name==="summary",T6=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},mN=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const C=r.nodes[a];C?C.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const x=r.attributes[C];x?x.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},fN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&T6(o,a=>{mN(e,n,a,r)}),r},uA=(e,n)=>{const o=(r,a)=>{ct(r,u=>{const f=Tr(u.nodes);pe(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const x=f[C];(!(a?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||Tn(x.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},gN=(e,n,o,r={})=>{const a=fN(e,n,o);uA(a,r)},dA=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new ci("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new ci("#text",3)).value=Vr},Bh=e=>{var n;return $h(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Vr},$h=(e,n)=>{const o=e==null?void 0:e.firstChild;return Me(o)&&o===e.lastChild&&o.name===n},zj=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},jr=(e,n,o,r)=>r.isEmpty(n,o,a=>zj(e,a)),k6=(e,n)=>Me(e)&&(n(e)||e.name==="br"),_6=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return $.from(n)},Wd=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&Wd(a,n,o);e.unwrap()}},uo=(e,n,o,r=kt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=je.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,x=D=>D!==o&&!b[D.name];for(let D=0;D<e.length;D++){const M=e[D];let P,z,G;if(!M.parent||C.has(M))continue;if(a[M.name]&&M.parent.name==="li"){let X=M.next;for(;X&&a[X.name];){X.name="li",C.add(X),M.parent.insert(X,M.parent);X=X.next}M.unwrap();continue}const U=[M];for(P=M.parent;P&&!n.isValidChild(P.name,M.name)&&x(P);P=P.parent)U.push(P);if(P&&U.length>1)if(mA(n,M,P))Wd(M,n);else{U.reverse(),z=U[0].clone(),r(z);let X=z;for(let oe=0;oe<U.length-1;oe++){n.isValidChild(X.name,U[oe].name)&&oe>0?(G=U[oe].clone(),r(G),X.append(G)):G=X;for(let fe=U[oe].firstChild;fe&&fe!==U[oe+1];){const ge=fe.next;G.append(fe),fe=ge}X=G}jr(n,u,f,z)?P.insert(M,U[0],!0):(P.insert(z,U[0],!0),P.insert(M,z)),P=U[0],(jr(n,u,f,P)||$h(P,"br"))&&P.empty().remove()}else if(M.parent){if(M.name==="li"){let X=M.prev;if(X&&(X.name==="ul"||X.name==="ol")){X.append(M);continue}if(X=M.next,X&&(X.name==="ul"||X.name==="ol")&&X.firstChild){X.insert(M,X.firstChild,!0);continue}const oe=new ci("ul",1);r(oe),M.wrap(oe);continue}if(n.isValidChild(M.parent.name,"div")&&n.isValidChild("div",M.name)){const X=new ci("div",1);r(X),M.wrap(X)}else Wd(M,n)}}},Uj=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},mA=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&Uj(o,"a")?!0:dN(o)&&mg(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,A6=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},Cs=e=>{const n=De.fromRangeStart(e),o=De.fromRangeEnd(e),r=e.commonAncestorContainer;return xi(!1,r,o).map(a=>!du(n,o,r)&&du(n,a,r)?A6(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},lE=e=>e.collapsed?e:Cs(e),eC=e=>Me(e.firstChild)&&e.firstChild===e.lastChild,tC=e=>e.name==="br"||e.value===Vr,nC=(e,n)=>e.getBlockElements()[n.name]&&eC(n)&&tC(n.firstChild),oC=(e,n)=>{const o=e.getNonEmptyElements();return Me(n)&&(n.isEmpty(o)||nC(e,n))},hN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),oC(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},Wj=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},Zj=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return Wj(a)},jj=e=>{var n;return Bt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},Gj=e=>e.data===Vr||fo(e),O6=e=>Me(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Gj(e.firstChild),qj=e=>!e.firstChild||O6(e),D6=e=>e.length>0&&qj(e[e.length-1])?e.slice(0,-1):e,fA=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},Kj=(e,n)=>!!fA(e,n),R6=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},Qs=(e,n)=>{const o=De.before(e),a=zc(n).next(o);return a?a.toRange():null},gA=(e,n)=>{const o=De.after(e),a=zc(n).prev(o);return a?a.toRange():null},pN=(e,n,o,r)=>{const a=R6(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),je.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),gA(n[n.length-1],o)},M6=(e,n,o)=>{const r=e.parentNode;return r&&je.each(n,a=>{r.insertBefore(a,e)}),Qs(e,o)},N6=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),gA(n[0],o)),P6=(e,n,o,r)=>{const a=Zj(n,e,r),u=fA(n,o.startContainer),f=D6(jj(a.firstChild)),b=1,C=2,x=n.getRoot(),D=M=>{const P=De.fromRangeStart(o),z=zc(n.getRoot()),G=M===b?z.prev(P):z.next(P),U=G==null?void 0:G.getNode();return U?fA(n,U)!==u:!0};return u?D(b)?M6(u,f,x):D(C)?N6(u,f,x,n):pN(u,f,x,o):null},rl=["pre"],cd=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,x=Ut(rl,u.name);if(C&&x){const D=u.attr("contenteditable")!=="false",M=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,P=$.from(rd(r,o)).forall(Fe);return D&&M&&P}else return!1},uE=kb,hA=(e,n,o)=>{if(Me(o)){const r=e.getParent(n.endContainer,uE);return o===r&&O2(ne.fromDom(o),n)}else return!1},pA=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},dE=(e,n,o)=>{$.from(e.getParent(n,"td,th")).map(ne.fromDom).each(r=>e_(r,o))},bN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=Ph(e),f="*[data-mce-fragment]",b=r.select(f);je.each(b,C=>{const x=P=>Me(o[P.nodeName.toLowerCase()]),D=P=>P.childNodes.length===1;if((P=>!(SM(r,P)||ZF(r,P)))(C)&&x(C)&&D(C)){const P=sv(r,C),z=(oe,fe)=>Yo(oe,ge=>Ut(fe,ge)),G=oe=>D(C)&&r.is(oe,f)&&x(oe)&&(oe.nodeName===C.nodeName&&z(P,sv(r,oe))||G(oe.children[0])),U=oe=>Me(oe)&&oe!==a&&(u.compare(C,oe)||U(oe.parentElement)),X=oe=>Me(oe)&&oe!==a&&r.is(oe,f)&&(GF(r,C,oe)||X(oe.parentElement));(G(C.children[0])||U(C.parentElement)&&!X(C.parentElement))&&r.remove(C,!0)}})}},sC=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},mE=e=>{je.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},bA=e=>!!e.getAttribute("data-mce-fragment"),vN=(e,n)=>Me(n)&&!e.schema.getVoidElements()[n.nodeName],rC=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=rd(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let x=f.createRng();const D=n.previousSibling;if(qe(D)){x.setStart(D,(r=(o=D.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const z=n.nextSibling;qe(z)&&(D.appendData(z.data),(a=z.parentNode)===null||a===void 0||a.removeChild(z))}else x.setStartBefore(n),x.setEndBefore(n);const M=z=>{let G=De.fromRangeStart(z);return G=zc(e.getBody()).next(G),G==null?void 0:G.toRange()},P=f.getParent(n,f.isBlock);if(f.remove(n),P&&f.isEmpty(P)){const z=uE(P);bm(ne.fromDom(P)),x.setStart(P,0),x.setEnd(P,0),!z&&!bA(P)&&(u=M(x))?(x=u,f.remove(P)):f.add(P,f.create("br",z?{}:{"data-mce-bogus":"1"}))}b.setRng(x)},B6=e=>{const n=e.dom,o=lE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,uE);hA(n,o,r)?nE(e,o,ne.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&qe(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},$6=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return $.some(n);return $.none()},Zd=(e,n,o)=>{var r;return Vn(o.children(),mg)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},cl=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,x=Ah({validate:!0},e.schema),D='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Ki(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,D);let M=u.getRng();const P=M.startContainer,z=e.getBody();P===z&&u.isCollapsed()&&f.isBlock(z.firstChild)&&vN(e,z.firstChild)&&f.isEmpty(z.firstChild)&&(M=f.createRng(),M.setStart(z.firstChild,0),M.setEnd(z.firstChild,0),u.setRng(M)),u.isCollapsed()||B6(e);const G=u.getNode(),U={context:G.nodeName.toLowerCase(),data:o.data,insert:!0},X=b.parse(n,U);if(o.paste===!0&&hN(e.schema,X)&&Kj(f,G))return M=P6(x,f,u.getRng(),X),M&&u.setRng(M),n;o.paste===!0&&cd(f,X,G,e.getBody())&&((r=X.firstChild)===null||r===void 0||r.unwrap()),sC(X);let oe=X.lastChild;if(oe&&oe.attr("id")==="mce_marker"){const fe=oe;for(oe=oe.prev;oe&&oe.name!=="table";oe=oe.walk(!0))if(oe.type===3||!f.isBlock(oe.name)){oe.parent&&e.schema.isValidChild(oe.parent.name,"span")&&oe.parent.insert(fe,oe,oe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(G),!U.invalid&&!Zd(f,G,X))n=x.serialize(X),pA(e,n,G);else{e.selection.setContent(D);let fe=u.getNode(),ge;const be=e.getBody();for($g(fe)?fe=ge=be:ge=fe;ge&&ge!==be;)fe=ge,ge=ge.parentNode;n=fe===be?be.innerHTML:f.getOuterHTML(fe);const He=b.parse(n),Qe=$6(He),yt=Qe.bind(_6).getOr(He);Qe.each(Ct=>Ct.replace(X));const Re=X.children(),Ee=(a=X.parent)!==null&&a!==void 0?a:He;X.unwrap();const Ue=Bt(Re,Ct=>mA(e.schema,Ct,Ee));uo(Ue,e.schema,yt),gN(b.getNodeFilters(),b.getAttributeFilters(),He),n=x.serialize(He),fe===be?f.setHTML(be,n):f.setOuterHTML(fe,n)}return bN(e,C),rC(e,f.get("mce_marker")),mE(e.getBody()),dE(f,u.getStart(),e.schema),iy(e.schema,e.getBody(),u.getStart()),n},Ih=e=>e instanceof ci,bu=e=>{ov(e)&&ga(e.getBody()).each(n=>{const o=n.getNode(),r=tu(o)?ga(o).getOr(n):n;e.selection.setRng(r.toRange())})},vA=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&bu(e)},os=(e,n,o,r)=>{if(o=Ki(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Vc(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Im(e),o)):o||(o=a),vA(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Ah({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Yb(ne.fromDom(n))?o:je.trim(o);return vA(e,a,r.no_selection),{content:a,html:a}}},I6=(e,n,o,r)=>{gN(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=Ah({validate:!1},e.schema).serialize(o),u=Ki(Yb(ne.fromDom(n))?a:je.trim(a));return vA(e,u,r.no_selection),{content:o,html:u}},B1=(e,n,o)=>$.from(e.getBody()).map(r=>Ih(n)?I6(e,r,n,o):os(e,r,n,o)).getOr({content:n,html:Ih(o.content)?"":o.content}),iv=e=>re(e)?e:_e,yN=(e,n,o)=>{let r=e.dom;const a=iv(o);for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return $.none()},cC=(e,n,o)=>{const r=n(e),a=iv(o);return r.orThunk(()=>a(e)?$.none():yN(e,n,a))},aC=$0,CN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(tl(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},iC=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>CN(e,b,o)?!0:b.parentNode===u||!!jd(e,b,o,r,!0));return!!jd(e,f,o,r,a)},fE=(e,n,o)=>cc(o)&&aC(n,o.inline)||od(o)&&aC(n,o.block)?!0:tl(o)?pt(n)&&e.is(n,o.selector):!1,yA=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(re(o.onmatch))return o.onmatch(n,o,r);if(f){if(Kl(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):R2(e,n,f[C]))return!0}else for(const C in f)if(zt(f,C)){const x=b?e.getAttrib(n,C):R2(e,n,C),D=ng(f[C],u),M=Tn(x)||ur(x);if(M&&Tn(D))continue;if(a&&M&&!o.exact||(!a||o.exact)&&!aC(x,qm(D,C)))return!1}}return!0},jd=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&pt(n))for(let b=0;b<u.length;b++){const C=u[b];if(fE(e.dom,n,C)&&yA(f,n,C,"attributes",a,r)&&yA(f,n,C,"styles",a,r)){const x=C.classes;if(x){for(let D=0;D<x.length;D++)if(!e.dom.hasClass(n,ng(x[D],r)))return}return C}}},lC=(e,n,o,r,a)=>{if(r)return iC(e,r,n,o,a);if(r=e.selection.getNode(),iC(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&iC(e,u,n,o,a))},SN=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!a[C]&&jd(e,f,C,o)&&(a[C]=!0,r.push(C))}},e.dom.getRoot()),r},gE=(e,n)=>{const o=a=>_n(a,ne.fromDom(e.getBody())),r=(a,u)=>jd(e,a.dom,u)?$.some(u):$.none();return $.from(e.selection.getStart(!0)).bind(a=>cC(ne.fromDom(a),u=>Rc(n,f=>r(u,f)),o)).getOrNull()},L6=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=og(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!tl(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},F6=(e,n,o)=>Bn(o,(r,a)=>{const u=vx(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),uC=Wr,H6=(e,n)=>e.importNode(n,!0),wN=e=>{if(e){const n=new Hr(e,e);for(let o=n.current();o;o=n.next())if(qe(o))return o}return null},hE=e=>{const n=ne.fromTag("span");return dr(n,{id:k0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Or(n,ne.fromText(uC)),n},V6=e=>{const n=wN(e);return n&&n.data.charAt(0)===uC&&n.deleteData(0,1),n},CA=(e,n,o)=>{const r=e.dom,a=e.selection;if(Sx(n))O1(e,!1,ne.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,x=u.endContainer,D=u.endOffset,M=V6(n);r.remove(n,!0),b===M&&C>0&&u.setStart(M,C-1),x===M&&D>0&&u.setEnd(M,D-1),f&&r.isEmpty(f)&&Xu(ne.fromDom(f)),a.setRng(u)}},pE=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)CA(e,n,o);else if(n=Yf(e.getBody(),a.getStart()),!n)for(;n=r.get(k0);)CA(e,n,o)},z6=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Ve(b1,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(_y(ne.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},SA=(e,n)=>(e.appendChild(n),n),lv=(e,n)=>{var o;const r=Lr(e,(u,f)=>SA(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return SA(r,a.createTextNode(uC))},U6=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,C=Bt(no(f.get()),M=>M!==r&&!Ls(M,"removeformat")),x=F6(e,o,C);if(Bt(x,M=>!yx(e,M,r)).length>0){const M=o.cloneNode(!1);return b.add(n,M),f.remove(r,a,M,u),b.remove(M),$.some(M)}else return $.none()},xN=e=>Qg(e,Jg(e).replace(new RegExp(`${Vr}$`)," ")),wA=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Jl(ne.fromDom(n)).each(r=>{Bo(r)?xN(r):bp(r,a=>Bo(a)).each(a=>{Bo(a)&&xN(a)})})};e.once("input",r=>{r.data&&!Jf(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},W6=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=Yf(e.getBody(),a.getStart());const D=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&D.test(x.charAt(b))&&D.test(x.charAt(b-1))){const M=a.getBookmark();f.collapse(!0);let P=Km(e.dom,f,u);P=At(P),e.formatter.apply(n,o,P),a.moveToBookmark(M)}else{let M=r?wN(r):null;(!r||(M==null?void 0:M.data)!==uC)&&(r=H6(e.getDoc(),hE(!0).dom),M=r.firstChild,f.insertNode(r),b=1,wA(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(M,b)}},EN=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),x=C.startContainer,D=C.startOffset;let M=x;qe(x)&&(D!==x.data.length&&(f=!0),M=M.parentNode);const P=[];let z;for(;M;){if(jd(e,M,n,o,r)){z=M;break}M.nextSibling&&(f=!0),P.push(M),M=M.parentNode}if(z)if(f){const G=u.getBookmark();C.collapse(!0);let U=Km(a,C,b,!0);U=At(U),e.formatter.remove(n,o,U,r),u.moveToBookmark(G)}else{const G=Yf(e.getBody(),z),U=Me(G)?a.getParents(z.parentNode,Ke,G):[],X=hE(!1).dom;z6(e,X,G??z);const oe=U6(e,X,z,n,o,r),fe=lv([...P,...oe.toArray(),...U],X);G&&CA(e,G,Me(G)),u.setCursorLocation(fe,1),wA(e,X),a.isEmpty(z)&&a.remove(z)}},vu=(e,n,o)=>{const r=e.selection,a=e.getBody();pE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===uC&&pE(e,Yf(a,r.getStart()),!0),(n===37||n===39)&&pE(e,Yf(a,r.getStart()),!0)},Z6=e=>qe(e)&&jc(e.data,Vr),TN=e=>{e.on("mouseup keydown",n=>{vu(e,n.keyCode,Z6(e.selection.getRng().endContainer))})},bE=e=>{const n=hE(!1),o=lv(e,n.dom);return{caretContainer:n,caretPosition:De(o,0)}},vE=(e,n)=>{const{caretContainer:o,caretPosition:r}=bE(n);return qo(ne.fromDom(e),o),Zo(ne.fromDom(e)),r},kN=(e,n)=>{const{caretContainer:o,caretPosition:r}=bE(n);return e.insertNode(o.dom),r},xA=(e,n)=>{if(Ti(n.dom))return!1;const o=e.schema.getTextInlineElements();return zt(o,K(n))&&!Ti(n.dom)&&!Od(n.dom)},dC={},_N=xl(["pre"]),AN=(e,n)=>{dC[e]||(dC[e]=[]),dC[e].push(n)},ON=(e,n)=>{zt(dC,e)&&pe(dC[e],o=>{o(n)})};AN("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return _N(f)&&Ut(a,f)},r=(a,u)=>{const f=ne.fromDom(u),b=Lu(f).dom;Zo(f),zu(ne.fromDom(a),[ne.fromTag("br",b),ne.fromTag("br",b),...Fr(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Bt(Bt(a,_N),o(a));pe(u,f=>{r(f.previousSibling,f)})}});const $l=["fontWeight","fontStyle","color","fontSize","fontFamily"],j6=e=>ut(e.styles)&&Vn(no(e.styles),n=>Ut($l,n)),G6=e=>bo(e,n=>cc(n)&&n.inline==="span"&&j6(n)),q6=(e,n)=>{const o=e.get(n);return Zn(o)?G6(o):$.none()},yE=(e,n)=>oi(n,De.fromRangeStart(e)).isNone(),DN=(e,n)=>fa(n,De.fromRangeEnd(e)).exists(o=>!fo(o.getNode())||fa(n,o).isSome())===!1,K6=e=>n=>El(n)&&e.isEditable(n),Y6=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return yE(o,n[0])&&DN(o,n[0])?n:[];{const r=js(n).filter(f=>yE(o,f)).toArray(),a=Ss(n).filter(f=>DN(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},EA=e=>Bt(Y6(e),K6(e.dom)),ad=e=>Bt(e.getSelectedBlocks(),K6(e.dom)),mC=je.each,uv=e=>pt(e)&&!si(e)&&!Ti(e)&&!Od(e),CE=(e,n)=>{for(let o=e;o;o=o[n]){if(qe(o)&&$n(o.data))return e;if(pt(o)&&!si(o))return o}return e},RN=(e,n,o)=>{const r=Ph(e),a=wl(n)&&e.dom.isEditable(n),u=wl(o)&&e.dom.isEditable(o);if(a&&u){const f=CE(n,"previousSibling"),b=CE(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const x=C;C=C.nextSibling,f.appendChild(x)}return e.dom.remove(b),je.each(je.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},TA=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=RN(e,D2(r),r))!==null&&a!==void 0?a:r;RN(e,u,D2(u,!0))}},X6=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";mC(e.select(r,o),a=>{uv(a)&&e.isEditable(a)&&mC(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},SE=(e,n,o)=>{mC(e.childNodes,r=>{uv(r)&&(n(r)&&o(r),r.hasChildNodes()&&SE(r,n,o))})},kA=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},MN=(e,n)=>o=>!!(o&&R2(e,o,n)),_A=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),kA(e,r)},$1=Ji.generate([{keep:[]},{rename:["name"]},{removed:[]}]),I1=/^(src|href|style)$/,wE=je.each,xE=$0,NN=e=>/^(TR|TH|TD)$/.test(e.nodeName),PN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),BN=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(pt(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return qe(r)&&o&&a>=r.data.length&&(r=new Hr(r,e.getBody()).next()||r),qe(r)&&!o&&a===0&&(r=new Hr(r,e.getBody()).prev()||r),r},$N=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return NN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},AA=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},IN=(e,n,o,r,a)=>{const u=ne.fromDom(n),f=ne.fromDom(e.create(r,a)),b=o?dm(u):Sb(u);return zu(f,b),o?(qo(u,f),Ad(f,u)):(Zi(u,f),Or(f,u)),f.dom},LN=(e,n)=>n.links&&e.nodeName==="A",FN=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Vc(e);od(o)&&r===u.getRoot()&&(!o.list_block||!xE(n,o.list_block))&&pe(Tr(n.childNodes),b=>{tg(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=AA(u,b,f),u.setAttribs(a,Im(e))):a=null}),!(K_(o)&&!xE(o.inline,n))&&u.remove(n,!0)},EE=(e,n,o)=>is(e)?{name:n,value:null}:{name:e,value:ng(n,o)},Lh=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},HN=(e,n,o,r,a)=>{let u=!1;wE(o.styles,(f,b)=>{const{name:C,value:x}=EE(b,f,r),D=qm(x,C);(o.remove_similar||le(x)||!pt(a)||xE(R2(e,a,C),D))&&e.setStyle(n,C,""),u=!0}),u&&Lh(e,n)},J6=(e,n,o)=>{n==="removeformat"?pe(ad(e.selection),r=>{pe($l,a=>e.dom.setStyle(r,a,"")),Lh(e.dom,r)}):q6(e.formatter,n).each(r=>{pe(ad(e.selection),a=>HN(e.dom,a,r,o,null))})},fC=(e,n,o,r,a)=>{const u=e.dom,f=Ph(e),b=e.schema;if(cc(n)&&Gi(b,n.inline)&&Cf(b,r)&&r.parentElement===e.getBody())return FN(e,r,n),$1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!fE(u,r,n)&&!LN(r,n))return $1.keep();const C=r,x=n.preserve_attributes;if(cc(n)&&n.remove==="all"&&Zn(x)){const D=Bt(u.getAttribs(C),M=>Ut(x,M.name.toLowerCase()));if(u.removeAllAttribs(C),pe(D,M=>u.setAttrib(C,M.name,M.value)),D.length>0)return $1.rename("span")}if(n.remove!=="all"){HN(u,C,n,o,a),wE(n.attributes,(M,P)=>{const{name:z,value:G}=EE(P,M,o);if(n.remove_similar||le(G)||!pt(a)||xE(u.getAttrib(a,z),G)){if(z==="class"){const U=u.getAttrib(C,z);if(U){let X="";if(pe(U.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(X+=(X?" ":"")+oe)}),X){u.setAttrib(C,z,X);return}}}if(I1.test(z)&&C.removeAttribute("data-mce-"+z),z==="style"&&xl(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(z),u.setStyle(C,"list-style-type","none");return}z==="class"&&C.removeAttribute("className"),C.removeAttribute(z)}}),wE(n.classes,M=>{M=ng(M,o),(!pt(a)||u.hasClass(a,M))&&u.removeClass(C,M)});const D=u.getAttribs(C);for(let M=0;M<D.length;M++){const P=D[M].nodeName;if(!f.isAttributeInternal(P))return $1.keep()}}return n.remove!=="none"?(FN(e,C,n),$1.removed()):$1.keep()},VN=(e,n,o,r,a)=>{let u;return n.parentNode&&pe(og(e.dom,n.parentNode).reverse(),f=>{if(!u&&pt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=jd(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},zN=(e,n,o,r)=>fC(e,n,o,r,r).fold(et(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),et(null)),Q6=(e,n,o,r,a,u,f,b)=>{var C,x;let D,M;const P=e.dom;if(o){const z=o.parentNode;for(let G=r.parentNode;G&&G!==z;G=G.parentNode){let U=P.clone(G,!1);for(let X=0;X<n.length&&(U=zN(e,n[X],b,U),U!==null);X++);U&&(D&&U.appendChild(D),M||(M=U),D=U)}(!f.mixed||!P.isBlock(o))&&(r=(C=P.split(o,r))!==null&&C!==void 0?C:r),D&&M&&((x=a.parentNode)===null||x===void 0||x.insertBefore(D,a),M.appendChild(a),cc(f)&&TA(e,f,b,D))}return r},UN=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,x=U=>{const X=VN(e,U,n,o,a);return Q6(e,u,X,U,U,!0,f,o)},D=U=>si(U)&&pt(U)&&(U.id==="_start"||U.id==="_end"),M=U=>Vn(u,X=>Gd(e,X,o,U,U)),P=U=>{const X=Tr(U.childNodes),fe=M(U)||Vn(u,He=>fE(b,U,He)),ge=U.parentNode;if(!fe&&Me(ge)&&mu(f)&&M(ge),f.deep&&X.length)for(let He=0;He<X.length;He++)P(X[He]);pe(["underline","line-through","overline"],He=>{pt(U)&&e.dom.getStyle(U,"text-decoration")===He&&U.parentNode&&M2(b,U.parentNode)===He&&Gd(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:He}},void 0,U)})},z=U=>{const X=b.get(U?"_start":"_end");if(X){let oe=X[U?"firstChild":"lastChild"];return D(oe)&&(oe=oe[U?"firstChild":"lastChild"]),qe(oe)&&oe.data.length===0&&(oe=U?X.previousSibling||X.nextSibling:X.nextSibling||X.previousSibling),b.remove(X,!0),oe}else return null},G=U=>{let X,oe,fe=Km(b,U,u,U.collapsed);if(f.split){if(fe=At(fe),X=BN(e,fe,!0),oe=BN(e,fe),X!==oe){if(X=$N(X,!0),oe=$N(oe,!1),PN(b,X,oe)){const be=$.from(X.firstChild).getOr(X);x(IN(b,be,!0,"span",{id:"_start","data-mce-type":"bookmark"})),z(!0);return}if(PN(b,oe,X)){const be=$.from(oe.lastChild).getOr(oe);x(IN(b,be,!1,"span",{id:"_end","data-mce-type":"bookmark"})),z(!1);return}X=AA(b,X,"span",{id:"_start","data-mce-type":"bookmark"}),oe=AA(b,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ge=b.createRng();ge.setStartAfter(X),ge.setEndBefore(oe),xh(b,ge,be=>{pe(be,He=>{!si(He)&&!si(He.parentNode)&&x(He)})}),x(X),x(oe),X=z(!0),oe=z()}else X=oe=x(X);fe.startContainer=X.parentNode?X.parentNode:X,fe.startOffset=b.nodeIndex(X),fe.endContainer=oe.parentNode?oe.parentNode:oe,fe.endOffset=b.nodeIndex(oe)+1}xh(b,fe,ge=>{pe(ge,P)})};if(r){if(eg(r)){const U=b.createRng();U.setStartBefore(r),U.setEndAfter(r),G(U)}else G(r);S1(e,n,r,o);return}!C.isCollapsed()||!cc(f)||yh(e).length?(Gm(e,()=>Ch(e,G),U=>cc(f)&&lC(e,n,o,U)),e.nodeChanged()):EN(e,n,o,a),J6(e,n,o),S1(e,n,r,o)},WN=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&UN(e,n,o,r,a)},Gd=(e,n,o,r,a)=>fC(e,n,o,r,a).fold(_e,u=>(e.dom.rename(r,u),!0),Ke),OA=je.each,ZN=(e,n,o,r)=>{const a=u=>{if(wl(u)&&pt(u.parentNode)&&e.isEditable(u)){const f=M2(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(je.walk(r,a,"childNodes"),a(r))},jN=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=MN(e,"fontSize");SE(r,u=>a(u)&&e.isEditable(u),_A(e,"backgroundColor",ng(n.styles.backgroundColor,o)))}},TE=(e,n,o,r)=>{if(cc(n)&&(n.inline==="sub"||n.inline==="sup")){const a=MN(e,"fontSize");SE(r,f=>a(f)&&e.isEditable(f),_A(e,"fontSize",""));const u=Bt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},GN=(e,n,o,r)=>{OA(n,a=>{cc(a)&&OA(e.dom.select(a.inline,r),u=>{uv(u)&&Gd(e,a,o,u,a.exact?u:null)}),X6(e.dom,a,r)})},e8=(e,n,o,r,a)=>{const u=a.parentNode;jd(e,u,o,r)&&Gd(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>jd(e,f,o,r)?(Gd(e,n,r,a),!0):!1)},gC=je.each,t8=(e,n,o,r)=>{if(Rw(e)&&cc(n)&&o.parentNode){const a=my(e.schema),u=ES(ne.fromDom(o),f=>Ti(f.dom));return $s(a,r)&&oc(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},qN=(e,n,o,r)=>{if(gC(o.styles,(a,u)=>{e.setStyle(n,u,ng(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},kE=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,x=(G,U=u)=>{re(U.onformat)&&U.onformat(G,U,o,r),qN(b,G,U,o),gC(U.attributes,(X,oe)=>{b.setAttrib(G,oe,ng(X,o))}),gC(U.classes,X=>{const oe=ng(X,o);b.hasClass(G,oe)||b.addClass(G,oe)})},D=(G,U)=>{let X=!1;return gC(G,oe=>tl(oe)?b.getContentEditable(U)==="false"&&!oe.ceFalseOverride||Me(oe.collapsed)&&oe.collapsed!==f?!0:b.is(U,oe.selector)&&!Ti(U)?(x(U,oe),X=!0,!1):!0:!1),X},M=G=>{if(ce(G)){const U=b.create(G);return x(U),U}else return null},P=(G,U,X)=>{const oe=[];let fe=!0;const ge=u.inline||u.block,be=M(ge),He=Re=>Cx(u)&&jd(e,Re,n,o),Qe=(Re,Ee,Ue)=>{const Ct=I0(u)&&b1(e.schema,Re)&&tg(e,Ee,ge);return Ue&&Ct},yt=(Re,Ee,Ue,Ct)=>{const It=Re.nodeName.toLowerCase(),On=tg(e,ge,It)&&tg(e,Ee,ge),Dn=!X&&qe(Re)&&zp(Re.data),vo=Ti(Re),Ro=!cc(u)||!G.isBlock(Re);return(Ue||Ct)&&On&&!Dn&&!vo&&Ro};xh(G,U,Re=>{let Ee;const Ue=Ct=>{let It=!1,On=fe,Dn=!1;const vo=Ct.parentNode,Ro=vo.nodeName.toLowerCase(),ir=G.getContentEditable(Ct);Me(ir)&&(On=fe,fe=ir==="true",It=!0,Dn=q_(e,Ct));const Br=fe&&!It;if(fo(Ct)&&!t8(e,u,Ct,Ro)){Ee=null,od(u)&&G.remove(Ct);return}if(He(Ct)){Ee=null;return}if(Qe(Ct,Ro,Br)){const Ac=G.rename(Ct,ge);x(Ac),oe.push(Ac),Ee=null;return}if(tl(u)){let Ac=D(a,Ct);if(!Ac&&Me(vo)&&mu(u)&&(Ac=D(a,vo)),!cc(u)||Ac){Ee=null;return}}Me(be)&&yt(Ct,Ro,Br,Dn)?(Ee||(Ee=G.clone(be,!1),vo.insertBefore(Ee,Ct),oe.push(Ee)),Dn&&It&&(fe=On),Ee.appendChild(Ct)):(Ee=null,pe(Tr(Ct.childNodes),Ue),It&&(fe=On),Ee=null)};pe(Re,Ue)}),u.links===!0&&pe(oe,Re=>{const Ee=Ue=>{Ue.nodeName==="A"&&x(Ue,u),pe(Tr(Ue.childNodes),Ee)};Ee(Re)}),pe(oe,Re=>{const Ee=It=>{let On=0;return pe(It.childNodes,Dn=>{!B0(Dn)&&!si(Dn)&&On++}),On},Ue=It=>bo(It.childNodes,Yn).filter(Dn=>G.getContentEditable(Dn)!=="false"&&fE(G,Dn,u)).map(Dn=>{const vo=G.clone(Dn,!1);return x(vo),G.replace(vo,It,!0),G.remove(Dn,!0),vo}).getOr(It),Ct=Ee(Re);if((oe.length>1||!G.isBlock(Re))&&Ct===0){G.remove(Re,!0);return}(cc(u)||od(u)&&u.wrapper)&&(!u.exact&&Ct===1&&(Re=Ue(Re)),GN(e,a,o,Re),e8(e,u,n,o,Re),jN(G,u,o,Re),ZN(G,u,o,Re),TE(G,u,o,Re),TA(e,u,o,Re))})},z=eg(r)?r:C.getNode();if(b.getContentEditable(z)==="false"&&!q_(e,z)){r=z,D(a,r),_i(e,n,r,o);return}if(u){if(r)if(eg(r)){if(!D(a,r)){const G=b.createRng();G.setStartBefore(r),G.setEndAfter(r),P(b,Km(b,G,a),!0)}}else P(b,r,!0);else!f||!cc(u)||yh(e).length?(C.setRng(lE(C.getRng())),Gm(e,()=>{Ch(e,(G,U)=>{const X=U?G:Km(b,G,a);P(b,X,!1)})},Ke),e.nodeChanged()):W6(e,n,o),q6(e.formatter,n).each(G=>{pe(EA(e.selection),U=>qN(b,U,G,o))});ON(n,e)}_i(e,n,r,o)},DA=(e,n,o,r)=>{(r||e.selection.isEditable())&&kE(e,n,o,r)},_E=e=>zt(e,"vars"),n8=(e,n)=>{e.set({}),n.on("NodeChange",o=>{MA(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=$.from(o.node).map(a=>eg(a)?a:a.startContainer).bind(a=>pt(a)?$.some(a):$.from(a.parentElement)).getOrThunk(()=>KN(n));MA(n,r,e.get())})},KN=e=>e.selection.getStart(),RA=(e,n,o,r,a)=>Oc(n,b=>{const C=e.formatter.matchNode(b,o,a??{},r);return!fn(C)},b=>CN(e,b,o)?!0:r?!1:Me(e.formatter.matchNode(b,o,a,!0))),AE=(e,n)=>{const o=n??KN(e);return Bt(og(e.dom,o),r=>pt(r)&&!Od(r))},MA=(e,n,o)=>{const r=AE(e,n);ct(o,(a,u)=>{const f=b=>{const C=RA(e,r,u,b.similar,_E(b)?b.vars:void 0),x=C.isSome();if(b.state.get()!==x){b.state.set(x);const D=C.getOr(n);_E(b)?b.callback(x,{node:D,format:u,parents:r}):pe(b.callbacks,M=>M(x,{node:D,format:u,parents:r}))}};pe([a.withSimilar,a.withoutSimilar],f),pe(a.withVars,f)})},o8=(e,n,o,r,a,u)=>{const f=n.get();pe(o.split(","),b=>{const C=ho(f,b).getOrThunk(()=>{const D={withSimilar:{state:ds(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ds(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=D,D}),x=()=>{const D=AE(e);return RA(e,D,b,a,u).isSome()};if(fn(u)){const D=a?C.withSimilar:C.withoutSimilar;D.callbacks.push(r),D.callbacks.length===1&&D.state.set(x())}else C.withVars.push({state:ds(x()),similar:a,vars:u,callback:r})}),n.set(f)},s8=(e,n,o)=>{const r=e.get();pe(n.split(","),a=>ho(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Bt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Bt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Bt(u.withVars,f=>f.callback!==o)}})),e.set(r)},r8=(e,n,o,r,a,u)=>(o8(e,n,o,r,a,u),{unbind:()=>s8(n,o,r)}),OE=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(lC(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?WN(e,n,o,r):DA(e,n,o,r))},ef=je.explode,YN=()=>{const e={};return{addFilter:(a,u)=>{pe(ef(a),f=>{zt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>ja(e),removeFilter:(a,u)=>{pe(ef(a),f=>{if(zt(e,f))if(Me(u)){const b=e[f],C=Bt(b.callbacks,x=>x!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},NA=(e,n)=>{pe(n,o=>{e.attr(o,null)})},wr=(e,n,o)=>{e.addNodeFilter("font",r=>{pe(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),C=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&qa(C).each(x=>{u["font-size"]=o[x-1]}),a.name="span",a.attr("style",n.serialize(u)),NA(a,["color","face","size"])})})},PA=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";pe(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},BA=(e,n,o)=>{var r;const a=km();n.convert_fonts_to_spans&&wr(e,a,je.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),PA(e,o,a)},fg=(e,n,o)=>{n.inline_styles&&BA(e,n,o)},XN=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),JN=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},L1=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?JN(r):decodeURIComponent(r);return $.some({type:a[1],data:f,base64Encoded:u})}else return $.none()},QN=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return $.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return $.some(new Blob([a],{type:e}))},c8=e=>new Promise((n,o)=>{L1(e).bind(({type:r,data:a,base64Encoded:u})=>QN(r,a,u)).fold(()=>o("Invalid data URI"),n)}),dv=e=>Jo(e,"blob:")?XN(e):Jo(e,"data:")?c8(e):Promise.reject("Unknown URI format"),eP=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let F1=0;const a8=e=>"blobid"+F1++,gg=(e,n,o)=>L1(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return $.none();{const f=u?r:btoa(r);return o(f,a)}}),tP=(e,n,o)=>{const r=e.create(a8(),n,o);return e.add(r),r},Il=(e,n,o=!1)=>gg(n,o,(r,a)=>$.from(e.getByData(r,a)).orThunk(()=>QN(a,r).map(u=>tP(e,u,r)))),hC=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Jo(n,"blob:")){const r=e.getByUri(n);return Me(r)?Promise.resolve(r):dv(n).then(a=>eP(a).then(u=>gg(u,!1,f=>$.some(tP(e,a,f))).getOrThunk(o)))}else return Jo(n,"data:")?Il(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},$A=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,IA=e=>$.from(e.match($A)).bind(n=>Pa(n,1)).map(n=>Jo(n,"www.")?n.substring(4):n),nP=(e,n)=>{$.from(e.attr("src")).bind(IA).forall(o=>!Ut(n,o))&&e.attr("sandbox","")},mv=(e,n)=>Jo(e,`${n}/`),i8=e=>fn(e)?"iframe":mv(e,"image")?"img":mv(e,"video")?"video":mv(e,"audio")?"audio":"iframe",id=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=i8(e),b=new ci(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&nP(b,u),b},DE=e=>Me(e.attr("data-mce-bogus")),oP=e=>e.attr("src")===_t.transparentSrc||Me(e.attr("data-mce-placeholder")),LA=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");oP(a)||DE(a)||Tn(u)||Il(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>pe(a,r))}},FA=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",C=>{let x=C.length;const D=P=>P.split(" ").filter(G=>G.length>0).concat(["noopener"]).sort().join(" "),M=P=>{const z=P?je.trim(P):"";return/\b(noopener)\b/g.test(z)?z:D(z)};if(!n.allow_unsafe_link_target)for(;x--;){const P=C[x];P.name==="a"&&P.attr("target")==="_blank"&&P.attr("rel",M(P.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let x=C.length,D,M,P,z;for(;x--;)if(z=C[x],z.name==="a"&&z.firstChild&&!z.attr("href"))for(P=z.parent,D=z.lastChild;D&&P;)M=D.prev,P.insert(D,z),D=M}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let x=C.length,D,M;for(;x--;)if(D=C[x],M=D.parent,M&&(M.name==="ul"||M.name==="ol"))if(D.prev&&D.prev.name==="li")D.prev.append(D);else{const P=new ci("li",1);P.attr("style","list-style-type: none"),D.wrap(P)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var x;let D=C.length;for(;D--;){const M=C[D],P=(x=M.attr("class"))!==null&&x!==void 0?x:"",z=je.explode(P," ");let G="";for(let U=0;U<z.length;U++){const X=z[U];let oe=!1,fe=u["*"];fe&&fe[X]&&(oe=!0),fe=u[M.name],!oe&&fe&&fe[X]&&(oe=!0),oe&&(G&&(G+=" "),G+=X)}G.length||(G=null),M.attr("class",G)}}),LA(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=li((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>pe(C,x=>{x.replace(id({type:x.attr("type"),src:x.name==="object"?x.attr("data"):x.attr("src"),width:x.attr("width"),height:x.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",C=>pe(C,x=>nP(x,b)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Fh,setPrototypeOf:RE,isFrozen:l8,getPrototypeOf:sP,getOwnPropertyDescriptor:u8}=Object;let{freeze:al,seal:ld,create:rP}=Object,{apply:H1,construct:HA}=typeof Reflect<"u"&&Reflect;al||(al=function(n){return n}),ld||(ld=function(n){return n}),H1||(H1=function(n,o,r){return n.apply(o,r)}),HA||(HA=function(n,o){return new n(...o)});const pC=yu(Array.prototype.forEach),ME=yu(Array.prototype.pop),bC=yu(Array.prototype.push),vC=yu(String.prototype.toLowerCase),NE=yu(String.prototype.toString),cP=yu(String.prototype.match),yC=yu(String.prototype.replace),d8=yu(String.prototype.indexOf),m8=yu(String.prototype.trim),qd=yu(Object.prototype.hasOwnProperty),il=yu(RegExp.prototype.test),CC=f8(TypeError);function yu(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return H1(e,n,r)}}function f8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return HA(e,o)}}function ss(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vC;RE&&RE(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(l8(n)||(n[r]=u),a=u)}e[a]=!0}return e}function g8(e){for(let n=0;n<e.length;n++)qd(e,n)||(e[n]=null);return e}function V1(e){const n=rP(null);for(const[o,r]of Fh(e))qd(e,o)&&(Array.isArray(r)?n[o]=g8(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=V1(r):n[o]=r);return n}function SC(e,n){for(;e!==null;){const r=u8(e,n);if(r){if(r.get)return yu(r.get);if(typeof r.value=="function")return yu(r.value)}e=sP(e)}function o(){return null}return o}const VA=al(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zA=al(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Hh=al(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),h8=al(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),UA=al(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),p8=al(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),aP=al(["#text"]),WA=al(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ZA=al(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iP=al(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),PE=al(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),b8=ld(/\{\{[\w\W]*|[\w\W]*\}\}/gm),v8=ld(/<%[\w\W]*|[\w\W]*%>/gm),y8=ld(/\${[\w\W]*}/gm),C8=ld(/^data-[\-\w.\u00B7-\uFFFF]/),S8=ld(/^aria-[\-\w]+$/),lP=ld(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w8=ld(/^(?:\w+script|data):/i),jA=ld(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),GA=ld(/^html$/i),Yj=ld(/^[a-z][.\w]*(-[.\w]+)+$/i);var fv=Object.freeze({__proto__:null,MUSTACHE_EXPR:b8,ERB_EXPR:v8,TMPLIT_EXPR:y8,DATA_ATTR:C8,ARIA_ATTR:S8,IS_ALLOWED_URI:lP,IS_SCRIPT_OR_DATA:w8,ATTR_WHITESPACE:jA,DOCTYPE_NAME:GA,CUSTOM_ELEMENT:Yj});const wC={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Xj=function(){return typeof window>"u"?null:window},Jj=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function x8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xj();const n=Ln=>x8(Ln);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==wC.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:C,NodeFilter:x,NamedNodeMap:D=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:M,DOMParser:P,trustedTypes:z}=e,G=C.prototype,U=SC(G,"cloneNode"),X=SC(G,"remove"),oe=SC(G,"nextSibling"),fe=SC(G,"childNodes"),ge=SC(G,"parentNode");if(typeof f=="function"){const Ln=o.createElement("template");Ln.content&&Ln.content.ownerDocument&&(o=Ln.content.ownerDocument)}let be,He="";const{implementation:Qe,createNodeIterator:yt,createDocumentFragment:Re,getElementsByTagName:Ee}=o,{importNode:Ue}=r;let Ct={};n.isSupported=typeof Fh=="function"&&typeof ge=="function"&&Qe&&Qe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:It,ERB_EXPR:On,TMPLIT_EXPR:Dn,DATA_ATTR:vo,ARIA_ATTR:Ro,IS_SCRIPT_OR_DATA:ir,ATTR_WHITESPACE:Br,CUSTOM_ELEMENT:Ac}=fv;let{IS_ALLOWED_URI:at}=fv,Mt=null;const so=ss({},[...VA,...zA,...Hh,...UA,...aP]);let ht=null;const jt=ss({},[...WA,...ZA,...iP,...PE]);let Qt=Object.seal(rP(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gt=null,En=null,Pn=!0,Gr=!0,Fo=!1,pa=!0,Mi=!1,om=!0,Ma=!1,dl=!1,Tu=!1,ba=!1,Ni=!1,Rt=!1,Jn=!0,Us=!1;const qr="user-content-";let fc=!0,$r=!1,Ws={},Zs=null;const Wa=ss({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ku=null;const sm=ss({},["audio","video","img","source","image","track"]);let bd=null;const op=ss({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),sp="http://www.w3.org/1998/Math/MathML",af="http://www.w3.org/2000/svg",_u="http://www.w3.org/1999/xhtml";let Eg=_u,Kv=!1,rp=null;const hR=ss({},[sp,af,_u],NE);let gb=null;const iF=["application/xhtml+xml","text/html"],pR="text/html";let Na=null,Au=null;const Bk=o.createElement("form"),we=function(Te){return Te instanceof RegExp||Te instanceof Function},xe=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Au&&Au===Te)){if((!Te||typeof Te!="object")&&(Te={}),Te=V1(Te),gb=iF.indexOf(Te.PARSER_MEDIA_TYPE)===-1?pR:Te.PARSER_MEDIA_TYPE,Na=gb==="application/xhtml+xml"?NE:vC,Mt=qd(Te,"ALLOWED_TAGS")?ss({},Te.ALLOWED_TAGS,Na):so,ht=qd(Te,"ALLOWED_ATTR")?ss({},Te.ALLOWED_ATTR,Na):jt,rp=qd(Te,"ALLOWED_NAMESPACES")?ss({},Te.ALLOWED_NAMESPACES,NE):hR,bd=qd(Te,"ADD_URI_SAFE_ATTR")?ss(V1(op),Te.ADD_URI_SAFE_ATTR,Na):op,ku=qd(Te,"ADD_DATA_URI_TAGS")?ss(V1(sm),Te.ADD_DATA_URI_TAGS,Na):sm,Zs=qd(Te,"FORBID_CONTENTS")?ss({},Te.FORBID_CONTENTS,Na):Wa,gt=qd(Te,"FORBID_TAGS")?ss({},Te.FORBID_TAGS,Na):{},En=qd(Te,"FORBID_ATTR")?ss({},Te.FORBID_ATTR,Na):{},Ws=qd(Te,"USE_PROFILES")?Te.USE_PROFILES:!1,Pn=Te.ALLOW_ARIA_ATTR!==!1,Gr=Te.ALLOW_DATA_ATTR!==!1,Fo=Te.ALLOW_UNKNOWN_PROTOCOLS||!1,pa=Te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Mi=Te.SAFE_FOR_TEMPLATES||!1,om=Te.SAFE_FOR_XML!==!1,Ma=Te.WHOLE_DOCUMENT||!1,ba=Te.RETURN_DOM||!1,Ni=Te.RETURN_DOM_FRAGMENT||!1,Rt=Te.RETURN_TRUSTED_TYPE||!1,Tu=Te.FORCE_BODY||!1,Jn=Te.SANITIZE_DOM!==!1,Us=Te.SANITIZE_NAMED_PROPS||!1,fc=Te.KEEP_CONTENT!==!1,$r=Te.IN_PLACE||!1,at=Te.ALLOWED_URI_REGEXP||lP,Eg=Te.NAMESPACE||_u,Qt=Te.CUSTOM_ELEMENT_HANDLING||{},Te.CUSTOM_ELEMENT_HANDLING&&we(Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qt.tagNameCheck=Te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&we(Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qt.attributeNameCheck=Te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Te.CUSTOM_ELEMENT_HANDLING&&typeof Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Qt.allowCustomizedBuiltInElements=Te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mi&&(Gr=!1),Ni&&(ba=!0),Ws&&(Mt=ss({},aP),ht=[],Ws.html===!0&&(ss(Mt,VA),ss(ht,WA)),Ws.svg===!0&&(ss(Mt,zA),ss(ht,ZA),ss(ht,PE)),Ws.svgFilters===!0&&(ss(Mt,Hh),ss(ht,ZA),ss(ht,PE)),Ws.mathMl===!0&&(ss(Mt,UA),ss(ht,iP),ss(ht,PE))),Te.ADD_TAGS&&(Mt===so&&(Mt=V1(Mt)),ss(Mt,Te.ADD_TAGS,Na)),Te.ADD_ATTR&&(ht===jt&&(ht=V1(ht)),ss(ht,Te.ADD_ATTR,Na)),Te.ADD_URI_SAFE_ATTR&&ss(bd,Te.ADD_URI_SAFE_ATTR,Na),Te.FORBID_CONTENTS&&(Zs===Wa&&(Zs=V1(Zs)),ss(Zs,Te.FORBID_CONTENTS,Na)),fc&&(Mt["#text"]=!0),Ma&&ss(Mt,["html","head","body"]),Mt.table&&(ss(Mt,["tbody"]),delete gt.tbody),Te.TRUSTED_TYPES_POLICY){if(typeof Te.TRUSTED_TYPES_POLICY.createHTML!="function")throw CC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Te.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw CC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');be=Te.TRUSTED_TYPES_POLICY,He=be.createHTML("")}else be===void 0&&(be=Jj(z,a)),be!==null&&typeof He=="string"&&(He=be.createHTML(""));al&&al(Te),Au=Te}},rt=ss({},["mi","mo","mn","ms","mtext"]),Je=ss({},["annotation-xml"]),en=ss({},["title","style","font","a","script"]),oo=ss({},[...zA,...Hh,...h8]),lr=ss({},[...UA,...p8]),vd=function(Te){let Vt=ge(Te);(!Vt||!Vt.tagName)&&(Vt={namespaceURI:Eg,tagName:"template"});const t=vC(Te.tagName),s=vC(Vt.tagName);return rp[Te.namespaceURI]?Te.namespaceURI===af?Vt.namespaceURI===_u?t==="svg":Vt.namespaceURI===sp?t==="svg"&&(s==="annotation-xml"||rt[s]):!!oo[t]:Te.namespaceURI===sp?Vt.namespaceURI===_u?t==="math":Vt.namespaceURI===af?t==="math"&&Je[s]:!!lr[t]:Te.namespaceURI===_u?Vt.namespaceURI===af&&!Je[s]||Vt.namespaceURI===sp&&!rt[s]?!1:!lr[t]&&(en[t]||!oo[t]):!!(gb==="application/xhtml+xml"&&rp[Te.namespaceURI]):!1},Ul=function(Te){bC(n.removed,{element:Te});try{ge(Te).removeChild(Te)}catch{X(Te)}},wS=function(Te,Vt){try{bC(n.removed,{attribute:Vt.getAttributeNode(Te),from:Vt})}catch{bC(n.removed,{attribute:null,from:Vt})}if(Vt.removeAttribute(Te),Te==="is"&&!ht[Te])if(ba||Ni)try{Ul(Vt)}catch{}else try{Vt.setAttribute(Te,"")}catch{}},lF=function(Te){let Vt=null,t=null;if(Tu)Te="<remove></remove>"+Te;else{const i=cP(Te,/^[\r\n\t ]+/);t=i&&i[0]}gb==="application/xhtml+xml"&&Eg===_u&&(Te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Te+"</body></html>");const s=be?be.createHTML(Te):Te;if(Eg===_u)try{Vt=new P().parseFromString(s,gb)}catch{}if(!Vt||!Vt.documentElement){Vt=Qe.createDocument(Eg,"template",null);try{Vt.documentElement.innerHTML=Kv?He:s}catch{}}const c=Vt.body||Vt.documentElement;return Te&&t&&c.insertBefore(o.createTextNode(t),c.childNodes[0]||null),Eg===_u?Ee.call(Vt,Ma?"html":"body")[0]:Ma?Vt.documentElement:c},bR=function(Te){return yt.call(Te.ownerDocument||Te,Te,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},uF=function(Te){return Te instanceof M&&(typeof Te.nodeName!="string"||typeof Te.textContent!="string"||typeof Te.removeChild!="function"||!(Te.attributes instanceof D)||typeof Te.removeAttribute!="function"||typeof Te.setAttribute!="function"||typeof Te.namespaceURI!="string"||typeof Te.insertBefore!="function"||typeof Te.hasChildNodes!="function")},dF=function(Te){return typeof b=="function"&&Te instanceof b},Tg=function(Te,Vt,t){Ct[Te]&&pC(Ct[Te],s=>{s.call(n,Vt,t,Au)})},mF=function(Te){let Vt=null;if(Tg("beforeSanitizeElements",Te,null),uF(Te))return Ul(Te),!0;const t=Na(Te.nodeName);if(Tg("uponSanitizeElement",Te,{tagName:t,allowedTags:Mt}),Te.hasChildNodes()&&!dF(Te.firstElementChild)&&il(/<[/\w]/g,Te.innerHTML)&&il(/<[/\w]/g,Te.textContent)||Te.nodeType===wC.progressingInstruction||om&&Te.nodeType===wC.comment&&il(/<[/\w]/g,Te.data))return Ul(Te),!0;if(!Mt[t]||gt[t]){if(!gt[t]&&vR(t)&&(Qt.tagNameCheck instanceof RegExp&&il(Qt.tagNameCheck,t)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(t)))return!1;if(fc&&!Zs[t]){const s=ge(Te)||Te.parentNode,c=fe(Te)||Te.childNodes;if(c&&s){const i=c.length;for(let d=i-1;d>=0;--d){const g=U(c[d],!0);g.__removalCount=(Te.__removalCount||0)+1,s.insertBefore(g,oe(Te))}}}return Ul(Te),!0}return Te instanceof C&&!vd(Te)||(t==="noscript"||t==="noembed"||t==="noframes")&&il(/<\/no(script|embed|frames)/i,Te.innerHTML)?(Ul(Te),!0):(Mi&&Te.nodeType===wC.text&&(Vt=Te.textContent,pC([It,On,Dn],s=>{Vt=yC(Vt,s," ")}),Te.textContent!==Vt&&(bC(n.removed,{element:Te.cloneNode()}),Te.textContent=Vt)),Tg("afterSanitizeElements",Te,null),!1)},fF=function(Te,Vt,t){if(Jn&&(Vt==="id"||Vt==="name")&&(t in o||t in Bk))return!1;if(!(Gr&&!En[Vt]&&il(vo,Vt))){if(!(Pn&&il(Ro,Vt))){if(!ht[Vt]||En[Vt]){if(!(vR(Te)&&(Qt.tagNameCheck instanceof RegExp&&il(Qt.tagNameCheck,Te)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(Te))&&(Qt.attributeNameCheck instanceof RegExp&&il(Qt.attributeNameCheck,Vt)||Qt.attributeNameCheck instanceof Function&&Qt.attributeNameCheck(Vt))||Vt==="is"&&Qt.allowCustomizedBuiltInElements&&(Qt.tagNameCheck instanceof RegExp&&il(Qt.tagNameCheck,t)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(t))))return!1}else if(!bd[Vt]){if(!il(at,yC(t,Br,""))){if(!((Vt==="src"||Vt==="xlink:href"||Vt==="href")&&Te!=="script"&&d8(t,"data:")===0&&ku[Te])){if(!(Fo&&!il(ir,yC(t,Br,"")))){if(t)return!1}}}}}}return!0},vR=function(Te){return Te!=="annotation-xml"&&cP(Te,Ac)},yR=function(Te){Tg("beforeSanitizeAttributes",Te,null);const{attributes:Vt}=Te;if(!Vt)return;const t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ht};let s=Vt.length;for(;s--;){const c=Vt[s],{name:i,namespaceURI:d,value:g}=c,h=Na(i);let y=i==="value"?g:m8(g);const S=y;if(t.attrName=h,t.attrValue=y,t.keepAttr=!0,t.forceKeepAttr=void 0,Tg("uponSanitizeAttribute",Te,t),y=t.attrValue,t.forceKeepAttr)continue;if(!t.keepAttr){wS(i,Te);continue}if(!pa&&il(/\/>/i,y)){wS(i,Te);continue}Mi&&pC([It,On,Dn],_=>{y=yC(y,_," ")});const T=Na(Te.nodeName);if(!fF(T,h,y)){wS(i,Te);continue}if(Us&&(h==="id"||h==="name")&&(wS(i,Te),y=qr+y),om&&il(/((--!?|])>)|<\/(style|title)/i,y)){wS(i,Te);continue}if(be&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!d)switch(z.getAttributeType(T,h)){case"TrustedHTML":{y=be.createHTML(y);break}case"TrustedScriptURL":{y=be.createScriptURL(y);break}}if(y!==S)try{d?Te.setAttributeNS(d,i,y):Te.setAttribute(i,y),uF(Te)?Ul(Te):ME(n.removed)}catch{}}Tg("afterSanitizeAttributes",Te,null)},Oj=function Ln(Te){let Vt=null;const t=bR(Te);for(Tg("beforeSanitizeShadowDOM",Te,null);Vt=t.nextNode();)Tg("uponSanitizeShadowNode",Vt,null),!mF(Vt)&&(Vt.content instanceof u&&Ln(Vt.content),yR(Vt));Tg("afterSanitizeShadowDOM",Te,null)};return n.sanitize=function(Ln){let Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=null,t=null,s=null,c=null;if(Kv=!Ln,Kv&&(Ln="<!-->"),typeof Ln!="string"&&!dF(Ln))if(typeof Ln.toString=="function"){if(Ln=Ln.toString(),typeof Ln!="string")throw CC("dirty is not a string, aborting")}else throw CC("toString is not a function");if(!n.isSupported)return Ln;if(dl||xe(Te),n.removed=[],typeof Ln=="string"&&($r=!1),$r){if(Ln.nodeName){const g=Na(Ln.nodeName);if(!Mt[g]||gt[g])throw CC("root node is forbidden and cannot be sanitized in-place")}}else if(Ln instanceof b)Vt=lF("<!---->"),t=Vt.ownerDocument.importNode(Ln,!0),t.nodeType===wC.element&&t.nodeName==="BODY"||t.nodeName==="HTML"?Vt=t:Vt.appendChild(t);else{if(!ba&&!Mi&&!Ma&&Ln.indexOf("<")===-1)return be&&Rt?be.createHTML(Ln):Ln;if(Vt=lF(Ln),!Vt)return ba?null:Rt?He:""}Vt&&Tu&&Ul(Vt.firstChild);const i=bR($r?Ln:Vt);for(;s=i.nextNode();)mF(s)||(s.content instanceof u&&Oj(s.content),yR(s));if($r)return Ln;if(ba){if(Ni)for(c=Re.call(Vt.ownerDocument);Vt.firstChild;)c.appendChild(Vt.firstChild);else c=Vt;return(ht.shadowroot||ht.shadowrootmode)&&(c=Ue.call(r,c,!0)),c}let d=Ma?Vt.outerHTML:Vt.innerHTML;return Ma&&Mt["!doctype"]&&Vt.ownerDocument&&Vt.ownerDocument.doctype&&Vt.ownerDocument.doctype.name&&il(GA,Vt.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+Vt.ownerDocument.doctype.name+`>
`+d),Mi&&pC([It,On,Dn],g=>{d=yC(d,g," ")}),be&&Rt?be.createHTML(d):d},n.setConfig=function(){let Ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(Ln),dl=!0},n.clearConfig=function(){Au=null,dl=!1},n.isValidAttribute=function(Ln,Te,Vt){Au||xe({});const t=Na(Ln),s=Na(Te);return fF(t,s,Vt)},n.addHook=function(Ln,Te){typeof Te=="function"&&(Ct[Ln]=Ct[Ln]||[],bC(Ct[Ln],Te))},n.removeHook=function(Ln){if(Ct[Ln])return ME(Ct[Ln])},n.removeHooks=function(Ln){Ct[Ln]&&(Ct[Ln]=[])},n.removeAllHooks=function(){Ct={}},n}var uP=x8();const Ll=je.each,BE=je.trim,Vh=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],zh={ftp:21,http:80,https:443,mailto:25},dP=["img","video"],xC=(e,n)=>Me(e)?!e:Me(n)?!Ut(dP,n):!0,mP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},gr=(e,n,o)=>{const r=mP(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?xC(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class ud{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=xm.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!gr(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=BE(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new ud(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&Ll(Vh,(b,C)=>{let x=f[C];x&&(x=x.replace(/\(mce_at\)/g,"@@")),a[b]=x}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new ud(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new ud(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?zh[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?a+="/"+C[u]:a+=C[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];Ll(u,M=>{M&&b.push(M)});const C=[];for(let M=f.length-1;M>=0;M--)if(!(f[M].length===0||f[M]===".")){if(f[M]===".."){r++;continue}if(r>0){r--;continue}C.push(f[M])}const x=b.length-r;let D;return x<=0?D=Io(C).join("/"):D=b.slice(0,x).join("/")+"/"+Io(C).join("/"),D.indexOf("/")!==0&&(D="/"+D),a&&D.lastIndexOf("/")!==D.length-1&&(D+=a),D}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const E8=je.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Uh="data-mce-type";let z1=0;const U1=(e,n,o,r,a)=>{var u,f,b,C;const x=n.validate,D=o.getSpecialElements();e.nodeType===ps&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const M=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Me(a)&&(a.allowedTags[M]=!0);return}if(e.nodeType!==xd||M==="body")return;const P=ne.fromDom(e),z=As(P,Uh),G=tc(P,"data-mce-bogus");if(!z&&ce(G)){G==="all"?Zo(P):eu(P);return}const U=o.getElementRule(M);if(x&&!U){zt(D,M)?Zo(P):eu(P);return}else Me(a)&&(a.allowedTags[M]=!0);if(x&&U&&!z){if(pe((b=U.attributesForced)!==null&&b!==void 0?b:[],X=>{zs(P,X.name,X.value==="{$uid}"?`mce_${z1++}`:X.value)}),pe((C=U.attributesDefault)!==null&&C!==void 0?C:[],X=>{As(P,X.name)||zs(P,X.name,X.value==="{$uid}"?`mce_${z1++}`:X.value)}),U.attributesRequired&&!Vn(U.attributesRequired,X=>As(P,X))){eu(P);return}if(U.removeEmptyAttrs&&bl(P)){eu(P);return}U.outputName&&U.outputName!==M&&ZS(P,U.outputName)}},qA=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=$E(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,YA(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&Jo(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):KA(e,f)&&(a.forceKeepAttr=!0)},$E=(e,n,o,r,a,u)=>o!=="html"&&!vs(r)?!0:!(a in E8&&gr(e,u,r))&&(!e.validate||n.isValid(r,a)||Jo(a,"data-")||Jo(a,"aria-")),KA=(e,n)=>e.hasAttribute(Uh)&&(n==="id"||n==="class"||n==="style"),YA=(e,n)=>e in n.getBoolAttrs(),T8=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,C=f.value;!$E(n,o,r,e.tagName.toLowerCase(),b,C)&&!KA(e,b)?e.removeAttribute(b):YA(b,o)&&e.setAttribute(b,b)}},k8=(e,n,o)=>{const r=uP();return r.addHook("uponSanitizeElement",(a,u)=>{U1(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{qA(a,e,n,o.current(),u)}),r},fP=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},_8=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};uP().sanitize(e,o)},A8=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=uP();r.addHook("uponSanitizeElement",(a,u)=>{var f;const b=(f=u.tagName)!==null&&f!==void 0?f:a.nodeName.toLowerCase(),C=n.allow_mathml_annotation_encodings;if(b==="annotation"&&Zn(C)&&C.length>0){const x=a.getAttribute("encoding");ce(x)&&Ut(C,x)&&(u.allowedTags[b]=!0)}}),r.sanitize(e,o)},O8=e=>n=>{const o=ym(n);if(o==="svg")_8(n);else if(o==="math")A8(n,e);else throw new Error("Not a namespace element")},D8=(e,n)=>{const o=Op();if(e.sanitize){const r=k8(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,fP(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:O8(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=b.nextNode();){const x=o.track(C);U1(C,e,n,x),pt(C)&&T8(C,e,n,x)}o.reset()},sanitizeNamespaceElement:kt}},gP=je.makeMap,XA=je.extend,hP=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,C=f.length;b<C;b++){const x=f[b],D=new ci(x.nodeName.toLowerCase(),x.nodeType);if(pt(x)){const M=x.attributes;for(let P=0,z=M.length;P<z;P++){const G=M[P];D.attr(G.name,G.value)}vs(D.name)&&(r(x),D.value=x.innerHTML)}else qe(x)?(D.value=x.data,u&&(D.raw=!0)):(rr(x)||Va(x)||vf(x))&&(D.value=x.data);vs(D.name)||hP(D,x,o,r),e.append(D)}},EC=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;pe(n,b=>b(f)),Tn(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];pe(o,f=>f(u))}},pP=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=XA(gP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=my(n),x=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,P=fe=>{let ge=fe.parent;for(;Me(ge);){if(ge.name in f)return!0;ge=ge.parent}return!1},z=fe=>{let ge=fe;for(;Me(ge);){if(ge.name in C)return jr(n,u,f,ge);ge=ge.parent}return!1},G=fe=>fe.name in b||Rb(n,fe)||vs(fe.name)&&fe.parent===e,U=(fe,ge)=>{const be=ge?fe.prev:fe.next;return Me(be)||Tn(fe.parent)?!1:G(fe.parent)&&(fe.parent!==e||r.isRootContent===!0)};return[fe=>{var ge;if(fe.type===3&&!P(fe)){let be=(ge=fe.value)!==null&&ge!==void 0?ge:"";be=be.replace(x," "),(k6(fe.prev,G)||U(fe,!0))&&(be=be.replace(D,"")),be.length===0||be===" "&&fe.prev&&fe.prev.type===ps&&fe.next&&fe.next.type===ps?fe.remove():fe.value=be}},fe=>{var ge;if(fe.type===1){const be=n.getElementRule(fe.name);if(a&&be){const He=jr(n,u,f,fe);be.paddInEmptyBlock&&He&&z(fe)?dA(o,r,G,fe):be.removeEmpty&&He?G(fe)?fe.remove():fe.unwrap():be.paddEmpty&&(He||Bh(fe))&&dA(o,r,G,fe)}}else if(fe.type===3&&!P(fe)){let be=(ge=fe.value)!==null&&ge!==void 0?ge:"";(fe.next&&G(fe.next)||U(fe,!1))&&(be=be.replace(M,"")),be.length===0?fe.remove():fe.value=be}}]},R8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},W1=(e={},n=Eo())=>{const o=YN(),r=YN(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=D8(a,n),b=(ge,be,He="html")=>{const Qe=He==="xhtml"?"application/xhtml+xml":"text/html",yt=zt(n.getSpecialElements(),be.toLowerCase()),Re=yt?`<${be}>${ge}</${be}>`:ge,Ee=()=>He==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Re}</body></html>`:/^[\s]*<head/i.test(ge)||/^[\s]*<html/i.test(ge)||/^[\s]*<!DOCTYPE/i.test(ge)?`<html>${Re}</html>`:`<body>${Re}</body>`,Ue=u.parseFromString(Ee(),Qe).body;return f.sanitizeHtmlElement(Ue,Qe),yt?Ue.firstChild:Ue},C=o.addFilter,x=o.getFilters,D=o.removeFilter,M=r.addFilter,P=r.getFilters,z=r.removeFilter,G=(ge,be)=>{mA(n,ge)&&be.push(ge)},U=(ge,be)=>{const He=ce(be.attr(Uh)),Qe=be.type===1&&!zt(ge,be.name)&&!Rb(n,be)&&!vs(be.name);return be.type===3||Qe&&!He},X=(ge,be)=>{const He=XA(gP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Qe=/^[ \t\r\n]+/,yt=/[ \t\r\n]+$/;let Re=ge.firstChild,Ee=null;const Ue=Ct=>{var It,On;Ct&&(Re=Ct.firstChild,Re&&Re.type===3&&(Re.value=(It=Re.value)===null||It===void 0?void 0:It.replace(Qe,"")),Re=Ct.lastChild,Re&&Re.type===3&&(Re.value=(On=Re.value)===null||On===void 0?void 0:On.replace(yt,"")))};if(n.isValidChild(ge.name,be.toLowerCase())){for(;Re;){const Ct=Re.next;U(He,Re)?(Ee||(Ee=new ci(be,1),Ee.attr(a.forced_root_block_attrs),ge.insert(Ee,Re)),Ee.append(Re)):(Ue(Ee),Ee=null),Re=Ct}Ue(Ee)}},fe={schema:n,addAttributeFilter:M,getAttributeFilters:P,removeAttributeFilter:z,addNodeFilter:C,getNodeFilters:x,removeNodeFilter:D,parse:(ge,be={})=>{var He;const Qe=a.validate,yt=(He=be.context)!==null&&He!==void 0?He:a.root_name,Re=b(ge,yt,be.format);Dp(n,Re);const Ee=new ci(yt,11);hP(Ee,Re,n.getSpecialElements(),f.sanitizeNamespaceElement),Re.innerHTML="";const[Ue,Ct]=pP(Ee,n,a,be),It=[],On=Qe?ir=>G(ir,It):kt,Dn={nodes:{},attributes:{}},vo=ir=>mN(x(),P(),ir,Dn);if(EC(Ee,[Ue,vo],[Ct,On]),It.reverse(),Qe&&It.length>0)if(be.context){const{pass:ir,fail:Br}=$o(It,Ac=>Ac.parent===Ee);uo(Br,n,Ee,vo),be.invalid=ir.length>0}else uo(It,n,Ee,vo);const Ro=R8(a,be);return Ro&&(Ee.name==="body"||be.isRootContent)&&X(Ee,Ro),be.invalid||uA(Dn,be),Ee}};return FA(fe,a),fg(fe,a,n),fe},M8=e=>Ih(e)?Ah({validate:!1}).serialize(e):e,JA=(e,n,o)=>{const r=M8(e),a=n(r);if(a.isDefaultPrevented())return a;if(Ih(e))if(a.content!==r){const u=W1({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},bP=e=>({sanitize:Ww(e),sandbox_iframes:c1(e),sandbox_iframes_exclusions:a2(e)}),vP=(e,n)=>{if(n.no_events)return Dr.value(n);{const o=U0(e,n);return o.isDefaultPrevented()?Dr.error(s4(e,{content:"",...o}).content):Dr.value(o)}},QA=(e,n,o)=>o.no_events?n:JA(n,a=>s4(e,{...o,content:a}),bP(e)).content,IE=(e,n)=>{if(n.no_events)return Dr.value(n);{const o=JA(n.content,r=>$2(e,{...n,content:r}),bP(e));return o.isDefaultPrevented()?(Ox(e,o),Dr.error(void 0)):Dr.value(o)}},LE=(e,n,o)=>{o.no_events||Ox(e,{...o,content:n})},FE=(e,n,o)=>({element:e,width:n,rows:o}),eO=(e,n)=>({element:e,cells:n}),yP=(e,n)=>({x:e,y:n}),CP=(e,n)=>Kc(e,n).bind(qa).getOr(1),N8=(e,n,o,r,a)=>{const u=CP(a,"rowspan"),f=CP(a,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=eO(Hp(r),[]));for(let x=n;x<n+f;x++){const D=b[C].cells;D[x]=C===o&&x===n?a:Al(a)}}},P8=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},tO=(e,n,o)=>{for(;P8(e,n,o);)n++;return n},gv=e=>Bn(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),nO=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(_n(a[u],n))return $.some(yP(u,r))}return $.none()},oO=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const C=f[b].cells,x=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(eO(f[b].element,x))}return u},HE=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?oO(e,r,a,u,f):oO(e,r,f,u,a);return FE(e.element,gv(b),b)},B8=(e,n)=>{const o=Al(e.element),r=ne.fromTag("tbody");return zu(r,n),Or(o,r),o},$8=e=>qt(e.rows,n=>{const o=qt(n.cells,a=>{const u=Hp(a);return bs(u,"colspan"),bs(u,"rowspan"),u}),r=Al(n.element);return zu(r,o),r}),Z1=e=>{const n=FE(Al(e),0,[]);return pe(Ea(e,"tr"),(o,r)=>{pe(Ea(o,"td,th"),(a,u)=>{N8(n,tO(n,u,r),r,o,a)})}),FE(n.element,gv(n.rows),n.rows)},sO=e=>B8(e,$8(e)),SP=(e,n,o)=>nO(e,n).bind(r=>nO(e,o).map(a=>HE(e,r,a))),TC=e=>bo(e,n=>K(n)==="ul"||K(n)==="ol"),wP=(e,n)=>bo(e,o=>K(o)==="li"&&O2(o,n)).fold(et([]),o=>TC(e).map(r=>{const a=ne.fromTag(K(r)),u=Co(Ha(r),(f,b)=>Jo(b,"list-style"));return Sn(a,u),[ne.fromTag("li"),a]}).getOr([])),rO=(e,n)=>{const o=Bn(n,(r,a)=>(Or(a,r),a),e);return n.length>0?X0([o]):o},xP=e=>Pf(e)?Yc(e).filter(lu).fold(et([]),n=>[e,n]):lu(e)?[e]:[],EP=(e,n,o)=>{const r=ne.fromDom(n.commonAncestorContainer),a=Jm(r,e),u=Bt(a,C=>o.isWrapper(K(C))),f=wP(a,n),b=u.concat(f.length?f:xP(r));return qt(b,Al)},TP=()=>X0([]),I8=(e,n,o)=>rO(ne.fromDom(n.cloneContents()),EP(e,n,o)),L8=(e,n)=>Ar(n,"table",Ve(_n,e)),cO=(e,n)=>L8(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=Z1(o);return SP(u,r,a).map(f=>X0([sO(f)]))}).getOrThunk(TP),F8=(e,n,o)=>n.length>0&&n[0].collapsed?TP():I8(e,n[0],o),kP=(e,n,o)=>{const r=Qf(n,e);return r.length>0?cO(e,r):F8(e,n,o)},VE=(e,n)=>n>=0&&n<e.length&&Jf(e.charAt(n)),_P=e=>Ki(e.innerText),H8=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),V8=e=>$.from(e.selection.getRng()).map(n=>{var o;const r=$.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=H8(r),f=ne.fromDom(n.cloneContents());hM(f),pM(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=_P(b),x=Ki((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),VE(x,0)||VE(x,x.length-1)){const D=r.getOr(a),M=_P(D),P=M.indexOf(C);if(P===-1)return C;{const z=VE(M,P-1),G=VE(M,P+C.length);return(z?" ":"")+C+(G?" ":"")}}else return C}).getOr(""),z8=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=Wx(e,R0(a)),f=n.contextual?kP(ne.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},U8=(e,n)=>{if(n.format==="text")return V8(e);{const o=z8(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},W8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),Z8=(e,n,o={})=>{const r=W8(o,n);return vP(e,r).fold(Oo,a=>{const u=U8(e,a);return QA(e,u,a)})},aO=0,AP=1,OP=2,zE=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(D,M,P)=>({start:D,end:M,diag:P}),f=(D,M,P,z,G)=>{const U=C(D,M,P,z);if(U===null||U.start===M&&U.diag===M-z||U.end===D&&U.diag===D-P){let X=D,oe=P;for(;X<M||oe<z;)X<M&&oe<z&&e[X]===n[oe]?(G.push([aO,e[X]]),++X,++oe):M-D>z-P?(G.push([OP,e[X]]),++X):(G.push([AP,n[oe]]),++oe)}else{f(D,U.start,P,U.start-U.diag,G);for(let X=U.start;X<U.end;++X)G.push([aO,e[X]]);f(U.end,M,U.end-U.diag,z,G)}},b=(D,M,P,z)=>{let G=D;for(;G-M<z&&G<P&&e[G]===n[G-M];)++G;return u(D,G,M)},C=(D,M,P,z)=>{const G=M-D,U=z-P;if(G===0||U===0)return null;const X=G-U,oe=U+G,fe=(oe%2===0?oe:oe+1)/2;r[1+fe]=D,a[1+fe]=M+1;let ge,be,He,Qe,yt;for(ge=0;ge<=fe;++ge){for(be=-ge;be<=ge;be+=2){for(He=be+fe,be===-ge||be!==ge&&r[He-1]<r[He+1]?r[He]=r[He+1]:r[He]=r[He-1]+1,Qe=r[He],yt=Qe-D+P-be;Qe<M&&yt<z&&e[Qe]===n[yt];)r[He]=++Qe,++yt;if(X%2!==0&&X-ge<=be&&be<=X+ge&&a[He-X]<=r[He])return b(a[He-X],be+D-P,M,z)}for(be=X-ge;be<=X+ge;be+=2){for(He=be+fe-X,be===X-ge||be!==X+ge&&a[He+1]<=a[He-1]?a[He]=a[He+1]-1:a[He]=a[He-1],Qe=a[He]-1,yt=Qe-D+P-be;Qe>=D&&yt>=P&&e[Qe]===n[yt];)a[He]=Qe--,yt--;if(X%2===0&&-ge<=be&&be<=ge&&a[He]<=r[He+X])return b(a[He],be+D-P,M,z)}}return null},x=[];return f(0,e.length,0,n.length,x),x},Da=e=>pt(e)?e.outerHTML:qe(e)?xm.encodeRaw(e.data,!1):rr(e)?"<!--"+e.data+"-->":"",j8=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},UE=(e,n,o)=>{const r=j8(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},j1=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},DP=(e,n)=>{let o=0;pe(e,r=>{r[0]===aO?o++:r[0]===AP?(UE(n,r[1],o),o++):r[0]===OP&&j1(n,o)})},ll=(e,n)=>Bt(qt(Tr(e.childNodes),k(Ki,Da)),o=>o.length>0),G1=(e,n)=>{const o=qt(Tr(n.childNodes),Da);return DP(zE(o,e),n),n},RP=Mc(()=>document.implementation.createHTMLDocument("undo")),G8=e=>e.querySelector("iframe")!==null,MP=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),q8=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),kC=e=>{const n=e.serializer.getTempAttrs(),o=gM(e.getBody(),n);return G8(o)?MP(ll(o)):q8(Ki(o.innerHTML))},q1=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?G1(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Me(r)&&W_(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},_C=e=>e.type==="fragmented"?e.fragments.join(""):e.content,NP=e=>{const n=ne.fromTag("body",RP());return Ng(n,_C(e)),pe(Ea(n,"*[data-mce-bogus]"),eu),Rs(n)},PP=(e,n)=>_C(e)===_C(n),K8=(e,n)=>NP(e)===NP(n),AC=(e,n)=>!e||!n?!1:PP(e,n)?!0:K8(e,n),OC=e=>e.get()===0,WE=(e,n,o)=>{OC(o)&&(e.typing=n)},BP=(e,n)=>{e.typing&&(WE(e,!1,n),e.add())},tf=e=>{e.typing&&(e.typing=!1,e.add())},iO=(e,n,o)=>{OC(n)&&o.set(a0(e.selection))},Y8=(e,n,o,r,a,u,f)=>{const b=kC(e),C=je.extend(u||{},b);if(!OC(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&AC(x,C))return null;n.data[o.get()]&&a.get().each(P=>{n.data[o.get()].beforeBookmark=P});const D=g0(e);if(D&&n.data.length>D){for(let P=0;P<n.data.length-1;P++)n.data[P]=n.data[P+1];n.data.length--,o.set(n.data.length)}C.bookmark=a0(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const M={level:C,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),C},ZE=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},lO=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];q1(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},$P=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],q1(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},IP=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,WE(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],q1(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},LP=e=>{e.clear(),e.add()},X8=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!AC(kC(e),n.data[0]),J8=(e,n)=>n.get()<e.data.length-1&&!e.typing,Q8=(e,n,o)=>(BP(e,n),e.beforeChange(),e.ignore(o),e.add()),e7=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},t7=(e,n)=>{const o=e.dom,r=Me(n)?n:e.getBody();pe(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=$w(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,C=t2(e);b&&e.hasVisual?o.addClass(a,C):o.removeClass(a,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},uO=e=>({init:{bindEvents:kt},undoManager:{beforeChange:(n,o)=>iO(e,n,o),add:(n,o,r,a,u,f)=>Y8(e,n,o,r,a,u,f),undo:(n,o,r)=>IP(e,n,o,r),redo:(n,o)=>$P(e,n,o),clear:(n,o)=>ZE(e,n,o),reset:n=>LP(n),hasUndo:(n,o)=>X8(e,n,o),hasRedo:(n,o)=>J8(n,o),transact:(n,o,r)=>Q8(n,o,r),ignore:(n,o)=>e7(n,o),extra:(n,o,r,a)=>lO(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>lC(e,n,o,r,a),matchAll:(n,o)=>SN(e,n,o),matchNode:(n,o,r,a)=>jd(e,n,o,r,a),canApply:n=>L6(e,n),closest:n=>gE(e,n),apply:(n,o,r)=>DA(e,n,o,r),remove:(n,o,r,a)=>WN(e,n,o,r,a),toggle:(n,o,r)=>OE(e,n,o,r),formatChanged:(n,o,r,a,u)=>r8(e,n,o,r,a,u)},editor:{getContent:n=>VF(e,n),setContent:(n,o)=>B1(e,n,o),insertContent:(n,o)=>cl(e,n,o),addVisual:n=>t7(e,n)},selection:{getContent:(n,o)=>Z8(e,n,o)},autocompleter:{addDecoration:kt,removeDecoration:kt},raw:{getModel:()=>$.none()}}),n7=e=>{const n=x=>ut(x)?x:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,D,M)=>r.transact(M),ignore:(x,D)=>r.ignore(D),extra:(x,D,M,P)=>r.extra(M,P)},formatter:{match:(x,D,M,P)=>a.match(x,n(D),P),matchAll:a.matchAll,matchNode:a.matchNode,canApply:x=>a.canApply(x),closest:x=>a.closest(x),apply:(x,D,M)=>a.apply(x,n(D)),remove:(x,D,M,P)=>a.remove(x,n(D)),toggle:(x,D,M)=>a.toggle(x,n(D)),formatChanged:(x,D,M,P,z)=>a.formatChanged(D,M,P,z)},editor:{getContent:x=>u.getContent(x),setContent:(x,D)=>({content:u.setContent(x,D),html:""}),insertContent:(x,D)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,D)=>f.getContent(D)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>$.some(C.getRawModel())}}},o7=()=>{const e=et(null),n=et("");return{init:{bindEvents:kt},undoManager:{beforeChange:kt,add:e,undo:e,redo:e,clear:kt,reset:kt,hasUndo:_e,hasRedo:_e,transact:e,ignore:kt,extra:kt},formatter:{match:_e,matchAll:et([]),matchNode:et(void 0),canApply:_e,closest:n,apply:kt,remove:kt,toggle:kt,formatChanged:et({unbind:kt})},editor:{getContent:n,setContent:et({content:"",html:""}),insertContent:et(""),addVisual:kt},selection:{getContent:n},autocompleter:{addDecoration:kt,removeDecoration:kt},raw:{getModel:et($.none())}}},nf=e=>zt(e.plugins,"rtc"),FP=e=>ho(e.plugins,"rtc").bind(n=>$.from(n.setup)),dO=e=>{const n=e;return FP(e).fold(()=>(n.rtcInstance=uO(e),$.none()),o=>(n.rtcInstance=o7(),$.some(()=>o().then(r=>(n.rtcInstance=n7(r),r.rtc.isRemote)))))},DC=e=>e.rtcInstance?e.rtcInstance:uO(e),lc=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},mO=(e,n,o)=>{lc(e).undoManager.beforeChange(n,o)},HP=(e,n,o,r,a,u,f)=>lc(e).undoManager.add(n,o,r,a,u,f),VP=(e,n,o,r)=>lc(e).undoManager.undo(n,o,r),fO=(e,n,o)=>lc(e).undoManager.redo(n,o),zP=(e,n,o)=>{lc(e).undoManager.clear(n,o)},UP=(e,n)=>{lc(e).undoManager.reset(n)},WP=(e,n,o)=>lc(e).undoManager.hasUndo(n,o),s7=(e,n,o)=>lc(e).undoManager.hasRedo(n,o),gO=(e,n,o,r)=>lc(e).undoManager.transact(n,o,r),r7=(e,n,o)=>{lc(e).undoManager.ignore(n,o)},jE=(e,n,o,r,a)=>{lc(e).undoManager.extra(n,o,r,a)},c7=(e,n,o,r,a)=>lc(e).formatter.match(n,o,r,a),a7=(e,n,o)=>lc(e).formatter.matchAll(n,o),i7=(e,n,o,r,a)=>lc(e).formatter.matchNode(n,o,r,a),ZP=(e,n)=>lc(e).formatter.canApply(n),jP=(e,n)=>lc(e).formatter.closest(n),l7=(e,n,o,r)=>{lc(e).formatter.apply(n,o,r)},u7=(e,n,o,r,a)=>{lc(e).formatter.remove(n,o,r,a)},d7=(e,n,o,r)=>{lc(e).formatter.toggle(n,o,r)},m7=(e,n,o,r,a,u)=>lc(e).formatter.formatChanged(n,o,r,a,u),f7=(e,n)=>DC(e).editor.getContent(n),GP=(e,n,o)=>DC(e).editor.setContent(n,o),Qj=(e,n,o)=>DC(e).editor.insertContent(n,o),g7=(e,n,o)=>lc(e).selection.getContent(n,o),h7=(e,n)=>lc(e).editor.addVisual(n),qP=e=>lc(e).init.bindEvents(),p7=(e,n={})=>{const o=n.format?n.format:"html";return g7(e,o,n)},KP=e=>e.dom.length===0?(Zo(e),$.none()):$.some(e),b7=(e,n)=>e.filter(o=>cg.isBookmarkNode(o.dom)).bind(n?Xc:Jl),v7=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(j4(u,f,a,!1,!r),o.setStart(f,b)):(j4(f,u,a,!1,!r),o.setEnd(f,b))},YP=(e,n,o)=>{Yc(e).each(r=>{const a=e.dom;n&&G2(r,De(a,0),o)?Kx(a,0,o):!n&&q2(r,De(a,a.length),o)&&Z4(a,a.length,o)})},XP=(e,n,o,r,a)=>{e.bind(u=>((r?Z4:Kx)(u.dom,r?u.dom.length:0,a),n.filter(Bo).map(b=>v7(u,b,o,r,a)))).orThunk(()=>b7(n,r).or(n).filter(Bo).map(f=>YP(f,r,a)))},y7=(e,n,o)=>{const r=$.from(n.firstChild).map(ne.fromDom),a=$.from(n.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Jl).filter(Bo).bind(KP),f=a.bind(Xc).filter(Bo).bind(KP);XP(u,r,e,!0,o),XP(f,a,e,!1,o),e.collapse(!1)},C7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),S7=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return Ah({validate:!1},e.schema).serialize(u)}else return n.content},w7=(e,n,o={})=>{const r=C7(o,n);IE(e,r).each(a=>{const u=S7(e,a),f=e.selection.getRng();y7(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),ug(e,f),LE(e,u,a)})},x7=(e,n,o)=>{if(zt(e,n)){const r=Bt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var eG=(e,n)=>{let o,r;const a=(b,C)=>bo(C,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,x=u(C),D={};ct(o,(M,P)=>{a(P,x).each(z=>{r[P]||(pe(M,G=>{G(!0,{node:z,selector:P,parents:x})}),r[P]=M),D[P]=M})}),ct(r,(M,P)=>{D[P]||(delete r[P],pe(M,z=>{z(!1,{node:C,selector:P,parents:x})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{x7(o,b,C),x7(r,b,C)}})}};const JP=e=>!!(e&&e.ownerDocument)&&Ic(ne.fromDom(e.ownerDocument),ne.fromDom(e)),E7=e=>e?JP(e.startContainer)&&JP(e.endContainer):!1,T7=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=eG(e,r),b=(at,Mt)=>{const so=e.createRng();Me(at)&&Me(Mt)?(so.setStart(at,Mt),so.setEnd(at,Mt),be(so),oe(!1)):(hx(e,so,r.getBody(),!0),be(so))},C=at=>p7(r,at),x=(at,Mt)=>w7(r,at,Mt),D=at=>oM(r.getBody(),ge(),at),M=at=>sM(r.getBody(),ge(),at),P=(at,Mt)=>Br.getBookmark(at,Mt),z=at=>Br.moveToBookmark(at),G=(at,Mt)=>(cM(e,at,Mt).each(be),at),U=()=>{const at=ge(),Mt=fe();return!at||at.item?!1:at.compareEndPoints?at.compareEndPoints("StartToEnd",at)===0:!Mt||at.collapsed},X=()=>{if(r.mode.isReadOnly())return!1;const at=ge(),Mt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Mt.length>0?Yo(Mt,so=>e.isEditable(so.parentElement)):D4(e,at)},oe=at=>{const Mt=ge();Mt.collapse(!!at),be(Mt)},fe=()=>n.getSelection?n.getSelection():n.document.selection,ge=()=>{let at;const Mt=(ht,jt,Qt)=>{try{return jt.compareBoundaryPoints(ht,Qt)}catch{return-1}},so=n.document;if(Me(r.bookmark)&&!ov(r)){const ht=Ix(r);if(ht.isSome())return ht.map(jt=>Wx(r,[jt])[0]).getOr(so.createRange())}try{const ht=fe();ht&&!pf(ht.anchorNode)&&(ht.rangeCount>0?at=ht.getRangeAt(0):at=so.createRange(),at=Wx(r,[at])[0])}catch{}if(at||(at=so.createRange()),$g(at.startContainer)&&at.collapsed){const ht=e.getRoot();at.setStart(ht,0),at.setEnd(ht,0)}return a&&u&&(Mt(at.START_TO_START,at,a)===0&&Mt(at.END_TO_END,at,a)===0?at=u:(a=null,u=null)),at},be=(at,Mt)=>{if(!E7(at))return;const so=fe();if(at=r.dispatch("SetSelectionRange",{range:at,forward:Mt}).range,so){u=at;try{so.removeAllRanges(),so.addRange(at)}catch{}Mt===!1&&so.extend&&(so.collapse(at.endContainer,at.endOffset),so.extend(at.startContainer,at.startOffset)),a=so.rangeCount>0?so.getRangeAt(0):null}if(!at.collapsed&&at.startContainer===at.endContainer&&(so!=null&&so.setBaseAndExtent)&&at.endOffset-at.startOffset<2&&at.startContainer.hasChildNodes()){const jt=at.startContainer.childNodes[at.startOffset];jt&&jt.nodeName==="IMG"&&(so.setBaseAndExtent(at.startContainer,at.startOffset,at.endContainer,at.endOffset),(so.anchorNode!==at.startContainer||so.focusNode!==at.endContainer)&&so.setBaseAndExtent(jt,0,jt,1))}r.dispatch("AfterSetSelectionRange",{range:at,forward:Mt})},He=at=>(x(e.getOuterHTML(at)),at),Qe=()=>RF(r.getBody(),ge()),yt=(at,Mt)=>Ux(e,ge(),at,Mt),Re=()=>{const at=fe(),Mt=at==null?void 0:at.anchorNode,so=at==null?void 0:at.focusNode;if(!at||!Mt||!so||pf(Mt)||pf(so))return!0;const ht=e.createRng(),jt=e.createRng();try{ht.setStart(Mt,at.anchorOffset),ht.collapse(!0),jt.setStart(so,at.focusOffset),jt.collapse(!0)}catch{return!0}return ht.compareBoundaryPoints(ht.START_TO_START,jt)<=0},ir={dom:e,win:n,serializer:o,editor:r,expand:(at={type:"word"})=>be(We(e).expand(ge(),at)),collapse:oe,setCursorLocation:b,getContent:C,setContent:x,getBookmark:P,moveToBookmark:z,select:G,isCollapsed:U,isEditable:X,isForward:Re,setNode:He,getNode:Qe,getSel:fe,setRng:be,getRng:ge,getStart:D,getEnd:M,getSelectedBlocks:yt,normalize:()=>{const at=ge(),Mt=fe();if(!j_(Mt)&&N0(r)){const so=lt(e,at);return so.each(ht=>{be(ht,Re())}),so.getOr(at)}return at},selectorChanged:(at,Mt)=>(f(at,Mt),ir),selectorChangedWithUnbind:f,getScrollContainer:()=>{let at,Mt=e.getRoot();for(;Mt&&Mt.nodeName!=="BODY";){if(Mt.scrollHeight>Mt.clientHeight){at=Mt;break}Mt=Mt.parentNode}return at},scrollIntoView:(at,Mt)=>{Me(at)?vF(r,at,Mt):ug(r,ge(),Mt)},placeCaretAt:(at,Mt)=>be(p(at,Mt,r.getDoc())),getBoundingClientRect:()=>{const at=ge();return at.collapsed?De.fromRangeStart(at).getClientRects()[0]:at.getBoundingClientRect()},destroy:()=>{n=a=u=null,Ac.destroy()}},Br=cg(ir),Ac=L2(ir,r);return ir.bookmarkManager=Br,ir.controlSelection=Ac,ir},k7=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=je.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const x=D=>D.name in f||Rb(o,D);for(let D=0,M=r.length;D<M;D++){let P=r[D],z=P.parent;if(z&&x(z)&&P===z.lastChild){let G=P.prev;for(;G;){const U=G.name;if(U!=="span"||G.attr("data-mce-type")!=="bookmark"){U==="br"&&(P=null);break}G=G.prev}if(P&&(P.remove(),jr(o,b,C,z))){const U=o.getElementRule(z.name);U&&(U.removeEmpty?z.remove():U.paddEmpty&&dA(e,u,x,z))}}else{let G=P;for(;z&&z.firstChild===G&&z.lastChild===G&&(G=z,!f[z.name]);)z=z.parent;if(G===z){const U=new ci("#text",3);U.value=Vr,P.replace(U)}}}})},ar=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const x=r[C];let D=x.attr(u);D!==void 0?(x.attr(a,D.length>0?D:null),x.attr(u,null)):(D=x.attr(a),a==="style"?D=o.serializeStyle(o.parseStyle(D),x.name):f&&(D=f.call(b,D,a,x.name)),x.attr(a,D.length>0?D:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&($.from(b.firstChild).exists(x=>{var D;return!zp((D=x.value)!==null&&D!==void 0?D:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],x=C.firstChild,D=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(a==="script"){const M=C.attr("type");M&&C.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&D.length>0&&(x.value=`// <![CDATA[
`+f(D)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&D.length>0&&(x.value=`<!--
`+f(D)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{pe(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&k7(n,e,e.schema)},hO=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},tG=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");je.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return H0(e,{...o,node:u}),r&&(a.doc=r),u},_7=(e,n)=>Me(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,A7=(e,n,o)=>_7(e,o)?tG(e,n,o):n,hv=(e,n,o)=>{je.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},nG=(e,n,o)=>!n.no_events&&e?V0(e,{...n,content:o}).content:o,oG=(e,n,o)=>{const r=Ki(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Yb(ne.fromDom(n))?r:je.trim(r)},ha=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return hO(a),a},QP=(e,n,o)=>Ah(e,n).serialize(o),eB=(e,n,o,r,a)=>{const u=QP(n,o,r);return nG(e,a,u)},tB=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Ko.DOM,u=n&&n.schema?n.schema:Eo(r),f=W1(r,u);ar(f,r,a);const b=(C,x={})=>{const D={format:"html",...x},M=A7(n,C,D),P=oG(a,M,D),z=ha(f,P,D);return D.format==="tree"?z:eB(n,r,u,z,D)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ve(hv,f,o),getTempAttrs:et(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},nB=(e,n)=>{const o=tB(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},O7="html",GE=(e,n)=>({...e,format:n,get:!0,getInner:!0}),D7=(e,n={})=>{const o=n.format?n.format:O7,r=GE(n,o);return vP(e,r).fold(Oo,a=>{const u=f7(e,a);return QA(e,u,a)})},pO="html",R7=(e,n)=>({format:pO,...e,set:!0,content:n}),qE=(e,n,o={})=>{const r=R7(o,n);return IE(e,r).map(a=>{const u=GP(e,a.content,a);return LE(e,u.html,a),u.content}).getOr(n)},oB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bO=[],sB="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),KE=[],rB=(e,n)=>{const o=Bt(n,r=>zt(e,r));return jn(o)},M7=e=>{const n=rB(e,oB),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),jn(n)},N7=e=>rB(e,bO),ul=(e,n)=>{const o=je.makeMap(e.plugins," "),a=Bt(n,u=>zt(o,u));return jn(a)},P7=e=>ul(e,sB),B7=e=>ul(e,KE.map(n=>n.name)),$7=(e,n)=>{const o=M7(e),r=P7(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",x=a?`

Plugins:${b}${r.join(b)}`:"",D=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+x+D)}},I7=e=>bo(KE,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),L7=(e,n)=>{const o=N7(e),r=B7(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(I7).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},cB=(e,n)=>{$7(e,n),L7(e,n)},YE=Ko.DOM,F7=e=>{YE.setStyle(e.id,"display",e.orgDisplay)},XE=e=>$.from(e).each(n=>n.destroy()),JE=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},H7=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),YE.unbind(n,"submit reset",e.formEventDelegate))},V7=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Me(a==null?void 0:a.nextSibling)&&YE.remove(a.nextSibling),e4(e),e.editorManager.remove(e),!e.inline&&r&&F7(e),t4(e),YE.remove(e.getContainer()),XE(n),XE(o),e.destroy()}},aB=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),XE(o),XE(r)),H7(e),JE(e),e.destroyed=!0}},QE=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>zt(e,a)}})(),pv=da.ModelManager,z7=(e,n)=>n.dom[e],lB=(e,n)=>parseInt(Js(n,e),10),RC=Ve(z7,"clientWidth"),uB=Ve(z7,"clientHeight"),dB=Ve(lB,"margin-top"),U7=Ve(lB,"margin-left"),mB=e=>e.dom.getBoundingClientRect(),W7=(e,n,o)=>{const r=RC(e),a=uB(e);return n>=0&&o>=0&&n<=r&&o<=a},Z7=(e,n,o,r)=>{const a=mB(n),u=e?a.left+n.dom.clientLeft+U7(n):0,f=e?a.top+n.dom.clientTop+dB(n):0,b=o-u,C=r-f;return{x:b,y:C}},j7=(e,n,o)=>{const r=ne.fromDom(e.getBody()),a=e.inline?r:fp(r),u=Z7(e.inline,a,n,o);return W7(a,u.x,u.y)},G7=e=>$.from(e).map(ne.fromDom),fB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return G7(n).map(_d).getOr(!1)};var q7=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const gB=e=>{const n=[],o=()=>{const P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():q7()},r=()=>$.from(n[0]),a=(P,z)=>P.type===z.type&&P.text===z.text&&!P.progressBar&&!P.timeout&&!z.progressBar&&!z.timeout,u=()=>{r().each(P=>{P.reposition()})},f=P=>{n.push(P)},b=P=>{_s(n,z=>z===P).each(z=>{n.splice(z,1)})},C=(P,z=!0)=>e.removed||!fB(e)?{}:(z&&e.dispatch("BeforeOpenNotification",{notification:P}),bo(n,G=>a(o().getArgs(G),P)).getOrThunk(()=>{e.editorManager.setActive(e);const G=o().open(P,()=>{b(G)},()=>tM(e));return f(G),u(),e.dispatch("OpenNotification",{notification:{...G}}),G})),x=()=>{r().each(P=>{o().close(P),b(P),u()})},D=et(n);return(P=>{P.on("SkinLoaded",()=>{const z=Xy(P);z&&C({text:z,type:"warning",timeout:0},!1),u()}),P.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),P.on("remove",()=>{pe(n.slice(),z=>{o().close(z)})}),P.addShortcut("alt+F12","Focus to notification",()=>r().map(z=>ne.fromDom(z.getEl())).each(z=>_1(z)))})(e),{open:C,close:x,getNotifications:D}},of=da.PluginManager,Wh=da.ThemeManager;var hB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const pB=e=>{let n=[];const o=()=>{const U=e.theme;return U&&U.getWindowManagerImpl?U.getWindowManagerImpl():hB()},r=(U,X)=>(...oe)=>X?X.apply(U,oe):void 0,a=U=>{e.dispatch("OpenWindow",{dialog:U})},u=U=>{e.dispatch("CloseWindow",{dialog:U})},f=U=>{n.push(U),a(U)},b=U=>{u(U),n=Bt(n,X=>X!==U),n.length===0&&e.focus()},C=()=>$.from(n[n.length-1]),x=U=>{e.editorManager.setActive(e),U2(e),e.ui.show();const X=U();return f(X),X},D=(U,X)=>x(()=>o().open(U,X,b)),M=U=>x(()=>o().openUrl(U,b)),P=(U,X,oe)=>{const fe=o();fe.alert(U,r(oe||fe,X))},z=(U,X,oe)=>{const fe=o();fe.confirm(U,r(oe||fe,X))},G=()=>{C().each(U=>{o().close(U),b(U)})};return e.on("remove",()=>{pe(n,U=>{o().close(U)})}),{open:D,openUrl:M,alert:P,confirm:z,close:G}},bB=(e,n)=>{e.notificationManager.open({type:"error",text:n})},eT=(e,n)=>{e._skinLoaded?bB(e,n):e.on("SkinLoaded",()=>{bB(e,n)})},vB=(e,n)=>{eT(e,iu.translate(["Failed to upload image: {0}",n]))},MC=(e,n,o)=>{ol(e,n,{message:o}),console.error(o)},NC=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,K7=(e,n,o)=>{MC(e,"PluginLoadError",NC("plugin",n,o))},Y7=(e,n,o)=>{MC(e,"IconsLoadError",NC("icons",n,o))},sG=(e,n,o)=>{MC(e,"LanguageLoadError",NC("language",n,o))},Kd=(e,n,o)=>{MC(e,"ThemeLoadError",NC("theme",n,o))},vO=(e,n,o)=>{MC(e,"ModelLoadError",NC("model",n,o))},X7=(e,n,o)=>{const r=iu.translate(["Failed to initialize plugin: {0}",n]);ol(e,"PluginLoadError",{message:r}),tT(r,o),eT(e,r)},tT=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},J7=e=>/^[a-z0-9\-]+$/i.test(e),yO=e=>"content/"+e+"/content.css",xo=e=>tinymce.Resource.has(yO(e)),Q7=e=>yB(e,Wf(e)),PC=e=>yB(e,C_(e)),yB=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return qt(n,u=>xo(u)?u:J7(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},eH=e=>{e.contentCSS=e.contentCSS.concat(Q7(e),PC(e))},tH=e=>e?Tr(e.getElementsByTagName("img")):[],CB=(e,n)=>{const o={};return{findAll:(a,u=Ke)=>{const f=Bt(tH(a),C=>{const x=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!x||x===_t.transparentSrc?!1:Jo(x,"blob:")?!e.isUploaded(x)&&u(C):Jo(x,"data:")?u(C):!1}),b=qt(f,C=>{const x=C.src;if(zt(o,x))return o[x].then(D=>ce(D)?D:{image:C,blobInfo:D.blobInfo});{const D=hC(n,x).then(M=>(delete o[x],{image:C,blobInfo:M})).catch(M=>(delete o[x],M));return o[x]=D,D}});return Promise.all(b)}}},hg=()=>{let o={};const r=(P,z)=>({status:P,resultUri:z}),a=P=>P in o;return{hasBlobUri:a,getResultUri:P=>{const z=o[P];return z?z.resultUri:null},isPending:P=>a(P)?o[P].status===1:!1,isUploaded:P=>a(P)?o[P].status===2:!1,markPending:P=>{o[P]=r(1,null)},markUploaded:(P,z)=>{o[P]=r(2,z)},removeFailed:P=>{delete o[P]},destroy:()=>{o={}}}};let Oi=0;const BC=()=>{const e=()=>Math.round(Fp()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Zh=e=>e+Oi+++BC(),sf=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,P,z,G,U)=>{if(ce(M))return r({id:M,name:G,filename:U,blob:P,base64:z});if(ut(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const P=M.id||Zh("blobid"),z=M.name||P,G=M.blob;return{id:et(P),name:et(z),filename:et(M.filename||z+"."+n(G.type)),blob:et(G),base64:et(M.base64),blobUri:et(M.blobUri||URL.createObjectURL(G)),uri:et(M.uri)}},a=M=>{f(M.id())||e.push(M)},u=M=>bo(e,M).getOrUndefined(),f=M=>u(P=>P.id()===M);return{create:o,add:a,get:f,getByUri:M=>u(P=>P.blobUri()===M),getByData:(M,P)=>u(z=>z.base64()===M&&z.blob().type===P),findFirst:u,removeByUri:M=>{e=Bt(e,P=>P.blobUri()===M?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{pe(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},$C=(e,n)=>{const o={},r=(U,X)=>U?U.replace(/\/$/,"")+"/"+X.replace(/^\//,""):X,a=(U,X)=>new Promise((oe,fe)=>{const ge=new XMLHttpRequest;ge.open("POST",n.url),ge.withCredentials=n.credentials,ge.upload.onprogress=He=>{X(He.loaded/He.total*100)},ge.onerror=()=>{fe("Image upload failed due to a XHR Transport error. Code: "+ge.status)},ge.onload=()=>{if(ge.status<200||ge.status>=300){fe("HTTP Error: "+ge.status);return}const He=JSON.parse(ge.responseText);if(!He||!ce(He.location)){fe("Invalid JSON: "+ge.responseText);return}oe(r(n.basePath,He.location))};const be=new FormData;be.append("file",U.blob(),U.filename()),ge.send(be)}),u=re(n.handler)?n.handler:a,f=()=>new Promise(U=>{U([])}),b=(U,X)=>({url:X,blobInfo:U,status:!0}),C=(U,X)=>({url:"",blobInfo:U,status:!1,error:X}),x=(U,X)=>{je.each(o[U],oe=>{oe(X)}),delete o[U]},D=(U,X,oe)=>(e.markPending(U.blobUri()),new Promise(fe=>{let ge,be;try{const He=()=>{ge&&(ge.close(),be=kt)},Qe=Re=>{He(),e.markUploaded(U.blobUri(),Re),x(U.blobUri(),b(U,Re)),fe(b(U,Re))},yt=Re=>{He(),e.removeFailed(U.blobUri()),x(U.blobUri(),C(U,Re)),fe(C(U,Re))};be=Re=>{Re<0||Re>100||$.from(ge).orThunk(()=>$.from(oe).map(it)).each(Ee=>{ge=Ee,Ee.progressBar.value(Re)})},X(U,be).then(Qe,Re=>{yt(ce(Re)?{message:Re}:Re)})}catch(He){fe(C(U,He))}})),M=U=>U===a,P=U=>{const X=U.blobUri();return new Promise(oe=>{o[X]=o[X]||[],o[X].push(oe)})},z=(U,X)=>(U=je.grep(U,oe=>!e.isUploaded(oe.blobUri())),Promise.all(je.map(U,oe=>e.isPending(oe.blobUri())?P(oe):D(oe,u,X))));return{upload:(U,X)=>!n.url&&M(u)?f():z(U,X)}},nT=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),oT=(e,n)=>$C(n,{url:qy(e),basePath:Ky(e),credentials:Yy(e),handler:kw(e)}),SB=e=>{const n=hg(),o=oT(e,n);return{upload:(r,a=!0)=>o.upload(r,a?nT(e):void 0)}},wB=(e,n)=>e.dom.isEmpty(n.dom)&&Me(e.schema.getTextBlockElements()[K(n)]),nH=e=>n=>{wB(e,n)&&Or(n,ne.fromHtml('<br data-mce-bogus="1" />'))},oH=e=>{const n=sf();let o,r;const a=hg(),u=[],f=ge=>be=>e.selection?ge(be):[],b=ge=>ge+(ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(ge,be,He)=>{let Qe=0;do Qe=ge.indexOf(be,Qe),Qe!==-1&&(ge=ge.substring(0,Qe)+He+ge.substr(Qe+be.length),Qe+=He.length-be.length+1);while(Qe!==-1);return ge},x=(ge,be,He)=>{const Qe=`src="${He}"${He===_t.transparentSrc?' data-mce-placeholder="1"':""}`;return ge=C(ge,`src="${be}"`,Qe),ge=C(ge,'data-mce-src="'+be+'"','data-mce-src="'+He+'"'),ge},D=(ge,be)=>{pe(e.undoManager.data,He=>{He.type==="fragmented"?He.fragments=qt(He.fragments,Qe=>x(Qe,ge,be)):He.content=x(He.content,ge,be)})},M=(ge,be)=>{const He=e.convertURL(be,"src");D(ge.src,be),dr(ne.fromDom(ge),{src:Nr(e)?b(be):be,"data-mce-src":He})},P=()=>(o||(o=oT(e,a)),X().then(f(ge=>{const be=qt(ge,He=>He.blobInfo);return o.upload(be,nT(e)).then(f(He=>{const Qe=[];let yt=!1;const Re=qt(He,(Ee,Ue)=>{const{blobInfo:Ct,image:It}=ge[Ue];let On=!1;return Ee.status&&wo(e)?(Ee.url&&!Ls(It.src,Ee.url)&&(yt=!0),n.removeByUri(It.src),nf(e)||M(It,Ee.url)):Ee.error&&(Ee.error.remove&&(D(It.src,_t.transparentSrc),Qe.push(It),On=!0),vB(e,Ee.error.message)),{element:It,status:Ee.status,uploadUri:Ee.url,blobInfo:Ct,removed:On}});return Qe.length>0&&!nf(e)?e.undoManager.transact(()=>{pe(yp(Qe),Ee=>{const Ue=Yc(Ee);Zo(Ee),Ue.each(nH(e)),n.removeByUri(Ee.dom.src)})}):yt&&e.undoManager.dispatchChange(),Re}))}))),z=()=>Ec(e)?P():Promise.resolve([]),G=ge=>Yo(u,be=>be(ge)),U=ge=>{u.push(ge)},X=()=>(r||(r=CB(a,n)),r.findAll(e.getBody(),G).then(f(ge=>{const be=Bt(ge,He=>ce(He)?(eT(e,He),!1):He.uriType!=="blob");return nf(e)||pe(be,He=>{D(He.image.src,He.blobInfo.blobUri()),He.image.src=He.blobInfo.blobUri(),He.image.removeAttribute("data-mce-src")}),be}))),oe=()=>{n.destroy(),a.destroy(),r=o=null},fe=ge=>ge.replace(/src="(blob:[^"]+)"/g,(be,He)=>{const Qe=a.getResultUri(He);if(Qe)return'src="'+Qe+'"';let yt=n.getByUri(He);return yt||(yt=Bn(e.editorManager.get(),(Re,Ee)=>Re||Ee.editorUpload&&Ee.editorUpload.blobCache.getByUri(He),void 0)),yt?'src="data:'+yt.blob().type+";base64,"+yt.base64()+'"':be});return e.on("SetContent",()=>{Ec(e)?z():X()}),e.on("RawSaveContent",ge=>{ge.content=fe(ge.content)}),e.on("GetContent",ge=>{ge.source_view||ge.format==="raw"||ge.format==="tree"||(ge.content=fe(ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ge=>{pe(ge,be=>{const He=be.attr("src");if(!He||n.getByUri(He))return;const Qe=a.getResultUri(He);Qe&&be.attr("src",Qe)})})}),{blobCache:n,addFilter:U,uploadImages:P,uploadImagesAuto:z,scanForImages:X,destroy:oe}},xB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>pt(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{je.each(f,(b,C)=>{n.setAttrib(a,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return je.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},CO={remove_similar:!0,inherit:!1},K1={selector:"td,th",...CO},EB={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...K1},tablecellverticalalign:{styles:{"vertical-align":"%value"},...K1},tablecellbordercolor:{styles:{borderColor:"%value"},...K1},tablecellclass:{classes:["%value"],...K1},tableclass:{selector:"table",classes:["%value"],...CO},tablecellborderstyle:{styles:{borderStyle:"%value"},...K1},tablecellborderwidth:{styles:{borderWidth:"%value"},...K1}},SO=et(EB),rG=e=>{const n={},o=f=>Me(f)?n[f]:n,r=f=>zt(n,f),a=(f,b)=>{f&&(ce(f)?(Zn(b)||(b=[b]),pe(b,C=>{fn(C.deep)&&(C.deep=!tl(C)),fn(C.split)&&(C.split=!tl(C)||cc(C)),fn(C.remove)&&tl(C)&&!cc(C)&&(C.remove="none"),tl(C)&&cc(C)&&(C.mixed=!0,C.block_expand=!0),ce(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):ct(f,(C,x)=>{a(x,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(xB(e)),a(SO()),a(f0(e)),{get:o,has:r,register:a,unregister:u}},sT=je.each,dd=Ko.DOM,wO=e=>Me(e)&&ut(e),TB=(e,n)=>{const o=n&&n.schema||Eo({}),r=(C,x)=>{x.classes.length>0&&dd.addClass(C,x.classes.join(" ")),dd.setAttribs(C,x.attrs)},a=C=>{const x=ce(C)?{name:C,classes:[],attrs:{}}:C,D=dd.create(x.name);return r(D,x),D},u=(C,x)=>{const D=o.getElementRule(C.nodeName.toLowerCase()),M=D==null?void 0:D.parentsRequired;return M&&M.length?x&&Ut(M,x)?x:M[0]:!1},f=(C,x,D)=>{let M;const P=x[0],z=wO(P)?P.name:void 0,G=u(C,z);if(G)z===G?(M=P,x=x.slice(1)):M=G;else if(P)M=P,x=x.slice(1);else if(!D)return C;const U=M?a(M):dd.create("div");U.appendChild(C),D&&je.each(D,oe=>{const fe=a(oe);U.insertBefore(fe,C)});const X=wO(M)?M.siblings:void 0;return f(U,x,X)},b=dd.create("div");if(e.length>0){const C=e[0],x=a(C),D=wO(C)?C.siblings:void 0;b.appendChild(f(x,e.slice(1),D))}return b},rf=e=>{e=je.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":je.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},cG=e=>ce(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),je.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=je.map(n.split(/(?:~\+|~|\+)/),rf),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],aG=(e,n)=>{let o="",r=Dw(e);if(r==="")return"";const a=P=>ce(P)?P.replace(/%(\w+)/g,""):"",u=(P,z)=>dd.getStyle(z??e.getBody(),P,!0);if(ce(n)){const P=e.formatter.get(n);if(!P)return"";n=P[0]}if("preview"in n){const P=n.preview;if(P===!1)return"";r=P||r}let f=n.block||n.inline||"span",b;const C=cG(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=TB(C,e)):b=TB([f],e);const x=dd.select(f,b)[0]||b.firstChild;sT(n.styles,(P,z)=>{const G=a(P);G&&dd.setStyle(x,z,G)}),sT(n.attributes,(P,z)=>{const G=a(P);G&&dd.setAttrib(x,z,G)}),sT(n.classes,P=>{const z=a(P);dd.hasClass(x,z)||dd.addClass(x,z)}),e.dispatch("PreviewFormats"),dd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const D=u("fontSize"),M=/px$/.test(D)?parseInt(D,10):0;return sT(r.split(" "),P=>{let z=u(P,x);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(z)&&(z=u(P),$p(z).toLowerCase()==="#ffffff"))&&!(P==="color"&&$p(z).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(z)){if(M===0)return;z=parseFloat(z)/(/%$/.test(z)?100:1)*M+"px"}P==="border"&&z&&(o+="padding:0 2px;"),o+=P+":"+z+";"}}),e.dispatch("AfterPreviewFormats"),dd.remove(b),o},sH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},bv=e=>{const n=rG(e),o=ds({});return sH(e),TN(e),nf(e)||n8(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{l7(e,r,a,u)},remove:(r,a,u,f)=>{u7(e,r,a,u,f)},toggle:(r,a,u)=>{d7(e,r,a,u)},match:(r,a,u,f)=>c7(e,r,a,u,f),closest:r=>jP(e,r),matchAll:(r,a)=>a7(e,r,a),matchNode:(r,a,u,f)=>i7(e,r,a,u,f),canApply:r=>ZP(e,r),formatChanged:(r,a,u,f)=>m7(e,o,r,a,u,f),getCssText:Ve(aG,e)}},kB=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},_B=(e,n,o)=>{const r=ds(!1),a=C=>{WE(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const x=C.command;kB(x)||(BP(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const x=C.command;kB(x)||a(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",C=>{const x=C.keyCode;if(C.isDefaultPrevented())return;const D=_t.os.isMacOS()&&C.key==="Meta";(x>=33&&x<=36||x>=37&&x<=40||x===45||C.ctrlKey||D)&&(a(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!AC(kC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const x=C.keyCode;if(C.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&a(C);return}const D=C.ctrlKey&&!C.altKey||C.metaKey;if((x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!D){n.beforeChange(),WE(n,!0,o),n.add({},C),r.set(!0);return}(_t.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&a(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&a(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},AB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},xO=e=>{const n=Cc(),o=ds(0),r=ds(0),a={data:[],typing:!1,beforeChange:()=>{mO(e,o,n)},add:(u,f)=>HP(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=kC(e);u.bookmark=a0(e.selection),e.dispatch("change",{level:u,lastLevel:Pa(a.data,r.get()).getOrUndefined()})},undo:()=>VP(e,a,o,r),redo:()=>fO(e,r,a.data),clear:()=>{zP(e,a,r)},reset:()=>{UP(e,a)},hasUndo:()=>WP(e,a,r),hasRedo:()=>s7(e,a,r),transact:u=>gO(e,a,o,u),ignore:u=>{r7(e,o,u)},extra:(u,f)=>{jE(e,a,r,u,f)}};return nf(e)||_B(e,a,o),AB(e),a},rH=[9,27,vt.HOME,vt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,vt.DOWN,vt.UP,vt.LEFT,vt.RIGHT].concat(_t.browser.isFirefox()?[224]:[]),OB="data-mce-placeholder",pg=e=>e.type==="keydown"||e.type==="keyup",DB=e=>{const n=e.keyCode;return n===vt.BACKSPACE||n===vt.DELETE},cH=e=>{if(pg(e)){const n=e.keyCode;return!DB(e)&&(vt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Ut(rH,n))}else return!1},aH=e=>pg(e)&&!(DB(e)||e.type==="keyup"&&e.keyCode===229),iH=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},lH=e=>{var n;const o=e.dom,r=Vc(e),a=(n=td(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(cH(f))return;const C=e.getBody(),x=aH(f)?!1:iH(o,C,r);(o.getAttrib(C,OB)!==""!==x||b)&&(o.setAttrib(C,OB,x?a:null),oa(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};$n(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Pl.setEditorTimeout(e,()=>u(b)))})},uH=(e,n)=>({block:e,position:n}),dH=(e,n)=>({from:e,to:n}),EO=(e,n)=>{const o=ne.fromDom(e),r=ne.fromDom(n.container());return R1(o,r).map(a=>uH(a,n))},mH=e=>!(Ic(e.to.block,e.from.block)||Ic(e.from.block,e.to.block)),rT=e=>!_n(e.from.block,e.to.block),RB=(e,n)=>Os(n,a=>Vp(a)||Fe(a.dom),a=>_n(a,e)).filter(Cn).getOr(e),fH=(e,n)=>{const o=ne.fromDom(e);return _n(RB(o,n.from.block),RB(o,n.to.block))},iG=e=>go(e.from.block.dom)===!1&&go(e.to.block.dom)===!1,IC=e=>{const n=o=>Qa(o)||Ob(o.dom)||Pf(o);return n(e.from.block)&&n(e.to.block)},gH=(e,n,o,r)=>fo(r.position.getNode())&&!la(e,r.block)?Kf(!1,r.block.dom).bind(a=>a.isEqual(r.position)?xi(o,n,a).bind(u=>EO(n,u)):$.some(r)).getOr(r):r,TO=(e,n,o,r)=>{const a=EO(n,De.fromRangeStart(r)),u=a.bind(f=>xi(o,n,f.position).bind(b=>EO(n,b).map(C=>gH(e,n,o,C))));return cn(a,u,dH).filter(f=>rT(f)&&fH(n,f)&&iG(f)&&IC(f)&&mH(f))},hH=(e,n,o,r)=>r.collapsed?TO(e,n,o,r):$.none(),pH=(e,n)=>{const o=Fr(e);return _s(o,r=>n.isBlock(K(r))).fold(et(o),r=>o.slice(0,r))},MB=(e,n)=>{const o=pH(e,n);return pe(o,Zo),o},NB=(e,n,o)=>{const r=Jm(o,n);return bo(r.reverse(),a=>la(e,a)).each(Zo)},Y1=(e,n)=>Bt(Sb(n),o=>!la(e,o)).length===0,X1=(e,n,o,r,a)=>{if(la(r,o))return Xu(o),ga(o.dom);Y1(r,a)&&la(r,n)&&qo(a,ne.fromTag("br"));const u=oi(o.dom,De.before(a.dom));return pe(MB(n,r),f=>{qo(a,f)}),NB(r,e,n),u},cT=(e,n)=>e.isInline(K(n)),aT=(e,n,o,r)=>{if(la(r,o)){if(la(r,n)){const f=Lr((b=>{const C=(x,D)=>Jc(x).fold(()=>D,M=>cT(r,M)?C(M,D.concat(Al(M))):D);return C(b,[])})(o),(b,C)=>(Ql(b,C),C),uu());bm(n),Or(n,f)}return Zo(o),ga(n.dom)}const a=Ei(o.dom);return pe(MB(n,r),u=>{Or(o,u)}),NB(r,e,n),a},J1=(e,n)=>{const o=Jm(n,e);return $.from(o[o.length-1])},Q1=(e,n)=>Ic(n,e)?J1(n,e):$.none(),LC=(e,n)=>{Kf(e,n.dom).bind(o=>$.from(o.getNode())).map(ne.fromDom).filter(Pd).each(Zo)},FC=(e,n,o,r)=>(LC(!0,n),LC(!1,o),Q1(n,o).fold(Ve(aT,e,n,o,r),Ve(X1,e,n,o,r))),kO=(e,n,o,r,a)=>n?FC(e,r,o,a):FC(e,o,r,a),HC=(e,n)=>{const o=ne.fromDom(e.getBody());return hH(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{kO(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},_O=(e,n,o)=>{const r=n.getRng();return cn(R1(e,ne.fromDom(r.startContainer)),R1(e,ne.fromDom(r.endContainer)),(a,u)=>_n(a,u)?$.none():$.some(()=>{r.deleteContents(),kO(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr($.none())},AO=(e,n)=>{const o=ne.fromDom(n),r=Ve(_n,e);return ws(o,Vp,r).isSome()},PB=(e,n)=>AO(e,n.startContainer)||AO(e,n.endContainer),vv=(e,n)=>{const o=oi(e.dom,De.fromRangeStart(n)).isNone(),r=fa(e.dom,De.fromRangeEnd(n)).isNone();return!PB(e,n)&&o&&r},BB=e=>$.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),$B=e=>{const n=ne.fromDom(e.getBody()),o=e.selection.getRng();return vv(n,o)?BB(e):_O(n,e.selection,e.schema)},iT=(e,n)=>e.selection.isCollapsed()?$.none():$B(e),md=(e,n,o,r,a)=>$.from(n._selectionOverrides.showCaret(e,o,r,a)),IB=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},yv=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?$.none():$.some(IB(n)),LB=(e,n,o)=>{const r=f2(1,e.getBody(),n),a=De.fromRangeStart(r),u=a.getNode();if(Gf(u))return md(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(Gf(f))return md(1,e,f,!1,!1);const b=rd(e.dom.getRoot(),a.getNode());return Gf(b)?md(1,e,b,!1,o):$.none()},lT=(e,n,o)=>n.collapsed?LB(e,n,o).getOr(n):n,bg=e=>Dh(e)||rv(e),jh=e=>Rh(e)||Z2(e),fd=(e,n)=>{qe(n)&&n.data.length===0&&e.remove(n)},FB=(e,n,o,r,a,u)=>{md(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),fd(e.dom,o)},bH=(e,n)=>{const o=e.selection.getRng();if(!qe(o.commonAncestorContainer))return $.none();const r=n?kc.Forwards:kc.Backwards,a=zc(e.getBody()),u=Ve(g2,n?a.next:a.prev),f=n?bg:jh,b=qf(r,e.getBody(),o),C=u(b),x=C&&pu(n,C);if(!x||!d1(b,x))return $.none();if(f(x))return $.some(()=>FB(e,o,b.getNode(),r,n,x));const D=u(x);return D&&f(D)&&d1(x,D)?$.some(()=>FB(e,o,b.getNode(),r,n,D)):$.none()},OO=(e,n)=>bH(e,n),DO=(e,n)=>{const o=e.getBody();return n?ga(o).filter(Dh):Ei(o).filter(Rh)},RO=e=>{const n=e.selection.getRng();return!n.collapsed&&(DO(e,!0).exists(o=>o.isEqual(De.fromRangeStart(n)))||DO(e,!1).exists(o=>o.isEqual(De.fromRangeEnd(n))))},vH=e=>Me(e)&&(Vp(ne.fromDom(e))||Pf(ne.fromDom(e))),Fl=Ji.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),yH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return pt(o)&&o.getAttribute("data-mce-caret")===r},CH=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!du(o,r,e);return E0(!n,o).fold(()=>E0(n,r).fold(_e,u),u)},HB=(e,n,o,r,a)=>{const u=a.getNode(!o);return R1(ne.fromDom(n),ne.fromDom(r.getNode())).map(f=>la(e,f)?Fl.remove(f.dom):Fl.moveToElement(u)).orThunk(()=>$.some(Fl.moveToElement(u)))},VB=(e,n,o,r)=>xi(n,e,o).bind(a=>vH(a.getNode())||CH(e,n,o,a,r)?$.none():n&&go(a.getNode())||!n&&go(a.getNode(!0))?HB(r,e,n,o,a):n&&Rh(o)||!n&&Dh(o)?$.some(Fl.moveToPosition(a)):$.none()),SH=(e,n)=>Tn(n)?$.none():e&&go(n.nextSibling)?$.some(Fl.moveToElement(n.nextSibling)):!e&&go(n.previousSibling)?$.some(Fl.moveToElement(n.previousSibling)):$.none(),MO=(e,n,o)=>o.fold(r=>$.some(Fl.remove(r)),r=>$.some(Fl.moveToElement(r)),r=>du(n,r,e)?$.none():$.some(Fl.moveToPosition(r))),NO=(e,n,o,r)=>yH(n,o)?SH(n,o.getNode(!n)).orThunk(()=>VB(e,n,o,r)):VB(e,n,o,r).bind(a=>MO(e,o,a)),zB=(e,n,o,r)=>{const a=f2(n?1:-1,e,o),u=De.fromRangeStart(a),f=ne.fromDom(e);return!n&&Rh(u)?$.some(Fl.remove(u.getNode(!0))):n&&Dh(u)?$.some(Fl.remove(u.getNode())):!n&&Dh(u)&&qx(f,u,r)?tn(f,u,r).map(b=>Fl.remove(b.getNode())):n&&Rh(u)&&F4(f,u,r)?e6(f,u,r).map(b=>Fl.remove(b.getNode())):NO(e,n,u,r)},wH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),O1(e,n,ne.fromDom(o)),!0),xH=(e,n)=>o=>{const r=n?De.before(o):De.after(o);return e.selection.setRng(r.toRange()),!0},UB=e=>n=>(e.selection.setRng(n.toRange()),!0),PO=(e,n)=>$.from(rd(e.getBody(),n)),BO=(e,n)=>{const o=e.selection.getNode();return PO(e,o).filter(go).fold(()=>zB(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(wH(e,n),xH(e,n),UB(e))),()=>$.some(kt))},WB=e=>{pe(Ea(e,".mce-offscreen-selection"),Zo)},ZB=(e,n)=>{const o=e.selection.getNode();return go(o)&&!kb(o)?PO(e,o.parentNode).filter(go).fold(()=>$.some(()=>{WB(ne.fromDom(e.getBody())),O1(e,n,ne.fromDom(e.selection.getNode())),Mh(e)}),()=>$.some(kt)):RO(e)?$.some(()=>{Bl(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):$.none()},uT=e=>{const n=e.dom,o=e.selection,r=rd(e.getBody(),o.getNode());if(Fe(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(De.before(a).toRange())}return!0},$O=(e,n)=>e.selection.isCollapsed()?BO(e,n):ZB(e,n),jB=e=>e.hasOwnProperty("text"),Yd=e=>e.hasOwnProperty("marker"),Cu=(e,n)=>{const o=(u,f)=>{if(qe(u))return{text:u,offset:f};{const b=n(),C=u.childNodes;return f<C.length?(u.insertBefore(b,C[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},VC=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return jB(r)?u.setStart(r.text,r.offset):Yd(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),jB(a)?u.setEnd(a.text,a.offset):Yd(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},dT=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=a.cloneNode(!1),x=()=>{if(n?jM(e):Qm(e),f.firstChild!==a){const D=Cu(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(M=>C.appendChild(M)),f.appendChild(C),e.selection.setRng(VC(D))}};return $.some(x)}return $.none()},mT=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return xi(n,e.getBody(),o).filter(r=>n?Ht(r):TM(r)).bind(r=>m2(n?0:-1,r)).map(r=>()=>e.selection.select(r))},fT=(e,n)=>e.selection.isCollapsed()?mT(e,n):$.none(),eb=qe,IO=e=>eb(e)&&e.data[0]===Wr,LO=e=>eb(e)&&e.data[e.data.length-1]===Wr,FO=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Wr)},GB=e=>{var n;if(eb(e.previousSibling))return LO(e.previousSibling)||e.previousSibling.appendData(Wr),e.previousSibling;if(eb(e))return IO(e)||e.insertData(0,Wr),e;{const o=FO(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},gT=e=>{var n,o;if(eb(e.nextSibling))return IO(e.nextSibling)||e.nextSibling.insertData(0,Wr),e.nextSibling;if(eb(e))return LO(e)||e.appendData(Wr),e;{const r=FO(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Cv=(e,n)=>e?GB(n):gT(n),EH=Ve(Cv,!0),TH=Ve(Cv,!1),qB=(e,n)=>qe(e.container())?Cv(n,e.container()):Cv(n,e.getNode()),KB=(e,n)=>{const o=n.get();return o&&e.container()===o&&Ol(o)},hT=(e,n)=>n.fold(o=>{jf(e.get());const r=EH(o);return e.set(r),$.some(De(r,r.length-1))},o=>ga(o).map(r=>{if(KB(r,e)){const a=e.get();return De(a,1)}else{jf(e.get());const a=qB(r,!0);return e.set(a),De(a,1)}}),o=>Ei(o).map(r=>{if(KB(r,e)){const a=e.get();return De(a,a.length-1)}else{jf(e.get());const a=qB(r,!1);return e.set(a),De(a,a.length-1)}}),o=>{jf(e.get());const r=TH(o);return e.set(r),$.some(De(r,1))}),YB=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return $.none()},ii=Ji.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),pT=(e,n)=>{const o=ni(n,e);return o||e},kH=(e,n,o)=>{const r=UM(o),a=pT(n,r.container());return dg(e,a,r).fold(()=>fa(a,r).bind(Ve(dg,e,a)).map(u=>ii.before(u)),$.none)},_H=(e,n)=>Yf(e,n)===null,XB=(e,n,o)=>dg(e,n,o).filter(Ve(_H,n)),AH=(e,n,o)=>{const r=WM(o);return XB(e,n,r).bind(a=>oi(a,r).isNone()?$.some(ii.start(a)):$.none())},OH=(e,n,o)=>{const r=UM(o);return XB(e,n,r).bind(a=>fa(a,r).isNone()?$.some(ii.end(a)):$.none())},DH=(e,n,o)=>{const r=WM(o),a=pT(n,r.container());return dg(e,a,r).fold(()=>oi(a,r).bind(Ve(dg,e,a)).map(u=>ii.after(u)),$.none)},JB=e=>!G4(zC(e)),Su=(e,n,o)=>YB([kH,AH,OH,DH],[e,n,o]).filter(JB),zC=e=>e.fold(Oo,Oo,Oo,Oo),QB=e=>e.fold(et("before"),et("start"),et("end"),et("after")),bT=e=>e.fold(ii.before,ii.before,ii.after,ii.after),HO=e=>e.fold(ii.start,ii.start,ii.end,ii.end),RH=(e,n)=>QB(e)===QB(n)&&zC(e)===zC(n),e5=(e,n,o,r,a,u)=>cn(dg(n,o,r),dg(n,o,a),(f,b)=>f!==b&&zM(o,f,b)?ii.after(e?f:b):u).getOr(u),MH=(e,n)=>e.fold(Ke,o=>!RH(o,n)),NH=(e,n,o,r,a)=>{const u=pu(e,a);return xi(e,o,u).map(Ve(pu,e)).fold(()=>r.map(bT),C=>Su(n,o,C).map(Ve(e5,e,n,o,u,C)).filter(Ve(MH,r))).filter(JB)},VO=(e,n)=>e?n.fold(k($.some,ii.start),$.none,k($.some,ii.after),$.none):n.fold($.none,k($.some,ii.before),$.none,k($.some,ii.end)),PH=(e,n,o,r)=>{const a=pu(e,r),u=Su(n,o,a);return Su(n,o,a).bind(Ve(VO,e)).orThunk(()=>NH(e,n,o,u,r))},BH=e=>re(e.selection.getSel().modify),t5=(e,n,o)=>{const r=e?1:-1;return n.setRng(De(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},$H=(e,n)=>{const o=n.selection.getRng(),r=e?De.fromRangeEnd(o):De.fromRangeStart(o);return BH(n)?e&&Ju(r)?t5(!0,n.selection,r):!e&&Bd(r)?t5(!1,n.selection,r):!1:!1};var cf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(cf||(cf={}));const vT=(e,n)=>e===kc.Backwards?Io(n):n,IH=(e,n,o)=>e===kc.Forwards?n.next(o):n.prev(o),yT=(e,n,o,r)=>fo(r.getNode(n===kc.Forwards))?cf.Br:du(o,r)===!1?cf.Block:cf.Wrap,UC=(e,n,o,r)=>{const a=zc(o);let u=r;const f=[];for(;u;){const b=IH(n,a,u);if(!b)break;if(fo(b.getNode(!1)))return n===kc.Forwards?{positions:vT(n,f).concat([b]),breakType:cf.Br,breakAt:$.some(b)}:{positions:vT(n,f),breakType:cf.Br,breakAt:$.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=yT(o,n,u,b);return{positions:vT(n,f),breakType:C,breakAt:$.some(b)}}f.push(b),u=b}return{positions:vT(n,f),breakType:cf.Eol,breakAt:$.none()}},n5=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===kc.Backwards?u.concat(a):[a].concat(u)}).getOr([]),zO=(e,n)=>Bn(e,(o,r)=>o.fold(()=>$.some(r),a=>cn(js(a.getClientRects()),js(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),$.none()),tb=(e,n)=>js(n.getClientRects()).bind(o=>zO(e,o.left)),WC=Ve(UC,De.isAbove,-1),ZC=Ve(UC,De.isBelow,1),o5=Ve(n5,-1,WC),s5=Ve(n5,1,ZC),r5=(e,n)=>WC(e,n).breakAt.isNone(),c5=(e,n)=>ZC(e,n).breakAt.isNone(),LH=e=>ga(e).map(n=>[n].concat(ZC(e,n).positions)).getOr([]),FH=e=>Ei(e).map(n=>WC(e,n).positions.concat(n)).getOr([]),HH=(e,n)=>tb(o5(e,n),n),VH=(e,n)=>tb(s5(e,n),n),zH=go,UH=(e,n)=>Math.abs(e.left-n),wu=(e,n)=>Math.abs(e.right-n),UO=e=>$s(e,"node"),WO=(e,n)=>Is(e,(o,r)=>{const a=Math.min(UH(o,n),wu(o,n)),u=Math.min(UH(r,n),wu(r,n));return u===a&&UO(r)&&zH(r.node)||u<a?r:o}),a5=e=>{const n=o=>qt(o,r=>{const a=$d(r);return a.node=e,a});if(pt(e))return n(e.getClientRects());if(qe(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},i5=e=>Bs(e,a5);var Sv;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Sv||(Sv={}));const WH=(e,n,o,r)=>{let a=r;for(;a=l1(a,e,sw,n);)if(o(a))return},ZO=(e,n,o,r,a,u)=>{let f=0;const b=[],C=M=>{let P=i5([M]);e===-1&&(P=P.reverse());for(let z=0;z<P.length;z++){const G=P[z];if(!o(G,x)){if(b.length>0&&n(G,qs(b))&&f++,G.line=f,a(G))return!0;b.push(G)}}return!1},x=qs(u.getClientRects());if(!x)return b;const D=u.getNode();return D&&(C(D),WH(e,r,C,D)),b},ZH=(e,n)=>n.line>e,jH=(e,n)=>n.line===e,GH=Ve(ZO,Sv.Up,ts,Up),wv=Ve(ZO,Sv.Down,Up,ts),jO=e=>qs(e.getClientRects()),l5=(e,n,o,r)=>{const a=zc(n);let u,f,b,C;const x=[];let D=0;e===1?(u=a.next,f=Up,b=ts,C=De.after(r)):(u=a.prev,f=ts,b=Up,C=De.before(r));const M=jO(C);do{if(!C.isVisible())continue;const P=jO(C);if(b(P,M))continue;x.length>0&&f(P,qs(x))&&D++;const z=$d(P);if(z.position=C,z.line=D,o(z))return x;x.push(z)}while(C=u(C));return x},GO=e=>n=>ZH(e,n),jC=e=>n=>jH(e,n),vg=(e,n)=>{e.selection.setRng(n),ug(e,e.selection.getRng())},qO=(e,n,o)=>$.some(lT(e,n,o)),u5=(e,n,o,r,a,u)=>{const f=n===kc.Forwards,b=zc(e.getBody()),C=Ve(g2,f?b.next:b.prev),x=f?r:a;if(!o.collapsed){const G=Wp(o);if(u(G))return md(n,e,G,n===kc.Backwards,!1);if(RO(e)){const U=o.cloneRange();return U.collapse(n===kc.Backwards),$.from(U)}}const D=qf(n,e.getBody(),o);if(x(D))return yv(e,D.getNode(!f));let M=C(D);const P=es(o);if(M)M=pu(f,M);else return P?$.some(o):$.none();if(x(M))return md(n,e,M.getNode(!f),f,!1);const z=C(M);return z&&x(z)&&d1(M,z)?md(n,e,z.getNode(!f),f,!1):P?qO(e,M.toRange(),!1):$.none()},d5=(e,n,o,r,a,u)=>{const f=qf(n,e.getBody(),o),b=qs(f.getClientRects()),C=n===Sv.Down,x=e.getBody();if(!b)return $.none();if(RO(e)){const X=C?De.fromRangeEnd(o):De.fromRangeStart(o);return(C?VH:HH)(x,X).orThunk(()=>$.from(X)).map(fe=>fe.toRange())}const M=(C?wv:GH)(x,GO(1),f),P=Bt(M,jC(1)),z=b.left,G=WO(P,z);if(G&&u(G.node)){const X=Math.abs(z-G.left),oe=Math.abs(z-G.right);return md(n,e,G.node,X<oe,!1)}let U;if(r(f)?U=f.getNode():a(f)?U=f.getNode(!0):U=Wp(o),U){const X=l5(n,x,GO(1),U);let oe=WO(Bt(X,jC(1)),z);if(oe||(oe=qs(Bt(X,jC(0))),oe))return qO(e,oe.position.toRange(),!1)}return P.length===0?m5(e,C).filter(C?a:r).map(X=>lT(e,X.toRange(),!1)):$.none()},m5=(e,n)=>{const o=e.selection.getRng(),r=n?De.fromRangeEnd(o):De.fromRangeStart(o),a=H_(r.container(),e.getBody());if(n){const u=ZC(a,r);return Ss(u.positions)}else{const u=WC(a,r);return js(u.positions)}},qH=(e,n,o)=>m5(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),KO=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},xu=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},f5=(e,n,o)=>hT(n,o).map(r=>(KO(e,r),o)),KH=(e,n,o)=>{const r=De.fromRangeStart(e);if(e.collapsed)return r;{const a=De.fromRangeEnd(e);return o?oi(n,a).getOr(a):fa(n,r).getOr(r)}},nb=(e,n,o)=>{const r=e.getBody(),a=KH(e.selection.getRng(),r,o),u=Ve(D1,e);return PH(o,u,r,a).bind(b=>f5(e,n,b))},g5=(e,n,o)=>{const r=qt(Ea(ne.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Bt(r,e),u=Bt(o,e);pe(Dc(a,u),Ve(xu,!1)),pe(Dc(u,a),Ve(xu,!0))},YH=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=De.fromRangeStart(e.selection.getRng());De.isTextPosition(r)&&!ai(r)&&(KO(e,$_(o,r)),n.set(null))}},CT=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Bt(r,e);pe(a,u=>{const f=De.fromRangeStart(n.selection.getRng());Su(e,n.getBody(),f).bind(b=>f5(n,o,b))})}},h5=(e,n,o)=>e1(e)?nb(e,n,o).isSome():!1,p5=(e,n,o)=>e1(n)?$H(e,n):!1,XH=e=>{const n=ds(null),o=Ve(D1,e);return e.on("NodeChange",r=>{e1(e)&&(g5(o,e.dom,r.parents),YH(e,n),CT(o,e,n,r.parents))}),n},JH=Ve(p5,!0),b5=Ve(p5,!1),ST=(e,n,o)=>{if(e1(e)){const r=m5(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?De.fromRangeEnd(a):De.fromRangeStart(a)});return Su(Ve(D1,e),e.getBody(),r).exists(a=>{const u=bT(a);return hT(o,u).exists(f=>(KO(e,f),!0))})}else return!1},yg=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},YO=e=>cn(ga(e),Ei(e),(n,o)=>{const r=pu(!0,n),a=pu(!1,o);return fa(e,r).forall(u=>u.isEqual(a))}).getOr(!0),v5=(e,n)=>o=>hT(n,o).map(r=>()=>KO(e,r)),y5=(e,n,o,r)=>{const a=e.getBody(),u=Ve(D1,e);e.undoManager.ignore(()=>{e.selection.setRng(yg(o,r)),Qm(e),Su(u,a,De.fromRangeStart(e.selection.getRng())).map(HO).bind(v5(e,n)).each(Xt)}),e.nodeChanged()},QH=(e,n)=>{const o=ni(n,e);return o||e},e9=(e,n,o,r)=>{const a=QH(e.getBody(),r.container()),u=Ve(D1,e),f=Su(u,a,r);return f.bind(C=>o?C.fold(et($.some(HO(C))),$.none,et($.some(bT(C))),$.none):C.fold($.none,et($.some(bT(C))),$.none,et($.some(HO(C))))).map(v5(e,n)).getOrThunk(()=>{const C=Wm(o,a,r),x=C.bind(D=>Su(u,a,D));return cn(f,x,()=>dg(u,a,r).bind(D=>YO(D)?$.some(()=>{O1(e,o,ne.fromDom(D))}):$.none())).getOrThunk(()=>x.bind(()=>C.map(D=>()=>{o?y5(e,n,r,D):y5(e,n,D,r)})))})},XO=(e,n,o)=>{if(e.selection.isCollapsed()&&e1(e)){const r=De.fromRangeStart(e.selection.getRng());return e9(e,n,o,r)}return $.none()},JO=e=>mm(e)>1,wT=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),a=Jm(r,o);return _s(a,n).fold(et(a),u=>a.slice(0,u))},QO=e=>mm(e)===1,C5=e=>wT(e,n=>e.schema.isBlock(K(n))||JO(n)),S5=e=>wT(e,n=>e.schema.isBlock(K(n))),e3=(e,n)=>{const o=Ve(xA,e);return Bs(n,r=>o(r)?[r.dom]:[])},w5=e=>{const n=S5(e);return e3(e,n)},GC=(e,n,o,r)=>{const a=e3(n,r);if(a.length===0)O1(n,e,o);else{const u=vE(o.dom,a);n.selection.setRng(u.toRange())}},xT=(e,n)=>{const o=Bt(C5(e),QO);return Ss(o).bind(r=>{const a=De.fromRangeStart(e.selection.getRng());return GM(n,a,r.dom)&&!y1(r)?$.some(()=>GC(n,e,r,o)):$.none()})},x5=(e,n)=>{const o=n.parentElement;return fo(n)&&!le(o)&&e.dom.isEmpty(o)},E5=e=>y1(ne.fromDom(e)),t3=(e,n)=>{const o=e.selection.getStart(),r=x5(e,o)||E5(o)?vE(o,n):kN(e.selection.getRng(),n);e.selection.setRng(r.toRange())},T5=(e,n)=>{const o=Dc(n,w5(e));o.length>0&&t3(e,o)},qC=e=>qe(e.startContainer),n3=e=>e.startOffset===0&&qC(e),KC=(e,n)=>{const o=n.startContainer.parentElement;return!le(o)&&xA(e,ne.fromDom(o))},t9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!le(n)&&!le(o)&&n.isEqualNode(o)},k5=e=>{const n=e.endContainer;return e.endOffset===(qe(n)?n.length:n.childNodes.length)},n9=e=>t9(e)&&k5(e),o9=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),_5=e=>n9(e)||o9(e),s9=e=>{const n=e.selection.getRng();return n3(n)&&KC(e,n)&&_5(n)},A5=e=>{if(s9(e)){const n=w5(e);return $.some(()=>{Qm(e),T5(e,n)})}else return $.none()},O5=(e,n)=>e.selection.isCollapsed()?xT(e,n):A5(e),r9=(e,n)=>Tb(e,o=>Ti(o.dom),o=>n.isBlock(K(o))),c9=e=>r9(ne.fromDom(e.selection.getStart()),e.schema),a9=e=>{const n=e.selection.getRng();return n.collapsed&&(qC(n)||e.dom.isEmpty(n.startContainer))&&!c9(e)},YC=e=>(a9(e)&&t3(e,[]),!0),o3=(e,n,o)=>Me(o)?$.some(()=>{e._selectionOverrides.hideFakeCaret(),O1(e,n,ne.fromDom(o))}):$.none(),i9=(e,n)=>{const o=n?rv:Z2,r=n?kc.Forwards:kc.Backwards,a=qf(r,e.getBody(),e.selection.getRng());return o(a)?o3(e,n,a.getNode(!n)):$.from(pu(n,a)).filter(u=>o(u)&&d1(a,u)).bind(u=>o3(e,n,u.getNode(!n)))},l9=(e,n)=>{const o=e.selection.getNode();return ea(o)?o3(e,n,o):$.none()},s3=(e,n)=>e.selection.isCollapsed()?i9(e,n):l9(e,n),D5=e=>Os(e,n=>Fe(n.dom)||go(n.dom)).exists(n=>Fe(n.dom)),r3=e=>qa(e??"").getOr(0),Gh=(e,n)=>{const o=e||Qk(n)?"margin":"padding",r=Js(n,"direction")==="rtl"?"-right":"-left";return o+r},R5=(e,n,o,r,a,u)=>{const f=Gh(o,ne.fromDom(u)),b=r3(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+a:"")}else{const C=b+r+a;e.setStyle(u,f,C)}},c3=(e,n)=>Yo(n,o=>{const r=Gh(Aw(e),o),a=pm(o,r).map(r3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),a3=e=>{const n=i3(e);return!e.mode.isReadOnly()&&(n.length>1||c3(e,n))},ET=e=>lu(e)||Pf(e),qh=e=>Yc(e).exists(ET),i3=e=>Bt(yp(e.selection.getSelectedBlocks()),n=>!ET(n)&&!qh(n)&&D5(n)),Hl=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:a}=e,u=MR(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=r3(u),C=Aw(e);pe(i3(e),x=>{R5(a,n,C,b,f,x.dom)})},ob=e=>Hl(e,"indent"),TT=e=>Hl(e,"outdent"),M5=e=>{if(e.selection.isCollapsed()&&a3(e)){const n=e.dom,o=e.selection.getRng(),r=De.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&Gx(ne.fromDom(a),r,e.schema))return $.some(()=>TT(e))}return $.none()},l3=(e,n,o)=>Rc([M5,$O,OO,(r,a)=>XO(r,n,a),HC,iE,fT,s3,iT,O5,dT],r=>r(e,o)).filter(r=>e.selection.isEditable()),u9=(e,n)=>{l3(e,n,!1).fold(()=>{e.selection.isEditable()&&(Qm(e),Mh(e))},Xt)},d9=(e,n)=>{l3(e,n,!0).fold(()=>{e.selection.isEditable()&&jM(e)},Xt)},m9=(e,n)=>{e.addCommand("delete",()=>{u9(e,n)}),e.addCommand("forwardDelete",()=>{d9(e,n)})},N5=5,f9=400,u3=e=>e.touches===void 0||e.touches.length!==1?$.none():$.some(e.touches[0]),g9=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>N5||r>N5},h9=e=>{const n=Cc(),o=ds(!1),r=jb(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},f9);e.on("touchstart",a=>{u3(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),u3(a).each(u=>{n.on(f=>{g9(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},Kh=(e,n)=>zt(e,n.nodeName),kT=(e,n)=>qe(n)?!0:pt(n)?!Kh(e.getBlockElements(),n)&&!si(n)&&!Cf(e,n)&&!Ab(n):!1,P5=(e,n,o)=>Vn(j2(ne.fromDom(o),ne.fromDom(n)),r=>Kh(e,r.dom)),B5=(e,n)=>{if(qe(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||Kh(e,n.nextSibling)||Ab(n.nextSibling)}return!1},XC=e=>e.dom.create(Vc(e),Im(e)),p9=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,x=null;const D=Vc(e);if(!u||!pt(u))return;const M=f.nodeName.toLowerCase();if(!r.isValidChild(M,D.toLowerCase())||P5(a,f,u))return;if(f.firstChild===f.lastChild&&fo(f.firstChild)){b=XC(e),b.appendChild(uu().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let P=f.firstChild;for(;P;)if(pt(P)&&ay(r,P),kT(r,P)){if(B5(a,P)){C=P,P=P.nextSibling,n.remove(C);continue}if(!b){if(!x&&e.hasFocus()&&(x=Cu(e.selection.getRng(),()=>document.createElement("span"))),!P.parentNode){P=null;break}b=XC(e),f.insertBefore(b,P)}C=P,P=P.nextSibling,b.appendChild(C)}else b=null,P=P.nextSibling;x&&(e.selection.setRng(VC(x)),e.nodeChanged())},$5=(e,n,o)=>{const r=ne.fromDom(XC(e)),a=uu();Or(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},b9=e=>{e.on("NodeChange",()=>p9(e))},I5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,v9=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},y9=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],v9(e,a,p0(e)));o.content=a}},C9=(e,n)=>Yo(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),L5=e=>{const n="contenteditable",o=" "+je.trim(Nl(e))+" ",r=" "+je.trim(p0(e))+" ",a=I5(o),u=I5(r),f=b0(e);f.length>0&&e.on("BeforeSetContent",b=>{y9(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const x=b[C];a(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const x=b[C];if(!a(x)&&!u(x))continue;const D=x.attr("data-mce-content");f.length>0&&D?C9(f,D)?(x.name="#text",x.type=3,x.raw=!0,x.value=D):x.remove():x.attr(n,null)}})},S9=e=>$t(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),F5=(e,n)=>{n.hasAttribute("data-mce-caret")&&(eh(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Vl=(e,n)=>{const o=S9(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),F5(e,o);return}XS(o)&&(F5(e,o),e.undoManager.add())}},w9=e=>{e.on("keyup compositionstart",Ve(Vl,e))},_T=go,H5=(e,n,o)=>u5(n,e,o,Dh,Rh,_T),d3=(e,n,o)=>d5(n,e,o,u=>Dh(u)||jx(u),u=>Rh(u)||I4(u),_T),x9=e=>{const n=e.dom.create(Vc(e));return n.innerHTML='<br data-mce-bogus="1">',n},V5=(e,n,o)=>{const r=zc(e.getBody()),a=Ve(g2,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(De.fromRangeStart(o))){const b=ne.fromDom(x9(e));n===1?Zi(ne.fromDom(u),b):qo(ne.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},E9=(e,n)=>{const o=n?kc.Forwards:kc.Backwards,r=e.selection.getRng();return H5(o,e,r).orThunk(()=>(V5(e,o,r),$.none()))},T9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return d3(o,e,r).orThunk(()=>(V5(e,o,r),$.none()))},k9=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return G4(o)?!n:n},m3=(e,n)=>E9(e,k9(e.selection,n)).exists(o=>(vg(e,o),!0)),z5=(e,n)=>T9(e,n).exists(o=>(vg(e,o),!0)),U5=(e,n)=>qH(e,n,n?Rh:Dh),Yh=(e,n)=>DO(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(vg(e,o),!0)),Cg=e=>Ut(["figcaption"],K(e)),sb=(e,n,o)=>{const r=Ve(_n,n);return Os(ne.fromDom(e.container()),a=>o.isBlock(K(a)),r).filter(Cg)},AT=(e,n,o)=>n?c5(e.dom,o):r5(e.dom,o),f3=(e,n)=>{const o=ne.fromDom(e.getBody()),r=De.fromRangeStart(e.selection.getRng());return sb(r,o,e.schema).exists(()=>{if(AT(o,n,r)){const u=$5(e,o,n?Or:Ad);return e.selection.setRng(u),!0}else return!1})},OT=(e,n)=>e.selection.isCollapsed()?f3(e,n):!1,W5=(e,n,o)=>{const r=e.selection.getRng(),a=De.fromRangeStart(r);return e.getBody().firstChild===n&&r5(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},_9=(e,n)=>{const o=e.selection.getRng(),r=De.fromRangeStart(o);return e.getBody().lastChild===n&&c5(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Z5=(e,n)=>n?$.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>_9(e,o)).getOr(!1):$.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>$.from(e.dom.getParent(o,"details")).map(r=>W5(e,r,o))).getOr(!1),g3=(e,n)=>Z5(e,n),j5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},A9=e=>qt(e,n=>({...j5,...n})),O9=e=>qt(e,n=>({...j5,...n})),G5=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,D9=(e,n)=>Bs(A9(e),o=>G5(o,n)?[o]:[]),R9=(e,n)=>Bs(O9(e),o=>G5(o,n)?[o]:[]),rn=(e,...n)=>()=>e.apply(null,n),xv=(e,n)=>bo(D9(e,n),o=>o.action()),M9=(e,n)=>Rc(R9(e,n),o=>o.action()),N9=(e,n)=>{const o=n?kc.Forwards:kc.Backwards,r=e.selection.getRng();return u5(e,o,r,rv,Z2,ea).exists(a=>(vg(e,a),!0))},P9=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return d5(e,o,r,rv,Z2,ea).exists(a=>(vg(e,a),!0))},q5=(e,n)=>qH(e,n,n?Z2:rv),B9=Ji.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),JC={...B9,none:e=>B9.none(e)},$9=(e,n)=>I9(e,n,Ke),I9=(e,n,o)=>Bs(Fr(e),r=>Fa(r,n)?o(r)?[r]:[]:I9(r,n,o)),L9=(e,n,o=_e)=>{if(o(n))return $.none();if(Ut(e,K(n)))return $.some(n);const r=a=>Fa(a,"table")||o(a);return Ar(n,e.join(","),r)},Di=(e,n)=>L9(["td","th"],e,n),K5=e=>$9(e,"th,td"),Ev=(e,n)=>Hu(e,"table",n),h3=(e,n,o,r,a=Ke)=>{const u=r===1;if(!u&&o<=0)return JC.first(e[0]);if(u&&o>=e.length-1)return JC.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?JC.middle(n,b):h3(e,n,f,r,a)}},p3=(e,n)=>Ev(e,n).bind(o=>{const r=K5(o);return _s(r,u=>_n(e,u)).map(u=>({index:u,all:r}))}),Y5=(e,n,o)=>p3(e,o).fold(()=>JC.none(e),a=>h3(a.all,e,a.index,1,n)),X5=(e,n,o)=>p3(e,o).fold(()=>JC.none(),a=>h3(a.all,e,a.index,-1,n)),b3=e=>GS(e).filter(n=>n.trim().length!==0||n.indexOf(Vr)>-1).isSome(),J5=e=>Nn(e)&&tc(e,"contenteditable")==="false",F9=["img","br"],Q5=e=>b3(e)||Ut(F9,K(e))||J5(e),H9=e=>bp(e,Q5),V9=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),z9=(e,n)=>Bs(n,o=>{const r=V9($d(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),v3=(e,n,o)=>Bn(e,(r,a)=>r.fold(()=>$.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return $.some(b<f?a:u)}),$.none()),e$=(e,n,o,r,a)=>{const u=Ea(ne.fromDom(o),"td,th,caption").map(b=>b.dom),f=Bt(z9(e,u),b=>n(b,a));return v3(f,r,a).map(b=>b.cell)},U9=e=>e.bottom,lG=e=>e.top,W9=(e,n)=>e.y<n,t$=(e,n)=>e.y>n,uG=Ve(e$,U9,W9),Z9=Ve(e$,lG,t$),j9=(e,n)=>js(n.getClientRects()).bind(o=>uG(e,o.left,o.top)).bind(o=>tb(FH(o),n)),G9=(e,n)=>Ss(n.getClientRects()).bind(o=>Z9(e,o.left,o.top)).bind(o=>tb(LH(o),n)),y3=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),DT=e=>e.breakType===cf.Wrap&&e.positions.length===0,n$=e=>e.breakType===cf.Br&&e.positions.length===1,C3=(e,n,o)=>{const r=e(n,o);return DT(r)||!fo(o.getNode())&&n$(r)?!y3(e,n,r):r.breakAt.isNone()},q9=Ve(C3,WC),K9=Ve(C3,ZC),S3=(e,n,o)=>{const r=De.fromRangeStart(n);return Kf(!e,o).exists(a=>a.isEqual(r))},Y9=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return L_()&&S3(n,a,o)?(md(u,e,o,!n,!1).each(f=>{vg(e,f)}),!0):!1},X9=(e,n,o)=>j9(n,o).orThunk(()=>js(o.getClientRects()).bind(r=>zO(o5(e,De.before(n)),r.left))).getOr(De.before(n)),J9=(e,n,o)=>G9(n,o).orThunk(()=>js(o.getClientRects()).bind(r=>zO(s5(e,De.after(n)),r.left))).getOr(De.after(n)),o$=(e,n)=>{const o=n.getNode(e);return tu(o)?$.some(o):$.none()},gd=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Zi:qo,a=$5(n,ne.fromDom(o),r);vg(n,a)})},w3=(e,n,o)=>{const r=o$(!!n,o),a=n===!1;r.fold(()=>vg(e,o.toRange()),u=>Kf(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>vg(e,o.toRange()),f=>gd(n,e,u)))},s$=(e,n,o,r)=>{const a=e.selection.getRng(),u=De.fromRangeStart(a),f=e.getBody();if(!n&&q9(r,u)){const b=X9(f,o,u);return w3(e,n,b),!0}else if(n&&K9(r,u)){const b=J9(f,o,u);return w3(e,n,b),!0}else return!1},Q9=(e,n,o)=>$.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>$.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),eV=(e,n)=>Q9(e,n,Y9),r$=(e,n)=>Q9(e,n,s$),dG=e=>{const n=T1.exact(e,0,e,0);return l(n)},c$=(e,n,o)=>o.fold($.none,$.none,(r,a)=>H9(a).map(u=>dG(u)),r=>e.mode.isReadOnly()?$.none():(e.execCommand("mceTableInsertRowAfter"),QC(e,n,r))),QC=(e,n,o)=>c$(e,n,Y5(o,Xa)),tV=(e,n,o)=>c$(e,n,X5(o,Xa)),RT=(e,n)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),a=b=>{const C=K(b);return _n(b,r)||Ut(o,C)},u=e.selection.getRng(),f=ne.fromDom(n?u.endContainer:u.startContainer);return Di(f,a).map(b=>(Ev(b,a).each(D=>{e.model.table.clearSelectedCells(D.dom)}),e.selection.collapse(!n),(n?QC:tV)(e,a,b).each(D=>{e.selection.setRng(D)}),!0)).getOr(!1)},a$=(e,n,o)=>{const r=_t.os.isMacOS()||_t.os.isiOS();xv([{keyCode:vt.RIGHT,action:rn(m3,e,!0)},{keyCode:vt.LEFT,action:rn(m3,e,!1)},{keyCode:vt.UP,action:rn(z5,e,!1)},{keyCode:vt.DOWN,action:rn(z5,e,!0)},...r?[{keyCode:vt.UP,action:rn(Yh,e,!1),metaKey:!0,shiftKey:!0},{keyCode:vt.DOWN,action:rn(Yh,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:vt.RIGHT,action:rn(eV,e,!0)},{keyCode:vt.LEFT,action:rn(eV,e,!1)},{keyCode:vt.UP,action:rn(r$,e,!1)},{keyCode:vt.DOWN,action:rn(r$,e,!0)},{keyCode:vt.UP,action:rn(r$,e,!1)},{keyCode:vt.UP,action:rn(g3,e,!1)},{keyCode:vt.DOWN,action:rn(g3,e,!0)},{keyCode:vt.RIGHT,action:rn(N9,e,!0)},{keyCode:vt.LEFT,action:rn(N9,e,!1)},{keyCode:vt.UP,action:rn(P9,e,!1)},{keyCode:vt.DOWN,action:rn(P9,e,!0)},{keyCode:vt.RIGHT,action:rn(h5,e,n,!0)},{keyCode:vt.LEFT,action:rn(h5,e,n,!1)},{keyCode:vt.RIGHT,ctrlKey:!r,altKey:r,action:rn(JH,e,n)},{keyCode:vt.LEFT,ctrlKey:!r,altKey:r,action:rn(b5,e,n)},{keyCode:vt.UP,action:rn(OT,e,!1)},{keyCode:vt.DOWN,action:rn(OT,e,!0)}],o).each(a=>{o.preventDefault()})},i$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||a$(e,n,o)})},hd=(e,n)=>({container:e,offset:n}),MT=Ko.DOM,NT=e=>n=>e===n?-1:0,nV=e=>n=>e.isBlock(n)||Ut(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",x3=(e,n,o)=>{if(qe(e)&&n>=0)return $.some(hd(e,n));{const r=Mf(MT);return $.from(r.backwards(e,n,NT(e),o)).map(a=>hd(a.container,a.container.data.length))}},PT=(e,n,o)=>{if(qe(e)&&n>=e.length)return $.some(hd(e,n));{const r=Mf(MT);return $.from(r.forwards(e,n,NT(e),o)).map(a=>hd(a.container,0))}},E3=(e,n,o)=>{if(!qe(e))return $.none();const r=e.data;if(n>=0&&n<=r.length)return $.some(hd(e,n));{const a=Mf(MT);return $.from(a.backwards(e,n,NT(e),o)).bind(u=>{const f=u.container.data;return E3(u.container,n+f.length,o)})}},l$=(e,n,o)=>{if(!qe(e))return $.none();const r=e.data;if(n<=r.length)return $.some(hd(e,n));{const a=Mf(MT);return $.from(a.forwards(e,n,NT(e),o)).bind(u=>l$(u.container,n-r.length,o))}},T3=(e,n,o,r,a)=>{const u=Mf(e,nV(e));return $.from(u.backwards(n,o,r,a))},k3=e=>e.collapsed&&qe(e.startContainer),oV=e=>Ki(e.toString().replace(/\u00A0/g," ")),u$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,d$=(e,n)=>e.substring(n.length),sV=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&u$(f))return $.none();if(u===f&&Ls(e,o,a,n))break}return $.some(a)},_3=(e,n,o,r=!1)=>{if(!k3(n))return $.none();const a={text:"",offset:0},u=(b,C,x)=>(a.text=x+a.text,a.offset+=C,sV(a.text,a.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return T3(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return $.none();const x=oV(C);return x.lastIndexOf(o)!==0?$.none():$.some({text:d$(x,o),range:C,trigger:o})})},rV=e=>e.nodeType===W,cV=e=>e.nodeType===xd,m$=e=>{if(rV(e))return hd(e,e.data.length);{const n=e.childNodes;return n.length>0?m$(n[n.length-1]):hd(e,n.length)}},f$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?f$(o[n],0):o.length>0&&cV(e)&&o.length===n?m$(o[o.length-1]):hd(e,n)},A3=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return T3(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!u$(u)}).isSome()},aV=e=>n=>{const o=f$(n.startContainer,n.startOffset);return!A3(e,o)},g$=(e,n,o)=>Rc(o.triggers,r=>_3(e,n,r)),iV=(e,n)=>{const o=n(),r=e.selection.getRng();return g$(e.dom,r,o).bind(a=>h$(e,n,a))},h$=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",C=Bt(u.lookupByTrigger(o.trigger),D=>o.text.length>=D.minChars&&D.matches.getOrThunk(()=>aV(e.dom))(o.range,b,o.text));if(C.length===0)return $.none();const x=Promise.all(qt(C,D=>D.fetch(o.text,D.maxResults,r).then(P=>({matchText:o.text,items:P,columns:D.columns,onAction:D.onAction,highlightOn:D.highlightOn}))));return $.some({lookupData:x,context:o})};var Xd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Xd||(Xd={}));const O3=(e,n,o)=>e.stype===Xd.Error?n(e.serror):o(e.svalue),lV=e=>{const n=[],o=[];return pe(e,r=>{O3(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},uV=(e,n)=>e.stype===Xd.Error?{stype:Xd.Error,serror:n(e.serror)}:e,uc=(e,n)=>e.stype===Xd.Value?{stype:Xd.Value,svalue:n(e.svalue)}:e,dV=(e,n)=>e.stype===Xd.Value?n(e.svalue):e,mV=(e,n)=>e.stype===Xd.Error?n(e.serror):e,p$=e=>({stype:Xd.Value,svalue:e}),D3=e=>({stype:Xd.Error,serror:e}),xr={fromResult:e=>e.fold(D3,p$),toResult:e=>O3(e,Dr.error,Dr.value),svalue:p$,partition:lV,serror:D3,bind:dV,bindError:mV,map:uc,mapError:uV,fold:O3},eS=e=>ut(e)&&no(e).length>100?" removed due to size":JSON.stringify(e,null,2),v$=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:et("... (only showing first ten failures)")}]):e;return qt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Tv=(e,n)=>xr.serror([{path:e,getErrorInfo:n}]),R3=(e,n,o)=>Tv(e,()=>'Could not find valid *required* value for "'+n+'" in '+eS(o)),M3=(e,n)=>Tv(e,()=>'Choice schema did not contain choice key: "'+n+'"'),y$=(e,n,o)=>Tv(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+eS(n)),BT=(e,n)=>Tv(e,et(n)),$T=(e,n,o,r)=>ho(o,r).fold(()=>y$(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),tS=(e,n)=>({extract:(a,u)=>ho(u,e).fold(()=>M3(a,e),b=>$T(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+no(n)}),nS=(e,n)=>n,pd=(e,n)=>Ao(e)&&Ao(n)?oS(e,n):n,kv=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)zt(a,u)&&(o[u]=e(o[u],a[u]))}return o},oS=kv(pd),N3=kv(nS),C$=()=>({tag:"required",process:{}}),S$=e=>({tag:"defaultedThunk",process:e}),w$=e=>S$(et(e)),gV=()=>({tag:"option",process:{}}),sS=(e,n)=>e.length>0?xr.svalue(oS(n,N3.apply(void 0,e))):xr.svalue(n),x$=e=>k(xr.serror,fl)(e),hV={consolidateObj:(e,n)=>{const o=xr.partition(e);return o.errors.length>0?x$(o.errors):sS(o.values,n)},consolidateArr:e=>{const n=xr.partition(e);return n.errors.length>0?x$(n.errors):xr.svalue(n.values)}},pV=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),bV=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),E$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},P3=e=>{const n=(r,a)=>xr.bindError(e(a),u=>BT(r,u)),o=et("val");return{extract:n,toString:o}},vV=P3(xr.svalue),yV=(e,n,o,r)=>ho(n,o).fold(()=>R3(e,o,n),r),T$=(e,n,o,r)=>{const a=ho(e,n).getOrThunk(()=>o(e));return r(a)},CV=(e,n,o)=>o(ho(e,n)),SV=(e,n,o,r)=>{const a=ho(e,n).map(u=>u===!0?o(e):u);return r(a)},wV=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>xr.svalue($.none()),C=>{const x=a.extract(n.concat([r]),C);return xr.map(x,$.some)});switch(e.tag){case"required":return yV(n,o,r,u);case"defaultedThunk":return T$(o,r,e.process,u);case"option":return CV(o,r,f);case"defaultedOptionThunk":return SV(o,r,e.process,f);case"mergeWithThunk":return T$(o,r,et({}),b=>{const C=oS(e.process(o),b);return u(C)})}},k$=(e,n,o)=>{const r={},a=[];for(const u of o)E$(u,(f,b,C,x)=>{const D=wV(C,e,n,f,x);xr.fold(D,M=>{a.push(...M)},M=>{r[b]=M})},(f,b)=>{r[f]=b(n)});return a.length>0?xr.serror(a):xr.svalue(r)},IT=e=>({extract:(r,a)=>k$(r,a,e),toString:()=>`obj{
`+qt(e,a=>E$(a,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),B3=e=>({extract:(r,a)=>{const u=qt(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return hV.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),xV=e=>P3(n=>e(n).fold(xr.serror,xr.svalue)),EV=(e,n,o)=>{const r=n.extract([e],o);return xr.mapError(r,a=>({input:o,errors:a}))},TV=(e,n,o)=>xr.toResult(EV(e,n,o)),kV=e=>`Errors: 
`+v$(e.errors).join(`
`)+`

Input object: `+eS(e.input),$3=(e,n)=>tS(e,zn(n,IT)),_V=et(vV),rS=(e,n)=>P3(o=>{const r=typeof o;return e(o)?xr.svalue(o):xr.serror(`Expected type: ${n} but got: ${r}`)}),AV=rS(is,"number"),cS=rS(ce,"string"),_$=rS(vn,"boolean"),I3=rS(re,"function"),aS=pV,A$=bV,OV=e=>xV(n=>Ut(e,n)?Dr.value(n):Dr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),L3=(e,n)=>aS(e,e,C$(),n),O$=e=>L3(e,cS),D$=e=>L3(e,I3),R$=(e,n)=>aS(e,e,C$(),B3(n)),F3=(e,n)=>aS(e,e,gV(),n),LT=e=>F3(e,cS),M$=e=>F3(e,I3),DV=(e,n)=>aS(e,e,w$(n),_V()),_v=(e,n,o)=>aS(e,e,w$(n),o),N$=(e,n)=>_v(e,n,AV),H3=(e,n)=>_v(e,n,cS),V3=(e,n,o)=>_v(e,n,OV(o)),z3=(e,n)=>_v(e,n,_$),U3=(e,n)=>_v(e,n,I3),RV=(e,n,o)=>_v(e,n,B3(o)),MV=O$("type"),NV=D$("fetch"),W3=D$("onAction"),PV=U3("onSetup",()=>kt),BV=LT("text"),gG=LT("icon"),$V=LT("tooltip"),FT=LT("label"),P$=z3("active",!1),B$=z3("enabled",!0),$$=z3("primary",!1),I$=e=>DV("columns",e),Av=e=>H3("type",e),IV=IT([MV,O$("trigger"),N$("minChars",1),I$(1),N$("maxResults",10),M$("matches"),NV,W3,RV("highlightOn",[],cS)]),LV=e=>TV("Autocompleter",IV,e),Z3=[B$,$V,gG,BV,PV,H3("context","mode:design")],j3=[P$].concat(Z3),FV=[U3("predicate",_e),V3("scope","node",["node","editor"]),V3("position","selection",["node","selection","line"])],G3=Z3.concat([Av("contextformbutton"),$$,W3,A$("original",Oo)]),HV=j3.concat([Av("contextformbutton"),$$,W3,A$("original",Oo)]),VV=Z3.concat([Av("contextformbutton")]),zV=j3.concat([Av("contextformtogglebutton")]),L$=$3("type",{contextformbutton:G3,contextformtogglebutton:HV});IT([Av("contextform"),U3("initValue",et("")),FT,R$("commands",L$),F3("launch",$3("type",{contextformbutton:VV,contextformtogglebutton:zV}))].concat(FV));const UV=e=>{const n=e.ui.registry.getAll().popups,o=zn(n,f=>LV(f).fold(b=>{throw new Error(kV(b))},Oo)),r=ql(Ca(o,f=>f.trigger)),a=ja(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Bt(a,b=>b.trigger===f)}},WV=(e,n)=>{const o=jb(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},ZV=e=>{const n=Cc(),o=ds(!1),r=n.isSet,a=()=>{r()&&(c4(e),o.set(!1),n.clear())},u=M=>{r()||n.set({trigger:M.trigger,matchLength:M.text.length})},f=Mc(()=>UV(e)),b=M=>n.get().map(P=>_3(e.dom,e.selection.getRng(),P.trigger,!0).bind(z=>h$(e,f,z,M))).getOrThunk(()=>iV(e,f)),C=M=>{b(M).fold(a,P=>{u(P.context),P.lookupData.then(z=>{n.get().map(G=>{const U=P.context;G.trigger===U.trigger&&(n.set({...G,matchLength:U.text.length}),o.get()?(Z0(e,{range:U.range}),r4(e,{lookupData:z})):(o.set(!0),Z0(e,{range:U.range}),W0(e,{lookupData:z})))})})})},x=(M,P)=>{const z=M.compareBoundaryPoints(window.Range.START_TO_START,P),G=M.compareBoundaryPoints(window.Range.END_TO_END,P);return z>=0&&G<=0},D=()=>n.get().bind(({trigger:M})=>{const P=e.selection.getRng();return _3(e.dom,P,M,o.get()).filter(({range:z})=>x(P,z)).map(({range:z})=>z)});e.addCommand("mceAutocompleterReload",(M,P)=>{const z=ut(P)?P.fetchOptions:{};C(z)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{D().each(M=>{Z0(e,{range:M})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>D().isSome()),WV(e,{cancelIfNecessary:a,load:C})},jV=H().browser.isSafari(),dc=e=>Xu(ne.fromDom(e)),Jd=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},HT=(e,n)=>$.from(e.getParent(n.container(),"details")),GV=(e,n)=>HT(e,n).isSome(),qV=(e,n)=>{const o=$.from(e.getParent(n.startContainer,"details")),r=$.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>$.from(e.select("summary",u)[0]));return $.some({startSummary:a,startDetails:o,endDetails:r})}else return $.none()},KV=(e,n)=>ga(n).exists(o=>o.isEqual(e)),YV=(e,n)=>Ei(n).exists(o=>fo(o.getNode())&&oi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),XV=(e,n)=>n.startSummary.exists(o=>KV(e,o)),F$=(e,n)=>n.startSummary.exists(o=>YV(e,o)),Ov=(e,n)=>n.startDetails.exists(o=>oi(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),pG=(e,n,o)=>o.startDetails.exists(r=>fa(e,n).forall(a=>!r.contains(a.container()))),H$=(e,n)=>{const o=n.getNode();fn(o)||e.selection.setCursorLocation(o,n.offset())},V$=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?ga(a):Ei(a)).each(f=>H$(e,f))}else H$(e,n)},Qd=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(x=>C!==x));return(a||u)&&!(a&&u)||f},z$=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=De.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),C=HT(r,f),x=b&&r.isEmpty(b),D=le(b==null?void 0:b.previousSibling),M=le(b==null?void 0:b.nextSibling);return x&&(n?M:D)&&Wm(!n,u,f).exists(G=>GV(r,G)&&!vr(C,HT(r,G)))?!0:Wm(n,u,f).fold(_e,P=>{const z=HT(r,P);if(GV(r,P)&&!vr(C,z)){if(n||V$(e,P,!1),b&&x){if(n&&D)return!0;if(!n&&M)return!0;V$(e,P,n),e.dom.remove(b)}return!0}else return!1})}else return!1},JV=(e,n,o,r)=>{const u=e.selection.getRng(),f=De.fromRangeStart(u),b=e.getBody();return r==="selection"?Qd(u,n):o?F$(f,n)||pG(b,f,n):XV(f,n)||Ov(f,n)},U$=(e,n,o)=>qV(e.dom,e.selection.getRng()).fold(()=>z$(e,n,o),r=>JV(e,r,n,o)||z$(e,n,o)),QV=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=De.fromRangeStart(u);return vm(a)?(o==="selection"&&Jd(u,a)||GM(n,f,a)?dc(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:x,focusNode:D,focusOffset:M}=b??{};const P=()=>{Me(C)&&Me(x)&&Me(D)&&Me(M)&&(b==null||b.setBaseAndExtent(C,x,D,M))},z=()=>{C=b==null?void 0:b.anchorNode,x=b==null?void 0:b.anchorOffset,D=b==null?void 0:b.focusNode,M=b==null?void 0:b.focusOffset},G=(X,oe)=>{pe(X.childNodes,fe=>{eg(fe)&&oe.appendChild(fe)})},U=e.dom.create("span",{"data-mce-bogus":"1"});G(a,U),a.appendChild(U),P(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&Jd(r.getRng(),U)?dc(a):(e.execCommand(n?"ForwardDelete":"Delete"),z(),G(U,a),P()),e.dom.remove(U)}),!0):!1},Sg=(e,n,o)=>U$(e,n,o)||jV&&QV(e,n,o)?$.some(kt):$.none(),em=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:kt,inputType:o},f=hy(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Dv=em("input"),iS=em("beforeinput"),W$=H(),lS=W$.os,VT=lS.isMacOS()||lS.isiOS(),Z$=W$.browser.isFirefox(),tz=(e,n,o)=>{const r=o.keyCode===vt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";M9([{keyCode:vt.BACKSPACE,action:rn(M5,e)},{keyCode:vt.BACKSPACE,action:rn($O,e,!1)},{keyCode:vt.DELETE,action:rn($O,e,!0)},{keyCode:vt.BACKSPACE,action:rn(OO,e,!1)},{keyCode:vt.DELETE,action:rn(OO,e,!0)},{keyCode:vt.BACKSPACE,action:rn(XO,e,n,!1)},{keyCode:vt.DELETE,action:rn(XO,e,n,!0)},{keyCode:vt.BACKSPACE,action:rn(iE,e,!1)},{keyCode:vt.DELETE,action:rn(iE,e,!0)},{keyCode:vt.BACKSPACE,action:rn(Sg,e,!1,u)},{keyCode:vt.DELETE,action:rn(Sg,e,!0,u)},...VT?[{keyCode:vt.BACKSPACE,altKey:!0,action:rn(Sg,e,!1,f(!0))},{keyCode:vt.DELETE,altKey:!0,action:rn(Sg,e,!0,f(!0))},{keyCode:vt.BACKSPACE,metaKey:!0,action:rn(Sg,e,!1,f(!1))}]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:rn(Sg,e,!1,f(!0))},{keyCode:vt.DELETE,ctrlKey:!0,action:rn(Sg,e,!0,f(!0))}],{keyCode:vt.BACKSPACE,action:rn(fT,e,!1)},{keyCode:vt.DELETE,action:rn(fT,e,!0)},{keyCode:vt.BACKSPACE,action:rn(s3,e,!1)},{keyCode:vt.DELETE,action:rn(s3,e,!0)},{keyCode:vt.BACKSPACE,action:rn(iT,e,!1)},{keyCode:vt.DELETE,action:rn(iT,e,!0)},{keyCode:vt.BACKSPACE,action:rn(HC,e,!1)},{keyCode:vt.DELETE,action:rn(HC,e,!0)},{keyCode:vt.BACKSPACE,action:rn(O5,e,!1)},{keyCode:vt.DELETE,action:rn(O5,e,!0)},{keyCode:vt.BACKSPACE,action:rn(dT,e,!1)},{keyCode:vt.DELETE,action:rn(dT,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),iS(e,r).isDefaultPrevented()||(b(),Dv(e,r))})},nz=(e,n,o)=>xv([{keyCode:vt.BACKSPACE,action:rn(uT,e)},{keyCode:vt.DELETE,action:rn(uT,e)},...VT?[{keyCode:vt.BACKSPACE,altKey:!0,action:rn(YC,e)},{keyCode:vt.DELETE,altKey:!0,action:rn(YC,e)},...o?[{keyCode:Z$?224:91,action:rn(YC,e)}]:[]]:[{keyCode:vt.BACKSPACE,ctrlKey:!0,action:rn(YC,e)},{keyCode:vt.DELETE,ctrlKey:!0,action:rn(YC,e)}]],n),oz=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===vt.BACKSPACE,r.isDefaultPrevented()||tz(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||nz(e,r,o),o=!1})},sz=e=>{for(;e;){if(pt(e)||qe(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Rv=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=sz(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Vr),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Hr(n,n);let f=n,b;for(;b=u.current();){if(qe(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else fo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),ug(e,a)},Mv=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},q3=e=>$.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),rz=e=>q3(e).fold(et(""),n=>n.nodeName.toUpperCase()),cz=e=>q3(e).filter(n=>Pf(ne.fromDom(n))).isSome(),K3=e=>{e.innerHTML='<br data-mce-bogus="1">'},az=(e,n,o)=>{const r=e.dom;$.from(o.style).map(r.parseStyle).each(C=>{const D={...Ha(ne.fromDom(n)),...C};r.setStyles(n,D)});const a=$.from(o.class).map(C=>C.split(/\s+/)),u=$.from(n.className).map(C=>Bt(C.split(/\s+/),x=>x!==""));cn(a,u,(C,x)=>{const D=Bt(x,P=>!Ut(C,P)),M=[...C,...D];r.setAttrib(n,"class",M.join(" "))});const f=["style","class"],b=Co(o,(C,x)=>!Ut(f,x));r.setAttribs(n,b)},Nv=(e,n)=>{if(Vc(e).toLowerCase()===n.tagName.toLowerCase()){const r=Im(e);az(e,n,r)}},Y3=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,C=e.schema,x=Vc(e),D=o?o.nodeName.toUpperCase():"";let M=n;const P=C.getTextInlineElements();let z;u||D==="TABLE"||D==="HR"?z=b.create(u||x,f||{}):z=o.cloneNode(!1);let G=z;if(!a)b.setAttrib(z,"style",null),b.setAttrib(z,"class",null);else do if(P[M.nodeName]){if(Ti(M)||si(M))continue;const U=M.cloneNode(!1);b.setAttrib(U,"id",""),z.hasChildNodes()?(U.appendChild(z.firstChild),z.appendChild(U)):(G=U,z.appendChild(U))}while((M=M.parentNode)&&M!==r);return Nv(e,z),K3(G),z},iz=(e,n)=>e.dom.getParent(n,oy),lz=(e,n,o)=>{let r=n;for(;r&&r!==e&&le(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return oy(a);r=a}return!1},bG=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Vc(e)&&e.dom.isEmpty(o)&&lz(e.getBody(),o,r=>zt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),X3=(e,n,o)=>{var r,a,u;const f=n(Vc(e)),b=iz(e,o);b&&(e.dom.insertAfter(f,b),Rv(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},uz=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,dz=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},j$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Me(o)&&o.nodeName===n},J3=e=>Me(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Q3=e=>Me(e)&&/^(LI|DT|DD)$/.test(e.nodeName),G$=e=>J3(e)&&J3(e.parentNode),zT=e=>{const n=e.parentNode;return Q3(n)?n:e},UT=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!pt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},mz=e=>Bn(Ca(Ha(ne.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Ra=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;G$(o)&&(a="LI");const C=Q3(r)?mz(r):void 0;let x=Q3(r)&&C?n(a,{style:mz(r)}):n(a);if(UT(o,r,!0)&&UT(o,r,!1))if(j$(o,"LI")){const D=zT(o);u.insertAfter(x,D),dz(o)?u.remove(D):u.remove(o)}else u.replace(x,o);else if(UT(o,r,!0))j$(o,"LI")?(u.insertAfter(x,zT(o)),x.appendChild(u.doc.createTextNode(" ")),x.appendChild(o)):b.insertBefore(x,o),u.remove(r);else if(UT(o,r,!1))u.insertAfter(x,zT(o)),u.remove(r);else{o=zT(o);const D=f.cloneRange();D.setStartAfter(r),D.setEndAfter(o);const M=D.extractContents();if(a==="LI"&&uz(M,"LI")){const P=Bt(qt(x.children,ne.fromDom),yo(ec("br")));x=M.firstChild,u.insertAfter(M,o),pe(P,z=>Ad(ne.fromDom(x),z)),C&&x.setAttribute("style",C)}else u.insertAfter(M,o),u.insertAfter(x,o);u.remove(r)}Rv(e,x)},fz=e=>{pe(Eb(ne.fromDom(e),Bo),n=>{const o=n.dom;o.nodeValue=Ki(o.data)})},gz=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},hz=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),eD=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,pz=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,tD=(e,n)=>Me(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",bz=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;pt(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||hz(e,u))&&e.remove(u)},Pv=(e,n,o)=>qe(n)?e?o===1&&n.data.charAt(o-1)===Wr?0:o:o===n.data.length-1&&n.data.charAt(o)===Wr?n.data.length:o:o,vz=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,Pv(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,Pv(!1,e.endContainer,e.endOffset)),n},yz=e=>{let n=e;do qe(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},nD=(e,n,o,r,a)=>{var u,f;const b=e.dom,C=(u=Mv(b,r))!==null&&u!==void 0?u:b.getRoot();let x=b.getParent(r,b.isBlock);if(!x||!tD(b,x)){if(x=x||C,!x.hasChildNodes()){const z=b.create(n);return Nv(e,z),x.appendChild(z),o.setStart(z,0),o.setEnd(z,0),z}let D=r;for(;D&&D.parentNode!==x;)D=D.parentNode;let M;for(;D&&!b.isBlock(D);)M=D,D=D.previousSibling;const P=(f=M==null?void 0:M.parentElement)===null||f===void 0?void 0:f.nodeName;if(M&&P&&e.schema.isValidChild(P,n.toLowerCase())){const z=M.parentNode,G=b.create(n);for(Nv(e,G),z.insertBefore(G,M),D=M;D&&!b.isBlock(D);){const U=D.nextSibling;G.appendChild(D),D=U}o.setStart(r,a),o.setEnd(r,a)}}return r},oD=(e,n)=>{n.normalize();const o=n.lastChild;(!o||pt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Cz=(e,n)=>{const o=Mr(e);return Tn(n)?!1:ce(o)?Ut(je.explode(o),n.nodeName.toLowerCase()):o},Sz={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,C=e.schema,x=C.getNonEmptyElements(),D=e.selection.getRng(),M=Vc(e),P=ne.fromDom(D.startContainer),z=wa(P,D.startOffset),G=z.exists(Ue=>Nn(Ue)&&!Xa(Ue)),U=D.collapsed&&G,X=(Ue,Ct)=>Y3(e,o,Qe,He,Rr(e),Ue,Ct),oe=Ue=>{const Ct=Pv(Ue,o,r);if(qe(o)&&(Ue?Ct>0:Ct<o.data.length))return!1;if((o.parentNode===Qe||o===Qe)&&f&&!Ue||Ue&&pt(o)&&o===Qe.firstChild)return!0;if(eD(o,"TABLE")||eD(o,"HR"))return pz(o,"BR")?!Ue:f&&!Ue||!f&&Ue;const It=new Hr(o,Qe);qe(o)&&(Ue&&Ct===0?It.prev():!Ue&&Ct===o.data.length&&It.next());let On;for(;On=It.current();){if(pt(On)){if(!On.getAttribute("data-mce-bogus")){const Dn=On.nodeName.toLowerCase();if(x[Dn]&&Dn!=="br")return!1}}else if(qe(On)&&!Cl(On.data))return!1;Ue?It.prev():It.next()}return!0},fe=()=>{let Ue;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&yt!=="HGROUP"?Ue=X(M):Ue=X(),Cz(e,u)&&tD(b,u)&&b.isEmpty(Qe,void 0,{includeZwsp:!0})?Ue=b.split(u,Qe):b.insertAfter(Ue,Qe),Rv(e,Ue),Ue};lt(b,D).each(Ue=>{D.setStart(Ue.startContainer,Ue.startOffset),D.setEnd(Ue.endContainer,Ue.endOffset)}),o=D.startContainer,r=D.startOffset;const ge=!!(n&&n.shiftKey),be=!!(n&&n.ctrlKey);pt(o)&&o.hasChildNodes()&&!U&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&qe(o)?r=o.data.length:r=0);const He=Mv(b,o);if(!He||gz(e,o))return;ge||(o=nD(e,M,D,o,r));let Qe=b.getParent(o,b.isBlock)||b.getRoot();u=Me(Qe==null?void 0:Qe.parentNode)?b.getParent(Qe.parentNode,b.isBlock):null,a=Qe?Qe.nodeName.toUpperCase():"";const yt=u?u.nodeName.toUpperCase():"";if(yt==="LI"&&!be){const Ue=u;Qe=Ue,u=Ue.parentNode,a=yt}if(pt(u)&&bG(e,ge,Qe))return X3(e,X,Qe);if(/^(LI|DT|DD)$/.test(a)&&pt(u)&&b.isEmpty(Qe)){Ra(e,X,u,Qe,M);return}if(!U&&(Qe===e.getBody()||!tD(b,Qe)))return;const Re=Qe.parentNode;let Ee;if(U)Ee=X(M),z.fold(()=>{Or(P,ne.fromDom(Ee))},Ue=>{qo(Ue,ne.fromDom(Ee))}),e.selection.setCursorLocation(Ee,0);else if(Mm(Qe))Ee=eh(Qe),b.isEmpty(Qe)&&K3(Qe),Nv(e,Ee),Rv(e,Ee);else if(oe(!1))Ee=fe();else if(oe(!0)&&Re){const Ue=De.fromRangeStart(D),Ct=I4(Ue),It=ne.fromDom(Qe),Dn=qx(It,Ue,e.schema)?tn(It,Ue,e.schema).bind(Ro=>$.from(Ro.getNode())):$.none();Ee=Re.insertBefore(X(),Qe);const vo=eD(Qe,"HR")||Ct?Ee:Dn.getOr(Qe);Rv(e,vo)}else{const Ue=vz(D).cloneRange();Ue.setEndAfter(Qe);const Ct=Ue.extractContents();fz(Ct),yz(Ct),Ee=Ct.firstChild,b.insertAfter(Ct,Qe),bz(b,x,Ee),oD(b,Qe),b.isEmpty(Qe)&&K3(Qe),Ee.normalize(),b.isEmpty(Ee)?(b.remove(Ee),fe()):(Nv(e,Ee),Rv(e,Ee))}b.setAttrib(Ee,"id",""),e.dispatch("NewBlock",{newBlock:Ee})},fakeEventName:"insertParagraph"},wz=(e,n,o)=>{const r=new Hr(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||qe(a)&&a.length>0)return!0;return!1},q$=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),ug(e,r)},vG=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;lt(r,a).each(z=>{a.setStart(z.startContainer,z.startOffset),a.setEnd(z.endContainer,z.endOffset)});let b=a.startOffset,C=a.startContainer;if(pt(C)&&C.hasChildNodes()){const z=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,z&&qe(C)?b=C.data.length:b=0}let x=r.getParent(C,r.isBlock);const D=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,M=D?D.nodeName.toUpperCase():"",P=!!(n&&n.ctrlKey);M==="LI"&&!P&&(x=D),qe(C)&&b>=C.data.length&&(wz(e.schema,C,x||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),qp(r,a,u),q$(e,u,f),e.undoManager.add()},xz=(e,n)=>{const o=ne.fromTag("br");qo(ne.fromDom(n),o),e.undoManager.add()},tm=(e,n)=>{K$(e.getBody(),n)||Zi(ne.fromDom(n),ne.fromTag("br"));const o=ne.fromTag("br");Zi(ne.fromDom(n),o),q$(e,o.dom,!1),e.undoManager.add()},Ez=e=>fo(e.getNode()),K$=(e,n)=>Ez(De.after(n))?!0:fa(e,De.after(n)).map(o=>fo(o.getNode())).getOr(!1),Y$=e=>e&&e.nodeName==="A"&&"href"in e,Tz=e=>e.fold(_e,Y$,Y$,_e),kz=e=>{const n=Ve(D1,e),o=De.fromRangeStart(e.selection.getRng());return Su(n,e.getBody(),o).filter(Tz)},_z=(e,n)=>{n.fold(kt,Ve(xz,e),Ve(tm,e),kt)},X$={insert:(e,n)=>{const o=kz(e);o.isSome()?o.each(Ve(_z,e)):vG(e,n)},fakeEventName:"insertLineBreak"},WT=(e,n)=>q3(e).filter(o=>n.length>0&&Fa(ne.fromDom(o),n)).isSome(),J$=e=>WT(e,Uf(e)),ZT=e=>WT(e,y_(e)),zl=Ji.generate([{br:[]},{block:[]},{none:[]}]),Az=(e,n)=>ZT(e),Q$=e=>(n,o)=>cz(n)===e,eI=(e,n)=>(o,r)=>rz(o)===e.toUpperCase()===n,Oz=e=>{const n=Mv(e.dom,e.selection.getStart());return Tn(n)},Bv=e=>eI("pre",e),Dz=()=>eI("summary",!0),uS=e=>(n,o)=>Tw(n)===e,tI=(e,n)=>J$(e),jT=(e,n)=>n,Rz=e=>{const n=Vc(e),o=Mv(e.dom,e.selection.getStart());return Me(o)&&e.schema.isValidChild(o.nodeName,n)},sD=e=>{const n=e.selection.getRng(),o=ne.fromDom(n.startContainer),a=wa(o,n.startOffset).map(u=>Nn(u)&&!Xa(u));return n.collapsed&&a.getOr(!0)},Eu=(e,n)=>(o,r)=>Bn(e,(u,f)=>u&&f(o,r),!0)?$.some(n):$.none(),Mz=(e,n)=>YB([Eu([Az],zl.none()),Eu([Bv(!0),Oz],zl.none()),Eu([Dz()],zl.br()),Eu([Bv(!0),uS(!1),jT],zl.br()),Eu([Bv(!0),uS(!1)],zl.block()),Eu([Bv(!0),uS(!0),jT],zl.block()),Eu([Bv(!0),uS(!0)],zl.br()),Eu([Q$(!0),jT],zl.br()),Eu([Q$(!0)],zl.block()),Eu([tI],zl.br()),Eu([jT],zl.br()),Eu([Rz],zl.block()),Eu([sD],zl.block())],[e,!!(n&&n.shiftKey)]).getOr(zl.none()),rb=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||w6(n),!(Me(o)&&iS(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Me(o)&&Dv(n,e.fakeEventName)))},nI=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>rb(X$,e,n),r=()=>rb(Sz,e,n),a=Mz(e,n);switch(Gy(e)){case"linebreak":a.fold(o,o,kt);break;case"block":a.fold(r,r,kt);break;case"invert":a.fold(r,o,kt);break;default:a.fold(o,r,kt);break}},GT=H(),rD=GT.os.isiOS()&&GT.browser.isSafari(),cD=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),tf(e.undoManager),e.undoManager.transact(()=>{nI(e,n)}))},Nz=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(qe(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},SG=e=>{let n=$.none();const o=a=>{n=$.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(kt,f=>a.selection.moveToBookmark(f)),cD(a,u),n=$.none()};e.on("keydown",a=>{a.keyCode===vt.ENTER&&(rD&&Nz(e.selection.getRng())?o(e):cD(e,a))}),e.on("keyup",a=>{a.keyCode===vt.ENTER&&n.each(()=>r(e,a))})},Xh=(e,n,o)=>{const r=_t.os.isMacOS()||_t.os.isiOS();xv([{keyCode:vt.END,action:rn(U5,e,!0)},{keyCode:vt.HOME,action:rn(U5,e,!1)},...r?[]:[{keyCode:vt.HOME,action:rn(Yh,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:vt.END,action:rn(Yh,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:vt.END,action:rn(q5,e,!0)},{keyCode:vt.HOME,action:rn(q5,e,!1)},{keyCode:vt.END,action:rn(ST,e,!0,n)},{keyCode:vt.HOME,action:rn(ST,e,!1,n)}],o).each(a=>{o.preventDefault()})},Pz=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||Xh(e,n,o)})},Bz=e=>{e.on("input",n=>{n.isComposing||$M(e)})},$z=H(),qT=(e,n,o)=>{xv([{keyCode:vt.PAGE_UP,action:rn(ST,e,!1,n)},{keyCode:vt.PAGE_DOWN,action:rn(ST,e,!0,n)}],o)},aD=e=>e.stopImmediatePropagation(),iD=e=>e.keyCode===vt.PAGE_UP||e.keyCode===vt.PAGE_DOWN,oI=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",aD,!0):!o&&e.get()&&n.off("NodeChange",aD),e.set(o)},sI=(e,n)=>{if($z.os.isMacOS())return;const o=ds(!1);e.on("keydown",r=>{iD(r)&&oI(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||qT(e,n,r),iD(r)&&o.get()&&(oI(o,e,!1),e.nodeChanged())})},Iz=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Vn(n.getTargetRanges(),o=>!D4(e.dom,o)))&&n.preventDefault()})},rI=(e,n)=>{const o=n.container(),r=n.offset();return qe(o)?(o.insertData(r,e),$.some(De(o,r+e.length))):u1(n).map(a=>{const u=ne.fromText(e);return n.isAtEnd()?Zi(a,u):qo(a,u),De(u.dom,e.length)})},cI=Ve(rI,Vr),KT=Ve(rI," "),lD=(e,n,o)=>RM(e,n,o)?cI(n):KT(n),Lz=e=>n=>n.fold(o=>oi(e.dom,De.before(o)),o=>ga(o),o=>Ei(o),o=>fa(e.dom,De.after(o))),uD=(e,n,o)=>r=>RM(e,r,o)?cI(n):KT(n),dD=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},YT=(e,n)=>e.isEditable(e.getParent(n,"summary")),aI=e=>{const n=De.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ve(D1,e),a=De.fromRangeStart(e.selection.getRng());return Su(r,e.getBody(),a).bind(Lz(o)).map(u=>()=>uD(o,n,e.schema)(u).each(dD(e)))}else return $.none()},iI=e=>{const n=()=>{const o=ne.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=De.fromRangeStart(e.selection.getRng());lD(o,r,e.schema).each(dD(e))};return Ia(_t.browser.isFirefox()&&e.selection.isEditable()&&YT(e.dom,e.selection.getRng().startContainer),n)},Fz=(e,n)=>{M9([{keyCode:vt.SPACEBAR,action:rn(aI,e)},{keyCode:vt.SPACEBAR,action:rn(iI,e)}],n).each(o=>{n.preventDefault(),iS(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Dv(e,"insertText",{data:" "}))})},Hz=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Fz(e,n)})},XT=e=>M_(e)?[{keyCode:vt.TAB,action:rn(RT,e,!0)},{keyCode:vt.TAB,shiftKey:!0,action:rn(RT,e,!1)}]:[],lI=(e,n)=>{xv([...XT(e)],n).each(o=>{n.preventDefault()})},Vz=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||lI(e,n)})},zz=e=>{if(e.addShortcut("Meta+P","","mcePrint"),ZV(e),nf(e))return ds(null);{const n=XH(e);return Iz(e),w9(e),i$(e,n),oz(e,n),SG(e),Hz(e),Bz(e),Vz(e),Pz(e,n),sI(e,n),n}};class uI{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{U2(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&N0(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&N0(n)&&(n.selection.getNode().nodeName==="IMG"?Pl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!E_(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=Io(r.dom.getParents(n,Ke,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const dI=Yg("image"),Uz=e=>{const n=e;return $.from(n[dI])},Wz=(e,n)=>{const o=e;o[dI]=n},mD=Yg("event"),Zz=e=>{const n=e;return $.from(n[mD])},dS=e=>n=>{const o=n;o[mD]=e},jz=(e,n)=>dS(n)(e),fD=dS(0),Gz=dS(2),qz=dS(1),Kz=(e=>n=>{const o=n;return $.from(o[mD]).exists(r=>r===e)})(0),Yz=()=>Object.freeze({length:0,item:e=>null}),Jh=Yg("mode"),Xz=e=>{const n=e;return $.from(n[Jh])},JT=e=>n=>{const o=n;o[Jh]=e},gD=(e,n)=>JT(n)(e),mI=JT(0),hD=JT(2),Jz=JT(1),pD=e=>n=>{const o=n;return $.from(o[Jh]).exists(r=>r===e)},$v=pD(0),fI=pD(1),xG=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if($v(e))if(ce(o)){if(!fn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{$v(e)&&n.remove(o)},clear:()=>{$v(e)&&n.clear()}}),QT=["none","copy","link","move"],Qz=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],bD=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){Ut(QT,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){Kz(r)&&Ut(Qz,a)&&(o=a)},get items(){return xG(r,e.items)},get files(){return fI(r)?Yz():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{$v(r)&&(Wz(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>fI(r)?"":e.getData(a),setData:(a,u)=>{$v(r)&&e.setData(a,u)},clearData:a=>{$v(r)&&e.clearData(a)}};return mI(r),r},eU=e=>{const n=bD(),o=Xz(e);return hD(e),fD(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,Uz(e).each(r=>n.setDragImage(r.image,r.x,r.y)),pe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),pe(e.files,r=>n.items.add(r)),Zz(e).each(r=>{jz(n,r)}),o.each(r=>{gD(e,r),gD(n,r)}),n},tU=e=>{const n=e.getData("text/html");return n===""?$.none():$.some(n)},gI=(e,n)=>e.setData("text/html",n),hI="x-tinymce/html",ek=et(hI),vD="<!-- "+hI+" -->",nU=e=>vD+e,oU=e=>e.replace(vD,""),pI=e=>e.indexOf(vD)!==-1,sU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),rU=(e,n)=>{let o="<"+e;const r=Ca(n,(a,u)=>u+'="'+xm.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},rs=(e,n,o)=>{const r=e.split(/\n\n/),a=rU(n,o),u="</"+n+">",f=qt(r,C=>C.split(/\n/).join("<br />")),b=C=>a+C+u;return f.length===1?f[0]:qt(f,b).join("")},bI="%MCEPASTEBIN%",vI=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},bI);_t.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},cU=(e,n)=>{const o=e.dom;if(mS(e)){let r;const a=n.get();for(;r=mS(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},mS=e=>e.dom.get("mcepastebin"),yI=e=>Me(e)&&e.id==="mcepastebin",aU=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Bt(e.getBody().childNodes,yI);pe(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},CI=e=>e===bI,SI=e=>{const n=ds(null);return{create:()=>vI(e,n),remove:()=>cU(e,n),getEl:()=>mS(e),getHtml:()=>aU(e),getLastRng:n.get}},tk=(e,n)=>(je.each(n,o=>{Gt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),iU=e=>{const n=Eo(),o=W1({},n);let r="";const a=n.getVoidElements(),u=je.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const x=C.name,D=C;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(a[x]&&(r+=" "),u[x]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let M=C.firstChild;if(M)do b(M);while(M=M.next)}f[x]&&D.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=tk(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},wI=e=>(e=tk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":Vr],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),lU=e=>{let n=0;return()=>e+n++},xI=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return je.hasOwn(o,n)?"image/"+o[n]:"image/"+n},uU=(e,n)=>{const o=W1({sanitize:Ww(e),sandbox_iframes:c1(e),sandbox_iframes_exclusions:a2(e),convert_unsafe_embeds:P_(e)},e.schema);o.addNodeFilter("meta",a=>{je.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Ah({validate:!0},e.schema).serialize(r)},EI=(e,n)=>({content:e,cancelled:n}),Iv=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=Dx(e,r,o);return EI(a.node.innerHTML,a.isDefaultPrevented())},dU=(e,n,o)=>{const r=a4(e,n,o),a=uU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?Iv(e,a,o):EI(a,r.isDefaultPrevented())},Lv=(e,n,o)=>dU(e,n,o),cb=(e,n)=>(e.insertContent(n,{merge:Vw(e),paste:!0}),!0),yD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),mU=(e,n)=>yD(n)&&Vn(jw(e),o=>jc(n.toLowerCase(),`.${o.toLowerCase()}`)),Fv=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),fU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),CD=(e,n,o)=>!e.selection.isCollapsed()&&yD(n)?fU(e,n,o):!1,gU=(e,n,o)=>mU(e,n)?Fv(e,n,o):!1,TI=(e,n)=>{je.each([CD,gU,cb],o=>!o(e,n,cb))},kI=(e,n,o)=>{o||!r2(e)?cb(e,n):TI(e,n)},SD=lU("mceclip"),_I=e=>{const n=bD();return gI(n,e),hD(n),n},AI=(e,n,o,r,a)=>{const u=Lv(e,n,o);if(!u.cancelled){const f=u.content,b=()=>kI(e,f,r);a?iS(e,"insertFromPaste",{dataTransfer:_I(f)}).isDefaultPrevented()||(b(),Dv(e,"insertFromPaste")):b()}},nk=(e,n,o,r)=>{const a=o||pI(n);AI(e,oU(n),a,!1,r)},ok=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Sl(r,Fm(e)),u=rs(a,Vc(e),Im(e));AI(e,u,!1,!0,o)},OI=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},wg=(e,n)=>n in e&&e[n].length>0,sk=e=>wg(e,"text/html")||wg(e,"text/plain"),DI=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Me(o)?e.dom.encode(o[1]):void 0},hU=(e,n,o,r)=>{const a=SD(),u=Nr(e)&&Me(o.name),f=u?DI(e,o.name):a,b=u?o.name:void 0,C=n.create(a,o,r,f,b);return n.add(C),C},pU=(e,n)=>{L1(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),x=C??hU(e,b,f,u);nk(e,`<img src="${x.blobUri()}">`,!1,!0)})},bU=e=>e.type==="paste",RI=e=>Promise.all(qt(e,n=>eP(n).then(o=>({file:n,uri:o})))),wD=e=>{const n=jw(e);return o=>Jo(o.type,"image/")&&Vn(n,r=>xI(r)===o.type)},vU=(e,n)=>{const o=n.items?Bs(Tr(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?Tr(n.files):[];return Bt(o.length>0?o:r,wD(e))},xD=(e,n,o)=>{const r=bU(n)?n.clipboardData:n.dataTransfer;if(r1(e)&&r){const a=vU(e,r);if(a.length>0)return n.preventDefault(),RI(a).then(u=>{o&&e.selection.setRng(o),pe(u,f=>{pU(e,f)})}),!0}return!1},MI=e=>{var n,o;return _t.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},yU=e=>vt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,rk=(e,n,o,r,a)=>{let u=wI(o);const f=wg(n,ek())||pI(o),b=!f&&sU(u),C=yD(u);(CI(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(wg(n,"text/plain")&&b?u=n["text/plain"]:u=iU(u)),!CI(u)&&(r?ok(e,u,a):nk(e,u,f,a))},CU=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{yU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||MI(u))return;const f=o.get()==="text"||r;r=!1;const b=OI(u.clipboardData);!sk(b)&&xD(e,u,a())||(wg(b,"text/html")?(u.preventDefault(),rk(e,b,b["text/html"],f,!0)):wg(b,"text/plain")&&wg(b,"text/uri-list")?(u.preventDefault(),rk(e,b,b["text/plain"],f,!0)):(n.create(),Pl.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),rk(e,b,C,f,!1)},0)))})},SU=e=>{const n=a=>Jo(a,"webkit-fake-url"),o=a=>Jo(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!r1(e)&&r(f))for(const b of a){const C=b.attr("src");ce(C)&&!b.attr("data-mce-object")&&C!==_t.transparentSrc&&(n(C)||!Uw(e)&&o(C))&&b.remove()}})},wU=(e,n,o)=>{CU(e,n,o),SU(e)},xU=(e,n)=>{n.get()==="text"?(n.set("html"),j0(e,!1)):(n.set("text"),j0(e,!0)),e.focus()},EU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{xU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&nk(e,r.html,r.internal,!1),r.text&&ok(e,r.text,!1)})},ck=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(ek(),n),!0}catch{return!1}else return!1},NI=(e,n,o,r)=>{ck(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},ED=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),a.setRng(C),Pl.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},PI=e=>({html:nU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),TU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),TD=e=>!e.selection.isCollapsed()||TU(e),BI=e=>n=>{!n.isDefaultPrevented()&&TD(e)&&e.selection.isEditable()&&NI(n,PI(e),ED(e),()=>{if(_t.browser.isChromium()||_t.browser.isFirefox()){const o=e.selection.getRng();Pl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},kU=e=>n=>{!n.isDefaultPrevented()&&TD(e)&&NI(n,PI(e),ED(e),kt)},_U=e=>{e.on("cut",BI(e)),e.on("copy",kU(e))},$I=(e,n)=>{var o,r;return We.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},AU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},II=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},LI=e=>Vn(e.files,n=>/^image\//.test(n.type)),OU=(e,n,o,r)=>{const a=e.getParent(o,f=>Cf(n,f));if(!le(e.getParent(o,"summary")))return!0;if(a&&zt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!le(f.querySelector(a.nodeName.toLowerCase()))}else return!1},DU=e=>{e.on("input",n=>{const o=r=>le(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Bt(e.dom.select("details"),o);pe(r,a=>{fo(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(uu().dom),a.prepend(u)})}})},RU=(e,n)=>{o2(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),r1(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&LI(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=$I(e,o);if(Tn(r))return;const a=OI(o.dataTransfer),u=wg(a,ek());if((!sk(a)||AU(a))&&xD(e,o,r))return;const f=a[ek()],b=f||a["text/html"]||a["text/plain"],C=OU(e.dom,e.schema,r.startContainer,a),x=n.get();x&&!C||b&&(o.preventDefault(),Pl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||x&&C)&&e.execCommand("Delete"),II(e,r);const D=wI(b);a["text/html"]?nk(e,D,u,!0):ok(e,D,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{r1(e)&&!n.get()&&(o.preventDefault(),II(e,$I(e,o))),o.type==="dragend"&&n.set(!1)}),DU(e)},MU=e=>{const n=a=>u=>{a(e,u)},o=s2(e);re(o)&&e.on("PastePreProcess",n(o));const r=Lw(e);re(r)&&e.on("PastePostProcess",n(r))},NU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},PU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,FI=e=>je.trim(e).replace(PU,$p).toLowerCase(),BU=(e,n,o)=>{const r=Hw(e);if(o||r==="all"||!O_(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,x,D)=>{const M=u.parseStyle(u.decode(x)),P={};for(let G=0;G<a.length;G++){const U=M[a[G]];let X=U,oe=u.getStyle(f,a[G],!0);/color/.test(a[G])&&(X=FI(X),oe=FI(oe)),oe!==X&&(P[a[G]]=U)}const z=u.serializeStyle(P,"span");return z?C+' style="'+z+'"'+D:C+D})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},HI=e=>{(_t.browser.isChromium()||_t.browser.isSafari())&&NU(e,BU)},VI=e=>{const n=ds(!1),o=ds(zw(e)?"text":"html"),r=SI(e);HI(e),EU(e,o),MU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{_U(e),RU(e,n),wU(e,r,o)})},$U=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},IU=e=>{e.parser.addNodeFilter("details",n=>{const o=N_(e);pe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Gw(e);pe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},LU=e=>{$U(e),IU(e)},FU=fo,zI=qe,HU=e=>go(e.dom),VU=e=>Fe(e.dom),fS=e=>n=>_n(ne.fromDom(e),n),UI=(e,n,o)=>Os(ne.fromDom(e),r=>VU(r)||o.isBlock(K(r)),fS(n)).getOr(ne.fromDom(n)).dom,WI=(e,n)=>Os(ne.fromDom(e),HU,fS(n)),kD=(e,n,o)=>{const r=new Hr(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!FU(f);f=a())Rl(f)&&(u=f);return u},ZI=(e,n,o)=>{const a=De.fromRangeStart(e).getNode(),u=UI(a,n,o),f=kD(a,u,!1),b=kD(a,u,!0),C=document.createRange();return WI(f,u).fold(()=>{zI(f)?C.setStart(f,0):C.setStartBefore(f)},x=>C.setStartBefore(x.dom)),WI(b,u).fold(()=>{zI(b)?C.setEnd(b,b.data.length):C.setEndAfter(b)},x=>C.setEndAfter(x.dom)),C},_D=e=>{const n=ZI(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(lE(n))},zU=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),_D(e))})};var ab;(function(e){e.Before="before",e.After="after"})(ab||(ab={}));const UU=(e,n)=>Math.abs(e.left-n),jI=(e,n)=>Math.abs(e.right-n),WU=(e,n)=>e>=n.top&&e<=n.bottom,GI=(e,n)=>e.top<n.bottom&&e.bottom>n.top,ZU=(e,n)=>{const o=Dl(e,n)/Math.min(e.height,n.height);return GI(e,n)&&o>.5},jU=(e,n)=>{const o=Bt(e,r=>WU(n,r));return ew(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=$o(e,f=>ZU(f,r));return[a,u]})},GU=(e,n)=>({node:e.node,position:UU(e,n)<jI(e,n)?ab.Before:ab.After}),gS=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),AD=(e,n,o,r)=>{const a=M=>Rl(M.node)?$.some(M):pt(M.node)?AD(Tr(M.node.childNodes),n,o,!1):$.none(),u=(M,P,z)=>a(P).filter(G=>Math.abs(z(M,n,o)-z(G,n,o))<2&&qe(G.node)),f=(M,P)=>{const z=jn(M,(G,U)=>P(G,n,o)-P(U,n,o));return Rc(z,a).map(G=>r&&!qe(G.node)&&z.length>1?u(G,z[1],P).getOr(G):G)},[b,C]=jU(i5(e),o),{pass:x,fail:D}=$o(C,M=>M.top<o);return f(b,gS).orThunk(()=>f(D,Lf)).orThunk(()=>f(x,Lf))},qU=(e,n,o,r)=>{const a=(u,f)=>{const b=x=>pt(x)&&x.classList.contains("mce-drag-container"),C=Bt(u.dom.childNodes,yo(b));return f.fold(()=>AD(C,o,r,!0),x=>{const D=Bt(C,M=>M!==x.dom);return AD(D,o,r,!0)}).orThunk(()=>(_n(u,e)?$.none():mf(u)).bind(D=>a(D,$.some(u))))};return a(n,$.none())},qI=(e,n,o)=>{const r=ne.fromDom(e),a=Lu(r),f=ne.fromPoint(a,n,o).filter(b=>Ic(r,b)).getOr(r);return qU(r,f,n,o)},KI=(e,n,o)=>qI(e,n,o).filter(r=>fh(r.node)).map(r=>GU(r,n)),YI=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},KU=e=>e.inline?YI(e.getBody()):{left:0,top:0},YU=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},XU=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},ak=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=YI(e.getContentAreaContainer()),r=XU(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},XI=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),JI=(e,n)=>XI(KU(e),YU(e),ak(e,n)),QI=e=>({target:e,srcElement:e}),JU=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...QI(o)}),QU=(e,n,o)=>{const r=ks("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:kt,stopImmediatePropagation:kt,stopPropagation:kt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...QI(n)}},EG=(e,n)=>{const o=eU(e);return n==="dragstart"?(fD(o),mI(o)):n==="drop"?(Gz(o),hD(o)):(qz(o),Jz(o)),o},eW=(e,n,o,r)=>{const a=EG(o,e);return fn(r)?QU(e,n,a):JU(e,r,n,a)},hS=32,OD=100,ib=8,ik=16,eL=go,tL=nw(eL,Fe),tW=(e,n,o)=>eL(o)&&o!==n&&e.isEditable(o.parentElement),DD=(e,n,o)=>Tn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),nL=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},nW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},lk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},RD=lk("left",-hS),oL=lk("left",hS),oW=lk("top",-hS),sL=lk("top",hS),sW=(e,n,o,r,a,u,f,b,C,x,D,M)=>{let P=0,z=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(P=n.pageX+o-a),n.pageY+r>u&&(z=n.pageY+r-u),e.style.width=o-P+"px",e.style.height=r-z+"px";const G=C.clientHeight,U=C.clientWidth,X=f+C.getBoundingClientRect().top,oe=b+C.getBoundingClientRect().left;D.on(fe=>{fe.intervalId.clear(),fe.dragging&&M&&(f+ib>=G?fe.intervalId.set(sL(x)):f-ib<=0?fe.intervalId.set(oW(x)):b+ib>=U?fe.intervalId.set(oL(x)):b-ib<=0?fe.intervalId.set(RD(x)):X+ik>=window.innerHeight?fe.intervalId.set(sL(window)):X-ik<=0?fe.intervalId.set(oW(window)):oe+ik>=window.innerWidth?fe.intervalId.set(oL(window)):oe-ik<=0&&fe.intervalId.set(RD(window)))})},rL=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},cL=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);rL(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Xu(ne.fromDom(o))},rW=e=>e.button===0,aL=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),cW=(e,n)=>o=>{if(rW(o)){const r=bo(n.dom.getParents(o.target),tL).getOr(null);if(Me(r)&&tW(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:bD(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:nL(n,r,r.offsetWidth,r.offsetHeight),intervalId:mr(OD)})}}},aW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),KI(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===ab.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},pS=(e,n,o,r,a)=>{n==="dragstart"&&gI(r,e.dom.getOuterHTML(o));const u=eW(n,o,r,a);return e.dispatch(n,u)},iW=(e,n)=>{const o=jg((a,u)=>aW(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=pS(n,"dragstart",u.element,u.dataTransfer,a);if(Me(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,C=aL(u,JI(n,a));nW(u.ghost,n.getBody()),sW(u.ghost,C,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},lW=e=>{const n=e.getSel();if(Me(n)){const r=n.getRangeAt(0).startContainer;return qe(r)?r.parentNode:r}else return null},iL=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(DD(n,lW(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();pS(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{cL(n.dom,r.element),tU(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}pS(n,"dragend",n.getBody(),r.dataTransfer,o)}}),MD(e)},uW=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>pS(n,"dragend",r.element,r.dataTransfer),a=>pS(n,"dragend",r.element,r.dataTransfer,a))}),MD(e)},dW=(e,n)=>o=>uW(e,n,$.some(o)),MD=e=>{e.on(n=>{n.intervalId.clear(),rL(n.ghost)}),e.clear()},mW=e=>{const n=Cc(),o=Ko.DOM,r=document,a=cW(n,e),u=iW(n,e),f=iL(n,e),b=dW(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===vt.ESC&&uW(n,e,$.none())})},ND=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(Ut(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&eT(e,"Dropped file type is not supported"))}},o=a=>{Fx(e,a.target)&&n(a)},r=()=>{const a=Ko.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];pe(C,x=>{a.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{pe(C,x=>{a.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{Pl.setEditorTimeout(e,r,0)})},fW=e=>{mW(e),_a(e)&&ND(e)},gW=e=>{const n=jg(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=lT(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},hW=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(ea(o)){const r=rd(e.getBody(),o),a=go(r)?r:o;e.selection.getNode()!==a&&yv(e,a).each(u=>e.selection.setRng(u))}})})},Hv=go,bS=(e,n)=>rd(e.getBody(),n),lL=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=tx(e,r,o.isBlock,()=>ov(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=yt=>Me(yt)&&o.hasClass(yt,"mce-offscreen-selection"),x=yt=>yt!==r&&(Hv(yt)||ea(yt))&&o.isChildOf(yt,r)&&o.isEditable(yt.parentNode),D=yt=>{yt&&n.setRng(yt)},M=(yt,Re,Ee,Ue=!0)=>e.dispatch("ShowCaret",{target:Re,direction:yt,before:Ee}).isDefaultPrevented()?null:(Ue&&n.scrollIntoView(Re,yt===-1),a.show(Ee,Re)),P=yt=>{yt.hasAttribute("data-mce-caret")&&(eh(yt),n.scrollIntoView(yt))},z=()=>{e.on("click",Re=>{o.isEditable(Re.target)||(Re.preventDefault(),e.focus())}),e.on("blur NewBlock",be),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",Re=>{const Ee=Re.target,Ue=bS(e,Ee);Hv(Ue)?(Re.preventDefault(),yv(e,Ue).each(ge)):x(Ee)&&yv(e,Ee).each(ge)},!0),e.on("mousedown",Re=>{const Ee=Re.target;if(Ee!==r&&Ee.nodeName!=="HTML"&&!o.isChildOf(Ee,r)||!j7(e,Re.clientX,Re.clientY))return;be(),Qe();const Ue=bS(e,Ee);Hv(Ue)?(Re.preventDefault(),yv(e,Ue).each(ge)):KI(r,Re.clientX,Re.clientY).each(Ct=>{Re.preventDefault();const It=M(1,Ct.node,Ct.position===ab.Before,!1);D(It),wl(Ue)?Ue.focus():e.getBody().focus()})}),e.on("keypress",Re=>{vt.modifierPressed(Re)||Hv(n.getNode())&&Re.preventDefault()}),e.on("GetSelectionRange",Re=>{let Ee=Re.range;if(b){if(!b.parentNode){b=null;return}Ee=Ee.cloneRange(),Ee.selectNode(b),Re.range=Ee}}),e.on("SetSelectionRange",Re=>{Re.range=X(Re.range);const Ee=ge(Re.range,Re.forward);Ee&&(Re.range=Ee)});const yt=Re=>pt(Re)&&Re.id==="mcepastebin";e.on("AfterSetSelectionRange",Re=>{const Ee=Re.range,Ue=Ee.startContainer.parentElement;!U(Ee)&&!yt(Ue)&&Qe(),C(Ue)||be()}),fW(e),gW(e),hW(e)},G=yt=>Yi(yt)||Gn(yt)||ta(yt),U=yt=>G(yt.startContainer)||G(yt.endContainer),X=yt=>{const Re=e.schema.getVoidElements(),Ee=o.createRng(),Ue=yt.startContainer,Ct=yt.startOffset,It=yt.endContainer,On=yt.endOffset;return zt(Re,Ue.nodeName.toLowerCase())?Ct===0?Ee.setStartBefore(Ue):Ee.setStartAfter(Ue):Ee.setStart(Ue,Ct),zt(Re,It.nodeName.toLowerCase())?On===0?Ee.setEndBefore(It):Ee.setEndAfter(It):Ee.setEnd(It,On),Ee},oe=(yt,Re)=>{const Ee=ne.fromDom(e.getBody()),Ue=e.getDoc(),Ct=$t(Ee,"#"+u).getOrThunk(()=>{const Dn=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ue);return zs(Dn,"id",u),Or(Ee,Dn),Dn}),It=o.createRng();bm(Ct),zu(Ct,[ne.fromText(Vr,Ue),ne.fromDom(Re),ne.fromText(Vr,Ue)]),It.setStart(Ct.dom.firstChild,1),It.setEnd(Ct.dom.lastChild,0),Sn(Ct,{top:o.getPos(yt,e.getBody()).y+"px"}),_1(Ct);const On=n.getSel();return On&&(On.removeAllRanges(),On.addRange(It)),It},fe=yt=>{const Re=yt.cloneNode(!0),Ee=e.dispatch("ObjectSelected",{target:yt,targetClone:Re});if(Ee.isDefaultPrevented())return null;const Ue=oe(yt,Ee.targetClone),Ct=ne.fromDom(yt);return pe(Ea(ne.fromDom(e.getBody()),`*[${f}]`),It=>{_n(Ct,It)||bs(It,f)}),o.getAttrib(yt,f)||yt.setAttribute(f,"1"),b=yt,Qe(),Ue},ge=(yt,Re)=>{if(!yt)return null;if(yt.collapsed){if(!U(yt)){const It=Re?1:-1,On=qf(It,r,yt),Dn=On.getNode(!Re);if(Me(Dn)){if(fh(Dn))return M(It,Dn,Re?!On.isAtEnd():!1,!1);if(Ol(Dn)&&go(Dn.nextSibling)){const Ro=o.createRng();return Ro.setStart(Dn,0),Ro.setEnd(Dn,0),Ro}}const vo=On.getNode(Re);if(Me(vo)){if(fh(vo))return M(It,vo,Re?!1:!On.isAtEnd(),!1);if(Ol(vo)&&go(vo.previousSibling)){const Ro=o.createRng();return Ro.setStart(vo,1),Ro.setEnd(vo,1),Ro}}}return null}let Ee=yt.startContainer,Ue=yt.startOffset;const Ct=yt.endOffset;if(qe(Ee)&&Ue===0&&Hv(Ee.parentNode)&&(Ee=Ee.parentNode,Ue=o.nodeIndex(Ee),Ee=Ee.parentNode),!pt(Ee))return null;if(Ct===Ue+1&&Ee===yt.endContainer){const It=Ee.childNodes[Ue];if(x(It))return fe(It)}return null},be=()=>{b&&b.removeAttribute(f),$t(ne.fromDom(e.getBody()),"#"+u).each(Zo),b=null},He=()=>{a.destroy(),b=null},Qe=()=>{a.hide()};return nf(e)||z(),{showCaret:M,showBlockCaretContainer:P,hideFakeCaret:Qe,destroy:He}},uL=(e,n)=>{let o=n;for(let r=e.previousSibling;qe(r);r=r.previousSibling)o+=r.data.length;return o},dL=(e,n,o,r,a)=>{if(qe(o)&&(r<0||r>o.data.length))return[];const u=a&&qe(o)?[uL(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},PD=(e,n,o,r,a,u,f=!1)=>{const b=dL(e,n,o,r,f),C=dL(e,n,a,u,f);return{start:b,end:C}},BD=(e,n)=>{const o=n.slice(),r=o.pop();return is(r)?Bn(o,(u,f)=>u.bind(b=>$.from(b.childNodes[f])),$.some(e)).bind(u=>qe(u)&&(r<0||r>u.data.length)?$.none():$.some({node:u,offset:r})):$.none()},mL=(e,n)=>BD(e,n.start).bind(({node:o,offset:r})=>BD(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),pW=(e,n,o,r=!1)=>PD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Vv=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,qe(n.firstChild)&&Cl(n.firstChild.data)),Vv(e,r,o)}},zv=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(qe(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),qe(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Vv(e,a,o),a!==u&&Vv(e,u,o))},uk=(e,n)=>$.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),$D=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Cw(r).concat(e.blockPatterns),inlinePatterns:Bm(r).concat(e.inlinePatterns)}},ID=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},fL=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),dk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},gL=(e,n,o)=>{const r=mL(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),C=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(fL(e,n+"-end"),f),start:C.insertBefore(fL(e,n+"-start"),b)}},LD=(e,n,o)=>{Vv(e,e.get(n.prefix+"-end"),o),Vv(e,e.get(n.prefix+"-start"),o)},mk=e=>e.start.length===0,FD=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},fk=(e,n,o,r)=>{const a=n.start;return T3(e,r.container,r.offset,FD(a),o).bind(f=>{var b,C;const x=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&C!==void 0?C:-1;if(x!==-1&&f.offset>=x+a.length){const M=e.createRng();return M.setStart(f.container,f.offset-a.length),M.setEnd(f.container,f.offset),$.some(M)}else{const M=f.offset-a.length;return E3(f.container,M,o).map(P=>{const z=e.createRng();return z.setStart(P.container,P.offset),z.setEnd(f.container,f.offset),z}).filter(P=>P.toString()===a).orThunk(()=>fk(e,n,o,hd(f.container,0)))}})},bW=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),$.some(f)}return x3(o,r,a).bind(f=>fk(e,n,a,f).bind(C=>{var x;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return $.none();if(f.offset===0&&((x=C.endContainer.textContent)===null||x===void 0?void 0:x.length)===C.endOffset)return $.none()}return $.some(C)}))},HD=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return E3(b,C-o.pattern.end.length,n).bind(x=>{const D=PD(a,u,x.container,x.offset,b,C,r);if(mk(f))return $.some({matches:[{pattern:f,startRng:D,endRng:D}],position:x});{const M=gk(e,o.remainingPatterns,x.container,x.offset,n,r),P=M.getOr({matches:[],position:x}),z=P.position;return bW(a,f,z.container,z.offset,n,M.isNone()).map(U=>{const X=pW(a,u,U,r);return{matches:P.matches.concat([{pattern:f,startRng:X,endRng:D}]),position:hd(U.startContainer,U.startOffset)}})}})},gk=(e,n,o,r,a,u)=>{const f=e.dom;return x3(o,r,f.getRoot()).bind(b=>{const C=ID(f,a,o,r);for(let x=0;x<n.length;x++){const D=n[x];if(!jc(C,D.end))continue;const M=n.slice();M.splice(x,1);const P=HD(e,a,{pattern:D,remainingPatterns:M,position:b},u);if(P.isNone()&&r>0)return gk(e,n,o,r-1,a,u);if(P.isSome())return P}return $.none()})},hL=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?pe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},pL=(e,n,o,r)=>{const a=dk(e.dom,o);zv(e.dom,a,r),hL(e,n,a)},vW=(e,n,o,r,a)=>{const u=e.dom,f=dk(u,r),b=dk(u,o);zv(u,b,a),zv(u,f,a);const C={prefix:o.prefix,start:o.end,end:r.start},x=dk(u,C);hL(e,n,x)},yW=(e,n)=>{const o=Yg("mce_textpattern"),r=Lr(n,(a,u)=>{const f=gL(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return Lr(r,(a,u)=>{const f=r.length-a.length-1,b=mk(u.pattern)?u.endMarker:gL(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},CW=e=>jn(e,(n,o)=>o.end.length-n.end.length),SW=(e,n)=>{const o=Yo(e,r=>Vn(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},bL=(e,n,o,r,a,u)=>{const f=gk(e,a.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=gk(e,CW(a.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return SW(f,b)},vL=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=yW(o,n);pe(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;mk(u.pattern)?pL(e,u.pattern,u.endMarker,b):vW(e,u.pattern,u.startMarker,u.endMarker,b),LD(o,u.endMarker,b),LD(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},yL=(e,n,o)=>PT(n,0,n).map(r=>{const a=r.container;return l$(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),zv(e,f,b=>b===n)}),a}),CL=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=mL(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,C)=>{const x=C.get(b);return Zn(x)&&js(x).exists(D=>zt(D,"block"))};return uk(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},SL=e=>jn(e,(n,o)=>o.start.length-n.start.length),wL=e=>(n,o)=>{const r=SL(n),a=o.replace(Vr," ");return bo(r,u=>e(u,o,a))},hk=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const C=o.dom,x=Vc(o);return C.is(r,x)?e(a.blockPatterns,f).map(D=>n&&je.trim(f).length===D.start.length?[]:[{pattern:D,range:PD(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},wW=e=>/^\s[^\s]/.test(e),xW=CL((e,n,o)=>{yL(e,n,o).each(r=>{const a=ne.fromDom(r),u=Jg(a);wW(u)&&Qg(a,u.slice(1))})}),EW=wL((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),TW=hk(EW,!0),kW=(e,n)=>{const o=e.selection.getRng();return uk(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=$D(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=bL(e,r,o.startContainer,u,f,!0),C=TW(e,r,f,!0);return{inlineMatches:b,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},pk=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();pe(n,r=>xW(e,r)),e.selection.moveToBookmark(o)},_W=CL(yL),AW=wL((e,n,o)=>n===e.start||o===e.start),OW=hk(AW,!1),DW=(e,n)=>{const o=e.selection.getRng();return uk(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=ID(e.dom,r,o.startContainer,a),f=$D(n,r,u);return OW(e,r,f,!1,u)}).filter(r=>r.length>0)},RW=(e,n)=>{pe(n,o=>_W(e,o))},MW=(e,n)=>kW(e,n).fold(_e,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Xb(e),vL(e,o),pk(e,r);const a=e.selection.getRng(),u=x3(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Sp&&(b.deleteData(f.offset-1,1),Vv(e.dom,b.parentNode,C=>C===e.dom.getRoot()))})}),!0)),NW=(e,n)=>{const o=e.selection.getRng();uk(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=ID(e.dom,r,o.startContainer,a),f=$D(n,r,u),b=bL(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{vL(e,b)})})},PW=(e,n)=>DW(e,n).fold(_e,o=>(e.undoManager.transact(()=>{RW(e,o)}),!0)),xL=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},EL=(e,n)=>xL(e,n,(o,r)=>o===r.keyCode&&!vt.modifierPressed(r)),BW=(e,n)=>xL(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),TL=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Fc(D_(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),R_(e)),a=()=>Zw(e);e.on("keydown",f=>{if(f.keyCode===13&&!vt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=ed(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&MW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=ed(r(),"space");(b.blockPatterns.length>0||a())&&PW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=ed(r(),"space");(f.inlinePatterns.length>0||a())&&NW(e,f)}};e.on("keyup",f=>{EL(o,f)&&u()}),e.on("keypress",f=>{BW(n,f)&&Pl.setEditorTimeout(e,u)})},$W=e=>{TL(e)},IW=e=>{const n=je.each,o=vt.BACKSPACE,r=vt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=_t.browser,C=b.isFirefox(),x=b.isChromium()||b.isSafari(),D=_t.deviceType.isiPhone()||_t.deviceType.isiPad(),M=_t.os.isMacOS()||_t.os.isiOS(),P=(ht,jt)=>{try{e.getDoc().execCommand(ht,!1,String(jt))}catch{}},z=ht=>ht.isDefaultPrevented(),G=()=>{const ht=Qt=>{const gt=a.create("body"),En=Qt.cloneContents();return gt.appendChild(En),u.serializer.serialize(gt,{format:"html"})},jt=Qt=>{const gt=ht(Qt),En=a.createRng();En.selectNode(e.getBody());const Pn=ht(En);return gt===Pn};e.on("keydown",Qt=>{const gt=Qt.keyCode;if(!z(Qt)&&(gt===r||gt===o)&&e.selection.isEditable()){const En=e.selection.isCollapsed(),Pn=e.getBody();if(En&&!oc(e.schema,Pn)||!En&&!jt(e.selection.getRng()))return;Qt.preventDefault(),e.setContent(""),Pn.firstChild&&a.isBlock(Pn.firstChild)?e.selection.setCursorLocation(Pn.firstChild,0):e.selection.setCursorLocation(Pn,0),e.nodeChanged()}})},U=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},X=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",ht=>{let jt;if(ht.target===e.getDoc().documentElement)if(jt=u.getRng(),e.getBody().focus(),ht.type==="mousedown"){if(Yi(jt.startContainer))return;u.placeCaretAt(ht.clientX,ht.clientY)}else u.setRng(jt)})},oe=()=>{e.on("keydown",ht=>{if(!z(ht)&&ht.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const jt=u.getNode(),Qt=jt.previousSibling;if(jt.nodeName==="HR"){a.remove(jt),ht.preventDefault();return}Qt&&Qt.nodeName&&Qt.nodeName.toLowerCase()==="hr"&&(a.remove(Qt),ht.preventDefault())}}})},fe=()=>{Range.prototype.getClientRects||e.on("mousedown",ht=>{if(!z(ht)&&ht.target.nodeName==="HTML"){const jt=e.getBody();jt.blur(),Pl.setEditorTimeout(e,()=>{jt.focus()})}})},ge=()=>{const ht=t2(e);e.on("click",jt=>{const Qt=jt.target;/^(IMG|HR)$/.test(Qt.nodeName)&&a.isEditable(Qt)&&(jt.preventDefault(),e.selection.select(Qt),e.nodeChanged()),Qt.nodeName==="A"&&a.hasClass(Qt,ht)&&Qt.childNodes.length===0&&a.isEditable(Qt.parentNode)&&(jt.preventDefault(),u.select(Qt))})},be=()=>{const ht=()=>{const Qt=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const gt=u.getStart();gt!==e.getBody()&&(a.setAttrib(gt,"style",null),n(Qt,En=>{gt.setAttributeNode(En.cloneNode(!0))}))}},jt=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Qt=>{let gt;return!z(Qt)&&(Qt.keyCode===8||Qt.keyCode===46)&&jt()?(gt=ht(),e.getDoc().execCommand("delete",!1),gt(),Qt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Qt=>{if(!z(Qt)&&jt()){const gt=ht();Pl.setEditorTimeout(e,()=>{gt()})}})},He=()=>{e.on("keydown",ht=>{if(!z(ht)&&ht.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const jt=u.getNode().previousSibling;if(jt&&jt.nodeName&&jt.nodeName.toLowerCase()==="table")return ht.preventDefault(),!1}return!0})},Qe=()=>{e.on("keydown",ht=>{if(z(ht)||ht.keyCode!==vt.BACKSPACE)return;let jt=u.getRng();const Qt=jt.startContainer,gt=jt.startOffset,En=a.getRoot();let Pn=Qt;if(!(!jt.collapsed||gt!==0)){for(;Pn.parentNode&&Pn.parentNode.firstChild===Pn&&Pn.parentNode!==En;)Pn=Pn.parentNode;Pn.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Pn),jt=a.createRng(),jt.setStart(Qt,0),jt.setEnd(Qt,0),u.setRng(jt))}})},yt=()=>{const ht=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),ah(e)||P("enableObjectResizing",!1)};Nw(e)||e.on("BeforeExecCommand mousedown",ht)},Re=()=>{const ht=()=>{n(a.select("a:not([data-mce-block])"),jt=>{var Qt;let gt=jt.parentNode;const En=a.getRoot();if((gt==null?void 0:gt.lastChild)===jt){for(;gt&&!a.isBlock(gt);){if(((Qt=gt.parentNode)===null||Qt===void 0?void 0:Qt.lastChild)!==gt||gt===En)return;gt=gt.parentNode}a.add(gt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",jt=>{(jt.type==="setcontent"||jt.command==="mceInsertLink")&&ht()})},Ee=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",Vc(e))})},Ue=ht=>{const jt=ht.getBody(),Qt=ht.selection.getRng();return Qt.startContainer===Qt.endContainer&&Qt.startContainer===jt&&Qt.startOffset===0&&Qt.endOffset===jt.childNodes.length},Ct=()=>{e.on("keyup focusin mouseup",ht=>{!vt.modifierPressed(ht)&&!Ue(e)&&u.normalize()},!0)},It=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},On=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Dn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ht=>{let jt;ht.target.nodeName==="HTML"&&(jt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(jt),e.selection.normalize(),e.nodeChanged())}))},vo=()=>{M&&e.on("keydown",ht=>{vt.metaKeyPressed(ht)&&!ht.shiftKey&&(ht.keyCode===37||ht.keyCode===39)&&(ht.preventDefault(),e.selection.getSel().modify("move",ht.keyCode===37?"backward":"forward","lineboundary"))})},Ro=()=>{e.on("click",ht=>{let jt=ht.target;do if(jt.tagName==="A"){ht.preventDefault();return}while(jt=jt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ir=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ht=>{ht.preventDefault()})})},Br=()=>{f.addNodeFilter("br",ht=>{let jt=ht.length;for(;jt--;)ht[jt].attr("class")==="Apple-interchange-newline"&&ht[jt].remove()})},Ac=kt,at=()=>{if(!C||e.removed)return!1;const ht=e.selection.getSel();return!ht||!ht.rangeCount||ht.rangeCount===0},Mt=()=>{x&&(X(),ge(),ir(),U(),D&&(On(),Dn(),Ro())),C&&(fe(),yt(),It(),vo())},so=()=>{Qe(),G(),_t.windowsPhone||Ct(),x&&(X(),ge(),Ee(),ir(),He(),Br(),D?(On(),Dn(),Ro()):U()),C&&(oe(),fe(),be(),yt(),Re(),It(),vo(),He())};return nf(e)?Mt():so(),{refreshContentEditable:Ac,isHidden:at}},kL=e=>e.toLowerCase()==="gpl",vS=e=>e.length>=64&&e.length<=255,LW=e=>kL(e)||vS(e)?"VALID":"INVALID",_L=e=>{const n=uh(e);!ce(qw(e))&&(fn(n)||LW(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},VD=Ko.DOM,FW=(e,n)=>{const o=ne.fromDom(e.getBody()),r=gm(Wi(o)),a=ne.fromTag("style");zs(a,"type","text/css"),Or(a,ne.fromText(n)),Or(r,a),e.on("remove",()=>{Zo(a)})},HW=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,zD=e=>Co(e,n=>fn(n)===!1),UD=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return zD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:HW(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:a2(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},AL=e=>{const n=e.options.get;return zD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},OL=e=>{const n=e.options.get;return{...UD(e),...AL(e),...zD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},VW=e=>{const n=W1(UD(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=a.serializeStyle(a.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),v0(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new ci("br",1))}}),n},zW=e=>{const n=h0(e);n&&Pl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},UW=e=>{const n=e.dom.getRoot();!e.inline&&(!N0(e)||e.selection.getStart(!0)===n)&&ga(n).each(o=>{const r=o.getNode(),a=tu(r)?ga(r).getOr(o):o;e.selection.setRng(a.toRange())})},WW=e=>{e.bindPendingEventDelegates(),e.initialized=!0,z0(e),e.focus(!0),UW(e),e.nodeChanged({initial:!0});const n=__(e);re(n)&&n.call(e,e),zW(e)},WD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,ZW=(e,n,o)=>{const{pass:r,fail:a}=$o(n,b=>tinymce.Resource.has(yO(b))),f=[...r.map(b=>{const C=tinymce.Resource.get(yO(b));return ce(C)?Promise.resolve(WD(e).loadRawCss(b,C)):Promise.resolve()}),WD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},DL=e=>{const n=WD(e),o=C_(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let C="";je.each(e.contentStyles,x=>{C+=x+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(ZW(e,r,o)).then(u).catch(u),b=ti(e);return b&&FW(e,b),f},jW=e=>{const n=e.getDoc(),o=e.getBody();Ax(e),Iw(e)||(n.body.spellcheck=!1,VD.setAttrib(o,"spellcheck","false")),e.quirks=IW(e),B2(e);const r=S_(e);r!==void 0&&(o.dir=r);const a=n2(e);a&&e.on("BeforeSetContent",u=>{je.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},GW=e=>{nf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},bk=e=>{e.removed!==!0&&(GW(e),WW(e))},ZD=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},jD=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(VD.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Nw(e),e._editableRoot=T_(e),e.hasEditableRoot()&&(e.inline&&VD.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=oH(e),e.schema=Eo(AL(e)),e.dom=Ko(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:_w(e),referrerPolicy:Jp(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=VW(e),e.serializer=nB(OL(e),e),e.selection=T7(e.dom,e.getWin(),e.serializer,e),e.annotator=fu(e),e.formatter=bv(e),e.undoManager=xO(e),e._nodeChangeDispatcher=new uI(e),e._selectionOverrides=lL(e),h9(e),LU(e),L5(e),nf(e)||(zU(e),$W(e));const a=zz(e);m9(e,a),b9(e),lH(e),VI(e);const u=dO(e);jW(e),_L(e),u.fold(()=>{const f=ZD(e);DL(e).then(()=>{bk(e),f()})},f=>{e.setProgressState(!0),DL(e).then(()=>{f().then(b=>{e.setProgressState(!1),bk(e),qP(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),bk(e),qP(e)})})})},RL=Ke,qW=(e,n,o)=>w(e,n,RL,o),GD=Ko.DOM,KW=(e,n,o,r)=>{const a=ne.fromTag("iframe");return r.each(u=>zs(a,"tabindex",u)),dr(a,o),dr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),$u(a,"tox-edit-area__iframe"),a},ML=e=>{let n=Hc(e)+"<html><head>";xw(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=$m(e),r=Ew(e),a=e.translate(s1(e));return jy(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+jy(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},NL=(e,n)=>{const o=_t.browser.isFirefox()?s1(e):"Rich Text Area",r=e.translate(o),a=Kc(ne.fromDom(e.getElement()),"tabindex").bind(qa),u=KW(e.id,r,v_(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=ML(e),GD.add(n.iframeContainer,u)},YW=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,jD(e)};if(Sr(e)||_t.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=qW(ne.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},XW=(e,n)=>{NL(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=GD.isHidden(n.editorContainer)),e.getElement().style.display="none",GD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,YW(e)},vk=Ko.DOM,yk=(e,n,o)=>{const r=of.get(o),a=of.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=je.trim(o),r&&je.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,re(u.init)&&(u.init(e,a),n.push(o))}catch(u){X7(e,o,u)}}},Ck=e=>e.replace(/^\-/,""),xg=e=>{const n=[];pe(o1(e),o=>{yk(e,n,Ck(o))})},Sk=e=>{const n=je.trim(Cr(e)),o=e.ui.registry.getAll().icons,r={...QE.get("default").icons,...QE.get(n).icons};ct(r,(a,u)=>{zt(o,u)||e.ui.registry.addIcon(u,a)})},Uv=e=>{const n=Lm(e);if(ce(n)){const o=Wh.get(n);e.theme=o(e,Wh.urls[n])||{},re(e.theme.init)&&e.theme.init(e,Wh.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},PL=e=>{const n=m0(e),o=pv.get(n);e.model=o(e,pv.urls[n])},JW=e=>{const n=e.theme.renderUI;return n?n():wk(e)},QW=e=>{const n=e.getElement(),r=Lm(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},qD=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),eZ=e=>{const n=vk.create("div");return vk.insertAfter(n,e),qD(n,n)},wk=e=>{const n=e.getElement();return e.inline?qD(null):eZ(n)},xk=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ce(Lm(e))?JW(e):re(Lm(e))?QW(e):wk(e)},Qh=(e,n)=>{const o={show:$.from(n.show).getOr(kt),hide:$.from(n.hide).getOr(kt),isEnabled:$.from(n.isEnabled).getOr(Ke),setEnabled:r=>{r&&e.mode.get()==="readonly"||$.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},lb=async e=>{e.dispatch("ScriptsLoaded"),Sk(e),Uv(e),PL(e),xg(e);const n=await xk(e);Qh(e,$.from(n.api).getOr({})),e.editorContainer=n.editorContainer,eH(e),e.inline?jD(e):XW(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},ep=Ko.DOM,BL=e=>e.charAt(0)==="-",tZ=(e,n)=>{const o=d0(n),r=Qp(n);if(!iu.hasCode(o)&&o!=="en"){const a=$n(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{sG(n,a,o)})}},nZ=(e,n)=>{const o=Lm(e);if(ce(o)&&!BL(o)&&!zt(Wh.urls,o)){const r=Ow(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Wh.load(o,a).catch(()=>{Kd(e,a,o)})}},oZ=(e,n)=>{const o=m0(e);if(o!=="plugin"&&!zt(pv.urls,o)){const r=Jy(e),a=ce(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;pv.load(o,a).catch(()=>{vO(e,a,o)})}},sZ=e=>$.from(u0(e)).filter($n).map(n=>({url:n,name:$.none()})),$L=(e,n,o)=>$.from(n).filter(r=>$n(r)&&!QE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:$.some(r)})),IL=(e,n,o)=>{const r=$L(n,"default",o),a=sZ(n).orThunk(()=>$L(n,Cr(n),""));pe(zi([r,a]),u=>{e.add(u.url).catch(()=>{Y7(n,u.url,u.name.getOrUndefined())})})},rZ=(e,n)=>{const o=(r,a)=>{of.load(r,a).catch(()=>{K7(e,a,r)})};ct(Bw(e),(r,a)=>{o(a,r),e.options.set("plugins",o1(e).concat(a))}),pe(o1(e),r=>{r=je.trim(r),r&&!of.urls[r]&&!BL(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},cZ=e=>{const n=Lm(e);return!ce(n)||Me(Wh.get(n))},aZ=e=>{const n=m0(e);return Me(pv.get(n))},kG=(e,n)=>{const o=Ku.ScriptLoader,r=()=>{!e.removed&&cZ(e)&&aZ(e)&&lb(e)};nZ(e,n),oZ(e,n),tZ(o,e),IL(o,e,n),rZ(e,n),o.loadQueue().then(r,r)},iZ=(e,n)=>Mb.forElement(e,{contentCssCors:Pw(n),referrerPolicy:Jp(n)}),KD=e=>{const n=e.id;iu.setCode(d0(e));const o=()=>{ep.unbind(window,"ready",o),e.render()};if(!Of.Event.domLoaded){ep.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),a=kg(r);e.on("remove",()=>{Er(r.dom.attributes,f=>bs(r,f.name)),dr(r,a)}),e.ui.styleSheetLoader=iZ(r,e),Zf(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||ep.getParent(n,"form");u&&(e.formElement=u,n1(e)&&!Ms(e.getElement())&&(ep.insertAfter(ep.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},ep.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),w_(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=pB(e),e.notificationManager=gB(e),y0(e)&&e.on("GetContent",f=>{f.save&&(f.content=ep.encode(f.content))}),Qy(e)&&e.on("submit",()=>{e.initialized&&e.save()}),x_(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),kG(e,e.suffix)},lZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged(),jo(e,n))},uZ=e=>e._editableRoot,LL=(e,n)=>({sections:et(e),options:et(n)}),FL=H().deviceType,YD=FL.isPhone(),dZ=FL.isTablet(),ub=e=>{if(Tn(e))return[];{const n=Zn(e)?e:e.split(/[ ,]/),o=qt(n,hs);return Bt(o,$n)}},mZ=(e,n)=>{const o=ya(n,(r,a)=>Ut(e,a));return LL(o.t,o.f)},fZ=(e,n,o={})=>{const r=e.sections(),a=ho(r,n).getOr({});return je.extend({},o,a)},XD=(e,n)=>zt(e.sections(),n),gZ=(e,n)=>XD(e,n)?e.sections()[n]:{},HL=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ho(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),JD=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?je.extend({},e.external_plugins,r):r},VL=(e,n)=>[...ub(e),...ub(n)],QD=(e,n,o,r)=>e&&XD(n,"mobile")?r:o,hZ=(e,n,o,r)=>{const a=ub(o.forced_plugins),u=ub(r.plugins),f=gZ(n,"mobile"),b=f.plugins?ub(f.plugins):u,C=QD(e,n,u,b),x=VL(a,C);return je.extend(r,{forced_plugins:a,plugins:x})},_G=(e,n)=>e&&XD(n,"mobile"),AG=(e,n,o,r,a)=>{var u;const f=e?{mobile:HL((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=mZ(["mobile"],oS(f,a)),C=je.extend(o,r,b.options(),_G(e,b)?fZ(b,"mobile"):{},{external_plugins:JD(r,b.options())});return hZ(e,b,r,C)},pZ=(e,n)=>{const o=N3(n);return AG(YD||dZ,YD,o,e,o)},zL=(e,n)=>h7(e,n),bZ=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{pe("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},vZ=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Vn(a,u=>Me(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},yZ=e=>{bZ(e),vZ(e)},OG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(_t.os.isMacOS()||_t.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},DG=(e,n,o,r)=>{const a=ne.fromDom(e.getRoot());return G2(a,De.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),q2(a,De.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},UL=e=>{if(typeof e!="string"){const n=je.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},WL=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?DG(r,o.getRng(),n,e.schema):n},Ek=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=UL(n);IE(e,{...r,content:WL(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=Qj(e,a.content,r);LE(e,u,a),e.addVisual()})}},CZ=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Ek(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Ek(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Ek(e,r)},mceInsertContent:(n,o,r)=>{Ek(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Fw(e))}})},SZ={"font-size":"size","font-family":"face"},RG=ec("font"),MG=(e,n,o)=>{const r=u=>pm(u,e).orThunk(()=>RG(u)?ho(SZ,e).bind(f=>Kc(u,f)):$.none()),a=u=>_n(ne.fromDom(n),u);return cC(ne.fromDom(o),u=>r(u),a)},NG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),wZ=(e,n)=>$.from(Ko.DOM.getStyle(n,e,!0)),xZ=e=>(n,o)=>$.from(o).map(ne.fromDom).filter(Cn).bind(r=>MG(e,n,r.dom).or(wZ(e,r.dom))).getOr(""),EZ=xZ("font-size"),db=k(NG,xZ("font-family")),eR=e=>ga(e.getBody()).bind(n=>{const o=n.container();return $.from(qe(o)?o.parentNode:o)}),Tk=e=>$.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?$.none():$.from(e.selection.getStart(!0))}),ZL=(e,n)=>Tk(e).orThunk(Ve(eR,e)).map(ne.fromDom).filter(Cn).bind(n),kk=(e,n)=>ZL(e,Mo($.some,n)),tR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=lh(e),a=Hm(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},TZ=e=>{const n=e.split(/\s*,\s*/);return qt(n,o=>o.indexOf(" ")!==-1&&!(Jo(o,'"')||Jo(o,"'"))?`'${o}'`:o).join(",")},kZ=(e,n)=>{const o=tR(e,n);e.formatter.toggle("fontname",{value:TZ(o)}),e.nodeChanged()},_Z=e=>kk(e,n=>db(e.getBody(),n.dom)).getOr(""),AZ=(e,n)=>{e.formatter.toggle("fontsize",{value:tR(e,n)}),e.nodeChanged()},OZ=e=>kk(e,n=>EZ(e.getBody(),n.dom)).getOr(""),DZ=e=>kk(e,n=>{const o=ne.fromDom(e.getBody()),r=cC(n,u=>pm(u,"line-height"),Ve(_n,o)),a=()=>{const u=parseFloat(Js(n,"line-height")),f=parseFloat(Js(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),tp=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},RZ=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{kZ(e,a)},FontSize:(o,r,a)=>{AZ(e,a)},LineHeight:(o,r,a)=>{tp(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(ce(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},jL=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>_Z(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>OZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>DZ(e))},MZ=e=>{RZ(e),jL(e)},_k=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},NZ=e=>{e.editorCommands.addCommands({Indent:()=>{ob(e)},Outdent:()=>{TT(e)}}),e.editorCommands.addCommands({Outdent:()=>a3(e)},"state")},PZ=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=ce(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");ut(u)&&ce(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},BZ=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return $.from(f).map(ne.fromDom)},nR=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=Mv(o,u);if(!f||!f.isContentEditable)return;const b=n?qo:Zi,C=Vc(e);BZ(e,a,f,u).each(x=>{const D=Y3(e,u,x.dom,f,!1,C);b(x,ne.fromDom(D)),e.selection.setCursorLocation(D,0),e.dispatch("NewBlock",{newBlock:D}),Dv(e,"insertParagraph")})},$Z=e=>nR(e,!0),IZ=e=>nR(e,!1),LZ=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{$Z(e)},InsertNewBlockAfter:()=>{IZ(e)}})},FZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{rb(Sz,e)},mceInsertNewLine:(n,o,r)=>{nI(e,r)},InsertLineBreak:(n,o,r)=>{rb(X$,e)}})},oR=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>pt(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Fe);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},HZ=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{nM(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},VZ=e=>{yZ(e),OG(e),_k(e),oR(e),CZ(e),PZ(e),NZ(e),LZ(e),FZ(e),MZ(e),HZ(e)},mc=["toggleview"],GL=e=>Ut(mc,e.toLowerCase());class qL{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Lx(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return re(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!GL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return re(r)?r(o):!1}queryCommandValue(n){if(!GL(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return re(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ct(n,(a,u)=>{pe(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const sR=(e,n,o)=>{Ag(e,n)&&!o?am(e,n):o&&$u(e,n)},Ak=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Ok=(e,n)=>{e.dom.contentEditable="true"},zZ=e=>{$.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},UZ=e=>{e.selection.setRng(e.selection.getRng())},WZ=(e,n)=>{Ak(e,"StyleWithCSS",n),Ak(e,"enableInlineTableEditing",n),Ak(e,"enableObjectResizing",n)},ZZ=e=>{e.readonly=!0,e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),zZ(e)},jZ=(e,n)=>{e.readonly=!1,e.hasEditableRoot()&&Ok(n),WZ(e,!1),tM(e)&&e.focus(),UZ(e),e.nodeChanged()},GZ=(e,n)=>{const o=ne.fromDom(e.getBody());sR(o,"mce-content-readonly",n),n?(ZZ(e),e.hasEditableRoot()&&Ok(o)):jZ(e,o)},Wv=e=>e.readonly,qZ=e=>e.type==="click",Zv=["copy"],nm=e=>Ut(Zv,e.type),KZ=(e,n)=>Hu(n,"a",r=>_n(r,ne.fromDom(e.getBody()))).bind(r=>Kc(r,"href")),YZ=(e,n)=>{if(qZ(n)&&!vt.metaKeyPressed(n)){const o=ne.fromDom(n.target);KZ(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${Hi(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else nm(n)&&e.dispatch(n.type,n)},XZ=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{Wv(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&Wv(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&Wv(e)){const o=e.undoManager.add();Me(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(Wv(e)){const n=e.undoManager.add();Me(n)&&e.undoManager.undo()}})},JZ=je.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class rR{static isNative(n){return!!JZ[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||_e}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=Af(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),a.isImmediatePropagationStopped())return a;if(C.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=_e),o){const u={func:o,removed:!1};a&&je.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let x=this.bindings[C];x||(x=[],this.toggleEvent(C,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[C]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return ct(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=$o(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,pe(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ct(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const yS=e=>(e._eventDispatcher||(e._eventDispatcher=new rR({scope:e,toggleEvent:(n,o)=>{rR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),cR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Af(e.toLowerCase(),n??{},r);const a=yS(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return yS(this).on(e,n,o)},off(e,n){return yS(this).off(e,n)},once(e,n){return yS(this).once(e,n)},hasEventListeners(e){return yS(this).has(e)}},Dk=Ko.DOM;let mb;const aR=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=ma(e);return o?(e.eventRoot||(e.eventRoot=Dk.select(o)[0]),e.eventRoot):e.getBody()},QZ=e=>!e.hidden,KL=(e,n,o)=>{QZ(e)?e.dispatch(n,o):Wv(e)&&YZ(e,o)},YL=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=aR(e,n);if(ma(e)){if(mb||(mb={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||mb&&(ct(mb,(a,u)=>{e.dom.unbind(aR(e,u))}),mb=null)})),mb[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||Dk.isChildOf(u,C))&&KL(f[b],n,a)}};mb[n]=r,Dk.bind(o,n,r)}else{const r=a=>{KL(e,n,a)};Dk.bind(o,n,r),e.delegates[n]=r}},XL={...cR,bindPendingEventDelegates(){const e=this;je.each(e._pendingNativeEvents,n=>{YL(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?YL(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(aR(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ct(e.delegates,(r,a)=>{e.dom.unbind(aR(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},ej=e=>ce(e)?{value:e.split(/[ ,]/),valid:!0}:Hn(e,ce)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},tj=e=>{const n=(()=>{switch(e){case"array":return Zn;case"boolean":return vn;case"function":return re;case"number":return is;case"object":return ut;case"string":return ce;case"string[]":return ej;case"object[]":return o=>Hn(o,ut);case"regexp":return o=>Gt(o,RegExp);default:return Ke}})();return o=>iR(o,n,`The value must be a ${e}.`)},nj=e=>ce(e.processor),JL=(e,n)=>{const o=ur(n.message)?"":`. ${n.message}`;return e+o},QL=e=>e.valid,iR=(e,n,o="")=>{const r=n(e);return vn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},oj=(e,n,o)=>{if(!fn(n)){const r=iR(n,o);if(QL(r))return r.value;console.error(JL(`Invalid default value passed for the "${e}" option`,r))}},sj=(e,n,o=n)=>{const r={},a={},u=(z,G,U)=>{const X=iR(G,U);return QL(X)?(a[z]=X.value,!0):(console.warn(JL(`Invalid value passed for the ${z} option`,X)),!1)},f=(z,G)=>{const U=nj(G)?tj(G.processor):G.processor,X=oj(z,G.default,U);r[z]={...G,default:X,processor:U},ho(a,z).orThunk(()=>ho(n,z)).each(fe=>u(z,fe,U))},b=z=>zt(r,z);return{register:f,isRegistered:b,get:z=>ho(a,z).orThunk(()=>ho(r,z).map(G=>G.default)).getOrUndefined(),set:(z,G)=>{if(b(z)){const U=r[z];return U.immutable?(console.error(`"${z}" is an immutable option and cannot be updated`),!1):u(z,G,U.processor)}else return console.warn(`"${z}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:z=>{const G=b(z);return G&&delete a[z],G},isSet:z=>zt(a,z),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(z,G)=>vn(G)||is(G)||ce(G)||le(G)||Zn(G)||Ao(G)?G:Object.prototype.toString.call(G))))}catch(z){console.error(z)}}}},rj=["design","readonly"],eF=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&GZ(e,u.editorReadOnly),n.set(r),n4(e,r)},cj=(e,n,o,r)=>{if(r!==o.get()){if(!zt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?eF(e,o,n,r):e.on("init",()=>eF(e,o,n,r))}},aj=(e,n,o)=>{if(Ut(rj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},ij=e=>{const n=ds("design"),o=ds({design:{activate:kt,deactivate:kt,editorReadOnly:!1},readonly:{activate:kt,deactivate:kt,editorReadOnly:!0}});return XZ(e),{isReadOnly:()=>Wv(e),set:r=>cj(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(aj(o.get(),r,a))}}},lR=je.each,uR=je.explode,lj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},tF=je.makeMap("alt,ctrl,shift,meta,access"),uj=e=>e in tF,dj=e=>{const n={},o=_t.os.isMacOS()||_t.os.isiOS();lR(uR(e.toLowerCase(),"+"),u=>{uj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=lj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in tF)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class dR{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(lR(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return lR(uR(je.trim(n)),b=>{const C=u.createShortcut(b,o,f,a);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:je.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=je.map(uR(n,">"),dj);return u[u.length-1]=je.extend(u[u.length-1],{func:r,scope:a||this.editor}),je.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const mj=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},C={},x=(P,z)=>(G,U)=>{P[G.toLowerCase()]={...U,type:z}},D=(P,z)=>r[P.toLowerCase()]=z,M=(P,z)=>f[P.toLowerCase()]=z;return{addButton:x(e,"button"),addGroupToolbarButton:x(e,"grouptoolbarbutton"),addToggleButton:x(e,"togglebutton"),addMenuButton:x(e,"menubutton"),addSplitButton:x(e,"splitbutton"),addMenuItem:x(n,"menuitem"),addNestedMenuItem:x(n,"nestedmenuitem"),addToggleMenuItem:x(n,"togglemenuitem"),addAutocompleter:x(o,"autocompleter"),addContextMenu:x(a,"contextmenu"),addContextToolbar:x(u,"contexttoolbar"),addContextForm:x(u,"contextform"),addSidebar:x(b,"sidebar"),addView:x(C,"views"),addIcon:D,addContext:M,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:b,views:C,contexts:f})}},fj=()=>{const e=mj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},fb=Ko.DOM,nF=je.extend,gj=je.each;class Rk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,nF(this,XL);const a=this;this.id=n,this.hidden=!1;const u=pZ(r.defaultOptions,o);this.options=sj(a,u,o),ww(a);const f=this.options.get;f("deprecation_warnings")&&cB(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const x=Jp(a);x&&(Ku.ScriptLoader._setReferrerPolicy(x),Ko.DOM.styleSheetLoader._setReferrerPolicy(x));const D=Pw(a);Me(D)&&Ko.DOM.styleSheetLoader._setContentCssCors(D),da.languageLoad=f("language_load"),da.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new ud(xw(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Zf(a),this.hasVisual=e2(a),this.shortcuts=new dR(this),this.editorCommands=new qL(this),VZ(this);const M=f("cache_suffix");M&&(_t.cacheSuffix=M.replace(/^[\?\&]+/,"")),this.ui={registry:fj(),styleSheetLoader:void 0,show:kt,hide:kt,setEnabled:kt,isEnabled:Ke},this.mode=ij(a),r.dispatch("SetupEditor",{editor:this});const P=k_(a);re(P)&&P.call(a,a)}render(){KD(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return ov(this)}translate(n){return iu.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Me(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:Ke,default:o})),!a.isSet(n)&&!fn(o)?o:a.get(n)}hasPlugin(n,o){return Ut(o1(this),n)?o?of.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(fb.show(n.getContainer()),fb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(fb.hide(n.getContainer()),fb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=Ms(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Ms(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=fb.getParent(o.id,"form");b&&gj(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return qE(this,n,o)}getContent(n){return D7(this,n)}insertContent(n,o){o&&(n=nF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?qE(this,this.startContent,{format:"raw"}):qE(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||fb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=fb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=A_(a);if(re(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||ut(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new ud(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){zL(this,n)}setEditableRoot(n){lZ(this,n)}hasEditableRoot(){return uZ(this)}remove(){V7(this)}destroy(n){aB(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const jv=Ko.DOM,Mk=je.each;let mR=!1,Nk,Ri=[];const Pk=e=>{const n=e.type;Mk(np.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},oF=e=>{if(e!==mR){const n=Ko.DOM;e?(n.bind(window,"resize",Pk),n.bind(window,"scroll",Pk)):(n.unbind(window,"resize",Pk),n.unbind(window,"scroll",Pk)),mR=e}},sF=e=>{const n=Ri;return Ri=Bt(Ri,o=>e!==o),np.activeEditor===e&&(np.activeEditor=Ri.length>0?Ri[0]:null),np.focusedEditor===e&&(np.focusedEditor=null),n.length!==Ri.length},hj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(sF(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},pj=document.compatMode!=="CSS1Compat",np={...cR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"4.1",releaseDate:"TBD",i18n:iu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=ud.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new ud(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new ud(e.baseURL),e.suffix=o,_F(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ct(r,(a,u)=>{da.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=je.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(D,M)=>D.inline&&M.tagName.toLowerCase()in r,u=D=>{let M=D.id;return M||(M=ho(D,"name").filter(P=>!jv.get(P)).getOrThunk(jv.uniqueId),D.setAttribute("id",M)),M},f=D=>{const M=e[D];if(M)return M.apply(n,[])},b=D=>_t.browser.isIE()||_t.browser.isEdge()?(tT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):pj?(tT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ce(D.selector)?jv.select(D.selector):Me(D.target)?[D.target]:[];let C=D=>{o=D};const x=()=>{let D=0;const M=[];let P;const z=(G,U,X)=>{const oe=new Rk(G,U,n);M.push(oe),oe.on("init",()=>{++D===P.length&&C(M)}),oe.targetElm=oe.targetElm||X,oe.render()};jv.unbind(window,"ready",x),f("onpageload"),P=li(b(e)),je.each(P,G=>{hj(n.get(G.id))}),P=je.grep(P,G=>!n.get(G.id)),P.length===0?C([]):Mk(P,G=>{a(e,G)?tT("Could not initialize inline editor on invalid inline target element",G):z(u(G),e,G)})};return jv.bind(window,"ready",x),new Promise(D=>{o?D(o):C=M=>{D(M)}})},get(e){return arguments.length===0?Ri.slice(0):ce(e)?bo(Ri,n=>n.id===e).getOr(null):is(e)&&Ri[e]?Ri[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Ri.push(e),oF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Nk||(Nk=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",Nk))),e},createEditor(e,n){return this.add(new Rk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Ri.length-1;r>=0;r--)n.remove(Ri[r]);return}if(ce(e)){Mk(jv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,le(n.get(o.id))?null:(sF(o)&&n.dispatch("RemoveEditor",{editor:o}),Ri.length===0&&window.removeEventListener("beforeunload",Nk),o.remove(),oF(Ri.length>0),o)},execCommand(e,n,o){var r;const a=this,u=ut(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new Rk(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Mk(Ri,e=>{e.save()})},addI18n:(e,n)=>{iu.add(e,n)},translate:e=>iu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ud(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ud(this.baseURL)}};np.setup();const PG=(()=>{const e=Cc(),n=u=>({items:u,types:no(u),getType:f=>ho(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),fR=Math.min,Gv=Math.max,CS=Math.round,rF=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,x=(o||"").split("");return x[0]==="b"&&(a+=C),x[1]==="r"&&(r+=b),x[0]==="c"&&(a+=CS(C/2)),x[1]==="c"&&(r+=CS(b/2)),x[3]==="b"&&(a-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(a-=CS(f/2)),x[4]==="c"&&(r-=CS(u/2)),qv(r,a,u,f)},vj=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=rF(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},yj=(e,n,o)=>qv(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Cj=(e,n)=>{const o=Gv(e.x,n.x),r=Gv(e.y,n.y),a=fR(e.x+e.w,n.x+n.w),u=fR(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:qv(o,r,a-o,u-r)},Sj=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,x=Gv(0,n.x-r),D=Gv(0,n.y-a),M=Gv(0,u-b),P=Gv(0,f-C);return r+=x,a+=D,o&&(u+=x,f+=D,r-=M,a-=P),u-=M,f-=P,qv(r,a,u-r,f-a)},qv=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),gR={inflate:yj,relativePosition:rF,findBestRelativePosition:vj,intersect:Cj,clamp:Sj,create:qv,fromClientRect:e=>qv(e.left,e.top,e.width,e.height)},wj=(e,n,o=1e3)=>{let r=!1,a=null;const u=x=>(...D)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),x.apply(null,D))},f=u(e),b=u(n);return{start:(...x)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},Ej=(()=>{const e={},n={},o={};return{load:(C,x)=>{const D=`Script at URL "${x}" failed to load`,M=`Script at URL "${x}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const P=new Promise((z,G)=>{const U=wj(z,G);n[C]=U.resolve,Ku.ScriptLoader.loadScript(x).then(()=>U.start(M),()=>U.reject(D))});return e[C]=P,P}},add:(C,x)=>{n[C]!==void 0&&(n[C](x),delete n[C]),e[C]=Promise.resolve(x),o[C]=x},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),Tj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let SS;try{const e="__storage_test__";SS=window.localStorage,SS.setItem(e,e),SS.removeItem(e)}catch{SS=Tj()}var kj=SS;const _j={geom:{Rect:gR},util:{Delay:Pl,Tools:je,VK:vt,URI:ud,EventDispatcher:rR,Observable:cR,I18n:iu,LocalStorage:kj,ImageUploader:SB},dom:{EventUtils:Of,TreeWalker:Hr,TextSeeker:Mf,DOMUtils:Ko,ScriptLoader:Ku,RangeUtils:We,Serializer:nB,StyleSheetLoader:Cm,ControlSelection:L2,BookmarkManager:cg,Selection:T7,Event:Of.Event},html:{Styles:km,Entities:xm,Node:ci,Schema:Eo,DomParser:W1,Writer:P4,Serializer:Ah},Env:_t,AddOnManager:da,Annotator:fu,Formatter:bv,UndoManager:xO,EditorCommands:qL,WindowManager:pB,NotificationManager:gB,EditorObservable:XL,Shortcuts:dR,Editor:Rk,FocusManager:E4,EditorManager:np,DOM:Ko.DOM,ScriptLoader:Ku.ScriptLoader,PluginManager:of,ThemeManager:Wh,ModelManager:pv,IconManager:QE,Resource:Ej,FakeClipboard:PG,trim:je.trim,isArray:je.isArray,is:je.is,toArray:je.toArray,makeMap:je.makeMap,each:je.each,map:je.map,grep:je.grep,inArray:je.inArray,extend:je.extend,walk:je.walk,resolve:je.resolve,explode:je.explode,_addCacheSuffix:je._addCacheSuffix},aF=je.extend(np,_j),Aj=e=>{try{mn.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(aF),Aj(aF)})()})(bq);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const mn=Object.getPrototypeOf,Fn=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},Kn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Fn(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},Xn=t=>s=>Kn(s)===t,po=t=>s=>typeof s===t,as=t=>s=>t===s,Vo=(t,s)=>Qn(t)&&Fn(t,s,(c,i)=>mn(c)===i),bn=Xn("string"),Qn=Xn("object"),Ii=t=>Vo(t,Object),fs=Xn("array"),Ir=as(null),hc=po("boolean"),er=as(void 0),Wc=t=>t==null,eo=t=>!Wc(t),Nt=po("function"),pc=po("number"),Gt=(t,s)=>{if(fs(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},ce=()=>{},ut=t=>()=>t(),Ao=(t,s)=>(...c)=>t(s.apply(null,c)),Zn=(t,s)=>c=>t(s(c)),le=t=>()=>t,vn=t=>t,fn=(t,s)=>t===s;function Tn(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const Me=t=>s=>!t(s),re=t=>()=>{throw new Error(t)},is=t=>t(),Hn=le(!1),kt=le(!0);class k{constructor(s,c){this.tag=s,this.value=c}static some(s){return new k(!0,s)}static none(){return k.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?k.some(s(this.value)):k.none()}bind(s){return this.tag?s(this.value):k.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:k.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return eo(s)?k.some(s):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const Mo=Array.prototype.slice,et=Array.prototype.indexOf,Oo=Array.prototype.push,Kt=(t,s)=>et.call(t,s),Ve=(t,s)=>{const c=Kt(t,s);return c===-1?k.none():k.some(c)},yo=(t,s)=>Kt(t,s)>-1,ks=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},it=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},Xt=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=Mo.call(t,i,i+s);c.push(d)}return c},_e=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},Ke=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},$=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},tr=(t,s)=>{const c=[],i=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:i).push(h)}return{pass:c,fail:i}},kn=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},zo=(t,s,c)=>($(t,(i,d)=>{c=s(c,i,d)}),c),co=(t,s,c)=>(Ke(t,(i,d)=>{c=s(c,i,d)}),c),Li=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return k.some(g);if(c(g,i))break}return k.none()},Ut=(t,s)=>Li(t,s,Hn),Vn=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return k.some(c)}return k.none()},qt=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!fs(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Oo.apply(s,t[c])}return s},pe=(t,s)=>qt(_e(t,s)),Er=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},$o=t=>{const s=Mo.call(t,0);return s.reverse(),s},Bt=(t,s)=>kn(t,c=>!yo(s,c)),Lr=(t,s)=>{const c={};for(let i=0,d=t.length;i<d;i++){const g=t[i];c[String(g)]=s(g,i)}return c},Bn=t=>[t],Oc=(t,s)=>{const c=Mo.call(t,0);return c.sort(s),c},bo=(t,s)=>s>=0&&s<t.length?k.some(t[s]):k.none(),_s=t=>bo(t,0),fl=t=>bo(t,t.length-1),Bs=Nt(Array.from)?Array.from:t=>Mo.call(t),Yo=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return k.none()},Io=Object.keys,Dc=Object.hasOwnProperty,gs=(t,s)=>{const c=Io(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];s(h,g)}},jn=(t,s)=>Pa(t,(c,i)=>({k:i,v:s(c,i)})),Pa=(t,s)=>{const c={};return gs(t,(i,d)=>{const g=s(i,d);c[g.k]=g.v}),c},js=t=>(s,c)=>{t[c]=s},Ss=(t,s,c,i)=>{gs(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},Tr=(t,s)=>{const c={},i={};return Ss(t,s,js(c),js(i)),{t:c,f:i}},Rc=(t,s)=>{const c={};return Ss(t,s,js(c),ce),c},li=(t,s)=>{const c=[];return gs(t,(i,d)=>{c.push(s(i,d))}),c},no=(t,s)=>{const c=Io(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],h=t[g];if(s(h,g,t))return k.some(h)}return k.none()},Fi=t=>li(t,vn),ct=(t,s)=>zn(t,s)?k.from(t[s]):k.none(),zn=(t,s)=>Dc.call(t,s),Kr=(t,s)=>zn(t,s)&&t[s]!==void 0&&t[s]!==null,Gs=(t,s,c=fn)=>t.exists(i=>c(i,s)),Za=(t,s,c=fn)=>Ca(t,s,c).getOr(t.isNone()&&s.isNone()),ya=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},Co=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return k.none()}return k.some(s)},Ca=(t,s,c)=>t.isSome()&&s.isSome()?k.some(c(t.getOrDie(),s.getOrDie())):k.none(),ja=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?k.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):k.none(),ho=(t,s)=>t!=null?k.some(s(t)):k.none(),zt=(t,s)=>t?k.some(s):k.none(),$s=(t,s)=>t+s,bc=(t,s)=>t.substring(s),ql=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,Kl=(t,s)=>ls(t,s)?bc(t,s.length):t,Xo=(t,s)=>vc(t,s)?t:$s(t,s),nr=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?er(i)?!0:d+s.length<=i:!1},ls=(t,s)=>ql(t,s,0),vc=(t,s)=>ql(t,s,t.length-s.length),or=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Is=t=>t.length>0,Uo=t=>!Is(t),qs=t=>t.style!==void 0&&Nt(t.style.getPropertyValue),Mc=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Zc(i.childNodes[0])},Ga=(t,s)=>{const i=(s||document).createElement(t);return Zc(i)},gl=(t,s)=>{const i=(s||document).createTextNode(t);return Zc(i)},Zc=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},he={fromHtml:Mc,fromTag:Ga,fromText:gl,fromDom:Zc,fromPoint:(t,s,c)=>k.from(t.dom.elementFromPoint(s,c)).map(Zc)},Yr=typeof window<"u"?window:Function("return this;")(),$a=(t,s)=>{let c=s??Yr;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},Ou=(t,s)=>{const c=t.split(".");return $a(c,s)},Du=(t,s)=>Ou(t,s),No=(t,s)=>{const c=Du(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},Ru=Object.getPrototypeOf,ui=t=>No("HTMLElement",t),Xr=t=>{const s=Ou("ownerDocument.defaultView",t);return Qn(t)&&(ui(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ru(t).constructor.name))},Hi=9,Ls=11,Jo=1,jc=3,kr=t=>t.dom.nodeName.toLowerCase(),hs=t=>t.dom.nodeType,di=t=>s=>hs(s)===t,ra=t=>$n(t)&&Xr(t.dom),$n=di(Jo),ur=di(jc),Ks=di(Hi),qa=di(Ls),ca=t=>s=>$n(s)&&kr(s)===t,Ys=(t,s)=>{const c=t.dom;if(c.nodeType!==Jo)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Wo=t=>t.nodeType!==Jo&&t.nodeType!==Hi&&t.nodeType!==Ls||t.childElementCount===0,rm=(t,s)=>{const c=s===void 0?document:s.dom;return Wo(c)?[]:_e(c.querySelectorAll(t),he.fromDom)},Gc=(t,s)=>{const c=s===void 0?document:s.dom;return Wo(c)?k.none():k.from(c.querySelector(t)).map(he.fromDom)},ao=(t,s)=>t.dom===s.dom,hr=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},pr=t=>he.fromDom(t.dom.ownerDocument),Fs=t=>Ks(t)?t:pr(t),mi=t=>he.fromDom(Fs(t).dom.documentElement),Jr=t=>he.fromDom(Fs(t).dom.defaultView),Qr=t=>k.from(t.dom.parentNode).map(he.fromDom),Nc=t=>Qr(t),Pc=t=>k.from(t.dom.parentElement).map(he.fromDom),hl=(t,s)=>{const c=Nt(s)?s:Hn;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=he.fromDom(g);if(d.push(h),c(h)===!0)break;i=g}return d},Vi=t=>k.from(t.dom.offsetParent).map(he.fromDom),fi=t=>k.from(t.dom.nextSibling).map(he.fromDom),Bc=t=>_e(t.dom.childNodes,he.fromDom),_r=(t,s)=>{const c=t.dom.childNodes;return k.from(c[s]).map(he.fromDom)},gi=t=>_r(t,0),hi=(t,s)=>({element:t,offset:s}),pl=(t,s)=>{const c=Bc(t);return c.length>0&&s<c.length?hi(c[s],0):hi(t,s)},Ka=t=>qa(t)&&eo(t.dom.host),Xs=t=>he.fromDom(t.dom.getRootNode()),Ya=t=>Ka(t)?t:he.fromDom(Fs(t).dom.body),br=t=>yc(t).isSome(),yc=t=>{const s=Xs(t);return Ka(s)?k.some(s):k.none()},Yl=t=>he.fromDom(t.dom.host),Xl=t=>{if(eo(t.target)){const s=he.fromDom(t.target);if($n(s)&&H(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return _s(c)}}return k.from(t.target)},H=t=>eo(t.dom.shadowRoot),J=t=>{const s=ur(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return yc(he.fromDom(s)).fold(()=>c.body.contains(s),Zn(J,Yl))},ie=()=>Ne(he.fromDom(document)),Ne=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return he.fromDom(s)},Xe=(t,s,c)=>{if(bn(c)||hc(c)||pc(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Pe=(t,s,c)=>{Xe(t.dom,s,c)},to=(t,s)=>{const c=t.dom;gs(s,(i,d)=>{Xe(c,d,i)})},_t=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},sn=(t,s)=>k.from(_t(t,s)),Qo=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},N=(t,s)=>{t.dom.removeAttribute(s)},Z=t=>co(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),te=(t,s,c)=>{if(!bn(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);qs(t)&&t.style.setProperty(s,c)},Se=(t,s)=>{qs(t)&&t.style.removeProperty(s)},Le=(t,s,c)=>{const i=t.dom;te(i,s,c)},yn=(t,s)=>{const c=t.dom;gs(s,(i,d)=>{te(c,d,i)})},io=(t,s)=>{const c=t.dom;gs(s,(i,d)=>{i.fold(()=>{Se(c,d)},g=>{te(c,d,g)})})},So=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!J(t)?je(c,s):d},je=(t,s)=>qs(t)?t.style.getPropertyValue(s):"",Do=(t,s)=>{const c=t.dom,i=je(c,s);return k.from(i).filter(d=>d.length>0)},vr=t=>{const s={},c=t.dom;if(qs(c))for(let i=0;i<c.style.length;i++){const d=c.style.item(i);s[d]=c.style[d]}return s},zi=(t,s,c)=>{const i=he.fromTag(t);return Le(i,s,c),Do(i,s).isSome()},cn=(t,s)=>{const c=t.dom;Se(c,s),Gs(sn(t,"style").map(or),"")&&N(t,"style")},qc=t=>t.dom.offsetWidth,Ia=(t,s)=>{const c=(y,S)=>{if(!pc(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const T=y.dom;qs(T)&&(T.style[t]=S+"px")},i=y=>{const S=s(y);if(S<=0||S===null){const T=So(y,t);return parseFloat(T)||0}return S},d=i,g=(y,S)=>co(S,(T,_)=>{const R=So(y,_),L=R===void 0?0:parseInt(R,10);return isNaN(L)?T:T+L},0);return{set:c,get:i,getOuter:d,aggregate:g,max:(y,S,T)=>{const _=g(y,T);return S>_?S-_:0}}},sr=Ia("height",t=>{const s=t.dom;return J(t)?s.getBoundingClientRect().height:s.offsetHeight}),Po=t=>sr.get(t),La=t=>sr.getOuter(t),uf=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=sr.max(t,s,c);Le(t,"max-height",i+"px")},wd=(t,s)=>({left:t,top:s,translate:(i,d)=>wd(t+i,s+d)}),us=wd,Mu=t=>{const s=t.getBoundingClientRect();return us(s.left,s.top)},cm=(t,s)=>t!==void 0?t:s!==void 0?s:0,ps=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return us(c.offsetLeft,c.offsetTop);const g=cm(i==null?void 0:i.pageYOffset,d.scrollTop),h=cm(i==null?void 0:i.pageXOffset,d.scrollLeft),y=cm(d.clientTop,c.clientTop),S=cm(d.clientLeft,c.clientLeft);return Ui(t).translate(h-S,g-y)},Ui=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?us(i.offsetLeft,i.offsetTop):J(t)?Mu(s):us(0,0)},aa=Ia("width",t=>t.dom.offsetWidth),xd=(t,s)=>aa.set(t,s),W=t=>aa.get(t),K=t=>aa.getOuter(t),Ce=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=aa.max(t,s,c);Le(t,"max-width",i+"px")},Be=t=>{let s=!1,c;return(...i)=>(s||(s=!0,c=t.apply(null,i)),c)},Ft=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),y=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),T=g||h&&!S,_=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,R=!T&&!S&&!_;return{isiPad:le(d),isiPhone:le(g),isTablet:le(S),isPhone:le(T),isTouch:le(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:le(_),isDesktop:le(R)}},Nn=(t,s)=>{for(let c=0;c<t.length;c++){const i=t[c];if(i.test(s))return i}},Cn=(t,s)=>{const c=Nn(t,s);if(!c)return{major:0,minor:0};const i=d=>Number(s.replace(c,"$"+d));return $c(i(1),i(2))},Bo=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Hs():Cn(t,c)},Hs=()=>$c(0,0),$c=(t,s)=>({major:t,minor:s}),ec={nu:$c,detect:Bo,unknown:Hs},Vs=(t,s)=>Yo(s.brands,c=>{const i=c.brand.toLowerCase();return Ut(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:ec.nu(parseInt(c.version,10),0)}))}),zs=(t,s)=>{const c=String(s).toLowerCase();return Ut(t,i=>i.search(c))},dr=(t,s)=>zs(t,s).map(c=>{const i=ec.detect(c.versionRegexes,s);return{current:c.name,version:i}}),tc=(t,s)=>zs(t,s).map(c=>{const i=ec.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Kc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,As=t=>s=>nr(s,t),bs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>nr(t,"edge/")&&nr(t,"chrome")&&nr(t,"safari")&&nr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Kc],search:t=>nr(t,"chrome")&&!nr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>nr(t,"msie")||nr(t,"trident")},{name:"Opera",versionRegexes:[Kc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:As("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:As("firefox")},{name:"Safari",versionRegexes:[Kc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(nr(t,"safari")||nr(t,"mobile/"))&&nr(t,"applewebkit")}],bl=[{name:"Windows",search:As("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>nr(t,"iphone")||nr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:As("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:As("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:As("linux"),versionRegexes:[]},{name:"Solaris",search:As("sunos"),versionRegexes:[]},{name:"FreeBSD",search:As("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:As("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kg={browsers:le(bs),oses:le(bl)},Ed="Edge",df="Chromium",vb="IE",Nu="Opera",Pu="Firefox",Bu="Safari",Sa=()=>lp({current:void 0,version:ec.unknown()}),lp=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(Ed),isChromium:i(df),isIE:i(vb),isOpera:i(Nu),isFirefox:i(Pu),isSafari:i(Bu)}},$u={unknown:Sa,nu:lp,edge:le(Ed),chromium:le(df),ie:le(vb),opera:le(Nu),firefox:le(Pu),safari:le(Bu)},_g="Windows",am="iOS",up="Android",Ag="Linux",im="macOS",Og="Solaris",dp="FreeBSD",Iu="ChromeOS",mp=()=>ne({current:void 0,version:ec.unknown()}),ne=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isWindows:i(_g),isiOS:i(am),isAndroid:i(up),isMacOS:i(im),isLinux:i(Ag),isSolaris:i(Og),isFreeBSD:i(dp),isChromeOS:i(Iu)}},Td={unknown:mp,nu:ne,windows:le(_g),ios:le(am),android:le(up),linux:le(Ag),macos:le(im),solaris:le(Og),freebsd:le(dp),chromeos:le(Iu)},yb={detect:(t,s,c)=>{const i=kg.browsers(),d=kg.oses(),g=s.bind(S=>Vs(i,S)).orThunk(()=>dr(i,t)).fold($u.unknown,$u.nu),h=tc(d,t).fold(Td.unknown,Td.nu),y=Ft(h,g,t,c);return{browser:g,os:h,deviceType:y}}},Cb=t=>window.matchMedia(t).matches;let lm=Be(()=>yb.detect(window.navigator.userAgent,k.from(window.navigator.userAgentData),Cb));const _n=()=>lm(),Ic=(t,s,c,i,d,g,h)=>({target:t,x:s,y:c,stop:i,prevent:d,kill:g,raw:h}),ia=t=>{const s=he.fromDom(Xl(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ao(i,c);return Ic(s,t.clientX,t.clientY,c,i,d,t)},Lu=(t,s)=>c=>{t(c)&&s(ia(c))},fp=(t,s,c,i,d)=>{const g=Lu(c,i);return t.dom.addEventListener(s,g,d),{unbind:Tn(mf,t,s,g,d)}},um=(t,s,c,i)=>fp(t,s,c,i,!1),Yc=(t,s,c,i)=>fp(t,s,c,i,!0),mf=(t,s,c,i)=>{t.dom.removeEventListener(s,c,i)},vl=(t,s)=>{Qr(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},Dg=(t,s)=>{fi(t).fold(()=>{Qr(t).each(d=>{Xc(d,s)})},i=>{vl(i,s)})},Jl=(t,s)=>{gi(t).fold(()=>{Xc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Xc=(t,s)=>{t.dom.appendChild(s.dom)},Sb=(t,s,c)=>{_r(t,c).fold(()=>{Xc(t,s)},i=>{vl(i,s)})},dm=(t,s)=>{Ke(s,c=>{Xc(t,c)})},Fr=t=>{t.dom.textContent="",Ke(Bc(t),s=>{wa(s)})},wa=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Jc=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return us(c,i)},kd=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},mm=t=>{const s=t===void 0?window:t;return _n().browser.isFirefox()?k.none():k.from(s.visualViewport)},gp=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),fm=t=>{const s=t===void 0?window:t,c=s.document,i=Jc(he.fromDom(c));return mm(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return gp(i.left,i.top,g,h)},d=>gp(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Wi=()=>he.fromDom(document),gm=(t,s)=>t.view(s).fold(le([]),i=>{const d=t.owner(i),g=gm(t,d);return[i].concat(g)}),Yv=(t,s)=>{const c=s.owner(t),i=gm(s,c);return k.some(i)};var Xv=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?k.none():k.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(he.fromDom)},owner:t=>pr(t)});const Rg=t=>{const s=Wi(),c=Jc(s);return Yv(t,Xv).fold(Tn(ps,t),d=>{const g=Ui(t),h=zo(d,(y,S)=>{const T=Ui(S);return{left:y.left+T.left,top:y.top+T.top}},{left:0,top:0});return us(h.left+g.left+c.left,h.top+g.top+c.top)})},_d=(t,s,c)=>({point:t,width:s,height:c}),pp=(t,s,c,i)=>({x:t,y:s,width:c,height:i}),ws=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),Os=t=>{const s=ps(t),c=K(t),i=La(t);return ws(s.left,s.top,c,i)},Fu=t=>{const s=Rg(t),c=K(t),i=La(t);return ws(s.left,s.top,c,i)},yl=(t,s)=>{const c=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,y=g-i;return ws(c,i,h,y)},bp=(t,s)=>co(s,(c,i)=>yl(c,i),t),Ar=()=>fm(window),$t=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Hu=t=>{const s=$t(k.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(k.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{c(),s.set(k.some(y))}}},Jv=()=>Hu(t=>t.destroy()),Xa=()=>Hu(t=>t.unbind()),mo=()=>{const t=Hu(ce);return{...t,on:c=>t.get().each(c)}};var Vu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ff=t=>{const s=g=>g(t),c=le(t),i=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:kt,isError:Hn,map:g=>Sn.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:c,or:i,getOrThunk:c,orThunk:i,getOrDie:c,each:g=>{g(t)},toOptional:()=>k.some(t)};return d},Mg=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Hn,isError:kt,map:s,mapError:i=>Sn.error(i(t)),bind:s,exists:Hn,forall:kt,getOr:vn,or:vn,getOrThunk:is,orThunk:is,getOrDie:re(String(t)),each:ce,toOptional:k.none};return c},Sn={value:ff,error:Mg,fromOption:(t,s)=>t.fold(()=>Mg(s),ff)};var Js;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Js||(Js={}));const hm=(t,s,c)=>t.stype===Js.Error?s(t.serror):c(t.svalue),pm=t=>{const s=[],c=[];return Ke(t,i=>{hm(i,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},Ha=(t,s)=>t.stype===Js.Error?{stype:Js.Error,serror:s(t.serror)}:t,xa=(t,s)=>t.stype===Js.Value?{stype:Js.Value,svalue:s(t.svalue)}:t,pi=(t,s)=>t.stype===Js.Value?s(t.svalue):t,qo=(t,s)=>t.stype===Js.Error?s(t.serror):t,Zi=t=>({stype:Js.Value,svalue:t}),Ad=t=>({stype:Js.Error,serror:t}),Ds={fromResult:t=>t.fold(Ad,Zi),toResult:t=>hm(t,Sn.error,Sn.value),svalue:Zi,partition:pm,serror:Ad,bind:pi,bindError:qo,map:xa,mapError:Ha,fold:hm},zu=(t,s,c,i)=>({tag:"field",key:t,newKey:s,presence:c,prop:i}),bm=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Zo=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},eu=(t,s)=>s,xb=(t,s)=>Ii(t)&&Ii(s)?Rs(t,s):s,yp=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)zn(d,g)&&(c[g]=t(c[g],d[g]))}return c},Rs=yp(xb),Ng=yp(eu),ji=()=>({tag:"required",process:{}}),Cp=t=>({tag:"defaultedThunk",process:t}),In=t=>Cp(le(t)),gf=()=>({tag:"option",process:{}}),Pg=t=>({tag:"mergeWithThunk",process:t}),w=t=>Pg(le(t)),O=(t,s)=>t.length>0?Ds.svalue(Rs(s,Ng.apply(void 0,t))):Ds.svalue(s),I=t=>Ao(Ds.serror,qt)(t),ze={consolidateObj:(t,s)=>{const c=Ds.partition(t);return c.errors.length>0?I(c.errors):O(c.values,s)},consolidateArr:t=>{const s=Ds.partition(t);return s.errors.length>0?I(s.errors):Ds.svalue(s.values)}},Zt=t=>Qn(t)&&Io(t).length>100?" removed due to size":JSON.stringify(t,null,2),gn=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:le("... (only showing first ten failures)")}]):t;return _e(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},an=(t,s)=>Ds.serror([{path:t,getErrorInfo:s}]),Pt=(t,s,c)=>an(t,()=>'Could not find valid *required* value for "'+s+'" in '+Zt(c)),xs=(t,s)=>an(t,()=>'Choice schema did not contain choice key: "'+s+'"'),yr=(t,s,c)=>an(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+Zt(s)),Qc=(t,s)=>an(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Uu=(t,s)=>an(t,le(s)),hf=t=>{const s=(i,d)=>Ds.bindError(t(d),g=>Uu(i,g)),c=le("val");return{extract:s,toString:c}},Eb=hf(Ds.svalue),Ea=(t,s,c,i)=>ct(s,c).fold(()=>Pt(t,c,s),i),Tb=(t,s,c,i)=>{const d=ct(t,s).getOrThunk(()=>c(t));return i(d)},ES=(t,s,c)=>c(ct(t,s)),Qv=(t,s,c,i)=>{const d=ct(t,s).map(g=>g===!0?c(t):g);return i(d)},Hr=(t,s,c,i,d)=>{const g=y=>d.extract(s.concat([i]),y),h=y=>y.fold(()=>Ds.svalue(k.none()),S=>{const T=d.extract(s.concat([i]),S);return Ds.map(T,k.some)});switch(t.tag){case"required":return Ea(s,c,i,g);case"defaultedThunk":return Tb(c,i,t.process,g);case"option":return ES(c,i,h);case"defaultedOptionThunk":return Qv(c,i,t.process,h);case"mergeWithThunk":return Tb(c,i,le({}),y=>{const S=Rs(t.process(c),y);return g(S)})}},Sp=(t,s,c)=>{const i={},d=[];for(const g of c)Zo(g,(h,y,S,T)=>{const _=Hr(S,t,s,h,T);Ds.fold(_,R=>{d.push(...R)},R=>{i[y]=R})},(h,y)=>{i[h]=y(s)});return d.length>0?Ds.serror(d):Ds.svalue(i)},Vr=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),wp=t=>Io(Rc(t,eo)),bi=t=>{const s=Yt(t),c=zo(t,(d,g)=>Zo(g,h=>Rs(d,{[h]:!0}),le(d)),{});return{extract:(d,g)=>{const h=hc(g)?[]:wp(g),y=kn(h,S=>!Kr(c,S));return y.length===0?s.extract(d,g):Qc(d,y)},toString:s.toString}},Yt=t=>({extract:(i,d)=>Sp(i,d,t),toString:()=>`obj{
`+_e(t,d=>Zo(d,(g,h,y,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Cl=t=>({extract:(i,d)=>{const g=_e(d,(h,y)=>t.extract(i.concat(["["+y+"]"]),h));return ze.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),TS=(t,s)=>{const c=s!==void 0?s:vn;return{extract:(g,h)=>{const y=[];for(const S of t){const T=S.extract(g,h);if(T.stype===Js.Value)return{stype:Js.Value,svalue:c(T.svalue)};y.push(T)}return ze.consolidateArr(y)},toString:()=>"oneOf("+_e(t,g=>g.toString()).join(", ")+")"}},ey=(t,s)=>{const c=(g,h)=>Cl(hf(t)).extract(g,h);return{extract:(g,h)=>{const y=Io(h),S=c(g,y);return Ds.bind(S,T=>{const _=_e(T,R=>zu(R,R,ji(),s));return Yt(_).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},xp=(t,s)=>{const c=Be(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},ty=Ao(Cl,Yt),Sl=le(Eb),Wu=(t,s)=>hf(c=>{const i=typeof c;return t(c)?Ds.svalue(c):Ds.serror(`Expected type: ${s} but got: ${i}`)}),pf=Wu(pc,"number"),pt=Wu(bn,"string"),wl=Wu(hc,"boolean"),ny=Wu(Nt,"function"),Bg=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Bg(t[s]));default:return!1}},xl=hf(t=>Bg(t)?Ds.svalue(t):Ds.serror("Expected value to be acceptable for sending via postMessage")),Ep=(t,s,c,i)=>ct(c,i).fold(()=>yr(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),bf=(t,s)=>({extract:(d,g)=>ct(g,t).fold(()=>xs(d,t),y=>Ep(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+Io(s)}),Od=()=>Cl(Eb),Tp=t=>hf(s=>t(s).fold(Ds.serror,Ds.svalue)),tu=(t,s)=>ey(c=>Ds.fromResult(t(c)),s),kS=(t,s,c)=>{const i=s.extract([t],c);return Ds.mapError(i,d=>({input:c,errors:d}))},Ms=(t,s,c)=>Ds.toResult(kS(t,s,c)),qe=t=>t.fold(s=>{throw new Error(vf(s))},vn),Va=(t,s,c)=>qe(Ms(t,s,c)),vf=t=>`Errors: 
`+gn(t.errors).join(`
`)+`

Input object: `+Zt(t.input),rr=(t,s)=>bf(t,jn(s,Yt)),$g=(t,s)=>xp(t,s),nc=zu,fo=bm,kp=t=>Tp(s=>yo(t,s)?Sn.value(s):Sn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Fe=t=>nc(t,t,ji(),Sl()),go=(t,s)=>nc(t,t,ji(),s),kb=t=>go(t,pf),zr=t=>go(t,pt),ea=(t,s)=>nc(t,t,ji(),kp(s)),El=t=>go(t,ny),oy=(t,s)=>nc(t,t,gf(),hf(c=>Ds.serror("The field: "+t+" is forbidden. "+s))),vm=(t,s)=>nc(t,t,ji(),Yt(s)),sy=(t,s)=>nc(t,t,ji(),ty(s)),vi=(t,s)=>nc(t,t,ji(),Cl(s)),lo=t=>nc(t,t,gf(),Sl()),Zu=(t,s)=>nc(t,t,gf(),s),_p=t=>Zu(t,pf),Ur=t=>Zu(t,pt),_b=(t,s)=>Zu(t,kp(s)),ju=t=>Zu(t,ny),Ap=(t,s)=>Zu(t,Cl(s)),oc=(t,s)=>Zu(t,Yt(s)),la=(t,s)=>Zu(t,bi(s)),ve=(t,s)=>nc(t,t,In(s),Sl()),ds=(t,s,c)=>nc(t,t,In(s),c),ry=(t,s)=>ds(t,s,pf),mr=(t,s)=>ds(t,s,pt),Cc=(t,s,c)=>ds(t,s,kp(c)),Sc=(t,s)=>ds(t,s,wl),vs=(t,s)=>ds(t,s,ny),Ab=(t,s)=>ds(t,s,xl),ym=(t,s,c)=>ds(t,s,Cl(c)),_S=(t,s,c)=>ds(t,s,Yt(c)),Ja={generate:t=>{if(!fs(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return Ke(t,(i,d)=>{const g=Io(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],y=i[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!fs(y))throw new Error("case arguments must be an array");s.push(h),c[h]=(...S)=>{const T=S.length;if(T!==y.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+y.length+" ("+y+"), got "+T);return{fold:(...R)=>{if(R.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+R.length);return R[d].apply(null,S)},match:R=>{const L=Io(R);if(s.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+L.join(","));if(!Er(s,j=>yo(L,j)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+s.join(", "));return R[h].apply(null,S)},log:R=>{console.log(R,{constructors:s,constructor:h,params:S})}}}}),c}};Ja.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Vk=t=>{const s=[],c=[];return Ke(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},cy=(t,s)=>{const c={};return gs(t,(i,d)=>{yo(s,d)||(c[d]=i)}),c},AS=(t,s)=>({[t]:s}),OS=t=>{const s={};return Ke(t,c=>{s[c.key]=c.value}),s},DS=(t,s)=>cy(t,s),yf=(t,s)=>AS(t,s),Ig=t=>OS(t),kR=(t,s)=>t.length===0?Sn.value(s):Sn.value(Rs(s,Ng.apply(void 0,t))),Dp=t=>Sn.error(qt(t)),ay=(t,s)=>{const c=Vk(t);return c.errors.length>0?Dp(c.errors):kR(c.values,s)},iy=t=>Nt(t)?t:Hn,Ob=(t,s,c)=>{let i=t.dom;const d=iy(c);for(;i.parentNode;){i=i.parentNode;const g=he.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return k.none()},Gi=(t,s,c)=>{const i=s(t),d=iy(c);return i.orThunk(()=>d(t)?k.none():Ob(t,s,d))},Db=(t,s)=>ao(t.element,s.event.target),Cf={can:kt,abort:Hn,run:ce},Lg=t=>{if(!Kr(t,"can")&&!Kr(t,"abort")&&!Kr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Cf,...t}},Rb=(t,s)=>(...c)=>co(t,(i,d)=>i&&s(d).apply(void 0,c),!0),RS=(t,s)=>(...c)=>co(t,(i,d)=>i||s(d).apply(void 0,c),!1),ly=t=>Nt(t)?{can:kt,abort:Hn,run:t}:t,zk=t=>{const s=Rb(t,d=>d.can),c=RS(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{Ke(t,g=>{g.run.apply(void 0,d)})}}},wc=le,nu=wc("touchstart"),Cm=wc("touchmove"),Sf=wc("touchend"),Mb=wc("touchcancel"),yi=wc("mousedown"),Rp=wc("mousemove"),Nb=wc("mouseout"),Pb=wc("mouseup"),Tl=wc("mouseover"),kl=wc("focusin"),MS=wc("focusout"),qi=wc("keydown"),wf=wc("keyup"),ou=wc("input"),Gu=wc("change"),xf=wc("click"),Uk=wc("transitioncancel"),Mp=wc("transitionend"),Sm=wc("transitionstart"),Wk=wc("selectstart"),cr=t=>le("alloy."+t),Bb={tap:cr("tap")},su=cr("focus"),Ef=cr("blur.post"),Np=cr("paste.post"),ru=cr("receive"),xc=cr("execute"),wm=cr("focus.item"),$b=Bb.tap,xm=cr("longpress"),sc=cr("sandbox.close"),Ib=cr("typeahead.cancel"),Lb=cr("system.init"),Zk=cr("system.touchmove"),NS=cr("system.touchend"),Em=cr("system.scroll"),Tf=cr("system.resize"),za=cr("system.attached"),Ci=cr("system.detached"),Si=cr("system.dismissRequested"),Pp=cr("system.repositionRequested"),Bp=cr("focusmanager.shifted"),Fg=cr("slotcontainer.visibility"),uy=cr("system.external.element.scroll"),PS=cr("change.tab"),BS=cr("dismiss.tab"),dy=cr("highlight"),Hg=cr("dehighlight"),An=(t,s)=>{Hb(t,t.element,s,{})},Dt=(t,s,c)=>{Hb(t,t.element,s,c)},Tm=t=>{An(t,xc())},Fb=(t,s,c)=>{Hb(t,s,c,{})},Hb=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},my=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},Vb=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},Eo=t=>Ig(t),fy=(t,s)=>({key:t,value:Lg({abort:s})}),$S=(t,s)=>({key:t,value:Lg({can:s})}),gy=t=>({key:t,value:Lg({run:(s,c)=>{c.event.prevent()}})}),Ie=(t,s)=>({key:t,value:Lg({run:s})}),Vg=(t,s,c)=>({key:t,value:Lg({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),IS=t=>s=>Ie(t,s),kf=t=>s=>({key:t,value:Lg({run:(c,i)=>{Db(c,i)&&s(c,i)}})}),LS=(t,s)=>Ie(t,(c,i)=>{c.getSystem().getByUid(s).each(d=>{Vb(d,d.element,t,i)})}),Dd=(t,s,c)=>{const i=s.partUids[c];return LS(t,i)},zb=(t,s)=>Ie(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Gi(d.target,y=>c.getSystem().getByDom(y).toOptional(),Hn).getOr(c));s(c,g,i)}),_f=t=>Ie(t,(s,c)=>{c.cut()}),$p=t=>Ie(t,(s,c)=>{c.stop()}),km=(t,s)=>kf(t)(s),ms=kf(za()),qu=kf(Ci()),FS=kf(Lb()),Rd=IS(xc()),hy=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Af(h.slice(0,1).concat(h.slice(3)))}),t},Af=t=>_e(t,s=>vc(s,"/*")?s.substring(0,s.length-2):s),py=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Af(g)}),t},by=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Af(g.slice(1))}),t},Ta=t=>({classes:er(t.classes)?[]:t.classes,attributes:er(t.attributes)?{}:t.attributes,styles:er(t.styles)?{}:t.styles}),zg=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),jk=(t,s,c)=>Rd(i=>{c(i,t,s)}),_m=(t,s,c)=>FS((i,d)=>{c(i,t,s)}),Gk=(t,s,c,i,d,g)=>{const h=bi(t),y=oc(s,[la("config",t)]);return Ip(h,y,s,c,i,d,g)},Of=(t,s,c,i,d,g)=>{const h=t,y=oc(s,[Zu("config",t)]);return Ip(h,y,s,c,i,d,g)},Ub=(t,s,c)=>hy((d,...g)=>{const h=[d].concat(g);return d.config({name:le(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},y=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,y.config,y.state].concat(S))})},c,s),qk=t=>({key:t,value:void 0}),Ip=(t,s,c,i,d,g,h)=>{const y=R=>Kr(R,c)?R[c]():k.none(),S=jn(d,(R,L)=>Ub(c,R,L)),_={...jn(g,(R,L)=>py(R,L)),...S,revoke:Tn(qk,c),config:R=>{const L=Va(c+"-config",t,R);return{key:c,value:{config:L,me:_,configAsRaw:Be(()=>Va(c+"-config",t,R)),initialConfig:R,state:h}}},schema:le(s),exhibit:(R,L)=>Ca(y(R),ct(i,"exhibit"),(F,j)=>j(L,F.config,F.state)).getOrThunk(()=>Ta({})),name:le(c),handlers:R=>y(R).map(L=>ct(i,"events").getOr(()=>({}))(L.config,L.state)).getOr({})};return _},cu={init:()=>ua({readState:le("No State required")})},ua=t=>t,Ye=t=>Ig(t),Ug=bi([Fe("fields"),Fe("name"),ve("active",{}),ve("apis",{}),ve("state",cu),ve("extra",{})]),rc=t=>{const s=Va("Creating behaviour: "+t.name,Ug,t);return Gk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},vy=bi([Fe("branchKey"),Fe("branches"),Fe("name"),ve("active",{}),ve("apis",{}),ve("state",cu),ve("extra",{})]),yy=t=>{const s=Va("Creating behaviour: "+t.name,vy,t);return Of(rr(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Cy=le(void 0),Ko=(t,s)=>{const c=_t(t,s);return c===void 0||c===""?[]:c.split(" ")},Kk=(t,s,c)=>{const d=Ko(t,s).concat([c]);return Pe(t,s,d.join(" ")),!0},Df=(t,s,c)=>{const i=kn(Ko(t,s),d=>d!==c);return i.length>0?Pe(t,s,i.join(" ")):N(t,s),!1},Md=t=>t.dom.classList!==void 0,Wg=t=>Ko(t,"class"),Sy=(t,s)=>Kk(t,"class",s),Ku=(t,s)=>Df(t,"class",s),HS=(t,s)=>yo(Wg(t),s)?Ku(t,s):Sy(t,s),fr=(t,s)=>{Md(t)?t.dom.classList.add(s):Sy(t,s)},Wb=t=>{(Md(t)?t.dom.classList:Wg(t)).length===0&&N(t,"class")},To=(t,s)=>{Md(t)?t.dom.classList.remove(s):Ku(t,s),Wb(t)},wy=(t,s)=>{const c=Md(t)?t.dom.classList.toggle(s):HS(t,s);return Wb(t),c},ka=(t,s)=>Md(t)&&t.dom.classList.contains(s),Zg=(t,s)=>{Ke(s,c=>{fr(t,c)})},au=(t,s)=>{Ke(s,c=>{To(t,c)})},_R=(t,s)=>{Ke(s,c=>{wy(t,c)})},Zb=(t,s)=>Er(s,c=>ka(t,c)),Yk=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},VS=t=>Md(t)?Yk(t):Wg(t),_l=(t,s,c,i,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},iu=t=>({...t,position:k.some(t.position)}),da=(t,s)=>{io(t,iu(s))},jg=t=>(Gs(Do(t,"position"),"fixed")?k.none():Vi(t)).orThunk(()=>{const i=he.fromTag("span");return Qr(t).bind(d=>{Xc(d,i);const g=Vi(i);return wa(i),g})}),jb=t=>jg(t).map(ps).getOrThunk(()=>us(0,0)),Gb=(t,s)=>{const c=t.element;fr(c,s.transitionClass),To(c,s.fadeOutClass),fr(c,s.fadeInClass),s.onShow(t)},Gg=(t,s)=>{const c=t.element;fr(c,s.transitionClass),To(c,s.fadeInClass),fr(c,s.fadeOutClass),s.onHide(t)},Am=(t,s)=>t.y<s.bottom&&t.bottom>s.y,Yu=(t,s)=>t.y>=s.y,qg=(t,s)=>t.bottom<=s.bottom,Om=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),Nd=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),Rf=t=>t.box.x-t.win.x,Lp=(t,s,c)=>{const i=s.win,d=s.box,g=Rf(s);return Yo(t,h=>{switch(h){case"bottom":return qg(d,c.bounds)?k.none():k.some(Nd(i,g,c));case"top":return Yu(d,c.bounds)?k.none():k.some(Om(i,g,c));default:return k.none()}}).getOr({location:"no-dock"})},qb=(t,s,c)=>Er(t,i=>{switch(i){case"bottom":return qg(s,c.bounds);case"top":return Yu(s,c.bounds)}}),zS=(t,s)=>{const c=s.optScrollEnv.fold(le(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return us(t.bounds.x,c)},xy=(t,s)=>{const c=s.optScrollEnv.fold(le(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return us(t.x,c)},Kg=(t,s,c)=>c.getInitialPos().map(i=>{const d=zS(i,s);return{box:ws(d.left,d.top,W(t),Po(t)),location:i.location}}),US=(t,s,c,i,d)=>{const g=xy(s,c),h=ws(g.left,g.top,s.width,s.height);i.setInitialPos({style:vr(t),position:So(t,"position")||"static",bounds:h,location:d.location})},Xk=(t,s,c,i,d)=>{i.getInitialPos().fold(()=>US(t,s,c,i,d),()=>ce)},Kb=(t,s,c)=>c.getInitialPos().bind(i=>{var d;switch(c.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const g=jg(t).getOr(ie()),h=Os(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return k.some({morph:"absolute",positionCss:_l("absolute",ct(i.style,"left").map(S=>s.x-h.x),ct(i.style,"top").map(S=>s.y-h.y+y),ct(i.style,"right").map(S=>h.right-s.right),ct(i.style,"bottom").map(S=>h.bottom-s.bottom))});default:return k.none()}}),Ey=(t,s,c)=>Kg(t,s,c).filter(({box:i})=>qb(c.getModes(),i,s)).bind(({box:i})=>Kb(t,i,c)),Fp=t=>{switch(t.location){case"top":return k.some({morph:"fixed",positionCss:_l("fixed",k.some(t.leftX),k.some(t.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:_l("fixed",k.some(t.leftX),k.none(),k.none(),k.some(t.bottomY))});default:return k.none()}},Ty=(t,s,c)=>{const i=Os(t),d=Ar(),g=Lp(c.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(US(t,i,s,c,g),Fp(g)):k.none()},Yg=(t,s,c)=>Ey(t,s,c).orThunk(()=>s.optScrollEnv.bind(i=>Kg(t,s,c)).bind(({box:i,location:d})=>{const g=Ar(),h=Rf({win:g,box:i}),y=d==="top"?Om(g,h,s):Nd(g,h,s);return Fp(y)})),AR=(t,s,c)=>{const i=t.element;return Gs(Do(i,"position"),"fixed")?Yg(i,s,c):Ty(i,s,c)},OR=(t,s,c)=>{const i=t.element;return Kg(i,s,c).bind(({box:d})=>Kb(i,d,c))},Xg=(t,s,c,i)=>{const d=Os(t),g=Ar(),h=Rf({win:g,box:d}),y=i(g,h,s);return y.location==="bottom"||y.location==="top"?(Xk(t,d,s,c,y),Fp(y)):k.none()},Al=(t,s,c)=>{c.setDocked(!1),Ke(["left","right","top","bottom","position"],i=>cn(t.element,i)),s.onUndocked(t)},Hp=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),da(t.element,i),(d?s.onDocked:s.onUndocked)(t)},WS=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const y=Am(h,i.bounds);y!==c.isVisible()&&(c.setVisible(y),d&&!y?(Zg(t.element,[g.fadeOutClass]),g.onHide(t)):(y?Gb:Gg)(t,g))})})},ZS=(t,s,c,i,d)=>{WS(t,s,c,i,!0),Hp(t,s,c,d.positionCss)},jS=(t,s,c,i,d)=>{switch(d.morph){case"static":return Al(t,s,c);case"absolute":return Hp(t,s,c,d.positionCss);case"fixed":return ZS(t,s,c,i,d)}},Mf=(t,s,c)=>{const i=s.lazyViewport(t);WS(t,s,c,i),AR(t,i,c).each(d=>{jS(t,s,c,i,d)})},DR=(t,s,c)=>{const i=t.element;c.setDocked(!1);const d=s.lazyViewport(t);OR(t,d,c).each(g=>{switch(g.morph){case"static":{Al(t,s,c);break}case"absolute":{Hp(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{au(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Nf(t,s,c)},Nf=(t,s,c)=>{t.getSystem().isConnected()&&Mf(t,s,c)},Jg=(t,s,c)=>{c.isDocked()&&DR(t,s,c)},GS=t=>(s,c,i)=>{const d=c.lazyViewport(s);Xg(s.element,d,i,t).each(h=>{ZS(s,c,i,d,h)})},Qg=GS(Om),Jk=GS(Nd);var Lc=Object.freeze({__proto__:null,refresh:Nf,reset:Jg,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,i)=>c.setModes(i),forceDockToTop:Qg,forceDockToBottom:Jk}),Dm=Object.freeze({__proto__:null,events:(t,s)=>Eo([km(Mp(),(c,i)=>{t.contextual.each(d=>{ka(c.element,d.transitionClass)&&(au(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),Ie(Em(),(c,i)=>{Nf(c,t,s)}),Ie(uy(),(c,i)=>{Nf(c,t,s)}),Ie(Tf(),(c,i)=>{Jg(c,t,s)})])});const Qk=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Bc(he.fromDom(i))},Pd=t=>t.dom.innerHTML,Qa=(t,s)=>{const i=pr(t).dom,d=he.fromDom(i.createDocumentFragment()),g=Qk(s,i);dm(d,g),Fr(t),Xc(t,d)},lu=t=>{const s=he.fromTag("div"),c=he.fromDom(t.dom.cloneNode(!0));return Xc(s,c),Pd(s)},Pf=(t,s)=>he.fromDom(t.dom.cloneNode(s)),YS=t=>Pf(t,!1),Vp=t=>Pf(t,!0),Yb=t=>{if(Ka(t))return"#shadow-root";{const s=YS(t);return lu(s)}},Rm=t=>Yb(t),_y="unknown";var uu;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(uu||(uu={}));const Xu=$t({}),e_=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();yo(["mousemove","mouseover","mouseout",Lb()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:_e(c,g=>yo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Rm(g.target)+")":g.outcome)})}}},Wr=(t,s,c)=>{switch(ct(Xu.get(),t).orThunk(()=>{const d=Io(Xu.get());return Yo(d,g=>t.indexOf(g)>-1?k.some(Xu.get()[g]):k.none())}).getOr(uu.NORMAL)){case uu.NORMAL:return c(Bf());case uu.LOGGING:{const d=e_(t,s),g=c(d);return d.write(),g}case uu.STOP:return!0}},zp=["alloy/data/Fields","alloy/debugging/Debugging"],Ki=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Ut(s,c=>c.indexOf("alloy")>0&&!ks(zp,i=>c.indexOf(i)>-1)).getOr(_y)}else return _y},Xb={logEventCut:ce,logEventStopped:ce,logNoParent:ce,logEventNoHandlers:ce,logEventResponse:ce,write:ce},Ay=(t,s,c)=>Wr(t,s,c),Bf=le(Xb),Mm=le([Fe("menu"),Fe("selectedMenu")]),Ol=le([Fe("item"),Fe("selectedItem")]);le(Yt(Ol().concat(Mm())));const Yi=le(Yt(Ol())),XS=vm("initSize",[Fe("numColumns"),Fe("numRows")]),t_=()=>go("markers",Yi()),Ju=()=>vm("markers",[Fe("backgroundMenu")].concat(Mm()).concat(Ol())),Bd=t=>vm("markers",_e(t,Fe)),Jb=(t,s,c)=>(Ki(),nc(s,s,c,Tp(i=>Sn.value((...d)=>i.apply(void 0,d))))),Gn=t=>Jb("onHandler",t,In(ce)),ta=t=>Jb("onKeyboardHandler",t,In(k.none)),$f=t=>Jb("onHandler",t,ji()),eh=t=>Jb("onKeyboardHandler",t,ji()),es=(t,s)=>fo(t,le(s)),If=t=>fo(t,vn),$d=le(XS);var JS=[oc("contextual",[zr("fadeInClass"),zr("fadeOutClass"),zr("transitionClass"),El("lazyContext"),Gn("onShow"),Gn("onShown"),Gn("onHide"),Gn("onHidden")]),vs("lazyViewport",()=>({bounds:Ar(),optScrollEnv:k.none()})),ym("modes",["top","bottom"],pt),Gn("onDocked"),Gn("onUndocked")],QS=Object.freeze({__proto__:null,init:t=>{const s=$t(!1),c=$t(!0),i=mo(),d=$t(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return ua({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const ts=rc({fields:JS,name:"docking",active:Dm,apis:Lc,state:QS}),Up=(t,s,c)=>ao(s,t.element)&&!ao(s,c),o_=Eo([$S(su(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return Up(t,i,d)?(console.warn(su()+` did not get interpreted by the desired target. 
Originator: `+Rm(i)+`
Target: `+Rm(d)+`
Check the `+su()+" event handlers"),!1):!0})]);var ew=Object.freeze({__proto__:null,events:o_});const Lf=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},Dl=(t,s,c)=>Math.min(Math.max(t,s),c),Wp=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Id=0;const xt=t=>{const c=new Date().getTime(),i=Math.floor(Wp()*1e9);return Id++,t+"_"+i+Id+String(c)},tw=le("alloy-id-"),Qb=le("data-alloy-id"),nw=tw(),ow=Qb(),Oy=(t,s)=>{const c=xt(nw+t);return Dy(s,c),c},Dy=(t,s)=>{Object.defineProperty(t.dom,ow,{value:s,writable:!0})},th=t=>{const s=$n(t)?t.dom[ow]:null;return k.from(s)},Zp=t=>xt(t),Ff=vn,e0=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Rm(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:le("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:Hn}},nh=e0(),t0=xt("alloy-premade"),Rl=t=>(Object.defineProperty(t.element.dom,t0,{value:t.uid,writable:!0}),yf(t0,t)),s_=t=>zn(t.dom,t0),n0=t=>ct(t,t0),o0=t=>by((s,...c)=>t(s.getApis(),s,...c),t),r_=(t,s)=>{const c=_e(s,d=>oc(d.name(),[Fe("config"),ve("state",cu)])),i=Ms("component.behaviours",Yt(c),t.behaviours).fold(d=>{throw new Error(vf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},vn);return{list:s,data:jn(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return le(g)})}},c_=t=>t.list,sw=t=>t.data,jp=(t,s)=>{const c={};return gs(t,(i,d)=>{gs(i,(g,h)=>{const y=ct(c,h).getOr([]);c[h]=y.concat([s(d,g)])})}),c},rw=(t,s,c,i)=>{const d={...s};Ke(c,_=>{d[_.name()]=_.exhibit(t,i)});const g=jp(d,(_,R)=>({name:_,modification:R})),h=_=>zo(_,(R,L)=>({...L.modification,...R}),{}),y=zo(g.classes,(_,R)=>R.modification.concat(_),[]),S=h(g.attributes),T=h(g.styles);return Ta({classes:y,attributes:S,styles:T})},Ry=(t,s,c,i)=>{try{const d=Oc(c,(g,h)=>{const y=g[s],S=h[s],T=i.indexOf(y),_=i.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return T<_?-1:_<T?1:0});return Sn.value(d)}catch(d){return Sn.error([d])}},a_=(t,s)=>({handler:t,purpose:s}),Gp=(t,s)=>({cHandler:t,purpose:s}),oh=(t,s)=>Gp(Tn.apply(void 0,[t.handler].concat(s)),t.purpose),Nm=t=>t.cHandler,s0=(t,s)=>({name:t,handler:s}),My=(t,s)=>{const c={};return Ke(t,i=>{c[i.name()]=i.handlers(s)}),c},r0=(t,s,c)=>{const i={...c,...My(s,t)};return jp(i,s0)},Ny=(t,s,c,i)=>{const d=r0(t,c,i);return ei(d,s)},Py=t=>{const s=ly(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},By=(t,s)=>Sn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(_e(s,c=>c.name),null,2)]),cw=(t,s,c)=>{const i=s[c];return i?Ry("Event: "+c,"name",t,i).map(d=>{const g=_e(d,h=>h.handler);return zk(g)}):By(c,t)},ei=(t,s)=>{const c=li(t,(i,d)=>(i.length===1?Sn.value(i[0].handler):cw(i,s,d)).map(h=>{const y=Py(h),S=i.length>1?kn(s[d],T=>ks(i,_=>_.name===T)).join(" > "):i[0].name;return yf(d,a_(y,S))}));return ay(c,{})},Hf="alloy.base.behaviour",aw=Yt([nc("dom","dom",ji(),Yt([Fe("tag"),ve("styles",{}),ve("classes",[]),ve("attributes",{}),lo("value"),lo("innerHtml")])),Fe("components"),Fe("uid"),ve("events",{}),ve("apis",{}),nc("eventOrder","eventOrder",w({[xc()]:["disabling",Hf,"toggling","typeaheadevents"],[su()]:[Hf,"focusing","keying"],[Lb()]:[Hf,"disabling","toggling","representing","tooltipping"],[ou()]:[Hf,"representing","streaming","invalidating"],[Ci()]:[Hf,"representing","item-events","toolbar-button-events","tooltipping"],[yi()]:["focusing",Hf,"item-type-events"],[nu()]:["focusing",Hf,"item-type-events"],[Tl()]:["item-type-events","tooltipping"],[ru()]:["receiving","reflecting","tooltipping"]}),Sl()),lo("domModification")]),Pm=t=>Ms("custom.definition",aw,t),Vf=t=>({...t.dom,uid:t.uid,domChildren:_e(t.components,s=>s.element)}),$y=t=>t.domModification.fold(()=>Ta({}),Ta),De=t=>t.events,Ml=t=>t.dom.value,zf=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},i_=(t,s,c)=>_r(t,s).map(d=>{if(c.exists(h=>!ao(h,d))){const h=c.map(kr).getOr("span"),y=he.fromTag(h);return vl(d,y),y}else return d}),qp=(t,s,c)=>{c.fold(()=>Xc(t,s),i=>{ao(i,s)||(vl(i,s),wa(i))})},Xi=(t,s,c)=>{const i=_e(s,c),d=Bc(t);return Ke(d.slice(i.length),wa),i},sh=(t,s,c,i)=>{const d=_r(t,s),g=i(c,d),h=i_(t,s,d);return qp(t,g.element,h),g},iw=(t,s,c)=>Xi(t,s,(i,d)=>sh(t,d,i,c)),lw=(t,s)=>Xi(t,s,(c,i)=>{const d=_r(t,i);return qp(t,c,d),c}),na=(t,s)=>{const c=Io(t),i=Io(s),d=Bt(i,c),g=Tr(t,(h,y)=>!zn(s,y)||h!==s[y]).t;return{toRemove:d,toSet:g}},c0=(t,s)=>{const{class:c,style:i,...d}=Z(s),{toSet:g,toRemove:h}=na(t.attributes,d),y=()=>{Ke(h,de=>N(s,de)),to(s,g)},S=vr(s),{toSet:T,toRemove:_}=na(t.styles,S),R=()=>{Ke(_,de=>cn(s,de)),yn(s,T)},L=VS(s),F=Bt(L,t.classes),j=Bt(t.classes,L),Y=()=>{Zg(s,j),au(s,F)},me=de=>{Qa(s,de)},ee=()=>{const de=t.domChildren;lw(s,de)},ue=()=>{const de=s,ke=t.value.getOrUndefined();ke!==Ml(de)&&zf(de,ke??"")};return y(),Y(),R(),t.innerHtml.fold(ee,me),ue(),s},uw=t=>{const s=he.fromTag(t.tag);to(s,t.attributes),Zg(s,t.classes),yn(s,t.styles),t.innerHtml.each(i=>Qa(s,i));const c=t.domChildren;return dm(s,c),t.value.each(i=>{zf(s,i)}),s},l_=(t,s)=>{try{const c=c0(t,s);return k.some(c)}catch{return k.none()}},dw=t=>t.innerHtml.isSome()&&t.domChildren.length>0,u_=(t,s)=>{const c=d=>kr(d)===t.tag&&!dw(t)&&!s_(d),i=s.filter(c).bind(d=>l_(t,d)).getOrThunk(()=>uw(t));return Dy(i,t.uid),i},mw=t=>{const s=ct(t,"behaviours").getOr({});return pe(Io(s),c=>{const i=s[c];return eo(i)?[i.me]:[]})},d_=(t,s)=>r_(t,s),m_=t=>{const s=mw(t);return d_(t,s)},fw=(t,s,c)=>{const i=Vf(t),d=$y(t),g={"alloy.base.modification":d},h=s.length>0?rw(c,g,s,i):d;return zg(i,h)},rh=(t,s,c)=>{const i={"alloy.base.behaviour":De(t)};return Ny(c,t.eventOrder,s,i).getOrDie()},f_=(t,s)=>{const c=()=>de,i=$t(nh),d=qe(Pm(t)),g=m_(t),h=c_(g),y=sw(g),S=fw(d,h,y),T=u_(S,s),_=rh(d,h,y),R=$t(d.components),L=ke=>{i.set(ke)},F=()=>{i.set(e0(c))},j=()=>{const ke=Bc(T),Oe=pe(ke,ot=>i.get().getByDom(ot).fold(()=>[],Bn));R.set(Oe)},Y=ke=>{const Oe=y;return(Nt(Oe[ke.name()])?Oe[ke.name()]:()=>{throw new Error("Could not find "+ke.name()+" in "+JSON.stringify(t,null,2))})()},me=ke=>Nt(y[ke.name()]),ee=()=>d.apis,ue=ke=>y[ke]().map(Oe=>Oe.state.readState()).getOr("not enabled"),de={uid:t.uid,getSystem:i.get,config:Y,hasConfigured:me,spec:t,readState:ue,getApis:ee,connect:L,disconnect:F,element:T,syncComponents:j,components:R.get,events:_};return de},gw=(t,s)=>{const c=ct(t,"components").getOr([]);return s.fold(()=>_e(c,Zr),i=>_e(c,(d,g)=>Ly(d,_r(i,g))))},g_=(t,s)=>{const{events:c,...i}=Ff(t),d=gw(i,s),g={...i,events:{...ew,...c},components:d};return Sn.value(f_(g,s))},Ts=t=>{const s=he.fromText(t);return Iy({element:s})},Iy=t=>{const s=Va("external.component",bi([Fe("element"),lo("uid")]),t),c=$t(e0()),i=y=>{c.set(y)},d=()=>{c.set(e0(()=>h))},g=s.uid.getOrThunk(()=>Zp("external"));Dy(s.element,g);const h={uid:g,getSystem:c.get,config:k.none,hasConfigured:Hn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:le("No state"),syncComponents:ce,components:le([]),events:{}};return Rl(h)},hw=Zp,pw=t=>zn(t,"uid"),Ly=(t,s)=>n0(t).getOrThunk(()=>{const c=pw(t)?t:{uid:hw(""),...t};return g_(c,s).getOrDie()}),Zr=t=>Ly(t,k.none()),wi=Rl;var bw=(t,s,c,i,d)=>t(c,i)?k.some(c):Nt(d)&&d(c)?k.none():s(c,i,d);const Fy=(t,s,c)=>{let i=t.dom;const d=Nt(c)?c:Hn;for(;i.parentNode;){i=i.parentNode;const g=he.fromDom(i);if(s(g))return k.some(g);if(d(g))break}return k.none()},Hy=(t,s,c)=>bw((d,g)=>g(d),Fy,t,s,c),h_=(t,s)=>{const c=t.dom;return c.parentNode?a0(he.fromDom(c.parentNode),i=>!ao(t,i)&&s(i)):k.none()},a0=(t,s)=>{const c=d=>s(he.fromDom(d));return Ut(t.dom.childNodes,c).map(he.fromDom)},vw=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=he.fromDom(i.childNodes[d]);if(s(g))return k.some(g);const h=c(i.childNodes[d]);if(h.isSome())return h}return k.none()};return c(t.dom)},Kp=(t,s,c)=>Hy(t,s,c).isSome(),yw=t=>Gc(t),Dr=(t,s,c)=>Fy(t,i=>Ys(i,s),c),p_=(t,s)=>h_(t,c=>Ys(c,s)),Ji=(t,s)=>a0(t,c=>Ys(c,s)),ys=(t,s)=>Gc(s,t),Qu=(t,s,c)=>bw((d,g)=>Ys(d,g),Dr,t,s,c),ch="aria-controls",Vy=t=>Hy(t,c=>{if(!$n(c))return!1;const i=_t(c,"id");return i!==void 0&&i.indexOf(ch)>-1}).bind(c=>{const i=_t(c,"id"),d=Xs(c);return ys(d,`[${ch}="${i}"]`)}),Yp=()=>{const t=xt(ch);return{id:t,link:i=>{Pe(i,ch,t)},unlink:i=>{N(i,ch)}}},Cw=(t,s)=>Vy(s).exists(c=>Bm(t,c)),Bm=(t,s)=>Kp(s,c=>ao(c,t.element),Hn)||Cw(t,s),Fc=(t,s,c,i,d,g,h,y=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:y}),ed=Ja.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Sw=(t,s,c,i,d,g,h,y,S)=>t.fold(s,c,i,d,g,h,y,S),b_=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),zy=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),i0=ed.southeast,Uy=ed.southwest,Wy=ed.northeast,l0=ed.northwest,Et=ed.south,Xp=ed.north,Zy=ed.east,ww=ed.west,v_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Hc=(t,s)=>Lr(["left","right","top","bottom"],c=>ct(s,c).map(i=>v_(t,i))),xw=(t,s,c)=>{const i=(S,T)=>s[S].map(_=>{const R=S==="top"||S==="bottom",L=R?c.top:c.left,j=(S==="left"||S==="top"?Math.max:Math.min)(_,T)+L;return R?Dl(j,t.y,t.bottom):Dl(j,t.x,t.right)}).getOr(T),d=i("left",t.x),g=i("top",t.y),h=i("right",t.right),y=i("bottom",t.bottom);return ws(d,g,h-d,y-g)},$m="layout",Ew=t=>t.x,jy=(t,s)=>t.x+t.width/2-s.width/2,Tw=(t,s)=>t.x+t.width-s.width,Vc=(t,s)=>t.y-s.height,Im=t=>t.y+t.height,Gy=(t,s)=>t.y+t.height/2-s.height/2,Uf=t=>t.x+t.width,y_=(t,s)=>t.x-s.width,Rr=(t,s,c)=>Fc(Ew(t),Im(t),c.southeast(),i0(),"southeast",Hc(t,{left:1,top:3}),$m),Mr=(t,s,c)=>Fc(Tw(t,s),Im(t),c.southwest(),Uy(),"southwest",Hc(t,{right:0,top:3}),$m),Ec=(t,s,c)=>Fc(Ew(t),Vc(t,s),c.northeast(),Wy(),"northeast",Hc(t,{left:1,bottom:2}),$m),Nr=(t,s,c)=>Fc(Tw(t,s),Vc(t,s),c.northwest(),l0(),"northwest",Hc(t,{right:0,bottom:2}),$m),wo=(t,s,c)=>Fc(jy(t,s),Vc(t,s),c.north(),Xp(),"north",Hc(t,{bottom:2}),$m),Cr=(t,s,c)=>Fc(jy(t,s),Im(t),c.south(),Et(),"south",Hc(t,{top:3}),$m),u0=(t,s,c)=>Fc(Uf(t),Gy(t,s),c.east(),Zy(),"east",Hc(t,{left:0}),$m),qy=(t,s,c)=>Fc(y_(t,s),Gy(t,s),c.west(),ww(),"west",Hc(t,{right:1}),$m),Ky=()=>[Rr,Mr,Ec,Nr,Cr,wo,u0,qy],Yy=()=>[Mr,Rr,Nr,Ec,Cr,wo,u0,qy],kw=()=>[Ec,Nr,Rr,Mr,wo,Cr],_w=()=>[Nr,Ec,Mr,Rr,wo,Cr],Jp=()=>[Rr,Mr,Ec,Nr,Cr,wo],d0=()=>[Mr,Rr,Nr,Ec,Cr,wo],Qp=(t,s)=>s.universal?t:kn(t,c=>yo(s.channels,c));var MR=Object.freeze({__proto__:null,events:t=>Eo([Ie(ru(),(s,c)=>{const i=t.channels,d=Io(i),g=c,h=Qp(d,g);Ke(h,y=>{const S=i[y],T=S.schema,_=Va("channel["+y+`] data
Receiver: `+Rm(s.element),T,g.data);S.onReceive(s,_)})})])}),Wf=[go("channels",tu(Sn.value,bi([$f("onReceive"),ve("schema",Sl())])))];const ti=rc({fields:Wf,name:"receiving",active:MR});var S_=Object.freeze({__proto__:null,exhibit:(t,s)=>Ta({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Qi=(t,s=!1)=>t.dom.focus({preventScroll:s}),ah=t=>t.dom.blur(),ih=t=>{const s=Xs(t).dom;return t.dom===s.activeElement},td=(t=Wi())=>k.from(t.dom.activeElement).map(he.fromDom),ma=t=>td(Xs(t)).filter(s=>t.dom.contains(s.dom)),Xy=(t,s)=>{const c=Xs(s),i=td(c).bind(g=>{const h=y=>ao(g,y);return h(s)?k.some(s):vw(s,h)}),d=t(s);return i.each(g=>{td(c).filter(h=>ao(h,g)).fold(()=>{Qi(g)},ce)}),d},Lm=Ja.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Ow=(t,s,c,i,d,g)=>{const h=s.rect,y=h.x-c,S=h.y-i,T=h.width,_=h.height,R=d-(y+T),L=g-(S+_),F=k.some(y),j=k.some(S),Y=k.some(R),me=k.some(L),ee=k.none();return Sw(s.direction,()=>_l(t,F,j,ee,ee),()=>_l(t,ee,j,Y,ee),()=>_l(t,F,ee,ee,me),()=>_l(t,ee,ee,Y,me),()=>_l(t,F,j,ee,ee),()=>_l(t,F,ee,ee,me),()=>_l(t,F,j,ee,ee),()=>_l(t,ee,j,Y,ee))},m0=(t,s)=>t.fold(()=>{const c=s.rect;return _l("absolute",k.some(c.x),k.some(c.y),k.none(),k.none())},(c,i,d,g)=>Ow("absolute",s,c,i,d,g),(c,i,d,g)=>Ow("fixed",s,c,i,d,g)),Jy=(t,s)=>{const c=Tn(Rg,s),i=t.fold(c,c,()=>{const h=Jc();return Rg(s).translate(-h.left,-h.top)}),d=K(s),g=La(s);return ws(i.left,i.top,d,g)},e1=(t,s)=>s.fold(()=>t.fold(Ar,Ar,ws),c=>t.fold(le(c),le(c),()=>{const i=f0(t,c.x,c.y);return ws(i.left,i.top,c.width,c.height)})),f0=(t,s,c)=>{const i=us(s,c),d=()=>{const g=Jc();return i.translate(-g.left,-g.top)};return t.fold(le(i),le(i),d)},Dw=(t,s,c,i)=>t.fold(s,c,i);Lm.none;const Rw=Lm.relative,Mw=Lm.fixed,t1=(t,s)=>({anchorBox:t,origin:s}),Zf=(t,s)=>t1(t,s),n1="data-alloy-placement",w_=(t,s)=>{Pe(t,n1,s)},Qy=t=>sn(t,n1),x_=t=>N(t,n1),g0=Ja.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),E_=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y,right:S,bottom:T,width:_,height:R}=t,L=h>=c&&h<=d,F=y>=i&&y<=g,j=L&&F,Y=S<=d&&S>=c,me=T<=g&&T>=i,ee=Y&&me,ue=Math.min(_,h>=c?d-h:S-c),de=Math.min(R,y>=i?g-y:T-i);return{originInBounds:j,sizeInBounds:ee,visibleW:ue,visibleH:de}},Nw=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:h,y,width:S,height:T}=t,_=Math.max(c,d-S),R=Math.max(i,g-T),L=Dl(h,c,_),F=Dl(y,i,R),j=Math.min(L+S,d)-L,Y=Math.min(F+T,g)-F;return ws(L,F,j,Y)},T_=(t,s,c)=>{const i=le(s.bottom-c.y),d=le(c.bottom-s.y),g=b_(t,d,d,i),h=le(s.right-c.x),y=le(c.right-s.x);return{maxWidth:zy(t,y,y,h),maxHeight:g}},Pw=(t,s,c,i)=>{const d=t.bubble,g=d.offset,h=xw(i,t.restriction,g),y=t.x+g.left,S=t.y+g.top,T=ws(y,S,s,c),{originInBounds:_,sizeInBounds:R,visibleW:L,visibleH:F}=E_(T,h),j=_&&R,Y=j?T:Nw(T,h),me=Y.width>0&&Y.height>0,{maxWidth:ee,maxHeight:ue}=T_(t.direction,Y,i),de={rect:Y,maxHeight:ue,maxWidth:ee,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return j||t.alwaysFit?g0.fit(de):g0.nofit(de,L,F,me)},o1=(t,s,c,i,d,g)=>{const h=i.width,y=i.height,S=(_,R,L,F,j)=>{const Y=_(c,i,d,t,g),me=Pw(Y,h,y,g);return me.fold(le(me),(ee,ue,de,ke)=>(j===ke?de>F||ue>L:!j&&ke)?me:g0.nofit(R,L,F,j))};return co(s,(_,R)=>{const L=Tn(S,R);return _.fold(le(_),L)},g0.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:i0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(vn,vn)},Bw=kt,_a=(t,s,c)=>um(t,s,Bw,c),e2=(t,s,c)=>Yc(t,s,Bw,c),$w=ia,t2=["top","bottom","right","left"],s1="data-alloy-transition-timer",k_=(t,s)=>Zb(t,s.classes),__=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),A_=(t,s)=>{const c=i=>parseFloat(i).toFixed(3);return no(s,(i,d)=>{const g=t[d].map(c),h=i.map(c);return!Za(g,h)}).isSome()},h0=t=>{const s=g=>{const y=So(t,g).split(/\s*,\s*/);return kn(y,Is)},c=g=>{if(bn(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return vc(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return co(d,(g,h,y)=>{const S=c(i[y])+c(h);return Math.max(g,S)},0)},Iw=(t,s)=>{const c=Xa(),i=Xa();let d;const g=T=>{var _;const R=(_=T.raw.pseudoElement)!==null&&_!==void 0?_:"";return ao(T.target,t)&&Uo(R)&&yo(t2,T.raw.propertyName)},h=T=>{if(Wc(T)||g(T)){c.clear(),i.clear();const _=T==null?void 0:T.raw.type;(Wc(_)||_===Mp())&&(clearTimeout(d),N(t,s1),au(t,s.classes))}},y=_a(t,Sm(),T=>{g(T)&&(y.unbind(),c.set(_a(t,Mp(),h)),i.set(_a(t,Uk(),h)))}),S=h0(t);requestAnimationFrame(()=>{d=setTimeout(h,S+17),Pe(t,s1,d)})},n2=(t,s)=>{Zg(t,s.classes),sn(t,s1).each(c=>{clearTimeout(parseInt(c,10)),N(t,s1)}),Iw(t,s)},o2=(t,s,c,i,d,g)=>{const h=__(i,d,g);if(h||k_(t,i)){Le(t,"position",c.position);const y=Jy(s,t),S=m0(s,{...d,rect:y}),T=Lr(t2,_=>S[_]);A_(c,T)&&(io(t,T),h&&n2(t,i),qc(t))}else au(t,i.classes)},r1=t=>({width:K(t),height:La(t)}),s2=(t,s,c,i)=>{cn(s,"max-height"),cn(s,"max-width");const d=r1(s);return o1(s,i.preference,t,d,c,i.bounds)},Lw=(t,s)=>{const c=s.classes;au(t,c.off),Zg(t,c.on)},Fw=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},Hw=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},O_=(t,s,c)=>{const i=m0(c.origin,s);c.transition.each(d=>{o2(t,c.origin,i,d,s,c.lastPlacement)}),da(t,i)},Vw=(t,s)=>{w_(t,s.placement)},r2=(t,s)=>{uf(t,Math.floor(s))},zw=le((t,s)=>{r2(t,s),yn(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Fm=le((t,s)=>{r2(t,s)}),Uw=(t,s,c)=>t[s]===void 0?c:t[s],D_=(t,s,c,i,d,g,h,y)=>{const S=Uw(h,"maxHeightFunction",zw()),T=Uw(h,"maxWidthFunction",ce),_=t.anchorBox,R=t.origin,L={bounds:e1(R,g),origin:R,preference:i,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:d,transition:y};return R_(_,s,c,L)},R_=(t,s,c,i)=>{const d=s2(t,s,c,i);return O_(s,d,i),Vw(s,d),Lw(s,d),Fw(s,d,i),Hw(s,d,i),{layout:d.layout,placement:d.placement}},p0=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Nl=(t,s,c,i=1)=>{const d=t*i,g=s*i,h=S=>ct(c,S).getOr([]),y=(S,T,_)=>{const R=Bt(p0,_);return{offset:us(S,T),classesOn:pe(_,h),classesOff:pe(R,h)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},b0=()=>Nl(0,0,{}),v0=vn,c2=(t,s)=>c=>Ww(c)==="rtl"?s:t,Ww=t=>So(t,"direction")==="rtl"?"rtl":"ltr";var Sr;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Sr||(Sr={}));const Zw="data-alloy-vertical-dir",lh=t=>Kp(t,s=>$n(s)&&_t(s,"data-alloy-vertical-dir")===Sr.BottomToTop),Hm=()=>oc("layouts",[Fe("onLtr"),Fe("onRtl"),lo("onBottomLtr"),lo("onBottomRtl")]),y0=(t,s,c,i,d,g,h)=>{const y=h.map(lh).getOr(!1),S=s.layouts.map(F=>F.onLtr(t)),T=s.layouts.map(F=>F.onRtl(t)),_=y?s.layouts.bind(F=>F.onBottomLtr.map(j=>j(t))).or(S).getOr(d):S.getOr(c),R=y?s.layouts.bind(F=>F.onBottomRtl.map(j=>j(t))).or(T).getOr(g):T.getOr(i);return c2(_,R)(t)},jw=(t,s,c)=>{const i=s.hotspot,d=Jy(c,i.element),g=y0(t.element,s,Jp(),d0(),kw(),_w(),k.some(s.hotspot.element));return k.some(v0({anchorBox:d,bubble:s.bubble.getOr(b0()),overrides:s.overrides,layouts:g}))};var M_=[Fe("hotspot"),lo("bubble"),ve("overrides",{}),Hm(),es("placement",jw)];const N_=(t,s,c)=>{const i=f0(c,s.x,s.y),d=ws(i.left,i.top,s.width,s.height),g=y0(t.element,s,Ky(),Yy(),Ky(),Yy(),k.none());return k.some(v0({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Gw=[Fe("x"),Fe("y"),ve("height",0),ve("width",0),ve("bubble",b0()),ve("overrides",{}),Hm(),es("placement",N_)];const c1=Ja.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),a2=t=>t.fold(vn,(s,c,i)=>s.translate(-c,-i)),P_=t=>t.fold(vn,vn),uh=t=>co(t,(s,c)=>s.translate(c.left,c.top),us(0,0)),qw=t=>{const s=_e(t,a2);return uh(s)},Kw=t=>{const s=_e(t,P_);return uh(s)},Yw=c1.screen,i2=c1.absolute,C0=(t,s,c)=>{const i=Jr(c.root).dom,d=g=>{const h=pr(g),y=pr(t.element);return ao(h,y)};return k.from(i.frameElement).map(he.fromDom).filter(d).map(ps)},Xw=(t,s,c)=>{const i=pr(t.element),d=Jc(i),g=C0(t,s,c).getOr(d);return i2(g,d.left,d.top)},Vm=(t,s,c,i)=>{const d=Yw(us(t,s));return k.some(_d(d,c,i))},B_=(t,s,c,i,d)=>t.map(g=>{const h=[s,g.point],y=Dw(i,()=>Kw(h),()=>Kw(h),()=>qw(h)),S=pp(y.left,y.top,g.width,g.height),T=c.showAbove?kw():Jp(),_=c.showAbove?_w():d0(),R=y0(d,c,T,_,T,_,k.none());return v0({anchorBox:S,bubble:c.bubble.getOr(b0()),overrides:c.overrides,layouts:R})}),Jw=(t,s,c)=>{const i=Xw(t,c,s);return s.node.filter(J).bind(d=>{const g=d.dom.getBoundingClientRect(),h=Vm(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return B_(h,i,s,c,y)})};var Qw=[Fe("node"),Fe("root"),lo("bubble"),Hm(),ve("overrides",{}),ve("showAbove",!1),es("placement",Jw)];const S0="\uFEFF",$_=" ",w0={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},a1=Ja.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ex=(t,s,c,i)=>t.fold(s,c,i),dh=t=>t.fold(vn,vn,vn),mh=a1.before,I_=a1.on,tx=a1.after,L_={before:mh,on:I_,after:tx,cata:ex,getStart:dh},Gf=Ja.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fh=t=>Gf.exact(t.start,t.soffset,t.finish,t.foffset),l2=t=>t.match({domRange:s=>he.fromDom(s.startContainer),relative:(s,c)=>L_.getStart(s),exact:(s,c,i,d)=>s}),u2=Gf.domRange,F_=Gf.relative,d2=Gf.exact,nx=t=>{const s=l2(t);return Jr(s)},ox=w0.create,gh={domRange:u2,relative:F_,exact:d2,exactFromRange:fh,getWin:nx,range:ox},sx=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},x0=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,i)=>{t.setEnd(c.dom,i)},c=>{t.setEndAfter(c.dom)})},zm=(t,s,c)=>{const i=t.document.createRange();return sx(i,s),x0(i,c),i},Ld=(t,s,c,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(i.dom,d),g},i1=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),l1=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?k.some(c).map(i1):k.none()},H_=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?k.some(s).map(i1):k.none()},ni=Ja.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),du=(t,s,c)=>s(he.fromDom(c.startContainer),c.startOffset,he.fromDom(c.endContainer),c.endOffset),m2=(t,s)=>s.match({domRange:c=>({ltr:le(c),rtl:k.none}),relative:(c,i)=>({ltr:Be(()=>zm(t,c,i)),rtl:Be(()=>k.some(zm(t,i,c)))}),exact:(c,i,d,g)=>({ltr:Be(()=>Ld(t,c,i,d,g)),rtl:Be(()=>k.some(Ld(t,d,g,c,i)))})}),V_=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>ni.rtl(he.fromDom(d.endContainer),d.endOffset,he.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>du(t,ni.ltr,c)):du(t,ni.ltr,c)},NR=(t,s)=>{const c=m2(t,s);return V_(t,c)},Um=(t,s)=>NR(t,s).match({ltr:(i,d,g,h)=>{const y=t.document.createRange();return y.setStart(i.dom,d),y.setEnd(g.dom,h),y},rtl:(i,d,g,h)=>{const y=t.document.createRange();return y.setStart(g.dom,h),y.setEnd(i.dom,d),y}});ni.ltr,ni.rtl;const hh=(t,s,c)=>kn(hl(t,c),s),Tc=(t,s)=>rm(s,t),f2=(t,s,c,i)=>{const g=pr(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},E0=(t,s,c,i)=>{const d=f2(t,s,c,i),g=ao(t,c)&&s===i;return d.collapsed&&!g},qf=t=>k.from(t.getSelection()),u1=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return k.some(w0.create(he.fromDom(s.startContainer),s.startOffset,he.fromDom(c.endContainer),c.endOffset))}else return k.none()},z_=t=>{if(t.anchorNode===null||t.focusNode===null)return u1(t);{const s=he.fromDom(t.anchorNode),c=he.fromDom(t.focusNode);return E0(s,t.anchorOffset,c,t.focusOffset)?k.some(w0.create(s,t.anchorOffset,c,t.focusOffset)):u1(t)}},g2=t=>qf(t).filter(s=>s.rangeCount>0).bind(z_),d1=(t,s)=>{const c=Um(t,s);return l1(c)},kc=(t,s)=>{const c=Um(t,s);return H_(c)},el=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?k.from(g.dom.nodeValue):k.none();return{get:c,getOption:i,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(ur,"text"),p2=t=>el.get(t),ph=(t,s)=>({element:t,offset:s}),bh=(t,s)=>{const c=Bc(t);if(c.length===0)return ph(t,s);if(s<c.length)return ph(c[s],0);{const i=c[c.length-1],d=ur(i)?p2(i).length:Bc(i).length;return ph(i,d)}},b2=(t,s)=>ur(t)?ph(t,s):bh(t,s),Fd=t=>t.foffset!==void 0,v2=(t,s)=>s.getSelection.getOrThunk(()=>()=>g2(t))().map(i=>{if(Fd(i)){const d=b2(i.start,i.soffset),g=b2(i.finish,i.foffset);return gh.range(d.element,d.offset,g.element,g.offset)}else return i}),y2=(t,s,c)=>{const i=Jr(s.root).dom,d=Xw(t,c,s),g=v2(i,s).bind(S=>{if(Fd(S))return kc(i,gh.exactFromRange(S)).orThunk(()=>{const _=he.fromText(S0);vl(S.start,_);const R=d1(i,gh.exact(_,0,_,1));return wa(_),R}).bind(_=>Vm(_.left,_.top,_.width,_.height));{const T=jn(S,R=>R.dom.getBoundingClientRect()),_={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return Vm(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),y=v2(i,s).bind(S=>Fd(S)?$n(S.start)?k.some(S.start):Pc(S.start):k.some(S.firstCell)).getOr(t.element);return B_(g,d,s,c,y)};var C2=[lo("getSelection"),Fe("root"),lo("bubble"),Hm(),ve("overrides",{}),ve("showAbove",!1),es("placement",y2)];const nd="link-layout",T0=t=>t.x+t.width,zc=(t,s)=>t.x-s.width,rx=(t,s)=>t.y-s.height+t.height,S2=t=>t.y,w2=(t,s,c)=>Fc(T0(t),S2(t),c.southeast(),i0(),"southeast",Hc(t,{left:0,top:2}),nd),cx=(t,s,c)=>Fc(zc(t,s),S2(t),c.southwest(),Uy(),"southwest",Hc(t,{right:1,top:2}),nd),x2=(t,s,c)=>Fc(T0(t),rx(t,s),c.northeast(),Wy(),"northeast",Hc(t,{left:0,bottom:3}),nd),ax=(t,s,c)=>Fc(zc(t,s),rx(t,s),c.northwest(),l0(),"northwest",Hc(t,{right:1,bottom:3}),nd),ix=()=>[w2,cx,x2,ax],xi=()=>[cx,w2,ax,x2],Wm=(t,s,c)=>{const i=Jy(c,s.item.element),d=y0(t.element,s,ix(),xi(),ix(),xi(),k.none());return k.some(v0({anchorBox:i,bubble:b0(),overrides:s.overrides,layouts:d}))};var lx=[Fe("item"),Hm(),ve("overrides",{}),es("placement",Wm)],Kf=rr("type",{selection:C2,node:Qw,hotspot:M_,submenu:lx,makeshift:Gw});const fa=[vi("classes",pt),Cc("mode","all",["all","layout","placement"])],oi=[ve("useFixed",Hn),lo("getBounds")],ga=[go("anchor",Kf),oc("transition",fa)],Ei=()=>{const t=document.documentElement;return Mw(0,0,t.clientWidth,t.clientHeight)},k0=t=>{const s=ps(t.element),c=t.element.dom.getBoundingClientRect();return Rw(s.left,s.top,c.width,c.height)},Ti=(t,s,c,i,d,g)=>{const h=Zf(s.anchorBox,t);return D_(h,i.element,s.bubble,s.layouts,d,c,s.overrides,g)},Yf=(t,s,c,i,d)=>{const g=k.none();ux(t,s,c,i,d,g)},ux=(t,s,c,i,d,g)=>{const h=Va("placement.info",Yt(ga),d),y=h.anchor,S=i.element,T=c.get(i.uid);Xy(()=>{Le(S,"position","fixed");const _=Do(S,"visibility");Le(S,"visibility","hidden");const R=s.useFixed()?Ei():k0(t);y.placement(t,y,R).each(L=>{const F=g.orThunk(()=>s.getBounds.map(is)),j=Ti(R,L,F,i,T,h.transition);c.set(i.uid,j)}),_.fold(()=>{cn(S,"visibility")},L=>{Le(S,"visibility",L)}),Do(S,"left").isNone()&&Do(S,"top").isNone()&&Do(S,"right").isNone()&&Do(S,"bottom").isNone()&&Gs(Do(S,"position"),"fixed")&&cn(S,"position")},S)};var E2=Object.freeze({__proto__:null,position:Yf,positionWithinBounds:ux,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;Ke(["position","left","right","top","bottom"],g=>cn(d,g)),x_(d),c.clear(i.uid)}}),_0=Object.freeze({__proto__:null,init:()=>{let t={};return ua({readState:()=>t,clear:d=>{eo(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>ct(t,d)})}});const _c=rc({fields:oi,name:"positioning",active:S_,apis:E2,state:_0}),m1=t=>t.getSystem().isConnected(),f1=t=>{An(t,Ci());const s=t.components();Ke(s,f1)},Zm=t=>{const s=t.components();Ke(s,Zm),An(t,za())},T2=(t,s)=>{t.getSystem().addToWorld(s),J(t.element)&&Zm(s)},A0=t=>{f1(t),t.getSystem().removeFromWorld(t)},k2=(t,s)=>{Xc(t.element,s.element)},O0=t=>{Ke(t.components(),s=>wa(s.element)),Fr(t.element),t.syncComponents()},_2=(t,s,c)=>{const i=t.components();O0(t);const d=c(s),g=Bt(i,d);Ke(g,h=>{f1(h),t.getSystem().removeFromWorld(h)}),Ke(d,h=>{m1(h)?k2(t,h):(t.getSystem().addToWorld(h),k2(t,h),J(t.element)&&Zm(h))}),t.syncComponents()},vh=(t,s,c)=>{const i=t.components(),d=pe(s,y=>n0(y).toArray());Ke(i,y=>{yo(d,y)||A0(y)});const g=c(s),h=Bt(i,g);Ke(h,y=>{m1(y)&&A0(y)}),Ke(g,y=>{m1(y)||T2(t,y)}),t.syncComponents()},Hd=(t,s)=>{g1(t,s,Xc)},g1=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),J(t.element)&&Zm(s),t.syncComponents()},Xf=t=>{f1(t),wa(t.element),t.getSystem().removeFromWorld(t)},Vd=t=>{const s=Qr(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());Xf(t),s.each(c=>{c.syncComponents()})},dx=t=>{const s=t.components();Ke(s,Xf),Fr(t.element),t.syncComponents()},si=(t,s)=>{jm(t,s,Xc)},A2=(t,s)=>{jm(t,s,Dg)},jm=(t,s,c)=>{c(t,s.element);const i=Bc(s.element);Ke(i,d=>{s.getByDom(d).each(Zm)})},Jf=t=>{const s=Bc(t.element);Ke(s,c=>{t.getByDom(c).each(f1)}),wa(t.element)},D0=(t,s,c,i)=>{c.get().each(h=>{dx(t)});const d=s.getAttachPoint(t);Hd(d,t);const g=t.getSystem().build(i);return Hd(t,g),c.set(g),g},R0=(t,s,c,i)=>{const d=D0(t,s,c,i);return s.onOpen(t,d),d},Z_=(t,s,c,i)=>c.get().map(()=>D0(t,s,c,i)),j_=(t,s,c,i,d)=>{gx(t,s),R0(t,s,c,i),d(),M0(t,s)},mx=(t,s,c)=>{c.get().each(i=>{dx(t),Vd(t),s.onClose(t,i),c.clear()})},fx=(t,s,c)=>c.isOpen(),Qf=(t,s,c,i)=>fx(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),yh=(t,s,c)=>c.get(),h1=(t,s,c,i)=>{Do(t.element,s).fold(()=>{N(t.element,c)},d=>{Pe(t.element,c,d)}),Le(t.element,s,i)},G_=(t,s,c)=>{sn(t.element,c).fold(()=>cn(t.element,s),i=>Le(t.element,s,i))},gx=(t,s,c)=>{const i=s.getAttachPoint(t);Le(t.element,"position",_c.getMode(i)),h1(t,"visibility",s.cloakVisibilityAttr,"hidden")},p1=t=>ks(["top","left","right","bottom"],s=>Do(t,s).isSome()),M0=(t,s,c)=>{p1(t.element)||cn(t.element,"position"),G_(t,"visibility",s.cloakVisibilityAttr)};var O2=Object.freeze({__proto__:null,cloak:gx,decloak:M0,open:R0,openWhileCloaked:j_,close:mx,isOpen:fx,isPartOf:Qf,getState:yh,setContent:Z_}),N0=Object.freeze({__proto__:null,events:(t,s)=>Eo([Ie(sc(),(c,i)=>{mx(c,t,s)})])}),Ch=[Gn("onOpen"),Gn("onClose"),Fe("isPartOf"),Fe("getAttachPoint"),ve("cloakVisibilityAttr","data-precloak-visibility")],eg=Object.freeze({__proto__:null,init:()=>{const t=mo(),s=le("not-implemented");return ua({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Yn=rc({fields:Ch,name:"sandboxing",active:N0,apis:O2,state:eg}),zd=le("dismiss.popups"),Gm=le("reposition.popups"),P0=le("mouse.released"),D2=bi([ve("isExtraPart",Hn),oc("fireEventInstead",[ve("event",Si())])]),b1=t=>{const s=Va("Dismissal",D2,t);return{[zd()]:{schema:bi([Fe("target")]),onReceive:(c,i)=>{Yn.isOpen(c)&&(Yn.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>Yn.close(c),g=>An(c,g.event)))}}}},tg=bi([oc("fireEventInstead",[ve("event",Pp())]),El("doReposition")]),v1=t=>{const s=Va("Reposition",tg,t);return{[Gm()]:{onReceive:c=>{Yn.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>An(c,i.event))}}}},B0=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},bx=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var qm=Object.freeze({__proto__:null,onLoad:B0,onUnload:bx,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),M2=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[ms((i,d)=>{B0(i,t,s)}),qu((i,d)=>{bx(i,t,s)})]:[_m(t,s,B0)];return Eo(c)}});const og=()=>{const t=$t(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,i=()=>{t.set(null)};return ua({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},N2=()=>ua({readState:ce}),vx=()=>{const t=$t({}),s=$t({});return ua({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>ct(t.get(),h).orThunk(()=>ct(s.get(),h)),update:h=>{const y=t.get(),S=s.get(),T={},_={};Ke(h,R=>{T[R.value]=R,ct(R,"meta").each(L=>{ct(L,"text").each(F=>{_[F]=R})})}),t.set({...y,...T}),s.set({...S,..._})},clear:()=>{t.set({}),s.set({})}})};var od=Object.freeze({__proto__:null,memory:og,dataset:vx,manual:N2,init:t=>t.store.manager.state(t)});const Cx=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},I0=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},tl=(t,s,c)=>{s.store.initialValue.each(d=>{Cx(t,s,c,d)})},cc=(t,s,c)=>{c.clear()};var K_=[lo("initialValue"),Fe("getFallbackEntry"),Fe("getDataKey"),Fe("setValue"),es("manager",{setValue:Cx,getValue:I0,onLoad:tl,onUnload:cc,state:vx})];const mu=(t,s,c)=>s.store.getValue(t),Y_=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Sx=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var y1=[Fe("getValue"),ve("setValue",ce),lo("initialValue"),es("manager",{setValue:Y_,getValue:mu,onLoad:Sx,onUnload:ce,state:cu.init})];const Sh=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},wx=(t,s,c)=>c.get(),xx=(t,s,c)=>{s.store.initialValue.each(i=>{c.isNotSet()&&c.set(i)})},BR=(t,s,c)=>{c.clear()};var $R=[lo("initialValue"),es("manager",{setValue:Sh,getValue:wx,onLoad:xx,onUnload:BR,state:og})],Ex=[ds("store",{mode:"memory"},rr("mode",{memory:$R,manual:y1,dataset:K_})),Gn("onSetValue"),ve("resetOnDom",!1)];const bt=rc({fields:Ex,name:"representing",active:M2,apis:qm,extra:{setValueFrom:(t,s)=>{const c=bt.getValue(s);bt.setValue(t,c)}},state:od}),ac=(t,s)=>_S(t,{},_e(s,c=>oy(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([fo("dump",vn)])),L0=t=>t.dump,ic=(t,s)=>({...Ye(s),...t.dump}),nl={field:ac,augment:ic,get:L0},P2="placeholder",C1=Ja.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),wh=t=>zn(t,"uiType"),Tx=(t,s,c,i)=>t.exists(d=>d!==c.owner)?C1.single(!0,le(c)):ct(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+Io(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),Km=(t,s,c,i)=>wh(c)&&c.uiType===P2?Tx(t,s,c,i):C1.single(!1,le(c)),xh=(t,s,c,i)=>Km(t,s,c,i).fold((g,h)=>{const y=wh(c)?h(s,c.config,c.validated):h(s),S=ct(y,"components").getOr([]),T=pe(S,_=>xh(t,s,_,i));return[{...y,components:T}]},(g,h)=>{if(wh(c)){const y=h(s,c.config,c.validated);return c.validated.preprocess.getOr(vn)(y)}else return h(s)}),X_=(t,s,c,i)=>pe(c,d=>xh(t,s,d,i)),J_=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,y)=>h,(h,y)=>h);return{name:le(t),required:g,used:i,replace:d}},Q_=(t,s,c,i)=>{const d=jn(i,(h,y)=>J_(y,h)),g=X_(t,s,c,d);return gs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},kx=C1.single,sg=C1.multiple,Eh=le(P2),rg=Ja.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),F0=ve("factory",{sketch:vn}),ki=ve("schema",[]),fu=Fe("name"),cg=nc("pname","pname",Cp(t=>"<alloy."+xt(t.name)+">"),Sl()),Th=fo("schema",()=>[lo("preprocess")]),H0=ve("defaults",le({})),V0=ve("overrides",le({})),e4=Yt([F0,ki,fu,cg,H0,V0]),t4=Yt([F0,ki,fu,H0,V0]),n4=Yt([F0,ki,fu,cg,H0,V0]),o4=Yt([F0,Th,fu,Fe("unit"),cg,H0,V0]),_x=t=>t.fold(k.some,k.none,k.some,k.some),Ax=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},B2=t=>t.fold(vn,vn,vn,vn),z0=(t,s)=>c=>{const i=Va("Converting part type",s,c);return t(i)},oa=z0(rg.required,e4),ol=z0(rg.external,t4),_i=z0(rg.optional,n4),S1=z0(rg.group,o4),$2=le("entirety");var Ox=Object.freeze({__proto__:null,required:oa,external:ol,optional:_i,group:S1,asNamedPart:_x,name:Ax,asCommon:B2,original:$2});const U0=(t,s,c,i)=>Rs(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),s4=(t,s,c)=>{const i={},d={};return Ke(c,g=>{g.fold(h=>{i[h.pname]=kx(!0,(y,S,T)=>h.factory.sketch(U0(y,h,S,T)))},h=>{const y=s.parts[h.name];d[h.name]=le(h.factory.sketch(U0(s,h,y[$2()]),y))},h=>{i[h.pname]=kx(!1,(y,S,T)=>h.factory.sketch(U0(y,h,S,T)))},h=>{i[h.pname]=sg(!0,(y,S,T)=>{const _=y[h.name];return _e(_,R=>h.factory.sketch(Rs(h.defaults(y,R,T),R,h.overrides(y,R))))})})}),{internals:le(i),externals:le(d)}},W0=(t,s)=>{const c={};return Ke(s,i=>{_x(i).each(d=>{const g=r4(t,d.pname);c[d.name]=h=>{const y=Va("Part: "+d.name+" in "+t,Yt(d.schema),h);return{...g,config:h,validated:y}}})}),c},r4=(t,s)=>({uiType:Eh(),owner:t,name:s}),Z0=(t,s,c)=>({uiType:Eh(),owner:t,name:s,config:c,validated:{}}),c4=t=>pe(t,s=>s.fold(k.none,k.some,k.none,k.none).map(c=>vm(c.name,c.schema.concat([If($2())]))).toArray()),a4=t=>_e(t,Ax),Dx=(t,s,c)=>s4(t,s,c),j0=(t,s,c)=>Q_(k.some(t),s,s.components,c),jo=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},vt=(t,s,c)=>jo(t,s,c).getOrDie("Could not find part: "+c),gu=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return Ke(c,h=>{i[h]=le(g.getByUid(d[h]))}),i},Rx=(t,s)=>{const c=t.getSystem();return jn(s.partUids,(i,d)=>le(c.getByUid(i)))},I2=t=>Io(t.partUids),kh=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return Ke(c,h=>{i[h]=le(g.getByUid(d[h]).getOrDie())}),i},G0=(t,s)=>{const c=a4(s);return Ig(_e(c,i=>({key:i,value:t+"-"+i})))},w1=t=>nc("partUids","partUids",Pg(s=>G0(s.uid,t)),Sl());var L2=Object.freeze({__proto__:null,generate:W0,generateOne:Z0,schemas:c4,names:a4,substitutes:Dx,components:j0,defaultUids:G0,defaultUidsSchema:w1,getAllParts:Rx,getAllPartNames:I2,getPart:jo,getPartOrDie:vt,getParts:gu,getPartsOrDie:kh});const Mx=(t,s)=>(t.length>0?[vm("parts",t)]:[]).concat([Fe("uid"),ve("dom",{}),ve("components",[]),If("originalSpec"),ve("debug.sketcher",{})]).concat(s),F2=(t,s,c,i,d)=>{const g=Mx(i,d);return Va(t+" [SpecSchema]",bi(g.concat(s)),c)},Nx=(t,s,c,i)=>{const d=q0(i),g=F2(t,s,d,[],[]);return c(g,d)},x1=(t,s,c,i,d)=>{const g=q0(d),h=c4(c),y=w1(c),S=F2(t,s,g,h,[y]),T=Dx(t,S,c),_=j0(t,S,T.internals());return i(S,_,g,T.externals())},ag=t=>zn(t,"uid"),q0=t=>ag(t)?t:{...t,uid:Zp("uid")},i4=t=>t.uid!==void 0,l4=bi([Fe("name"),Fe("factory"),Fe("configFields"),ve("apis",{}),ve("extraApis",{})]),u4=bi([Fe("name"),Fe("factory"),Fe("configFields"),Fe("partFields"),ve("apis",{}),ve("extraApis",{})]),ri=t=>{const s=Va("Sketcher for "+t.name,l4,t),c=g=>Nx(s.name,s.configFields,s.factory,g),i=jn(s.apis,o0),d=jn(s.extraApis,(g,h)=>py(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},Uc=t=>{const s=Va("Sketcher for "+t.name,u4,t),c=h=>x1(s.name,s.configFields,s.partFields,s.factory,h),i=W0(s.name,s.partFields),d=jn(s.apis,o0),g=jn(s.extraApis,(h,y)=>py(h,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},_h=t=>ca("input")(t)&&_t(t,"type")!=="radio"||ca("textarea")(t);var d4=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const m4=[Fe("find")],Un=rc({fields:m4,name:"composing",apis:d4}),f4=["input","button","textarea","select"],g4=(t,s,c)=>{(s.disabled()?V2:K0)(t,s)},H2=(t,s)=>s.useNative===!0&&yo(f4,kr(t.element)),LR=t=>Qo(t.element,"disabled"),FR=t=>{Pe(t.element,"disabled","disabled")},Ym=t=>{N(t.element,"disabled")},E1=t=>_t(t.element,"aria-disabled")==="true",h4=t=>{Pe(t.element,"aria-disabled","true")},p4=t=>{Pe(t.element,"aria-disabled","false")},V2=(t,s,c)=>{s.disableClass.each(d=>{fr(t.element,d)}),(H2(t,s)?FR:h4)(t),s.onDisabled(t)},K0=(t,s,c)=>{s.disableClass.each(d=>{To(t.element,d)}),(H2(t,s)?Ym:p4)(t),s.onEnabled(t)},Y0=(t,s)=>H2(t,s)?LR(t):E1(t);var b4=Object.freeze({__proto__:null,enable:K0,disable:V2,isDisabled:Y0,onLoad:g4,set:(t,s,c,i)=>{(i?V2:K0)(t,s)}}),v4=Object.freeze({__proto__:null,exhibit:(t,s)=>Ta({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Eo([fy(xc(),(c,i)=>Y0(c,t)),_m(t,s,g4)])}),Px=[vs("disabled",Hn),ve("useNative",!0),lo("disableClass"),Gn("onDisabled"),Gn("onEnabled")];const Jt=rc({fields:Px,name:"disabling",active:v4,apis:b4}),X0=(t,s,c,i)=>{const d=Tc(t.element,"."+s.highlightClass);Ke(d,g=>{ks(i,y=>ao(y.element,g))||(To(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),An(y,Hg())}))})},l=(t,s,c)=>X0(t,s,c,[]),m=(t,s,c,i)=>{V(t,s,c,i)&&(To(i.element,s.highlightClass),s.onDehighlight(t,i),An(i,Hg()))},p=(t,s,c,i)=>{X0(t,s,c,[i]),V(t,s,c,i)||(fr(i.element,s.highlightClass),s.onHighlight(t,i),An(i,dy()))},v=(t,s,c)=>{ye(t,s).each(i=>{p(t,s,c,i)})},E=(t,s,c)=>{Ge(t,s).each(i=>{p(t,s,c,i)})},A=(t,s,c,i)=>{se(t,s,c,i).fold(d=>{throw d},d=>{p(t,s,c,d)})},B=(t,s,c,i)=>{const d=At(t,s);Ut(d,i).each(h=>{p(t,s,c,h)})},V=(t,s,c,i)=>ka(i.element,s.highlightClass),q=(t,s,c)=>ys(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),se=(t,s,c,i)=>{const d=Tc(t.element,"."+s.itemClass);return k.from(d[i]).fold(()=>Sn.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},ye=(t,s,c)=>ys(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Ge=(t,s,c)=>{const i=Tc(t.element,"."+s.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},mt=(t,s,c,i)=>{const d=Tc(t.element,"."+s.itemClass);return Vn(d,h=>ka(h,s.highlightClass)).bind(h=>{const y=Lf(h,i,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},lt=(t,s,c)=>mt(t,s,c,-1),tt=(t,s,c)=>mt(t,s,c,1),At=(t,s,c)=>{const i=Tc(t.element,"."+s.itemClass);return ya(_e(i,d=>t.getSystem().getByDom(d).toOptional()))};var We=Object.freeze({__proto__:null,dehighlightAll:l,dehighlight:m,highlight:p,highlightFirst:v,highlightLast:E,highlightAt:A,highlightBy:B,isHighlighted:V,getHighlighted:q,getFirst:ye,getLast:Ge,getPrevious:lt,getNext:tt,getCandidates:At}),nt=[Fe("highlightClass"),Fe("itemClass"),Gn("onHighlight"),Gn("onDehighlight")];const st=rc({fields:nt,name:"highlighting",apis:We}),nn=[8],Wn=[9],ko=[13],ns=[27],Es=[32],Ai=[37],hu=[38],ig=[39],sd=[40],Go=(t,s,c)=>{const i=$o(t.slice(0,s)),d=$o(t.slice(s+1));return Ut(i.concat(d),c)},Aa=(t,s,c)=>{const i=$o(t.slice(0,s));return Ut(i,c)},Oa=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return Ut(d.concat(i),c)},sl=(t,s,c)=>{const i=t.slice(s+1);return Ut(i,c)},hn=t=>s=>{const c=s.raw;return yo(t,c.which)},Ua=t=>s=>Er(t,c=>c(s)),Pr=t=>t.raw.shiftKey===!0,J0=t=>t.raw.ctrlKey===!0,Ud=Me(Pr),xn=(t,s)=>({matches:t,classification:s}),sa=(t,s)=>Ut(t,i=>i.matches(s)).map(i=>i.classification),Q0=(t,s,c)=>{s.exists(d=>c.exists(g=>ao(g,d)))||Dt(t,Bp(),{prevFocus:s,newFocus:c})},ev=()=>{const t=c=>ma(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);Q0(c,d,g)}}},Bx=()=>{const t=c=>st.getHighlighted(c).map(i=>i.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(ce,h=>{st.highlight(c,h)});const g=t(c);Q0(c,d,g)}}};var Xm;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Xm||(Xm={}));const lg=(t,s,c,i,d)=>{const g=()=>t.concat([ve("focusManager",ev()),ds("focusInside","onFocus",Tp(T=>yo(["onFocus","onEnterOrSpace","onApi"],T)?Sn.value(T):Sn.error("Invalid value for focusInside"))),es("handler",S),es("state",s),es("sendFocusIn",d)]),h=(T,_,R,L,F)=>{const j=R(T,_,L,F);return sa(j,_.event).bind(Y=>Y(T,_,L,F))},S={schema:g,processKey:h,toEvents:(T,_)=>{const R=T.focusInside!==Xm.OnFocusMode?k.none():d(T).map(j=>Ie(su(),(Y,me)=>{j(Y,T,_),me.stop()})),L=(j,Y)=>{const me=hn(Es.concat(ko))(Y.event);T.focusInside===Xm.OnEnterOrSpaceMode&&me&&Db(j,Y)&&d(T).each(ee=>{ee(j,T,_),Y.stop()})},F=[Ie(qi(),(j,Y)=>{h(j,Y,c,T,_).fold(()=>{L(j,Y)},me=>{Y.stop()})}),Ie(wf(),(j,Y)=>{h(j,Y,i,T,_).each(me=>{Y.stop()})})];return Eo(R.toArray().concat(F))}};return S},tv=t=>{const s=[lo("onEscape"),lo("onEnter"),ve("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ve("firstTabstop",0),ve("useTabstopAt",kt),lo("visibilitySelector")].concat([t]),c=(ee,ue)=>{const de=ee.visibilitySelector.bind(ke=>Qu(ue,ke)).getOr(ue);return Po(de)>0},i=(ee,ue)=>{const de=Tc(ee.element,ue.selector),ke=kn(de,Oe=>c(ue,Oe));return k.from(ke[ue.firstTabstop])},d=(ee,ue)=>ue.focusManager.get(ee).bind(de=>Qu(de,ue.selector)),g=(ee,ue)=>c(ee,ue)&&ee.useTabstopAt(ue),h=(ee,ue,de)=>{i(ee,ue).each(ke=>{ue.focusManager.set(ee,ke)})},y=(ee,ue,de,ke,Oe)=>Oe(ue,de,ot=>g(ke,ot)).fold(()=>ke.cyclic?k.some(!0):k.none(),ot=>(ke.focusManager.set(ee,ot),k.some(!0))),S=(ee,ue,de,ke)=>{const Oe=Tc(ee.element,de.selector);return d(ee,de).bind(ot=>Vn(Oe,Tn(ao,ot)).bind($e=>y(ee,Oe,$e,de,ke)))},T=(ee,ue,de)=>{const ke=de.cyclic?Go:Aa;return S(ee,ue,de,ke)},_=(ee,ue,de)=>{const ke=de.cyclic?Oa:sl;return S(ee,ue,de,ke)},R=ee=>Nc(ee).bind(gi).exists(ue=>ao(ue,ee)),L=(ee,ue,de)=>d(ee,de).filter(ke=>!de.useTabstopAt(ke)).bind(ke=>(R(ke)?T:_)(ee,ue,de)),F=(ee,ue,de)=>de.onEnter.bind(ke=>ke(ee,ue)),j=(ee,ue,de)=>de.onEscape.bind(ke=>ke(ee,ue)),Y=le([xn(Ua([Pr,hn(Wn)]),T),xn(hn(Wn),_),xn(Ua([Ud,hn(ko)]),F)]),me=le([xn(hn(ns),j),xn(hn(Wn),L)]);return lg(s,cu.init,Y,me,()=>k.some(h))};var y4=tv(fo("cyclic",Hn)),k1=tv(fo("cyclic",kt));const vF=(t,s,c)=>(Fb(t,c,xc()),k.some(!0)),ug=(t,s,c)=>_h(c)&&hn(Es)(s.event)?k.none():vF(t,s,c),_1=(t,s)=>k.some(!0),VR=[ve("execute",ug),ve("useSpace",!1),ve("useEnter",!0),ve("useControlEnter",!1),ve("useDown",!1)],$x=(t,s,c)=>c.execute(t,s,t.element),yF=(t,s,c,i)=>{const d=c.useSpace&&!_h(t.element)?Es:[],g=c.useEnter?ko:[],h=c.useDown?sd:[],y=d.concat(g).concat(h);return[xn(hn(y),$x)].concat(c.useControlEnter?[xn(Ua([J0,hn(ko)]),$x)]:[])},zR=(t,s,c,i)=>c.useSpace&&!_h(t.element)?[xn(hn(Es),_1)]:[];var CF=lg(VR,cu.init,yF,zR,()=>k.none());const C4=()=>{const t=mo();return ua({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var wF=Object.freeze({__proto__:null,flatgrid:C4,init:t=>t.state(t)});const UR=t=>(s,c,i,d)=>{const g=t(s.element);return WR(g,s,c,i,d)},S4=(t,s)=>{const c=c2(t,s);return UR(c)},w4=(t,s)=>{const c=c2(s,t);return UR(c)},x4=t=>(s,c,i,d)=>WR(t,s,c,i,d),WR=(t,s,c,i,d)=>i.focusManager.get(s).bind(h=>t(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),U2=x4,Ix=x4,Lx=x4,Lj=t=>t.offsetWidth<=0&&t.offsetHeight<=0,E4=t=>!Lj(t.dom),xF=(t,s)=>Vn(t,s).map(c=>({index:c,candidates:t})),ZR=(t,s,c)=>{const i=h=>ao(h,s),d=Tc(t,c),g=kn(d,E4);return xF(g,i)},Pl=(t,s)=>Vn(t,c=>ao(s,c)),jR=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(h=>{const y=h.row*c+h.column;return y>=0&&y<t.length?k.some(t[y]):k.none()})},GR=(t,s,c,i,d)=>jR(t,s,i,(g,h)=>{const S=g===c-1?t.length-g*i:i,T=Lf(h,d,0,S-1);return k.some({row:g,column:T})}),qR=(t,s,c,i,d)=>jR(t,s,i,(g,h)=>{const y=Lf(g,d,0,c-1),T=y===c-1?t.length-y*i:i,_=Dl(h,0,T-1);return k.some({row:y,column:_})}),EF=(t,s,c,i)=>GR(t,s,c,i,1),TF=(t,s,c,i)=>GR(t,s,c,i,-1),nv=(t,s,c,i)=>qR(t,s,c,i,-1),T4=(t,s,c,i)=>qR(t,s,c,i,1),kF=[Fe("selector"),ve("execute",ug),ta("onEscape"),ve("captureTab",!1),$d()],k4=(t,s,c)=>{ys(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Fx=(t,s)=>s.focusManager.get(t).bind(c=>Qu(c,s.selector)),_4=(t,s,c,i)=>Fx(t,c).bind(d=>c.execute(t,s,d)),Hx=t=>(s,c,i,d)=>ZR(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),KR=(t,s,c)=>c.captureTab?k.some(!0):k.none(),_F=(t,s,c)=>c.onEscape(t,s),YR=Hx(TF),XR=Hx(EF),AF=Hx(nv),OF=Hx(T4),JR=le([xn(hn(Ai),S4(YR,XR)),xn(hn(ig),w4(YR,XR)),xn(hn(hu),U2(AF)),xn(hn(sd),Ix(OF)),xn(Ua([Pr,hn(Wn)]),KR),xn(Ua([Ud,hn(Wn)]),KR),xn(hn(Es.concat(ko)),_4)]),Vx=le([xn(hn(ns),_F),xn(hn(Es),_1)]);var DF=lg(kF,C4,JR,Vx,()=>k.some(k4));const QR=(t,s,c,i,d)=>{const g=y=>kr(y)==="button"&&_t(y,"disabled")==="disabled",h=(y,S,T)=>d(y,S,i,0,T.length-1,T[S],_=>g(T[_])?h(y,_,T):k.from(T[_]));return ZR(t,c,s).bind(y=>{const S=y.index,T=y.candidates;return h(S,S,T)})},eM=(t,s,c,i)=>QR(t,s,c,i,(d,g,h,y,S,T,_)=>{const R=Dl(g+h,y,S);return R===d?k.from(T):_(R)}),zx=(t,s,c,i)=>QR(t,s,c,i,(d,g,h,y,S,T,_)=>{const R=Lf(g,h,y,S);return R===d?k.none():_(R)}),ov=[Fe("selector"),ve("getInitial",k.none),ve("execute",ug),ta("onEscape"),ve("executeOnMove",!1),ve("allowVertical",!0),ve("allowHorizontal",!0),ve("cycles",!0)],tM=(t,s)=>s.focusManager.get(t).bind(c=>Qu(c,s.selector)),A4=(t,s,c)=>tM(t,c).bind(i=>c.execute(t,s,i)),O4=(t,s,c)=>{s.getInitial(t).orThunk(()=>ys(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},nM=(t,s,c)=>(c.cycles?zx:eM)(t,c.selector,s,-1),D4=(t,s,c)=>(c.cycles?zx:eM)(t,c.selector,s,1),R4=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?A4(s,c,i):k.some(!0)),oM=(t,s,c)=>c.onEscape(t,s),sM=(t,s,c,i)=>{const d=[...c.allowHorizontal?Ai:[]].concat(c.allowVertical?hu:[]),g=[...c.allowHorizontal?ig:[]].concat(c.allowVertical?sd:[]);return[xn(hn(d),R4(S4(nM,D4))),xn(hn(g),R4(w4(nM,D4))),xn(hn(ko),A4),xn(hn(Es),A4)]},rM=le([xn(hn(Es),_1),xn(hn(ns),oM)]);var RF=lg(ov,cu.init,sM,rM,()=>k.some(O4));const Ux=(t,s,c)=>k.from(t[s]).bind(i=>k.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),cM=(t,s,c,i)=>{const g=t[s].length,h=Lf(c,i,0,g-1);return Ux(t,s,h)},Wx=(t,s,c,i)=>{const d=Lf(c,i,0,t.length-1),g=t[d].length,h=Dl(s,0,g-1);return Ux(t,d,h)},aM=(t,s,c,i)=>{const g=t[s].length,h=Dl(c+i,0,g-1);return Ux(t,s,h)},W2=(t,s,c,i)=>{const d=Dl(c+i,0,t.length-1),g=t[d].length,h=Dl(s,0,g-1);return Ux(t,d,h)},MF=(t,s,c)=>cM(t,s,c,1),iM=(t,s,c)=>cM(t,s,c,-1),ci=(t,s,c)=>Wx(t,c,s,-1),NF=(t,s,c)=>Wx(t,c,s,1),lM=(t,s,c)=>aM(t,s,c,-1),uM=(t,s,c)=>aM(t,s,c,1),PF=(t,s,c)=>W2(t,c,s,-1),dM=(t,s,c)=>W2(t,c,s,1),mM=[vm("selectors",[Fe("row"),Fe("cell")]),ve("cycles",!0),ve("previousSelector",k.none),ve("execute",ug)],BF=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return ys(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},$F=(t,s,c)=>ma(t.element).bind(i=>c.execute(t,s,i)),IF=(t,s)=>_e(t,c=>Tc(c,s.selectors.cell)),Zx=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return Qu(i,d.selectors.row).bind(h=>{const y=Tc(h,d.selectors.cell);return Pl(y,i).bind(S=>{const T=Tc(c,d.selectors.row);return Pl(T,h).bind(_=>{const R=IF(T,d);return g(R,_,S).map(L=>L.cell)})})})},M4=Zx(iM,lM),fM=Zx(MF,uM),LF=Zx(ci,PF),gM=Zx(NF,dM),hM=le([xn(hn(Ai),S4(M4,fM)),xn(hn(ig),w4(M4,fM)),xn(hn(hu),U2(LF)),xn(hn(sd),Ix(gM)),xn(hn(Es.concat(ko)),$F)]),pM=le([xn(hn(Es),_1)]);var FF=lg(mM,cu.init,hM,pM,()=>k.some(BF));const HF=[Fe("selector"),ve("execute",ug),ve("moveOnTab",!1)],bM=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),VF=(t,s,c)=>{ys(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},N4=(t,s,c)=>zx(t,c.selector,s,-1),P4=(t,s,c)=>zx(t,c.selector,s,1),Ah=(t,s,c,i)=>c.moveOnTab?Lx(N4)(t,s,c,i):k.none(),vM=(t,s,c,i)=>c.moveOnTab?Lx(P4)(t,s,c,i):k.none(),yM=le([xn(hn(hu),Lx(N4)),xn(hn(sd),Lx(P4)),xn(Ua([Pr,hn(Wn)]),Ah),xn(Ua([Ud,hn(Wn)]),vM),xn(hn(ko),bM),xn(hn(Es),bM)]),CM=le([xn(hn(Es),_1)]);var zF=lg(HF,cu.init,yM,CM,()=>k.some(VF));const sv=[ta("onSpace"),ta("onEnter"),ta("onShiftEnter"),ta("onLeft"),ta("onRight"),ta("onTab"),ta("onShiftTab"),ta("onUp"),ta("onDown"),ta("onEscape"),ve("stopSpaceKeyup",!1),lo("focusIn")],UF=(t,s,c)=>[xn(hn(Es),c.onSpace),xn(Ua([Ud,hn(ko)]),c.onEnter),xn(Ua([Pr,hn(ko)]),c.onShiftEnter),xn(Ua([Pr,hn(Wn)]),c.onShiftTab),xn(Ua([Ud,hn(Wn)]),c.onTab),xn(hn(hu),c.onUp),xn(hn(sd),c.onDown),xn(hn(Ai),c.onLeft),xn(hn(ig),c.onRight),xn(hn(Es),c.onSpace)],WF=(t,s,c)=>[...c.stopSpaceKeyup?[xn(hn(Es),_1)]:[],xn(hn(ns),c.onEscape)];var SM=lg(sv,cu.init,UF,WF,t=>t.focusIn);const ZF=y4.schema(),jF=k1.schema(),GF=RF.schema(),wM=DF.schema(),B4=FF.schema(),$4=CF.schema(),qF=zF.schema(),Oh=SM.schema();var xM=Object.freeze({__proto__:null,acyclic:ZF,cyclic:jF,flow:GF,flatgrid:wM,matrix:B4,execution:$4,menu:qF,special:Oh});const EM=t=>Kr(t,"setGridSize"),Ht=yy({branchKey:"mode",branches:xM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{EM(c)?c.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:wF}),TM=(t,s)=>{Xy(()=>{_2(t,s,()=>_e(s,t.getSystem().build))},t.element)},rv=(t,s)=>{Xy(()=>{vh(t,s,()=>iw(t.element,s,t.getSystem().buildOrPatch))},t.element)},Z2=(t,s,c,i)=>{A0(s);const d=sh(t.element,c,i,t.getSystem().buildOrPatch);T2(t,d),t.syncComponents()},jx=(t,s,c)=>{const i=t.getSystem().build(c);g1(t,i,s)},I4=(t,s,c,i)=>{Vd(s),jx(t,(d,g)=>Sb(d,g,c),i)},Dh=(t,s,c,i)=>(s.reuseDom?rv:TM)(t,i),Rh=(t,s,c,i)=>{jx(t,Xc,i)},KF=(t,s,c,i)=>{jx(t,Jl,i)},YF=(t,s,c,i)=>{const d=j2(t);Ut(d,h=>ao(i.element,h.element)).each(Vd)},j2=(t,s)=>t.components(),Jm=(t,s,c,i,d)=>{const g=j2(t);return k.from(g[i]).map(h=>(d.fold(()=>Vd(h),y=>{(s.reuseDom?Z2:I4)(t,h,i,y)}),h))};var XF=Object.freeze({__proto__:null,append:Rh,prepend:KF,remove:YF,replaceAt:Jm,replaceBy:(t,s,c,i,d)=>{const g=j2(t);return Vn(g,i).bind(h=>Jm(t,s,c,h,d))},set:Dh,contents:j2});const ln=rc({fields:[Sc("reuseDom",!0)],name:"replacing",apis:XF}),_M=(t,s)=>{const c=Eo(s);return rc({fields:[Fe("enabled")],name:t,active:{events:le(c)}})},dn=(t,s)=>{const c=_M(t,s);return{key:t,value:{config:{},me:c,configAsRaw:le({}),initialConfig:{},state:cu}}},Gx=(t,s)=>{s.ignore||(Qi(t.element),s.onFocus(t))};var QF=Object.freeze({__proto__:null,focus:Gx,blur:(t,s)=>{s.ignore||ah(t.element)},isFocused:t=>ih(t.element)}),F4=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ta(c)},events:t=>Eo([Ie(su(),(s,c)=>{Gx(s,t),c.stop()})].concat(t.stopMousedown?[Ie(yi(),(s,c)=>{c.event.prevent()})]:[]))}),qx=[Gn("onFocus"),ve("stopMousedown",!1),ve("ignore",!1)];const tn=rc({fields:qx,name:"focusing",active:F4,apis:QF}),e6=t=>({init:()=>{const c=$t(t);return{get:()=>c.get(),set:y=>c.set(y),clear:()=>c.set(t),readState:()=>c.get()}}}),AM=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},OM=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?fr(t.element,i):To(t.element,i)})},cv=(t,s,c,i)=>{const d=c.get();c.set(i),OM(t,s,c),AM(t,s,c),d!==i&&s.onToggled(t,i)},H4=(t,s,c)=>{cv(t,s,c,!c.get())},t6=(t,s,c)=>{cv(t,s,c,!0)},V4=(t,s,c)=>{cv(t,s,c,!1)},n6=(t,s,c)=>c.get(),DM=(t,s,c)=>{cv(t,s,c,s.selected)};var o6=Object.freeze({__proto__:null,onLoad:DM,toggle:H4,isOn:n6,on:t6,off:V4,set:cv}),r6=Object.freeze({__proto__:null,exhibit:()=>Ta({}),events:(t,s)=>{const c=jk(t,s,H4),i=_m(t,s,DM);return Eo(qt([t.toggleOnExecute?[c]:[],[i]]))}});const c6=(t,s,c)=>{Pe(t.element,"aria-pressed",c),s.syncWithExpanded&&MM(t,s,c)},RM=(t,s,c)=>{Pe(t.element,"aria-selected",c)},G2=(t,s,c)=>{Pe(t.element,"aria-checked",c)},MM=(t,s,c)=>{Pe(t.element,"aria-expanded",c)};var q2=[ve("selected",!1),lo("toggleClass"),ve("toggleOnExecute",!0),Gn("onToggled"),ds("aria",{mode:"none"},rr("mode",{pressed:[ve("syncWithExpanded",!1),es("update",c6)],checked:[es("update",G2)],expanded:[es("update",MM)],selected:[es("update",RM)],none:[es("update",ce)]}))];const wn=rc({fields:q2,name:"toggling",active:r6,apis:o6,state:e6(!1)}),z4=()=>{const t=(s,c)=>{c.stop(),Tm(s)};return[Ie(xf(),t),Ie($b(),t),_f(nu()),_f(yi())]},K2=t=>{const s=c=>Rd((i,d)=>{c(i),d.stop()});return Eo(qt([t.map(s).toArray(),z4()]))},NM="alloy.item-hover",PM="alloy.item-focus",U4="alloy.item-toggled",BM=t=>{(ma(t.element).isNone()||tn.isFocused(t))&&(tn.isFocused(t)||tn.focus(t),Dt(t,NM,{item:t}))},W4=t=>{Dt(t,PM,{item:t})},a6=(t,s)=>{Dt(t,U4,{item:t,state:s})},$M=le(NM),IM=le(PM),Kx=le(U4),Z4=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),vn),j4=(t,s)=>({aria:{mode:s?"selected":"checked"},...Rc(t,(c,i)=>i!=="exclusive"),onToggled:(c,i)=>{Nt(t.onToggled)&&t.onToggled(c,i),a6(c,i)}}),i6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:Z4(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:nl.augment(t.itemBehaviours,[t.toggling.fold(wn.revoke,s=>wn.config(j4(s,t.role.exists(c=>c==="option")))),tn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{W4(s)}}),Ht.config({mode:"execution"}),bt.config({store:{mode:"memory",initialValue:t.data}}),dn("item-type-events",[...z4(),Ie(Tl(),BM),Ie(wm(),tn.focus)])]),components:t.components,eventOrder:t.eventOrder}),l6=[Fe("data"),Fe("components"),Fe("dom"),ve("hasSubmenu",!1),lo("toggling"),lo("role"),nl.field("itemBehaviours",[wn,tn,Ht,bt]),ve("ignoreFocus",!1),ve("domModification",{}),es("builder",i6),ve("eventOrder",{})],u6=t=>({dom:t.dom,components:t.components,events:Eo([$p(wm())])}),d6=[Fe("dom"),Fe("components"),es("builder",u6)],Yx=le("item-widget"),Xx=le([oa({name:"widget",overrides:t=>({behaviours:Ye([bt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ce}})])})})]),m6=t=>{const s=Dx(Yx(),t,Xx()),c=j0(Yx(),t,s.internals()),i=g=>jo(g,t,"widget").map(h=>(Ht.focusIn(h),h)),d=(g,h)=>_h(h.event.target)?k.none():(t.autofocus&&h.setSource(g.element),k.none());return{dom:t.dom,components:c,domModification:t.domModification,events:Eo([Rd((g,h)=>{i(g).each(y=>{h.stop()})}),Ie(Tl(),BM),Ie(wm(),(g,h)=>{t.autofocus?i(g):tn.focus(g)})]),behaviours:nl.augment(t.widgetBehaviours,[bt.config({store:{mode:"memory",initialValue:t.data}}),tn.config({ignore:t.ignoreFocus,onFocus:g=>{W4(g)}}),Ht.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:Cy(),onLeft:d,onRight:d,onEscape:(g,h)=>!tn.isFocused(g)&&!t.autofocus?(tn.focus(g),k.some(!0)):(t.autofocus&&h.setSource(g.element),k.none())})])}},f6=[Fe("uid"),Fe("data"),Fe("components"),Fe("dom"),ve("autofocus",!1),ve("ignoreFocus",!1),nl.field("widgetBehaviours",[bt,tn,Ht]),ve("domModification",{}),w1(Xx()),es("builder",m6)],g6=rr("type",{widget:f6,item:l6,separator:d6}),h6=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),p6=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),b6=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),LM=le([S1({factory:{sketch:t=>{const s=Va("menu.spec item",g6,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>zn(s,"uid")?s:{...s,uid:Zp("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),v6=le([Ur("role"),Fe("value"),Fe("items"),Fe("dom"),Fe("components"),ve("eventOrder",{}),ac("menuBehaviours",[st,bt,Un,Ht]),ds("movement",{mode:"menu",moveOnTab:!0},rr("mode",{grid:[$d(),es("config",h6)],matrix:[es("config",p6),Fe("rowSelector"),ve("previousSelector",k.none)],menu:[ve("moveOnTab",!0),es("config",b6)]})),t_(),ve("fakeFocus",!1),ve("focusManager",ev()),Gn("onHighlight"),Gn("onDehighlight"),ve("showMenuRole",!0)]),FM=le("alloy.menu-focus"),y6=(t,s)=>{const c=Tc(t.element,'[role="menuitemradio"][aria-checked="true"]');Ke(c,i=>{ao(i,s.element)||t.getSystem().getByDom(i).each(d=>{wn.off(d)})})},C6=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ic(t.menuBehaviours,[st.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),bt.config({store:{mode:"memory",initialValue:t.value}}),Un.config({find:k.some}),Ht.config(t.movement.config(t,t.movement))]),events:Eo([Ie(IM(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(y=>{st.highlight(d,y),g.stop(),Dt(d,FM(),{menu:d,item:y})})}),Ie($M(),(d,g)=>{const h=g.event.item;st.highlight(d,h)}),Ie(Kx(),(d,g)=>{const{item:h,state:y}=g.event;y&&_t(h.element,"role")==="menuitemradio"&&y6(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),A1=Uc({name:"Menu",configFields:v6(),partFields:LM(),factory:C6}),O1=t=>Pa(t,(s,c)=>({k:s,v:c})),HM=(t,s,c,i)=>ct(c,i).bind(d=>ct(t,d).bind(g=>{const h=HM(t,s,c,g);return k.some([g].concat(h))})).getOr([]),S6=(t,s)=>{const c={};gs(t,(h,y)=>{Ke(h,S=>{c[S]=y})});const i=s,d=O1(s),g=jn(d,(h,y)=>[y].concat(HM(c,i,d,y)));return jn(c,h=>ct(g,h).getOr([h]))},D1=()=>{const t=$t({}),s=$t({}),c=$t({}),i=mo(),d=$t({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},h=()=>i.get().isNone(),y=(Oe,ot)=>{s.set({...s.get(),[Oe]:{type:"prepared",menu:ot}})},S=(Oe,ot,St,$e)=>{i.set(Oe),t.set(St),s.set(ot),d.set($e);const wt=S6($e,St);c.set(wt)},T=Oe=>no(t.get(),(ot,St)=>ot===Oe),_=(Oe,ot,St)=>Y(Oe).bind($e=>T(Oe).bind(wt=>ot(wt).map(ft=>({triggeredMenu:$e,triggeringItem:ft,triggeringPath:St})))),R=(Oe,ot)=>{const St=kn(ee(Oe).toArray(),$e=>Y($e).isSome());return ct(c.get(),Oe).bind($e=>{const wt=$o(St.concat($e)),ft=pe(wt,(Tt,Rn)=>_(Tt,ot,wt.slice(0,Rn+1)).fold(()=>Gs(i.get(),Tt)?[]:[k.none()],cs=>[k.some(cs)]));return Co(ft)})},L=Oe=>ct(t.get(),Oe).map(ot=>{const St=ct(c.get(),Oe).getOr([]);return[ot].concat(St)}),F=Oe=>ct(c.get(),Oe).bind(ot=>ot.length>1?k.some(ot.slice(1)):k.none()),j=Oe=>ct(c.get(),Oe),Y=Oe=>me(Oe).bind(G4),me=Oe=>ct(s.get(),Oe),ee=Oe=>ct(t.get(),Oe);return{setMenuBuilt:y,setContents:S,expand:L,refresh:j,collapse:F,lookupMenu:me,lookupItem:ee,otherMenus:Oe=>{const ot=d.get();return Bt(Io(ot),Oe)},getPrimary:()=>i.get().bind(Y),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:R}},G4=t=>t.type==="prepared"?k.some(t.menu):k.none(),VM={init:D1,extractPreparedMenu:G4},dg=xt("tiered-menu-item-highlight"),zM=xt("tiered-menu-item-dehighlight");var ai;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ai||(ai={}));const pu=(t,s)=>{const c=mo(),i=(Ze,dt,on)=>jn(on,(pn,Lt)=>{const un=()=>A1.sketch({...pn,value:Lt,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Ho,_o)=>{Dt(Ho,dg,{menuComp:Ho,itemComp:_o})},onDehighlight:(Ho,_o)=>{Dt(Ho,zM,{menuComp:Ho,itemComp:_o})},focusManager:t.fakeFocus?Bx():ev()});return Lt===dt?{type:"prepared",menu:Ze.getSystem().build(un())}:{type:"notbuilt",nbMenu:un}}),d=VM.init(),g=Ze=>{const dt=i(Ze,t.data.primary,t.data.menus),on=S();return d.setContents(t.data.primary,dt,t.data.expansions,on),d.getPrimary()},h=Ze=>bt.getValue(Ze).value,y=(Ze,dt,on)=>Yo(dt,pn=>{if(!pn.getSystem().isConnected())return k.none();const Lt=st.getCandidates(pn);return Ut(Lt,un=>h(un)===on)}),S=Ze=>jn(t.data.menus,(dt,on)=>pe(dt.items,pn=>pn.type==="separator"?[]:[pn.data.value])),T=st.highlight,_=(Ze,dt)=>{T(Ze,dt),st.getHighlighted(dt).orThunk(()=>st.getFirst(dt)).each(on=>{t.fakeFocus?st.highlight(dt,on):Fb(Ze,on.element,wm())})},R=(Ze,dt)=>ya(_e(dt,on=>Ze.lookupMenu(on).bind(pn=>pn.type==="prepared"?k.some(pn.menu):k.none()))),L=(Ze,dt,on)=>{const pn=R(dt,dt.otherMenus(on));Ke(pn,Lt=>{au(Lt.element,[t.markers.backgroundMenu]),t.stayInDom||ln.remove(Ze,Lt)})},F=Ze=>c.get().getOrThunk(()=>{const dt={},on=Tc(Ze.element,`.${t.markers.item}`),pn=kn(on,Lt=>_t(Lt,"aria-haspopup")==="true");return Ke(pn,Lt=>{Ze.getSystem().getByDom(Lt).each(un=>{const Ho=h(un);dt[Ho]=un})}),c.set(dt),dt}),j=(Ze,dt)=>{const on=F(Ze);gs(on,(pn,Lt)=>{const un=yo(dt,Lt);Pe(pn.element,"aria-expanded",un)})},Y=(Ze,dt,on)=>k.from(on[0]).bind(pn=>dt.lookupMenu(pn).bind(Lt=>{if(Lt.type==="notbuilt")return k.none();{const un=Lt.menu,Ho=R(dt,on.slice(1));return Ke(Ho,_o=>{fr(_o.element,t.markers.backgroundMenu)}),J(un.element)||ln.append(Ze,wi(un)),au(un.element,[t.markers.backgroundMenu]),_(Ze,un),L(Ze,dt,on),k.some(un)}}));let me;(function(Ze){Ze[Ze.HighlightSubmenu=0]="HighlightSubmenu",Ze[Ze.HighlightParent=1]="HighlightParent"})(me||(me={}));const ee=(Ze,dt,on)=>{if(on.type==="notbuilt"){const pn=Ze.getSystem().build(on.nbMenu());return d.setMenuBuilt(dt,pn),pn}else return on.menu},ue=(Ze,dt,on=me.HighlightSubmenu)=>{if(dt.hasConfigured(Jt)&&Jt.isDisabled(dt))return k.some(dt);{const pn=h(dt);return d.expand(pn).bind(Lt=>(j(Ze,Lt),k.from(Lt[0]).bind(un=>d.lookupMenu(un).bind(Ho=>{const _o=ee(Ze,un,Ho);return J(_o.element)||ln.append(Ze,wi(_o)),t.onOpenSubmenu(Ze,dt,_o,$o(Lt)),on===me.HighlightSubmenu?(st.highlightFirst(_o),Y(Ze,d,Lt)):(st.dehighlightAll(_o),k.some(dt))}))))}},de=(Ze,dt)=>{const on=h(dt);return d.collapse(on).bind(pn=>(j(Ze,pn),Y(Ze,d,pn).map(Lt=>(t.onCollapseMenu(Ze,dt,Lt),Lt))))},ke=(Ze,dt)=>{const on=h(dt);return d.refresh(on).bind(pn=>(j(Ze,pn),Y(Ze,d,pn)))},Oe=(Ze,dt)=>_h(dt.element)?k.none():ue(Ze,dt,me.HighlightSubmenu),ot=(Ze,dt)=>_h(dt.element)?k.none():de(Ze,dt),St=(Ze,dt)=>de(Ze,dt).orThunk(()=>t.onEscape(Ze,dt).map(()=>Ze)),$e=Ze=>(dt,on)=>Qu(on.getSource(),`.${t.markers.item}`).bind(pn=>dt.getSystem().getByDom(pn).toOptional().bind(Lt=>Ze(dt,Lt).map(kt))),wt=Eo([Ie(FM(),(Ze,dt)=>{const on=dt.event.item;d.lookupItem(h(on)).each(()=>{const pn=dt.event.menu;st.highlight(Ze,pn);const Lt=h(dt.event.item);d.refresh(Lt).each(un=>L(Ze,d,un))})}),Rd((Ze,dt)=>{const on=dt.event.target;Ze.getSystem().getByDom(on).each(pn=>{h(pn).indexOf("collapse-item")===0&&de(Ze,pn),ue(Ze,pn,me.HighlightSubmenu).fold(()=>{t.onExecute(Ze,pn)},ce)})}),ms((Ze,dt)=>{g(Ze).each(on=>{ln.append(Ze,wi(on)),t.onOpenMenu(Ze,on),t.highlightOnOpen===ai.HighlightMenuAndItem?_(Ze,on):t.highlightOnOpen===ai.HighlightJustMenu&&T(Ze,on)})}),Ie(dg,(Ze,dt)=>{t.onHighlightItem(Ze,dt.event.menuComp,dt.event.itemComp)}),Ie(zM,(Ze,dt)=>{t.onDehighlightItem(Ze,dt.event.menuComp,dt.event.itemComp)}),...t.navigateOnHover?[Ie($M(),(Ze,dt)=>{const on=dt.event.item;ke(Ze,on),ue(Ze,on,me.HighlightParent),t.onHover(Ze,on)})]:[]]),ft=Ze=>st.getHighlighted(Ze).bind(st.getHighlighted),Tt=Ze=>{ft(Ze).each(dt=>{de(Ze,dt)})},Rn=Ze=>{d.getPrimary().each(dt=>{_(Ze,dt)})},cs=Ze=>k.from(Ze.components()[0]).filter(dt=>_t(dt.element,"role")==="menu"),Ot={collapseMenu:Tt,highlightPrimary:Rn,repositionMenus:Ze=>{d.getPrimary().bind(on=>ft(Ze).bind(pn=>{const Lt=h(pn),un=Fi(d.getMenus()),Ho=ya(_e(un,VM.extractPreparedMenu));return d.getTriggeringPath(Lt,_o=>y(Ze,Ho,_o))}).map(pn=>({primary:on,triggeringPath:pn}))).fold(()=>{cs(Ze).each(on=>{t.onRepositionMenu(Ze,on,[])})},({primary:on,triggeringPath:pn})=>{t.onRepositionMenu(Ze,on,pn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ic(t.tmenuBehaviours,[Ht.config({mode:"special",onRight:$e(Oe),onLeft:$e(ot),onEscape:$e(St),focusIn:(Ze,dt)=>{d.getPrimary().each(on=>{Fb(Ze,on.element,wm())})}}),st.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Un.config({find:Ze=>st.getHighlighted(Ze)}),ln.config({})]),eventOrder:t.eventOrder,apis:Ot,events:wt}},UM=le("collapse-item"),WM=(t,s,c)=>({primary:t,menus:s,expansions:c}),ZM=(t,s)=>({primary:t,menus:yf(t,s),expansions:{}}),w6=t=>({value:xt(UM()),meta:{text:t}}),Qm=ri({name:"TieredMenu",configFields:[eh("onExecute"),eh("onEscape"),$f("onOpenMenu"),$f("onOpenSubmenu"),Gn("onRepositionMenu"),Gn("onCollapseMenu"),ve("highlightOnOpen",ai.HighlightMenuAndItem),vm("data",[Fe("primary"),Fe("menus"),Fe("expansions")]),ve("fakeFocus",!1),Gn("onHighlightItem"),Gn("onDehighlightItem"),Gn("onHover"),Ju(),Fe("dom"),ve("navigateOnHover",!0),ve("stayInDom",!1),ac("tmenuBehaviours",[Ht,st,Un,ln]),ve("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:pu,extraApis:{tieredData:WM,singleData:ZM,collapseItem:w6}}),jM=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>Jp(),onRtl:()=>d0()}}:{},y=T=>T.length===2,S=T=>y(T)?h:{};return Qm.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Yn.close(s),t.onEscape.map(T=>T(s)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(T,_)=>{_c.positionWithinBounds(g().getOrDie(),_,c,d())},onOpenSubmenu:(T,_,R,L)=>{const F=g().getOrDie();_c.position(F,R,{anchor:{type:"submenu",item:_,...S(L)}})},onRepositionMenu:(T,_,R)=>{const L=g().getOrDie();_c.positionWithinBounds(L,_,c,d()),Ke(R,F=>{const j=S(F.triggeringPath);_c.position(L,F.triggeredMenu,{anchor:{type:"submenu",item:F.triggeringItem,...j}})})}})},x6=(t,s)=>{const c=(L,F)=>t.getRelated(L).exists(Y=>Bm(Y,F)),i=(L,F)=>{Yn.setContent(L,F)},d=(L,F,j)=>{const Y=k.none;g(L,F,j,Y)},g=(L,F,j,Y)=>{const me=t.lazySink(L).getOrDie();Yn.openWhileCloaked(L,F,()=>_c.positionWithinBounds(me,L,j,Y())),bt.setValue(L,k.some({mode:"position",config:j,getBounds:Y}))},h=(L,F,j)=>{y(L,F,j,k.none)},y=(L,F,j,Y)=>{const me=jM(t,L,F,j,Y);Yn.open(L,me),bt.setValue(L,k.some({mode:"menu",menu:me}))},S=L=>{Yn.isOpen(L)&&(bt.setValue(L,k.none()),Yn.close(L))},T=L=>Yn.getState(L),_=L=>{Yn.isOpen(L)&&bt.getValue(L).each(F=>{switch(F.mode){case"menu":Yn.getState(L).each(Qm.repositionMenus);break;case"position":const j=t.lazySink(L).getOrDie();_c.positionWithinBounds(j,L,F.config,F.getBounds());break}})},R={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:y,hide:S,getContent:T,reposition:_,isOpen:Yn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ic(t.inlineBehaviours,[Yn.config({isPartOf:(L,F,j)=>Bm(F,j)||c(L,j),getAttachPoint:L=>t.lazySink(L).getOrDie(),onOpen:L=>{t.onShow(L)},onClose:L=>{t.onHide(L)}}),bt.config({store:{mode:"memory",initialValue:k.none()}}),ti.config({channels:{...b1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(L=>({fireEventInstead:{event:L.event}})).getOr({})}),...v1({...t.fireRepositionEventInstead.map(L=>({fireEventInstead:{event:L.event}})).getOr({}),doReposition:_})}})]),eventOrder:t.eventOrder,apis:R}},Ns=ri({name:"InlineView",configFields:[Fe("lazySink"),Gn("onShow"),Gn("onHide"),ju("onEscape"),ac("inlineBehaviours",[Yn,bt,ti]),oc("fireDismissalEventInstead",[ve("event",Si())]),oc("fireRepositionEventInstead",[ve("event",Pp())]),ve("getRelated",k.none),ve("isExtraPart",Hn),ve("eventOrder",k.none)],factory:x6,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:(t,s,c,i)=>{t.showMenuAt(s,c,i)},showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var R1=tinymce.util.Tools.resolve("tinymce.util.Delay"),Mh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),GM=tinymce.util.Tools.resolve("tinymce.EditorManager"),M1=tinymce.util.Tools.resolve("tinymce.Env"),Bl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Bl||(Bl={}));var Y2;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Y2||(Y2={}));const Lo=t=>s=>s.options.get(t),av=t=>s=>k.from(t(s)),qM=t=>{const s=M1.deviceType.isPhone(),c=M1.deviceType.isTablet()||s,i=t.options.register,d=h=>bn(h)||h===!1,g=h=>bn(h)||pc(h);i("skin",{processor:h=>bn(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Mh.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>bn(h)||hc(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>hc(h)||bn(h)||fs(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),it(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Y2.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||hc(h),default:!M1.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},KM=Lo("readonly"),q4=Lo("height"),X2=Lo("width"),K4=av(Lo("min_width")),N1=av(Lo("min_height")),P1=av(Lo("max_width")),Jx=av(Lo("max_height")),Y4=av(Lo("style_formats")),YM=Lo("style_formats_merge"),XM=Lo("style_formats_autohide"),JM=Lo("content_langs"),QM=Lo("removed_menuitems"),Nh=Lo("toolbar_mode"),X4=Lo("toolbar_groups"),Qx=Lo("toolbar_location"),J4=Lo("fixed_toolbar_container"),E6=Lo("fixed_toolbar_container_target"),Q4=Lo("toolbar_persist"),eN=Lo("toolbar_sticky_offset"),tN=Lo("menubar"),eE=Lo("toolbar"),eA=Lo("file_picker_callback"),nN=Lo("file_picker_validator_handler"),oN=Lo("font_size_input_default_unit"),tE=Lo("file_picker_types"),tA=Lo("typeahead_urls"),nA=Lo("anchor_top"),sN=Lo("anchor_bottom"),nE=Lo("draggable_modal"),rN=Lo("statusbar"),cN=Lo("elementpath"),oA=Lo("branding"),aN=Lo("resize"),iN=Lo("paste_as_text"),sA=Lo("sidebar_show"),oE=Lo("promotion"),lN=Lo("help_accessibility"),J2=Lo("default_font_stack"),rA=t=>t.options.get("skin")===!1,sE=t=>t.options.get("menubar")!==!1,cA=t=>{const s=t.options.get("skin_url");if(rA(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return GM.baseURL+"/skins/ui/"+c}},rE=t=>k.from(t.options.get("skin_url")),uN=t=>t.options.get("line_height_formats").split(" "),cE=t=>{const s=eE(t),c=bn(s),i=fs(s)&&s.length>0;return!Q2(t)&&(i||c||s===!0)},aE=t=>{const s=it(9,i=>t.options.get("toolbar"+(i+1))),c=kn(s,bn);return zt(c.length>0,c)},Q2=t=>aE(t).fold(()=>{const s=eE(t);return Gt(s,bn)&&s.length>0},kt),aA=t=>Qx(t)===Y2.bottom,iE=t=>{var s;if(!t.inline)return k.none();const c=(s=J4(t))!==null&&s!==void 0?s:"";if(c.length>0)return ys(ie(),c);const i=E6(t);return eo(i)?k.some(he.fromDom(i)):k.none()},rd=t=>t.inline&&iE(t).isSome(),iA=t=>iE(t).getOrThunk(()=>Ya(Xs(he.fromDom(t.getElement())))),lA=t=>t.inline&&!sE(t)&&!cE(t)&&!Q2(t),Ph=t=>(t.options.get("toolbar_sticky")||t.inline)&&!rd(t)&&!lA(t),mg=t=>!rd(t)&&t.options.get("ui_mode")==="split",dN=t=>{const s=t.options.get("menu");return jn(s,c=>({...c,items:c.items}))};var T6=Object.freeze({__proto__:null,get ToolbarMode(){return Bl},get ToolbarLocation(){return Y2},register:qM,getSkinUrl:cA,getSkinUrlOption:rE,isReadOnly:KM,isSkinDisabled:rA,getHeightOption:q4,getWidthOption:X2,getMinWidthOption:K4,getMinHeightOption:N1,getMaxWidthOption:P1,getMaxHeightOption:Jx,getUserStyleFormats:Y4,shouldMergeStyleFormats:YM,shouldAutoHideStyleFormats:XM,getLineHeightFormats:uN,getContentLanguages:JM,getRemovedMenuItems:QM,isMenubarEnabled:sE,isMultipleToolbars:Q2,isToolbarEnabled:cE,isToolbarPersist:Q4,getMultipleToolbarsOption:aE,getUiContainer:iA,useFixedContainer:rd,isSplitUiMode:mg,getToolbarMode:Nh,isDraggableModal:nE,isDistractionFree:lA,isStickyToolbar:Ph,getStickyToolbarOffset:eN,getToolbarLocation:Qx,isToolbarLocationBottom:aA,getToolbarGroups:X4,getMenus:dN,getMenubar:tN,getToolbar:eE,getFilePickerCallback:eA,getFilePickerTypes:tE,useTypeaheadUrls:tA,getAnchorTop:nA,getAnchorBottom:sN,getFilePickerValidatorHandler:nN,getFontSizeInputDefaultUnit:oN,useStatusBar:rN,useElementPath:cN,promotionEnabled:oE,useBranding:oA,getResize:aN,getPasteAsText:iN,getSidebarShow:sA,useHelpAccessibility:lN,getDefaultFontStack:J2});const mN=["visible","hidden","clip"],fN=t=>or(t).length>0&&!yo(mN,t),uA=t=>{if(ra(t)){const s=So(t,"overflow-x"),c=So(t,"overflow-y");return fN(s)||fN(c)}else return!1},gN=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),dA=(t,s)=>{const c=hh(s,uA),i=c.length===0?yc(s).map(Yl).map(d=>hh(d,uA)).getOr([]):c;return _s(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>gN(t)}))},Bh=(t,s)=>mg(t)?dA(t,s):k.none(),$h=t=>{const s=[..._e(t.others,Os),Ar()];return t.isFullscreen()?Ar():bp(Os(t.element),s)},jr=ri({name:"Button",factory:t=>{const s=K2(t.action),c=t.dom.tag,i=g=>ct(t.dom,"attributes").bind(h=>ct(h,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),h=i("role").map(y=>({role:y})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:nl.augment(t.buttonBehaviours,[tn.config({}),Ht.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ve("uid",void 0),Fe("dom"),ve("components",[]),nl.field("buttonBehaviours",[tn,Ht]),lo("action"),lo("role"),ve("eventOrder",{})]}),k6=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return co(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},_6=t=>Array.prototype.slice.call(t.dom.classList,0),Wd=t=>{const s=he.fromHtml(t),c=Bc(s),i=k6(s),d=_6(s),g=c.length===0?{}:{innerHtml:Pd(s)};return{tag:kr(s),classes:d,attributes:i,...g}},uo=t=>{const s=i4(t)&&Kr(t,"uid")?t.uid:Zp("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var mA=Object.freeze({__proto__:null,exhibit:(t,s)=>Ta({attributes:Ig([{key:s.tabAttr,value:"true"}])})}),A6=[ve("tabAttr","data-alloy-tabstop")];const Cs=rc({fields:A6,name:"tabstopping",active:mA}),lE=xt("tooltip.exclusive"),eC=xt("tooltip.show"),tC=xt("tooltip.hide"),nC=xt("tooltip.immediateHide"),oC=xt("tooltip.immediateShow"),hN=(t,s,c)=>{t.getSystem().broadcastOn([lE],{})};var O6=Object.freeze({__proto__:null,hideAllExclusive:hN,immediateOpenClose:(t,s,c,i)=>An(t,i?oC:nC),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&ln.set(d,i)})},setEnabled:(t,s,c,i)=>c.setEnabled(i)}),D6=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(y=>{y.getSystem().isConnected()&&(Vd(y),t.onHide(h,y),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){hN(h);const y=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Eo(t.mode==="normal"?[Ie(Tl(),T=>{An(h,eC)}),Ie(Nb(),T=>{An(h,tC)})]:[]),behaviours:Ye([ln.config({})])});s.setTooltip(S),Hd(y,S),t.onShow(h,S),_c.position(y,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(y=>{const S=t.lazySink(h).getOrDie();_c.position(S,y,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ie(kl(),h=>{An(h,oC)}),Ie(Ef(),h=>{An(h,nC)}),Ie(Tl(),h=>{An(h,eC)}),Ie(Nb(),h=>{An(h,tC)})];case"follow-highlight":return[Ie(dy(),(h,y)=>{An(h,eC)}),Ie(Hg(),h=>{An(h,tC)})];case"children-normal":return[Ie(kl(),(h,y)=>{ma(h.element).each(S=>{Ys(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{An(h,oC)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Ie(Ef(),h=>{ma(h.element).fold(()=>{An(h,nC)},ce)}),Ie(Tl(),h=>{ys(h.element,"[data-mce-tooltip]:hover").each(y=>{s.getTooltip().fold(()=>{An(h,eC)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),Ie(Nb(),h=>{ys(h.element,"[data-mce-tooltip]:hover").fold(()=>{An(h,tC)},ce)})];default:return[Ie(kl(),(h,y)=>{ma(h.element).each(S=>{Ys(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{An(h,oC)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Ie(Ef(),h=>{ma(h.element).fold(()=>{An(h,nC)},ce)})]}};return Eo(qt([[FS(h=>{t.onSetup(h)}),Ie(eC,h=>{s.resetTimer(()=>{i(h)},t.delayForShow())}),Ie(tC,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Ie(oC,h=>{s.resetTimer(()=>{i(h)},0)}),Ie(nC,h=>{s.resetTimer(()=>{c(h)},0)}),Ie(ru(),(h,y)=>{const S=y;S.universal||yo(S.channels,lE)&&c(h)}),qu(h=>{c(h)})],g()]))}}),fA=[Fe("lazySink"),Fe("tooltipDom"),ve("exclusive",!0),ve("tooltipComponents",[]),vs("delayForShow",le(300)),vs("delayForHide",le(300)),vs("onSetup",ce),Cc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ve("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:le([Cr,wo,Rr,Ec,Mr,Nr]),onRtl:le([Cr,wo,Rr,Ec,Mr,Nr])},bubble:Nl(0,-2,{})})),Gn("onHide"),Gn("onShow")],R6=Object.freeze({__proto__:null,init:()=>{const t=$t(!0),s=mo(),c=mo(),i=()=>{s.on(clearTimeout)},d=(h,y)=>{i(),s.set(setTimeout(h,y))},g=le("not-implemented");return ua({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const Qs=rc({fields:fA,name:"tooltipping",active:D6,state:R6,apis:O6});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:gA,setPrototypeOf:pN,isFrozen:M6,getPrototypeOf:N6,getOwnPropertyDescriptor:P6}=Object;let{freeze:rl,seal:cd,create:uE}=Object,{apply:hA,construct:pA}=typeof Reflect<"u"&&Reflect;rl||(rl=function(s){return s}),cd||(cd=function(s){return s}),hA||(hA=function(s,c,i){return s.apply(c,i)}),pA||(pA=function(s,c){return new s(...c)});const dE=bu(Array.prototype.forEach),bN=bu(Array.prototype.pop),sC=bu(Array.prototype.push),mE=bu(String.prototype.toLowerCase),bA=bu(String.prototype.toString),vN=bu(String.prototype.match),rC=bu(String.prototype.replace),B6=bu(String.prototype.indexOf),$6=bu(String.prototype.trim),Zd=bu(Object.prototype.hasOwnProperty),cl=bu(RegExp.prototype.test),Ih=vA(TypeError);function bu(t){return function(s){for(var c=arguments.length,i=new Array(c>1?c-1:0),d=1;d<c;d++)i[d-1]=arguments[d];return hA(t,s,i)}}function vA(t){return function(){for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return pA(t,c)}}function os(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mE;pN&&pN(t,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=c(d);g!==d&&(M6(s)||(s[i]=g),d=g)}t[d]=!0}return t}function I6(t){for(let s=0;s<t.length;s++)Zd(t,s)||(t[s]=null);return t}function B1(t){const s=uE(null);for(const[c,i]of gA(t))Zd(t,c)&&(Array.isArray(i)?s[c]=I6(i):i&&typeof i=="object"&&i.constructor===Object?s[c]=B1(i):s[c]=i);return s}function iv(t,s){for(;t!==null;){const i=P6(t,s);if(i){if(i.get)return bu(i.get);if(typeof i.value=="function")return bu(i.value)}t=N6(t)}function c(){return null}return c}const yN=rl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cC=rl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),aC=rl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CN=rl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),iC=rl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),fE=rl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yA=rl(["#text"]),jd=rl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),lC=rl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),SN=rl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gE=rl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L6=cd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F6=cd(/<%[\w\W]*|[\w\W]*%>/gm),uC=cd(/\${[\w\W]*}/gm),H6=cd(/^data-[\-\w.\u00B7-\uFFFF]/),wN=cd(/^aria-[\-\w]+$/),hE=cd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V6=cd(/^(?:\w+script|data):/i),CA=cd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pE=cd(/^html$/i),z6=cd(/^[a-z][.\w]*(-[.\w]+)+$/i);var SA=Object.freeze({__proto__:null,MUSTACHE_EXPR:L6,ERB_EXPR:F6,TMPLIT_EXPR:uC,DATA_ATTR:H6,ARIA_ATTR:wN,IS_ALLOWED_URI:hE,IS_SCRIPT_OR_DATA:V6,ATTR_WHITESPACE:CA,DOCTYPE_NAME:pE,CUSTOM_ELEMENT:z6});const lv={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},U6=function(){return typeof window>"u"?null:window},xN=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(i=c.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function wA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U6();const s=qn=>wA(qn);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==lv.document)return s.isSupported=!1,s;let{document:c}=t;const i=c,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:y,Element:S,NodeFilter:T,NamedNodeMap:_=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:R,DOMParser:L,trustedTypes:F}=t,j=S.prototype,Y=iv(j,"cloneNode"),me=iv(j,"remove"),ee=iv(j,"nextSibling"),ue=iv(j,"childNodes"),de=iv(j,"parentNode");if(typeof h=="function"){const qn=c.createElement("template");qn.content&&qn.content.ownerDocument&&(c=qn.content.ownerDocument)}let ke,Oe="";const{implementation:ot,createNodeIterator:St,createDocumentFragment:$e,getElementsByTagName:wt}=c,{importNode:ft}=i;let Tt={};s.isSupported=typeof gA=="function"&&typeof de=="function"&&ot&&ot.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Rn,ERB_EXPR:cs,TMPLIT_EXPR:ro,DATA_ATTR:Ot,ARIA_ATTR:Ze,IS_SCRIPT_OR_DATA:dt,ATTR_WHITESPACE:on,CUSTOM_ELEMENT:pn}=SA;let{IS_ALLOWED_URI:Lt}=SA,un=null;const Ho=os({},[...yN,...cC,...aC,...iC,...yA]);let _o=null;const Pi=os({},[...jd,...lC,...SN,...gE]);let Ps=Object.seal(uE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Wl=null,va=null,Zl=!0,jl=!0,yd=!1,xS=!0,lf=!1,CR=!0,hb=!1,SR=!1,Dj=!1,$k=!1,gF=!1,hF=!1,$G=!0,IG=!1;const iq="user-content-";let Rj=!0,wR=!1,Ik={},Lk=null;const LG=os({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let FG=null;const HG=os({},["audio","video","img","source","image","track"]);let Mj=null;const VG=os({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pF="http://www.w3.org/1998/Math/MathML",bF="http://www.w3.org/2000/svg",pb="http://www.w3.org/1999/xhtml";let Fk=pb,Nj=!1,Pj=null;const lq=os({},[pF,bF,pb],bA);let xR=null;const uq=["application/xhtml+xml","text/html"],dq="text/html";let Bi=null,Hk=null;const mq=c.createElement("form"),zG=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},Bj=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Hk&&Hk===Ae)){if((!Ae||typeof Ae!="object")&&(Ae={}),Ae=B1(Ae),xR=uq.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?dq:Ae.PARSER_MEDIA_TYPE,Bi=xR==="application/xhtml+xml"?bA:mE,un=Zd(Ae,"ALLOWED_TAGS")?os({},Ae.ALLOWED_TAGS,Bi):Ho,_o=Zd(Ae,"ALLOWED_ATTR")?os({},Ae.ALLOWED_ATTR,Bi):Pi,Pj=Zd(Ae,"ALLOWED_NAMESPACES")?os({},Ae.ALLOWED_NAMESPACES,bA):lq,Mj=Zd(Ae,"ADD_URI_SAFE_ATTR")?os(B1(VG),Ae.ADD_URI_SAFE_ATTR,Bi):VG,FG=Zd(Ae,"ADD_DATA_URI_TAGS")?os(B1(HG),Ae.ADD_DATA_URI_TAGS,Bi):HG,Lk=Zd(Ae,"FORBID_CONTENTS")?os({},Ae.FORBID_CONTENTS,Bi):LG,Wl=Zd(Ae,"FORBID_TAGS")?os({},Ae.FORBID_TAGS,Bi):{},va=Zd(Ae,"FORBID_ATTR")?os({},Ae.FORBID_ATTR,Bi):{},Ik=Zd(Ae,"USE_PROFILES")?Ae.USE_PROFILES:!1,Zl=Ae.ALLOW_ARIA_ATTR!==!1,jl=Ae.ALLOW_DATA_ATTR!==!1,yd=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,xS=Ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,lf=Ae.SAFE_FOR_TEMPLATES||!1,CR=Ae.SAFE_FOR_XML!==!1,hb=Ae.WHOLE_DOCUMENT||!1,$k=Ae.RETURN_DOM||!1,gF=Ae.RETURN_DOM_FRAGMENT||!1,hF=Ae.RETURN_TRUSTED_TYPE||!1,Dj=Ae.FORCE_BODY||!1,$G=Ae.SANITIZE_DOM!==!1,IG=Ae.SANITIZE_NAMED_PROPS||!1,Rj=Ae.KEEP_CONTENT!==!1,wR=Ae.IN_PLACE||!1,Lt=Ae.ALLOWED_URI_REGEXP||hE,Fk=Ae.NAMESPACE||pb,Ps=Ae.CUSTOM_ELEMENT_HANDLING||{},Ae.CUSTOM_ELEMENT_HANDLING&&zG(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ps.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&zG(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ps.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ps.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),lf&&(jl=!1),gF&&($k=!0),Ik&&(un=os({},yA),_o=[],Ik.html===!0&&(os(un,yN),os(_o,jd)),Ik.svg===!0&&(os(un,cC),os(_o,lC),os(_o,gE)),Ik.svgFilters===!0&&(os(un,aC),os(_o,lC),os(_o,gE)),Ik.mathMl===!0&&(os(un,iC),os(_o,SN),os(_o,gE))),Ae.ADD_TAGS&&(un===Ho&&(un=B1(un)),os(un,Ae.ADD_TAGS,Bi)),Ae.ADD_ATTR&&(_o===Pi&&(_o=B1(_o)),os(_o,Ae.ADD_ATTR,Bi)),Ae.ADD_URI_SAFE_ATTR&&os(Mj,Ae.ADD_URI_SAFE_ATTR,Bi),Ae.FORBID_CONTENTS&&(Lk===LG&&(Lk=B1(Lk)),os(Lk,Ae.FORBID_CONTENTS,Bi)),Rj&&(un["#text"]=!0),hb&&os(un,["html","head","body"]),un.table&&(os(un,["tbody"]),delete Wl.tbody),Ae.TRUSTED_TYPES_POLICY){if(typeof Ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ih('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ih('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ke=Ae.TRUSTED_TYPES_POLICY,Oe=ke.createHTML("")}else ke===void 0&&(ke=xN(F,d)),ke!==null&&typeof Oe=="string"&&(Oe=ke.createHTML(""));rl&&rl(Ae),Hk=Ae}},UG=os({},["mi","mo","mn","ms","mtext"]),WG=os({},["annotation-xml"]),fq=os({},["title","style","font","a","script"]),ZG=os({},[...cC,...aC,...CN]),jG=os({},[...iC,...fE]),gq=function(Ae){let Wt=de(Ae);(!Wt||!Wt.tagName)&&(Wt={namespaceURI:Fk,tagName:"template"});const Mn=mE(Ae.tagName),gc=mE(Wt.tagName);return Pj[Ae.namespaceURI]?Ae.namespaceURI===bF?Wt.namespaceURI===pb?Mn==="svg":Wt.namespaceURI===pF?Mn==="svg"&&(gc==="annotation-xml"||UG[gc]):!!ZG[Mn]:Ae.namespaceURI===pF?Wt.namespaceURI===pb?Mn==="math":Wt.namespaceURI===bF?Mn==="math"&&WG[gc]:!!jG[Mn]:Ae.namespaceURI===pb?Wt.namespaceURI===bF&&!WG[gc]||Wt.namespaceURI===pF&&!UG[gc]?!1:!jG[Mn]&&(fq[Mn]||!ZG[Mn]):!!(xR==="application/xhtml+xml"&&Pj[Ae.namespaceURI]):!1},cp=function(Ae){sC(s.removed,{element:Ae});try{de(Ae).removeChild(Ae)}catch{me(Ae)}},ER=function(Ae,Wt){try{sC(s.removed,{attribute:Wt.getAttributeNode(Ae),from:Wt})}catch{sC(s.removed,{attribute:null,from:Wt})}if(Wt.removeAttribute(Ae),Ae==="is"&&!_o[Ae])if($k||gF)try{cp(Wt)}catch{}else try{Wt.setAttribute(Ae,"")}catch{}},GG=function(Ae){let Wt=null,Mn=null;if(Dj)Ae="<remove></remove>"+Ae;else{const $i=vN(Ae,/^[\r\n\t ]+/);Mn=$i&&$i[0]}xR==="application/xhtml+xml"&&Fk===pb&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");const gc=ke?ke.createHTML(Ae):Ae;if(Fk===pb)try{Wt=new L().parseFromString(gc,xR)}catch{}if(!Wt||!Wt.documentElement){Wt=ot.createDocument(Fk,"template",null);try{Wt.documentElement.innerHTML=Nj?Oe:gc}catch{}}const Gl=Wt.body||Wt.documentElement;return Ae&&Mn&&Gl.insertBefore(c.createTextNode(Mn),Gl.childNodes[0]||null),Fk===pb?wt.call(Wt,hb?"html":"body")[0]:hb?Wt.documentElement:Gl},qG=function(Ae){return St.call(Ae.ownerDocument||Ae,Ae,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},KG=function(Ae){return Ae instanceof R&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof _)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function")},YG=function(Ae){return typeof y=="function"&&Ae instanceof y},bb=function(Ae,Wt,Mn){Tt[Ae]&&dE(Tt[Ae],gc=>{gc.call(s,Wt,Mn,Hk)})},XG=function(Ae){let Wt=null;if(bb("beforeSanitizeElements",Ae,null),KG(Ae))return cp(Ae),!0;const Mn=Bi(Ae.nodeName);if(bb("uponSanitizeElement",Ae,{tagName:Mn,allowedTags:un}),Ae.hasChildNodes()&&!YG(Ae.firstElementChild)&&cl(/<[/\w]/g,Ae.innerHTML)&&cl(/<[/\w]/g,Ae.textContent)||Ae.nodeType===lv.progressingInstruction||CR&&Ae.nodeType===lv.comment&&cl(/<[/\w]/g,Ae.data))return cp(Ae),!0;if(!un[Mn]||Wl[Mn]){if(!Wl[Mn]&&QG(Mn)&&(Ps.tagNameCheck instanceof RegExp&&cl(Ps.tagNameCheck,Mn)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Mn)))return!1;if(Rj&&!Lk[Mn]){const gc=de(Ae)||Ae.parentNode,Gl=ue(Ae)||Ae.childNodes;if(Gl&&gc){const $i=Gl.length;for(let Cd=$i-1;Cd>=0;--Cd){const ap=Y(Gl[Cd],!0);ap.__removalCount=(Ae.__removalCount||0)+1,gc.insertBefore(ap,ee(Ae))}}}return cp(Ae),!0}return Ae instanceof S&&!gq(Ae)||(Mn==="noscript"||Mn==="noembed"||Mn==="noframes")&&cl(/<\/no(script|embed|frames)/i,Ae.innerHTML)?(cp(Ae),!0):(lf&&Ae.nodeType===lv.text&&(Wt=Ae.textContent,dE([Rn,cs,ro],gc=>{Wt=rC(Wt,gc," ")}),Ae.textContent!==Wt&&(sC(s.removed,{element:Ae.cloneNode()}),Ae.textContent=Wt)),bb("afterSanitizeElements",Ae,null),!1)},JG=function(Ae,Wt,Mn){if($G&&(Wt==="id"||Wt==="name")&&(Mn in c||Mn in mq))return!1;if(!(jl&&!va[Wt]&&cl(Ot,Wt))){if(!(Zl&&cl(Ze,Wt))){if(!_o[Wt]||va[Wt]){if(!(QG(Ae)&&(Ps.tagNameCheck instanceof RegExp&&cl(Ps.tagNameCheck,Ae)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Ae))&&(Ps.attributeNameCheck instanceof RegExp&&cl(Ps.attributeNameCheck,Wt)||Ps.attributeNameCheck instanceof Function&&Ps.attributeNameCheck(Wt))||Wt==="is"&&Ps.allowCustomizedBuiltInElements&&(Ps.tagNameCheck instanceof RegExp&&cl(Ps.tagNameCheck,Mn)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(Mn))))return!1}else if(!Mj[Wt]){if(!cl(Lt,rC(Mn,on,""))){if(!((Wt==="src"||Wt==="xlink:href"||Wt==="href")&&Ae!=="script"&&B6(Mn,"data:")===0&&FG[Ae])){if(!(yd&&!cl(dt,rC(Mn,on,"")))){if(Mn)return!1}}}}}}return!0},QG=function(Ae){return Ae!=="annotation-xml"&&vN(Ae,pn)},eq=function(Ae){bb("beforeSanitizeAttributes",Ae,null);const{attributes:Wt}=Ae;if(!Wt)return;const Mn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_o};let gc=Wt.length;for(;gc--;){const Gl=Wt[gc],{name:$i,namespaceURI:Cd,value:ap}=Gl,TR=Bi($i);let ml=$i==="value"?ap:$6(ap);const pq=ml;if(Mn.attrName=TR,Mn.attrValue=ml,Mn.keepAttr=!0,Mn.forceKeepAttr=void 0,bb("uponSanitizeAttribute",Ae,Mn),ml=Mn.attrValue,Mn.forceKeepAttr)continue;if(!Mn.keepAttr){ER($i,Ae);continue}if(!xS&&cl(/\/>/i,ml)){ER($i,Ae);continue}lf&&dE([Rn,cs,ro],nq=>{ml=rC(ml,nq," ")});const tq=Bi(Ae.nodeName);if(!JG(tq,TR,ml)){ER($i,Ae);continue}if(IG&&(TR==="id"||TR==="name")&&(ER($i,Ae),ml=iq+ml),CR&&cl(/((--!?|])>)|<\/(style|title)/i,ml)){ER($i,Ae);continue}if(ke&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!Cd)switch(F.getAttributeType(tq,TR)){case"TrustedHTML":{ml=ke.createHTML(ml);break}case"TrustedScriptURL":{ml=ke.createScriptURL(ml);break}}if(ml!==pq)try{Cd?Ae.setAttributeNS(Cd,$i,ml):Ae.setAttribute($i,ml),KG(Ae)?cp(Ae):bN(s.removed)}catch{}}bb("afterSanitizeAttributes",Ae,null)},hq=function qn(Ae){let Wt=null;const Mn=qG(Ae);for(bb("beforeSanitizeShadowDOM",Ae,null);Wt=Mn.nextNode();)bb("uponSanitizeShadowNode",Wt,null),!XG(Wt)&&(Wt.content instanceof g&&qn(Wt.content),eq(Wt));bb("afterSanitizeShadowDOM",Ae,null)};return s.sanitize=function(qn){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Wt=null,Mn=null,gc=null,Gl=null;if(Nj=!qn,Nj&&(qn="<!-->"),typeof qn!="string"&&!YG(qn))if(typeof qn.toString=="function"){if(qn=qn.toString(),typeof qn!="string")throw Ih("dirty is not a string, aborting")}else throw Ih("toString is not a function");if(!s.isSupported)return qn;if(SR||Bj(Ae),s.removed=[],typeof qn=="string"&&(wR=!1),wR){if(qn.nodeName){const ap=Bi(qn.nodeName);if(!un[ap]||Wl[ap])throw Ih("root node is forbidden and cannot be sanitized in-place")}}else if(qn instanceof y)Wt=GG("<!---->"),Mn=Wt.ownerDocument.importNode(qn,!0),Mn.nodeType===lv.element&&Mn.nodeName==="BODY"||Mn.nodeName==="HTML"?Wt=Mn:Wt.appendChild(Mn);else{if(!$k&&!lf&&!hb&&qn.indexOf("<")===-1)return ke&&hF?ke.createHTML(qn):qn;if(Wt=GG(qn),!Wt)return $k?null:hF?Oe:""}Wt&&Dj&&cp(Wt.firstChild);const $i=qG(wR?qn:Wt);for(;gc=$i.nextNode();)XG(gc)||(gc.content instanceof g&&hq(gc.content),eq(gc));if(wR)return qn;if($k){if(gF)for(Gl=$e.call(Wt.ownerDocument);Wt.firstChild;)Gl.appendChild(Wt.firstChild);else Gl=Wt;return(_o.shadowroot||_o.shadowrootmode)&&(Gl=ft.call(i,Gl,!0)),Gl}let Cd=hb?Wt.outerHTML:Wt.innerHTML;return hb&&un["!doctype"]&&Wt.ownerDocument&&Wt.ownerDocument.doctype&&Wt.ownerDocument.doctype.name&&cl(pE,Wt.ownerDocument.doctype.name)&&(Cd="<!DOCTYPE "+Wt.ownerDocument.doctype.name+`>
`+Cd),lf&&dE([Rn,cs,ro],ap=>{Cd=rC(Cd,ap," ")}),ke&&hF?ke.createHTML(Cd):Cd},s.setConfig=function(){let qn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bj(qn),SR=!0},s.clearConfig=function(){Hk=null,SR=!1},s.isValidAttribute=function(qn,Ae,Wt){Hk||Bj({});const Mn=Bi(qn),gc=Bi(Ae);return JG(Mn,gc,Wt)},s.addHook=function(qn,Ae){typeof Ae=="function"&&(Tt[qn]=Tt[qn]||[],sC(Tt[qn],Ae))},s.removeHook=function(qn){if(Tt[qn])return bN(Tt[qn])},s.removeHooks=function(qn){Tt[qn]&&(Tt[qn]=[])},s.removeAllHooks=function(){Tt={}},s}var W6=wA();const EN=t=>W6().sanitize(t);var vu=tinymce.util.Tools.resolve("tinymce.util.I18n");const Z6={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},TN="temporary-placeholder",bE=t=>()=>ct(t,TN).getOr("!not found!"),vE=(t,s)=>{const c=t.toLowerCase();if(vu.isRtl()){const i=Xo(c,"-rtl");return zn(s,i)?i:c}else return c},kN=(t,s)=>ct(s,vE(t,s)),xA=(t,s)=>{const c=s();return kN(t,c).getOrThunk(bE(c))},dC=(t,s,c)=>{const i=s();return kN(t,i).or(c).getOrThunk(bE(i))},_N=t=>vu.isRtl()?zn(Z6,t):!1,AN=()=>dn("add-focusable",[ms(t=>{Ji(t.element,"svg").each(s=>Pe(s,"focusable","false"))})]),ON=(t,s,c,i)=>{var d,g;const h=_N(s)?["tox-icon--flip"]:[],y=ct(c,vE(s,c)).or(i).getOrThunk(bE(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:y},behaviours:Ye([...(g=t.behaviours)!==null&&g!==void 0?g:[],AN()])}},$l=(t,s,c,i=k.none())=>ON(s,t,c(),i),j6=(t,s,c)=>{const i=c(),d=Ut(t,g=>zn(i,vE(g,i)));return ON(s,d.getOr(TN),i,k.none())},G6={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},yE=ri({name:"Notification",factory:t=>{const s=xt("notification-text"),c=uo({dom:Wd(`<p id=${s}>${EN(t.backstageProvider.translate(t.text))}</p>`),behaviours:Ye([ln.config({})])}),i=j=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${j}%`}}}),d=j=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${j}%`}}),g=uo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Ye([ln.config({})])}),S={updateProgress:(j,Y)=>{j.getSystem().isConnected()&&g.getOpt(j).each(me=>{ln.set(me,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(Y)]},d(Y)])})},updateText:(j,Y)=>{if(j.getSystem().isConnected()){const me=c.get(j);ln.set(me,[Ts(Y)])}}},T=qt([t.icon.toArray(),t.level.toArray(),t.level.bind(j=>k.from(G6[j])).toArray()]),_=uo(jr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[$l("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:Ye([Cs.config({}),Qs.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:j=>{t.onAction(j)}})),R=j6(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),L={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:Ye([ln.config({})])},F=[R,L];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(j=>["tox-notification","tox-notification--in",`tox-notification--${j}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Ye([Cs.config({}),tn.config({}),Ht.config({mode:"special",onEscape:j=>(t.onAction(j),k.some(!0))})]),components:F.concat(t.progress?[g.asSpec()]:[]).concat([_.asSpec()]),apis:S}},configFields:[lo("level"),Fe("progress"),lo("icon"),Fe("onAction"),Fe("text"),Fe("iconProvider"),Fe("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var DN=(t,s,c,i)=>{const d=s.backstage.shared,g=()=>he.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const R=Os(g());return k.some(R)},y=R=>{h().each(L=>{Ke(R,F=>{cn(F.element,"width"),W(F.element)>L.width&&Le(F.element,"width",L.width+"px")})})};return{open:(R,L,F)=>{const j=()=>{const ue=ot=>{ln.remove(ot,Y),me()},de=(ot,St)=>{Bc(ot.element).length===0?ke(ot,St):Oe(ot,St)},ke=(ot,St)=>{Ns.hide(ot),i.clear(),St&&t.focus()},Oe=(ot,St)=>{St&&Ht.focusIn(ot)};i.on(ot=>{L();const St=F();ue(ot),de(ot,St)})},Y=Zr(yE.sketch({text:R.text,level:yo(["success","error","warning","warn","info"],R.type)?R.type:void 0,progress:R.progressBar===!0,icon:R.icon,onAction:j,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const ue=wi(Y);i.on(de=>{ln.append(de,ue),Ns.reposition(de),ts.refresh(de),y(de.components())})}else{const ue=Zr(Ns.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ye([Ht.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),ln.config({}),...Ph(t)&&!d.header.isPositionedAtTop()?[]:[ts.config({contextual:{lazyContext:()=>k.some(Os(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:ot=>Bh(t,ot.element).map($e=>({bounds:$h($e),optScrollEnv:k.some({currentScrollTop:$e.element.dom.scrollTop,scrollElmTop:ps($e.element).top})})).getOrThunk(()=>({bounds:Ar(),optScrollEnv:k.none()}))})]])})),de=wi(Y),ke={maxHeightFunction:Fm()},Oe={...d.anchors.banner(),overrides:ke};i.set(ue),c.add(ue),Ns.showWithinBounds(ue,de,{anchor:Oe},h)}pc(R.timeout)&&R.timeout>0&&R1.setEditorTimeout(t,()=>{j()},R.timeout);const me=()=>{i.on(ue=>{Ns.reposition(ue),ts.refresh(ue),y(ue.components())})};return{close:j,reposition:me,text:ue=>{yE.updateText(Y,ue)},settings:R,getEl:()=>Y.element.dom,progressBar:{value:ue=>{yE.updateProgress(Y,ue)}}}},close:R=>{R.close()},getArgs:R=>R.settings}};const Y6={setup:(t,s)=>{const c=(d,g)=>{Dt(d,qi(),{raw:g})},i=()=>t.getMenu().bind(st.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Tm),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(st.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var EA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(EA||(EA={}));var ad=EA;const mC="tox-menu-nav__js",uv="tox-collection__item",CE="tox-swatch",RN={normal:mC,color:CE},TA="tox-collection__item--enabled",X6="tox-collection__group-heading",SE="tox-collection__item-icon",kA="tox-collection__item-label",MN="tox-collection__item-accessory",_A="tox-collection__item-caret",$1="tox-collection__item-checkmark",I1="tox-collection__item--active",wE="tox-collection__item-container",xE="tox-collection__item-container--column",NN="tox-collection__item-container--row",PN="tox-collection__item-container--align-right",BN="tox-collection__item-container--align-left",$N="tox-collection__item-container--valign-top",AA="tox-collection__item-container--valign-middle",IN="tox-collection__item-container--valign-bottom",LN=t=>ct(RN,t).getOr(mC),FN=t=>t==="color"?"tox-swatches":"tox-menu",EE=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:FN(t),tieredMenu:"tox-tiered-menu"}),Lh=t=>{const s=EE(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:LN(t)}},HN=(t,s,c)=>{const i=EE(c);return{tag:"div",classes:qt([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},J6=[A1.parts.items({})],fC=(t,s,c)=>{const i=EE(c);return{dom:{tag:"div",classes:qt([[i.tieredMenu]])},markers:Lh(c)}},VN=le([lo("data"),ve("inputAttributes",{}),ve("inputStyles",{}),ve("tag","input"),ve("inputClasses",[]),Gn("onSetValue"),ve("styles",{}),ve("eventOrder",{}),ac("inputBehaviours",[bt,tn]),ve("selectOnFocus",!0)]),zN=t=>Ye([tn.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=Ml(c);c.dom.setSelectionRange(0,i.length)}:ce})]),Q6=t=>({...zN(t),...ic(t.inputBehaviours,[bt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Ml(s.element),setValue:(s,c)=>{Ml(s.element)!==c&&zf(s.element,c)}},onSetValue:t.onSetValue})])}),UN=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),WN=(t,s)=>({uid:t.uid,dom:UN(t),components:[],behaviours:Q6(t),eventOrder:t.eventOrder}),Gd=ri({name:"Input",configFields:VN(),factory:WN}),OA=xt("refetch-trigger-event"),ZN=xt("redirect-menu-item-interaction"),jN="tox-menu__searcher",TE=t=>ys(t.element,`.${jN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),GN=TE,e8=(t,s)=>{bt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},gC=t=>{const s=bt.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},t8=(t,s)=>{sn(s.element,"id").each(c=>Pe(t.element,"aria-activedescendant",c))},qN=t=>{const s=(d,g)=>(g.cut(),k.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Dt(d,ZN,h),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[uv]},components:[Gd.sketch({inputClasses:[jN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ye([dn(i,[Ie(ou(),d=>{An(d,OA)}),Ie(qi(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Ht.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,Ht.name()]}})]}},kE="tox-collection--results__js",DA=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:xt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},_E=(t,s)=>c=>{const i=Xt(c,s);return _e(i,d=>({dom:t,components:d}))},n8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[A1.parts.items({preprocess:t!=="auto"?_E({tag:"div",classes:["tox-swatches__row"]},t):vn})]}]}),KN=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[A1.parts.items({preprocess:_E({tag:"div",classes:["tox-collection__group"]},t)})]}),RA=(t,s)=>{const c=[];let i=[];return Ke(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],(zn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),_e(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},AE=(t,s,c)=>A1.parts.items({preprocess:i=>{const d=_e(i,c);return t!=="auto"&&t>1?_E({tag:"div",classes:["tox-collection__group"]},t)(d):RA(d,(g,h)=>s[h].type==="separator")}}),MA=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[AE(t,s,vn)]}),o8=(t,s,c=!0)=>{const i=xt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",kE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[AE(t,s,DA)]}},s8=(t,s,c)=>{const i=xt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[qN({i18n:vu.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],kE],attributes:{id:i}},components:[AE(t,s,DA)]}]}},r8=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[A1.parts.items({preprocess:c=>RA(c,(i,d)=>t[d].type==="separator")})]}),OE=t=>ks(t,s=>"icon"in s&&s.icon!==void 0),ef=t=>(console.error(vf(t)),console.log(t),k.none()),YN=(t,s,c,i,d)=>{const g=r8(c);return{value:t,dom:g.dom,components:g.components,items:c}},NA=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?MA(i,c):d.searchMode.searchMode==="search-with-field"?s8(i,c,d.searchMode):o8(i,c);if(d.menuType==="color"){const h=n8(i);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const h=MA(i,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=KN(i);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:HN(s,i,d.menuType),components:J6,items:c}},wr=zr("type"),PA=zr("name"),BA=zr("label"),fg=zr("text"),XN=zr("title"),JN=zr("icon"),L1=zr("value"),QN=El("fetch"),c8=El("getSubmenuItems"),dv=El("onAction"),eP=El("onItemAction"),F1=vs("onSetup",()=>ce),a8=Ur("name"),gg=Ur("text"),tP=Ur("role"),Il=Ur("icon"),hC=Ur("tooltip"),$A=Ur("label"),IA=Ur("shortcut"),nP=ju("select"),mv=Sc("active",!1),i8=Sc("borderless",!1),id=Sc("enabled",!0),DE=Sc("primary",!1),oP=t=>ve("columns",t),LA=ve("meta",{}),FA=vs("onAction",ce),Fh=t=>mr("type",t),RE=t=>nc("name","name",Cp(()=>xt(`${t}-name`)),pt),l8=t=>nc("value","value",Cp(()=>xt(`${t}-value`)),Sl()),sP=Yt([wr,gg]),u8=t=>Ms("separatormenuitem",sP,t),al=Yt([Fh("autocompleteitem"),mv,id,LA,L1,gg,Il]),ld=t=>Ms("Autocompleter.Separator",sP,t),rP=t=>Ms("Autocompleter.Item",al,t),H1=[id,hC,Il,gg,F1,mr("context","mode:design")],HA=Yt([wr,dv,IA].concat(H1)),pC=t=>Ms("toolbarbutton",HA,t),ME=[mv].concat(H1),bC=Yt(ME.concat([wr,dv,IA])),vC=t=>Ms("ToggleButton",bC,t),NE=[vs("predicate",Hn),Cc("scope","node",["node","editor"]),Cc("position","selection",["node","selection","line"])],cP=H1.concat([Fh("contextformbutton"),DE,dv,fo("original",vn)]),yC=ME.concat([Fh("contextformbutton"),DE,dv,fo("original",vn)]),d8=H1.concat([Fh("contextformbutton")]),m8=ME.concat([Fh("contextformtogglebutton")]),qd=rr("type",{contextformbutton:cP,contextformtogglebutton:yC}),il=Yt([Fh("contextform"),vs("initValue",le("")),$A,vi("commands",qd),Zu("launch",rr("type",{contextformbutton:d8,contextformtogglebutton:m8}))].concat(NE)),CC=t=>Ms("ContextForm",il,t),yu=Yt([Fh("contexttoolbar"),zr("items")].concat(NE)),f8=t=>Ms("ContextToolbar",yu,t),ss=[wr,zr("src"),Ur("alt"),ym("classes",[],pt)],g8=Yt(ss),V1=[wr,fg,a8,ym("classes",["tox-collection__item-label"],pt)],SC=Yt(V1),VA=Vr(()=>bf("type",{cardimage:g8,cardtext:SC,cardcontainer:zA})),zA=Yt([wr,mr("direction","horizontal"),mr("align","left"),mr("valign","middle"),vi("items",VA)]),Hh=[id,gg,tP,IA,l8("menuitem"),LA,mr("context","mode:design")],h8=Yt([wr,$A,vi("items",VA),F1,FA].concat(Hh)),UA=t=>Ms("cardmenuitem",h8,t),p8=Yt([wr,mv,Il].concat(Hh)),aP=t=>Ms("choicemenuitem",p8,t),WA=[wr,zr("fancytype"),FA],ZA=[ve("initData",{})].concat(WA),iP=[ju("select"),_S("initData",{},[Sc("allowCustomColors",!0),mr("storageKey","default"),Ap("colors",Sl())])].concat(WA),PE=rr("fancytype",{inserttable:ZA,colorswatch:iP}),b8=t=>Ms("fancymenuitem",PE,t),v8=Yt([wr,F1,FA,Il].concat(Hh)),y8=t=>Ms("menuitem",v8,t),C8=Yt([wr,c8,F1,Il].concat(Hh)),S8=t=>Ms("nestedmenuitem",C8,t),lP=Yt([wr,Il,mv,F1,dv].concat(Hh)),w8=t=>Ms("togglemenuitem",lP,t),jA=(t,s,c)=>{const i=Tc(t.element,"."+c);if(i.length>0){const d=Vn(i,g=>{const h=g.dom.getBoundingClientRect().top,y=i[0].dom.getBoundingClientRect().top;return Math.abs(h-y)>s}).getOr(i.length);return k.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return k.none()},GA=(t,s)=>Ye([dn(t,s)]),fv={namedEvents:GA,unnamedEvents:t=>GA(xt("unnamed-events"),t)},wC=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ll={item:t=>Jt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Jt.config({disabled:t}),splitButton:t=>Jt.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Jt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},BE=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},Vh=(t,s)=>ms(c=>{BE(t,c)(d=>{const g=t.onSetup(d);Nt(g)&&s.set(g)})}),zh=(t,s)=>qu(c=>BE(t,c)(s.get())),dP="silver.uistate",xC=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s==="setDisabled"&&Ke(d,g=>{g.broadcastOn([zd()],{target:i})}),Ke(d,g=>{g.broadcastOn([dP],s)})},mP=(t,s)=>{t.on("init SwitchMode",c=>{xC(s,c.type)}),t.on("NodeChange",c=>{t.ui.isEnabled()?xC(s,c.type):xC(s,"setDisabled")}),KM(t)&&t.mode.set("readonly")},gr=t=>ti.config({channels:{[dP]:{onReceive:(s,c)=>{if(c==="setDisabled"||c==="setEnabled"){Jt.set(s,c==="setDisabled");return}const{contextType:i,shouldDisable:d}=t();i==="mode"&&!yo(["switchmode","init"],c)||Jt.set(s,d)}}}}),ud=(t,s)=>Rd((c,i)=>{BE(t,c)(t.onAction),!t.triggersSubmenu&&s===ad.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&An(c,sc()),i.stop())}),E8={[xc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Uh=ya,z1=(t,s,c,i)=>{const d=$t(ce);return{type:"item",dom:s.dom,components:Uh(s.optComponents),data:t.data,eventOrder:E8,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ye([dn("item-events",[ud(t,c),Vh(t,d),zh(t,d)]),Ll.item(()=>!t.enabled||i.checkUiComponentContext(t.context).shouldDisable),gr(()=>i.checkUiComponentContext(t.context)),ln.config({})].concat(t.itemBehaviours))}},U1=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),qA=t=>{const s=M1.os.isMacOS()||M1.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=_e(g,y=>{const S=y.toLowerCase().trim();return zn(d,S)?d[S]:y});return s?h.join(""):h.join("+")},$E=(t,s,c=[SE])=>$l(t,{tag:"div",classes:c},s),KA=t=>({dom:{tag:"div",classes:[kA]},components:[Ts(vu.translate(t))]}),YA=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),T8=(t,s)=>({dom:{tag:"div",classes:[kA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ts(vu.translate(s))]}]}),k8=t=>({dom:{tag:"div",classes:[MN]},components:[Ts(qA(t))]}),fP=t=>$E("checkmark",t,[$1]),_8=t=>$E("chevron-right",t,[_A]),A8=t=>$E("chevron-down",t,[_A]),O8=(t,s)=>{const c=t.direction==="vertical"?xE:NN,i=t.align==="left"?BN:PN;return{dom:{tag:"div",classes:[wE,c,i,(()=>{switch(t.valign){case"top":return $N;case"middle":return AA;case"bottom":return IN}})()]},components:s}},D8=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),gP=(t,s,c)=>{const i="custom",d="remove",g=t.value,h=t.iconContent.map(T=>dC(T,s.icons,c)),y=t.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=CE,_=h.getOr(""),R={tag:"div",attributes:y,classes:[T]};return g===i?{...R,tag:"button",classes:[...R.classes,"tox-swatches__picker-btn"],innerHtml:_}:g===d?{...R,classes:[...R.classes,"tox-swatch--remove"],innerHtml:_}:eo(g)?{...R,attributes:{...R.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:_}:R})(),optComponents:[]}},XA=t=>{const s=t.map(c=>({attributes:{id:xt("menu-item"),"aria-label":vu.translate(c)}})).getOr({});return{tag:"div",classes:[mC,uv],...s}},hP=(t,s,c,i)=>{const d={tag:"div",classes:[SE]},g=L=>$l(L,d,s.icons,i),h=()=>k.some({dom:d}),y=c?t.iconContent.map(g).orThunk(h):k.none(),S=t.checkMark,T=k.from(t.meta).fold(()=>KA,L=>zn(L,"style")?Tn(T8,L.style):KA),_=t.htmlContent.fold(()=>t.textContent.map(T),L=>k.some(YA(L,[kA])));return{dom:XA(t.ariaLabel),optComponents:[y,_,t.shortcutContent.map(k8),S,t.caret]}},EC=(t,s,c,i=k.none())=>t.presets==="color"?gP(t,s,i):hP(t,s,c,i),pP=(t,s,c)=>ct(t,"tooltipWorker").map(i=>[Qs.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Fm}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{Qs.setComponents(d,[Iy({element:he.fromDom(h)})])})}})]).getOrThunk(()=>c.map(i=>[Qs.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),R8=t=>Mh.DOM.encode(t),W1=(t,s)=>{const c=vu.translate(t),i=R8(c);if(s.length>0){const d=new RegExp(wC(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},M8=(t,s,c,i,d,g,h,y=!0)=>{const S=EC({presets:i,textContent:k.none(),htmlContent:c?t.text.map(_=>W1(_,s)):k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:t.value},h.providers,y,t.icon),T=t.text.filter(_=>!c&&_!=="");return z1({context:"mode:design",data:U1(t),enabled:t.enabled,getApi:le({}),onAction:_=>d(t.value,t.meta),onSetup:le(ce),triggersSubmenu:!1,itemBehaviours:pP(t,h,T)},S,g,h.providers)},JA=(t,s)=>_e(t,c=>{switch(c.type){case"cardcontainer":return O8(c,JA(c.items,s));case"cardimage":return D8(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>yo(s.cardText.highlightOn,g))?k.from(s.cardText.matchText).getOr(""):"";return YA(W1(c.text,d),c.classes)}}),bP=(t,s,c,i)=>{const d=h=>({isEnabled:()=>!Jt.isDisabled(h),setEnabled:y=>{Jt.set(h,!y),Ke(Tc(h.element,"*"),S=>{h.getSystem().getByDom(S).each(T=>{T.hasConfigured(Jt)&&Jt.set(T,!y)})})}}),g={dom:XA(t.label),optComponents:[k.some({dom:{tag:"div",classes:[wE,NN]},components:JA(t.items,i)})]};return z1({context:"mode:design",data:U1({text:k.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},g,s,c.providers)},vP=(t,s,c,i,d,g,h,y=!0)=>{const S=R=>({setActive:L=>{wn.set(R,L)},isActive:()=>wn.isOn(R),isEnabled:()=>!Jt.isDisabled(R),setEnabled:L=>Jt.set(R,!L)}),T=EC({presets:c,textContent:s?t.text:k.none(),htmlContent:k.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:k.none(),checkMark:s?k.some(fP(h.icons)):k.none(),caret:k.none(),value:t.value},h,y),_=t.text.filter(le(!s)).map(R=>Qs.config(h.tooltips.getConfig({tooltipText:h.translate(R)})));return Rs(z1({context:t.context,data:U1(t),enabled:t.enabled,getApi:S,onAction:R=>i(t.value),onSetup:R=>(R.setActive(d),ce),triggersSubmenu:!1,itemBehaviours:[..._.toArray()]},T,g,h),{toggling:{toggleClass:TA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},QA=W0(Yx(),Xx()),IE=t=>({value:yP(t)}),LE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,FE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eO=t=>LE.test(t)||FE.test(t),yP=t=>Kl(t,"#").toUpperCase(),CP=t=>eO(t)?k.some({value:yP(t)}):k.none(),N8=t=>({value:t.value.replace(LE,(c,i,d,g)=>i+i+d+d+g+g)}),P8=t=>{const s=N8(t),c=FE.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},tO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},gv=t=>{const s=tO(t.red)+tO(t.green)+tO(t.blue);return IE(s)},nO=Math.min,oO=Math.max,HE=Math.round,B8=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,$8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Z1=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),sO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},SP=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=oO(0,nO(g,1)),h=oO(0,nO(h,1)),g===0)return s=c=i=HE(255*h),Z1(s,c,i,1);const y=d/60,S=h*g,T=S*(1-Math.abs(y%2-1)),_=h-S;switch(Math.floor(y)){case 0:s=S,c=T,i=0;break;case 1:s=T,c=S,i=0;break;case 2:s=0,c=S,i=T;break;case 3:s=0,c=T,i=S;break;case 4:s=T,c=0,i=S;break;case 5:s=S,c=0,i=T;break;default:s=c=i=0}return s=HE(255*(s+_)),c=HE(255*(c+_)),i=HE(255*(i+_)),Z1(s,c,i,1)},TC=t=>{const s=P8(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Z1(c,i,d,1)},wP=(t,s,c,i)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),y=parseFloat(i);return Z1(d,g,h,y)},rO=t=>{const s=B8.exec(t);if(s!==null)return k.some(wP(s[1],s[2],s[3],"1"));const c=$8.exec(t);return c!==null?k.some(wP(c[1],c[2],c[3],c[4])):k.none()},xP=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,EP=Z1(255,0,0,1),TP=t=>{t.dispatch("SkinLoaded")},I8=(t,s)=>{t.dispatch("SkinLoadError",s)},L8=t=>{t.dispatch("ResizeEditor")},cO=(t,s)=>{t.dispatch("ResizeContent",s)},F8=(t,s)=>{t.dispatch("ScrollContent",s)},kP=(t,s)=>{t.dispatch("TextColorChange",s)},VE=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},_P=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),H8=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},V8=(t,s)=>{t.dispatch("StylesTextUpdate",s)},z8=(t,s)=>{t.dispatch("AlignTextUpdate",s)},U8=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},W8=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},Z8=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},aO=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},AP=t=>{t.dispatch("ToggleSidebar")},OP=t=>{t.dispatch("ToggleView")},zE=(t,s)=>()=>{t(),s()},Da=t=>j1(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),j8=(t,s)=>c=>{const i=Xa(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},UE=(t,s)=>c=>{const i=Da(t)(c),d=j8(t,s)(c);return()=>{i(),d()}},j1=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},DP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ll=(t,s)=>()=>t.execCommand(s);var G1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const RP={},G8=(t,s=10)=>{const c=G1.getItem(t),i=bn(c)?JSON.parse(c):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),h=T=>{Ve(g,T).each(y),g.unshift(T),g.length>s&&g.pop(),G1.setItem(t,JSON.stringify(g))},y=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},MP=t=>ct(RP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=G1.getItem(s);if(Wc(c)){const d=G1.getItem("tinymce-custom-colors");G1.setItem(s,eo(d)?d:"[]")}const i=G8(s,10);return RP[t]=i,i}),q8=t=>_e(MP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),kC=(t,s)=>{MP(t).add(s)},q1=(t,s,c)=>({hue:t,saturation:s,value:c}),_C=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,h=t.blue/255,y=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(y===S)return i=y,q1(0,0,i*100);const T=d===y?g-h:h===y?d-g:h-d;return s=d===y?3:h===y?1:5,s=60*(s-T/(S-y)),c=(S-y)/S,i=S,q1(Math.round(s),Math.round(c*100),Math.round(i*100))},NP=t=>_C(TC(t)),PP=t=>gv(SP(t)),K8=t=>CP(t).orThunk(()=>rO(t).map(gv)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],y=i[3];return gv(Z1(d,g,h,y))}),AC="forecolor",OC="hilitecolor",WE=5,BP=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+K8(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},tf=t=>s=>s.options.get(t),iO="#000000",Y8=t=>{const s=t.options.register,c=d=>Gt(d,bn)?{value:BP(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=d=>pc(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:i,default:lO(t)}),s("color_cols_foreground",{processor:i,default:$P(t,AC)}),s("color_cols_background",{processor:i,default:$P(t,OC)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:iO}),s("color_default_background",{processor:"string",default:iO})},ZE=(t,s)=>s===AC&&t.options.isSet("color_map_foreground")?tf("color_map_foreground")(t):s===OC&&t.options.isSet("color_map_background")?tf("color_map_background")(t):tf("color_map")(t),lO=(t,s="default")=>Math.max(WE,Math.ceil(Math.sqrt(ZE(t,s).length))),$P=(t,s)=>{const c=tf("color_cols")(t),i=lO(t,s);return c===lO(t)?i:c},IP=(t,s="default")=>Math.round(s===AC?tf("color_cols_foreground")(t):s===OC?tf("color_cols_background")(t):tf("color_cols")(t)),LP=tf("custom_colors"),X8=tf("color_default_foreground"),J8=tf("color_default_background"),Q8="rgba(0, 0, 0, 0)",e7=t=>rO(t).exists(s=>s.alpha!==0),t7=t=>Gi(t,s=>{if($n(s)){const c=So(s,"background-color");return zt(e7(c),c)}else return k.none()}).getOr(Q8),uO=(t,s)=>{const c=he.fromDom(t.selection.getStart()),i=s==="hilitecolor"?t7(c):So(c,"color");return rO(i).map(d=>"#"+gv(d).value)},n7=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},o7=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},nf=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{n7(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{o7(t,s)})},FP=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},dO=(t,s,c,i)=>{c==="custom"?WP(t)(g=>{g.each(h=>{kC(s,h),t.execCommand("mceApplyTextcolor",s,h),i(h)})},uO(t,s).getOr(iO)):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},DC=(t,s,c)=>t.concat(q8(s).concat(FP(c))),lc=(t,s,c)=>i=>{i(DC(t,s,c))},mO=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},HP=(t,s)=>{t.setTooltip(s)},VP=(t,s)=>c=>{const i=uO(t,s);return Gs(i,c.toUpperCase())},fO=(t,s,c)=>{if(Uo(c))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=DC(ZE(t,s),s,!1),g=Ut(d,h=>h.value===c).getOr({text:""}).text;return t.translate([i,t.translate(g)])},zP=(t,s,c,i)=>{t.ui.registry.addSplitButton(s,{tooltip:fO(t,c,i.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:VP(t,c),columns:IP(t,c),fetch:lc(ZE(t,c),c,LP(t)),onAction:d=>{dO(t,c,i.get(),ce)},onItemAction:(d,g)=>{dO(t,c,g,h=>{i.set(h),kP(t,{name:s,color:h})})},onSetup:d=>{mO(d,s,i.get());const g=h=>{h.name===s&&(mO(d,h.name,h.color),HP(d,fO(t,c,h.color)))};return t.on("TextColorChange",g),zE(Da(t)(d),()=>{t.off("TextColorChange",g)})}})},UP=(t,s,c,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(HP(g,fO(t,c,d.get())),mO(g,s,d.get()),Da(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:VP(t,c),initData:{storageKey:c},onAction:g=>{dO(t,c,g.value,h=>{d.set(h),kP(t,{name:s,color:h})})}}]})},WP=t=>(s,c)=>{let i=!1;const d=y=>{const T=y.getData().colorpicker;i?(s(k.from(T)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(y,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ce,onCancel:()=>{s(k.none())}})},s7=t=>{nf(t);const s=X8(t),c=J8(t),i=$t(s),d=$t(c);zP(t,"forecolor","forecolor",i),zP(t,"backcolor","hilitecolor",d),UP(t,"forecolor","forecolor","Text color",i),UP(t,"backcolor","hilitecolor","Background color",d)},gO=(t,s,c,i,d,g,h,y)=>{const S=OE(s),_=r7(s,c,i,d!=="color"?"normal":"color",g,h,y);return NA(t,S,_,i,{menuType:d})},r7=(t,s,c,i,d,g,h)=>ya(_e(t,y=>y.type==="choiceitem"?aP(y).fold(ef,S=>k.some(vP(S,c===1,i,s,g(S.value),d,h,OE(t)))):k.none())),jE=(t,s)=>{const c=Lh(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?ys(d.element,"[aria-checked=true]"):k.none()}},c7=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${CE}`:`.${uv}`}},a7=(t,s)=>{const c=i7(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...gO(xt("menu-value"),c,y=>{t.onAction({value:y})},i,d,ad.CLOSE_ON_EXECUTE,t.select.getOr(Hn),s.shared.providers),markers:Lh(d),movement:jE(i,d),showMenuRole:!1};return{type:"widget",data:{value:xt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[QA.widget(A1.sketch(h))]}},i7=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>DC(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),i=>i.concat(FP(c)))},ZP=xt("cell-over"),jP=xt("cell-execute"),l7=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),u7=(t,s,c)=>{const i=h=>Dt(h,ZP,{row:t,col:s}),d=h=>Dt(h,jP,{row:t,col:s}),g=(h,y)=>{y.stop(),d(h)};return Zr({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:Ye([dn("insert-table-picker-cell",[Ie(Tl(),tn.focus),Ie(xc(),d),Ie(xf(),g),Ie($b(),g)]),wn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),tn.config({onFocus:i})])})},d7=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const y=t(d+1,h+1);g.push(u7(d,h,y))}i.push(g)}return i},m7=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)wn.set(t[g][h],g<=s&&h<=c)},f7=t=>pe(t,s=>_e(s,wi)),GP=(t,s)=>Ts(`${s}x${t}`),g7={inserttable:(t,s)=>{const d=l7(s),g=d7(d,10,10),h=GP(0,0),y=uo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Ye([ln.config({})])});return{type:"widget",data:{value:xt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[QA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:f7(g).concat(y.asSpec()),behaviours:Ye([dn("insert-table-picker",[ms(S=>{ln.set(y.get(S),[h])}),zb(ZP,(S,T,_)=>{const{row:R,col:L}=_.event;m7(g,R,L,10,10),ln.set(y.get(S),[GP(R+1,L+1)])}),zb(jP,(S,T,_)=>{const{row:R,col:L}=_.event;An(S,sc()),t.onAction({numRows:R+1,numColumns:L+1})})]),Ht.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:a7},h7=(t,s)=>ct(g7,t.fancytype).map(c=>c(t,s)),qP=(t,s,c,i=!0,d=!1)=>{const g=d?A8(c.icons):_8(c.icons),h=S=>({isEnabled:()=>!Jt.isDisabled(S),setEnabled:T=>Jt.set(S,!T),setIconFill:(T,_)=>{ys(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(R=>{Pe(R,"fill",_)})},setTooltip:T=>{const _=c.translate(T);Pe(S.element,"aria-label",_)}}),y=EC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.some(g),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return z1({context:t.context,data:U1(t),getApi:h,enabled:t.enabled,onAction:ce,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,c)},p7=(t,s,c,i=!0)=>{const d=h=>({isEnabled:()=>!Jt.isDisabled(h),setEnabled:y=>Jt.set(h,!y)}),g=EC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,caret:k.none(),checkMark:k.none(),shortcutContent:t.shortcut},c,i);return z1({context:t.context,data:U1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},KP=t=>({type:"separator",dom:{tag:"div",classes:[uv,X6]},components:t.text.map(Ts).toArray()}),b7=(t,s,c,i=!0)=>{const d=h=>({setActive:y=>{wn.set(h,y)},isActive:()=>wn.isOn(h),isEnabled:()=>!Jt.isDisabled(h),setEnabled:y=>Jt.set(h,!y)}),g=EC({iconContent:t.icon,textContent:t.text,htmlContent:k.none(),ariaLabel:t.text,checkMark:k.some(fP(c.icons)),caret:k.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return Rs(z1({context:t.context,data:U1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:TA,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},v7=M8,YP=KP,XP=p7,y7=qP,C7=b7,S7=h7,w7=bP;var JP=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),E7=[go("others",tu(Sn.value,Sl()))],k7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(Io(g.others).length===0)throw new Error("Cannot find any known coupled components");return ct(t,h)},c=(g,h,y)=>s(h,y).getOrThunk(()=>{const T=ct(h.others,y).getOrDie("No information found for coupled component: "+y)(g),_=g.getSystem().build(T);return t[y]=_,_}),i=(g,h,y)=>s(h,y).orThunk(()=>(ct(h.others,y).getOrDie("No information found for coupled component: "+y),k.none())),d=le({});return ua({readState:d,getExisting:i,getOrCreate:c})}});const ar=rc({fields:E7,name:"coupling",apis:JP,state:k7}),hO=t=>{let s=k.none(),c=[];const i=T=>hO(_=>{d(R=>{_(T(R))})}),d=T=>{h()?S(T):c.push(T)},g=T=>{h()||(s=k.some(T),y(c),c=[])},h=()=>s.isSome(),y=T=>{Ke(T,S)},S=T=>{s.each(_=>{setTimeout(()=>{T(_)},0)})};return t(g),{get:d,map:i,isReady:h}},_7={nu:hO,pure:t=>hO(s=>{s(t)})},A7=t=>{setTimeout(()=>{throw t},0)},hv=t=>{const s=S=>{t().then(S,A7)};return{map:S=>hv(()=>t().then(S)),bind:S=>hv(()=>t().then(T=>S(T).toPromise())),anonBind:S=>hv(()=>t().then(()=>S.toPromise())),toLazy:()=>_7.nu(s),toCached:()=>{let S=null;return hv(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},ha={nu:t=>hv(()=>new Promise(t)),pure:t=>hv(()=>Promise.resolve(t))},QP=le("sink"),eB=le(_i({name:QP(),overrides:le({dom:{tag:"div"},behaviours:Ye([_c.config({useFixed:kt})]),events:Eo([_f(qi()),_f(yi()),_f(xf())])})})),tB=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:c,overrides:d}),g=>({type:i,hotspot:c,overrides:d,layouts:g}))},nB=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},O7=(t,s,c,i,d,g,h)=>{const y=nB(t,s,i),S=qE(i,t);return y.map(T=>T.bind(_=>{const R=_.menus[_.primary];return k.from(R).each(L=>{t.listRole.each(F=>{L.role=F})}),k.from(Qm.sketch({...g.menu(),uid:Zp(""),data:_,highlightOnOpen:h,onOpenMenu:(L,F)=>{const j=S().getOrDie();_c.position(j,F,{anchor:c}),Yn.decloak(d)},onOpenSubmenu:(L,F,j)=>{const Y=S().getOrDie();_c.position(Y,j,{anchor:{type:"submenu",item:F}}),Yn.decloak(d)},onRepositionMenu:(L,F,j)=>{const Y=S().getOrDie();_c.position(Y,F,{anchor:c}),Ke(j,me=>{_c.position(Y,me.triggeredMenu,{anchor:{type:"submenu",item:me.triggeringItem}})})},onEscape:()=>(tn.focus(i),Yn.close(d),k.some(!0))}))}))},GE=(t,s,c,i,d,g,h)=>{const y=tB(t,c);return O7(t,s,y,c,i,d,h).map(T=>(T.fold(()=>{Yn.isOpen(i)&&Yn.close(i)},_=>{Yn.cloak(i),Yn.open(i,_),g(i)}),i))},D7=(t,s,c,i,d,g,h)=>(Yn.close(i),ha.pure(i)),pO=(t,s,c,i,d,g)=>{const h=ar.getCoupled(c,"sandbox");return(Yn.isOpen(h)?D7:GE)(t,s,c,h,i,d,g)},R7=(t,s,c)=>{const i=Un.getCurrent(s).getOr(s),d=W(t.element);c?Le(i.element,"min-width",d+"px"):xd(i.element,d)},qE=(t,s)=>t.getSystem().getByUid(s.uid+"-"+QP()).map(c=>()=>Sn.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>Sn.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),oB=t=>{Yn.getState(t).each(s=>{Qm.repositionMenus(s)})},bO=(t,s,c)=>{const i=Yp(),d=(y,S)=>{const T=tB(t,s);i.link(s.element),t.matchWidth&&R7(T.hotspot,S,t.useMinWidth),t.onOpen(T,y,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(y,S)},g=(y,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(y,S)},h=qE(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id}},behaviours:nl.augment(t.sandboxBehaviours,[bt.config({store:{mode:"memory",initialValue:s}}),Yn.config({onOpen:d,onClose:g,isPartOf:(y,S,T)=>Bm(S,T)||Bm(s,T),getAttachPoint:()=>h().getOrDie()}),Un.config({find:y=>Yn.getState(y).bind(S=>Un.getCurrent(S))}),ti.config({channels:{...b1({isExtraPart:Hn}),...v1({doReposition:oB})}})])}},sB=t=>{const s=ar.getCoupled(t,"sandbox");oB(s)},KE=()=>[ve("sandboxClasses",[]),nl.field("sandboxBehaviours",[Un,ti,Yn,bt])],rB=le([Fe("dom"),Fe("fetch"),Gn("onOpen"),ta("onExecute"),ve("getHotspot",k.some),ve("getAnchorOverrides",le({})),Hm(),ac("dropdownBehaviours",[wn,ar,Ht,tn]),Fe("toggleClass"),ve("eventOrder",{}),lo("lazySink"),ve("matchWidth",!1),ve("useMinWidth",!1),lo("role"),lo("listRole")].concat(KE())),M7=le([ol({schema:[Ju(),ve("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),eB()]),N7=(t,s,c,i)=>{const d=_=>ct(t.dom,"attributes").bind(R=>ct(R,_)),g=_=>{Yn.getState(_).each(R=>{Qm.highlightPrimary(R)})},h=(_,R,L)=>pO(t,vn,_,i,R,L),y=_=>{h(_,g,ai.HighlightMenuAndItem).get(ce)},S={expand:_=>{wn.isOn(_)||h(_,ce,ai.HighlightNone).get(ce)},open:_=>{wn.isOn(_)||h(_,ce,ai.HighlightMenuAndItem).get(ce)},refetch:_=>ar.getExistingCoupled(_,"sandbox").fold(()=>h(_,ce,ai.HighlightMenuAndItem).map(ce),L=>GE(t,vn,_,L,i,ce,ai.HighlightMenuAndItem).map(ce)),isOpen:wn.isOn,close:_=>{wn.isOn(_)&&h(_,ce,ai.HighlightMenuAndItem).get(ce)},repositionMenus:_=>{wn.isOn(_)&&sB(_)}},T=(_,R)=>(Tm(_),k.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.dropdownBehaviours,[wn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ar.config({others:{sandbox:_=>bO(t,_,{onOpen:()=>wn.on(_),onClose:()=>wn.off(_)})}}),Ht.config({mode:"special",onSpace:T,onEnter:T,onDown:(_,R)=>{if(ul.isOpen(_)){const L=ar.getCoupled(_,"sandbox");g(L)}else ul.open(_);return k.some(!0)},onEscape:(_,R)=>ul.isOpen(_)?(ul.close(_),k.some(!0)):k.none()}),tn.config({})]),events:K2(k.some(y)),eventOrder:{...t.eventOrder,[xc()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),_=>({role:_})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},ul=Uc({name:"Dropdown",configFields:rB(),partFields:M7(),factory:N7,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),P7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},B7=t=>{const s=bt.getValue(t),c=TE(t).map(gC);ul.refetch(s).get(()=>{const i=ar.getCoupled(s,"sandbox");c.each(d=>TE(i).each(g=>e8(g,d)))})},$7=(t,s)=>{I7(t).each(c=>{my(t,c.element,s.event.eventType,s.event.interactionEvent)})},I7=t=>Yn.getState(t).bind(st.getHighlighted).bind(st.getHighlighted),L7=t=>ka(t.element,kE)?k.some(t.element):ys(t.element,"."+kE),cB=(t,s,c)=>{GN(t).each(i=>{t8(i,c),L7(s).each(g=>{sn(g,"id").each(h=>Pe(i.element,"aria-controls",h))})}),Pe(c.element,"aria-selected","true")},YE=(t,s,c)=>{Pe(c.element,"aria-selected","false")},F7=t=>{GN(t).each(s=>tn.focus(s))},XE=t=>ar.getExistingCoupled(t,"sandbox").bind(TE).map(gC).map(c=>c.fetchPattern).getOr("");var JE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(JE||(JE={}));const H7=(t,s,c,i,d)=>{const g=c.shared.providers,h=y=>d?{...y,shortcut:k.none(),icon:y.text.isSome()?k.none():y.icon}:y;switch(t.type){case"menuitem":return y8(t).fold(ef,y=>k.some(XP(h(y),s,g,i)));case"nestedmenuitem":return S8(t).fold(ef,y=>k.some(y7(h(y),s,g,i,d)));case"togglemenuitem":return w8(t).fold(ef,y=>k.some(C7(h(y),s,g,i)));case"separator":return u8(t).fold(ef,y=>k.some(YP(y)));case"fancymenuitem":return b8(t).fold(ef,y=>S7(y,c));default:return console.error("Unknown item in general menu",t),k.none()}},V7=(t,s,c,i,d,g,h)=>{const y=i===1,S=!y||OE(t);return ya(_e(t,T=>{switch(T.type){case"separator":return ld(T).fold(ef,_=>k.some(YP(_)));case"cardmenuitem":return UA(T).fold(ef,_=>k.some(w7({..._,onAction:R=>{_.onAction(R),c(_.value,_.meta)}},d,g,{itemBehaviours:pP(_.meta,g,k.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return rP(T).fold(ef,_=>k.some(v7(_,s,y,"normal",c,d,g,S)))}}))},aB=(t,s,c,i,d,g)=>{const h=OE(s),y=ya(_e(s,_=>{const R=F=>d?!zn(F,"text"):h,L=F=>H7(F,c,i,R(F),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?L({..._,enabled:!1}):L(_)})),S=P7(g);return(d?YN:NA)(t,h,y,1,S)},iB=t=>Qm.singleData(t.value,t),QE=(t,s,c,i)=>{const d=jE(s,i),g=Lh(i);return{data:iB({...t,movement:d,menuBehaviours:fv.unnamedEvents(s!=="auto"?[]:[ms((h,y)=>{jA(h,4,g.item).each(({numColumns:S,numRows:T})=>{Ht.setGridSize(h,T,S)})})])}),menu:{markers:Lh(i),fakeFocus:c===JE.ContentFocus}}},pv=t=>w0.create(he.fromDom(t.startContainer),t.startOffset,he.fromDom(t.endContainer),t.endOffset),lB={register:(t,s)=>{const c=xt("autocompleter"),i=$t(!1),d=$t(!1),g=mo(),h=Zr(Ns.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ye([dn("dismissAutocompleter",[Ie(Si(),()=>R()),Ie(dy(),(ee,ue)=>{sn(ue.event.target,"id").each(de=>Pe(he.fromDom(t.getBody()),"aria-activedescendant",de))})])]),lazySink:s.getSink})),y=()=>Ns.isOpen(h),S=d.get,T=()=>{if(y()){Ns.hide(h),t.dom.remove(c,!1);const ee=he.fromDom(t.getBody());sn(ee,"aria-owns").filter(ue=>ue===c).each(()=>{N(ee,"aria-owns"),N(ee,"aria-activedescendant")})}},_=()=>Ns.getContent(h).bind(ee=>bo(ee.components(),0)),R=()=>t.execCommand("mceAutocompleterClose"),L=ee=>{const ue=Yo(ee,de=>k.from(de.columns)).getOr(1);return pe(ee,de=>{const ke=de.items;return V7(ke,de.matchText,(Oe,ot)=>{const St={hide:()=>R(),reload:$e=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each($e=>{i.set(!0),de.onAction(St,$e,Oe,ot),i.set(!1)})},ue,ad.BUBBLE_TO_SANDBOX,s,de.highlightOn)})},F=(ee,ue)=>{const de=Yo(ee,ke=>k.from(ke.columns)).getOr(1);Ns.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(pv),root:he.fromDom(t.getBody())}},QE(NA("autocompleter-value",!0,ue,de,{menuType:"normal"}),de,JE.ContentFocus,"normal")),_().each(st.highlightFirst)},j=ee=>{const ue=L(ee);ue.length>0?(F(ee,ue),Pe(he.fromDom(t.getBody()),"aria-owns",c),t.inline||Y()):T()},Y=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const ee=t.getDoc().documentElement,ue=t.selection.getNode(),de=Vp(h.element);yn(de,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ue.offsetTop}px`,left:`${ue.offsetLeft}px`}),t.dom.add(ee,de.dom),ys(de,'[role="menu"]').each(ke=>{cn(ke,"position"),cn(ke,"max-height")})};t.on("AutocompleterStart",({lookupData:ee})=>{d.set(!0),i.set(!1),j(ee)}),t.on("AutocompleterUpdate",({lookupData:ee})=>j(ee)),t.on("AutocompleterUpdateActiveRange",({range:ee})=>g.set(ee)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),i.set(!1),g.clear()});const me={cancelIfNecessary:R,isMenuOpen:y,isActive:S,isProcessingAction:i.get,getMenu:_};Y6.setup(me,t)}},RC=(t,s,c)=>Qu(t,s,c).isSome(),uB=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},dB=5,U7=400,mB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?k.none():k.some(s.touches[0])},W7=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>dB||i>dB},Z7=t=>{const s=mo(),c=$t(!1),i=uB(T=>{t.triggerEvent(xm(),T),c.set(!0)},U7),d=T=>(mB(T).each(_=>{i.cancel();const R={x:_.clientX,y:_.clientY,target:T.target};i.schedule(T),c.set(!1),s.set(R)}),k.none()),g=T=>(i.cancel(),mB(T).each(_=>{s.on(R=>{W7(_,R)&&s.clear()})}),k.none()),h=T=>{i.cancel();const _=R=>ao(R.target,T.target);return s.get().filter(_).map(R=>c.get()?(T.prevent(),!1):t.triggerEvent($b(),T))},y=Ig([{key:nu(),value:d},{key:Cm(),value:g},{key:Sf(),value:h}]);return{fireIfReady:(T,_)=>ct(y,_).bind(R=>R(T))}},j7=t=>t.raw.which===nn[0]&&!yo(["input","textarea"],kr(t.target))&&!RC(t.target,'[contenteditable="true"]'),G7=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=Z7(c),g=_e(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),F=>_a(t,F,j=>{d.fireIfReady(j,F).each(me=>{me&&j.kill()}),c.triggerEvent(F,j)&&j.kill()})),h=mo(),y=_a(t,"paste",F=>{d.fireIfReady(F,"paste").each(Y=>{Y&&F.kill()}),c.triggerEvent("paste",F)&&F.kill(),h.set(setTimeout(()=>{c.triggerEvent(Np(),F)},0))}),S=_a(t,"keydown",F=>{c.triggerEvent("keydown",F)?F.kill():c.stopBackspace&&j7(F)&&F.prevent()}),T=_a(t,"focusin",F=>{c.triggerEvent("focusin",F)&&F.kill()}),_=mo(),R=_a(t,"focusout",F=>{c.triggerEvent("focusout",F)&&F.kill(),_.set(setTimeout(()=>{c.triggerEvent(Ef(),F)},0))});return{unbind:()=>{Ke(g,F=>{F.unbind()}),S.unbind(),T.unbind(),R.unbind(),y.unbind(),h.on(clearTimeout),_.on(clearTimeout)}}},fB=(t,s)=>{const c=ct(t,"target").getOr(s);return $t(c)},q7=(t,s)=>{const c=$t(!1),i=$t(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},gB=t=>{const s=$t(!1);return{stop:()=>{s.set(!0)},cut:ce,isStopped:s.get,isCut:Hn,event:t,setSource:re("Cannot set source of a broadcasted event"),getSource:re("Cannot get source of a broadcasted event")}},of=Ja.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),Wh=(t,s,c,i,d,g)=>{const h=t(s,i),y=q7(c,d);return h.fold(()=>(g.logEventNoHandlers(s,i),of.complete()),S=>{const T=S.descHandler;return Nm(T)(y),y.isStopped()?(g.logEventStopped(s,S.element,T.purpose),of.stopped()):y.isCut()?(g.logEventCut(s,S.element,T.purpose),of.complete()):Qr(S.element).fold(()=>(g.logNoParent(s,S.element,T.purpose),of.complete()),R=>(g.logEventResponse(s,S.element,T.purpose),of.resume(R)))})},hB=(t,s,c,i,d,g)=>Wh(t,s,c,i,d,g).fold(kt,h=>hB(t,s,c,h,d,g),Hn),pB=(t,s,c,i,d)=>{const g=fB(c,i);return Wh(t,s,c,i,g,d)},bB=(t,s,c)=>{const i=gB(s);return Ke(t,d=>{const g=d.descHandler;Nm(g)(i)}),i.isStopped()},eT=(t,s,c,i)=>vB(t,s,c,c.target,i),vB=(t,s,c,i,d)=>{const g=fB(c,i);return hB(t,s,c,i,g,d)},MC=(t,s)=>({element:t,descHandler:s}),NC=(t,s)=>({id:t,descHandler:s}),K7=()=>{const t={},s=(h,y,S)=>{gs(S,(T,_)=>{const R=t[_]!==void 0?t[_]:{};R[y]=oh(T,h),t[_]=R})},c=(h,y)=>th(y).bind(S=>ct(h,S)).map(S=>MC(y,S));return{registerId:s,unregisterId:h=>{gs(t,(y,S)=>{zn(y,h)&&delete y[h]})},filterByType:h=>ct(t,h).map(y=>li(y,(S,T)=>NC(T,S))).getOr([]),find:(h,y,S)=>ct(t,y).bind(T=>Gi(S,_=>c(T,_),h))}},Y7=()=>{const t=K7(),s={},c=T=>{const _=T.element;return th(_).getOrThunk(()=>Oy("uid-",T.element))},i=(T,_)=>{const R=s[_];if(R===T)g(T);else throw new Error('The tagId "'+_+'" is already used by: '+Rm(R.element)+`
Cannot use it for: `+Rm(T.element)+`
The conflicting element is`+(J(R.element)?" ":" not ")+"already in the DOM")},d=T=>{const _=c(T);Kr(s,_)&&i(T,_);const R=[T];t.registerId(R,_,T.events),s[_]=T},g=T=>{th(T.element).each(_=>{delete s[_],t.unregisterId(_)})};return{find:(T,_,R)=>t.find(T,_,R),filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>ct(s,T)}},Kd=ri({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:L0(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ve("components",[]),ac("containerBehaviours",[]),ve("events",{}),ve("domModification",{}),ve("eventOrder",{})]}),vO=t=>{const s=ee=>Qr(t.element).fold(kt,ue=>ao(ee,ue)),c=Y7(),i=(ee,ue)=>c.find(s,ee,ue),d=G7(t.element,{triggerEvent:(ee,ue)=>Ay(ee,ue.target,de=>eT(i,ee,ue,de))}),g={debugInfo:le("real"),triggerEvent:(ee,ue,de)=>{Ay(ee,ue,ke=>vB(i,ee,de,ue,ke))},triggerFocus:(ee,ue)=>{th(ee).fold(()=>{Qi(ee)},de=>{Ay(su(),ee,ke=>(pB(i,su(),{originator:ue,kill:ce,prevent:ce,target:ee},ee,ke),!1))})},triggerEscape:(ee,ue)=>{g.triggerEvent("keydown",ee.element,ue.event)},getByUid:ee=>Y(ee),getByDom:ee=>me(ee),build:Zr,buildOrPatch:Ly,addToGui:ee=>{S(ee)},removeFromGui:ee=>{T(ee)},addToWorld:ee=>{h(ee)},removeFromWorld:ee=>{y(ee)},broadcast:ee=>{L(ee)},broadcastOn:(ee,ue)=>{F(ee,ue)},broadcastEvent:(ee,ue)=>{j(ee,ue)},isConnected:kt},h=ee=>{ee.connect(g),ur(ee.element)||(c.register(ee),Ke(ee.components(),h),g.triggerEvent(Lb(),ee.element,{target:ee.element}))},y=ee=>{ur(ee.element)||(Ke(ee.components(),y),c.unregister(ee)),ee.disconnect()},S=ee=>{Hd(t,ee)},T=ee=>{Vd(ee)},_=()=>{d.unbind(),wa(t.element)},R=ee=>{const ue=c.filter(ru());Ke(ue,de=>{const ke=de.descHandler;Nm(ke)(ee)})},L=ee=>{R({universal:!0,data:ee})},F=(ee,ue)=>{R({universal:!1,channels:ee,data:ue})},j=(ee,ue)=>{const de=c.filter(ee);return bB(de,ue)},Y=ee=>c.getById(ee).fold(()=>Sn.error(new Error('Could not find component with uid: "'+ee+'" in system.')),Sn.value),me=ee=>{const ue=th(ee).getOr("not found");return Y(ue)};return h(t),{root:t,element:t.element,destroy:_,add:S,remove:T,getByUid:Y,getByDom:me,addToWorld:h,removeFromWorld:y,broadcast:L,broadcastOn:F,broadcastEvent:j}},X7=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:_e(t.items,s.interpreter)}),tT=le([ve("prefix","form-field"),ac("fieldBehaviours",[Un,bt])]),J7=le([_i({schema:[Fe("dom")],name:"label"}),_i({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Fe("text")],name:"aria-descriptor"}),oa({factory:{sketch:t=>{const s=DS(t,["factory"]);return t.factory.sketch(s)}},schema:[Fe("factory")],name:"field"})]),yO=(t,s,c,i)=>{const d=ic(t.fieldBehaviours,[Un.config({find:y=>jo(y,t,"field")}),bt.config({store:{mode:"manual",getValue:y=>Un.getCurrent(y).bind(bt.getValue),setValue:(y,S)=>{Un.getCurrent(y).each(T=>{bt.setValue(T,S)})}}})]),g=Eo([ms((y,S)=>{const T=gu(y,t,["label","field","aria-descriptor"]);T.field().each(_=>{const R=xt(t.prefix);T.label().each(L=>{Pe(L.element,"for",R),Pe(_.element,"id",R)}),T["aria-descriptor"]().each(L=>{const F=xt(t.prefix);Pe(L.element,"id",F),Pe(_.element,"aria-describedby",F)})})})]),h={getField:y=>jo(y,t,"field"),getLabel:y=>jo(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},xo=Uc({name:"FormField",configFields:tT(),partFields:J7(),factory:yO,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var Q7=tinymce.util.Tools.resolve("tinymce.html.Entities");const PC=(t,s,c,i)=>{const d=eH(t,s,c,i);return xo.sketch(d)},yB=(t,s)=>PC(t,s,[],[]),eH=(t,s,c,i)=>({dom:CB(c),components:t.toArray().concat([s]),fieldBehaviours:Ye(i)}),tH=()=>CB([]),CB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),hg=(t,s)=>xo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ts(s.translate(t))]}),Oi=xt("form-component-change"),BC=xt("form-close"),Zh=xt("form-cancel"),sf=xt("form-action"),$C=xt("form-submit"),nT=xt("form-block"),oT=xt("form-unblock"),SB=xt("form-tabchange"),wB=xt("form-resize"),nH=(t,s,c)=>{const i=t.label.map(F=>hg(F,s)),d=s.icons(),g=F=>{var j;return(j=d[F])!==null&&j!==void 0?j:F},h=F=>(j,Y)=>{Qu(Y.event.target,"[data-collection-item-value]").each(me=>{F(j,Y,me,_t(me,"data-collection-item-value"))})},y=(F,j)=>{const me=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ee=_e(j,ke=>{const Oe=vu.translate(ke.text),ot=t.columns===1?`<div class="tox-collection__item-label">${Oe}</div>`:"",St=`<div class="tox-collection__item-icon">${g(ke.icon)}</div>`,$e={_:" "," - ":" ","-":" "},wt=Oe.replace(/\_| \- |\-/g,ft=>$e[ft]);return`<div data-mce-tooltip="${wt}" class="tox-collection__item${me}" tabindex="-1" data-collection-item-value="${Q7.encodeAllRaw(ke.value)}" aria-label="${wt}">${St}${ot}</div>`}),ue=t.columns!=="auto"&&t.columns>1?Xt(ee,t.columns):[ee],de=_e(ue,ke=>`<div class="tox-collection__group">${ke.join("")}</div>`);Qa(F.element,de.join(""))},S=h((F,j,Y,me)=>{j.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Dt(F,sf,{name:t.name,value:me})}),T=[Ie(Tl(),h((F,j,Y)=>{Qi(Y,!0)})),Ie(xf(),S),Ie($b(),S),Ie(kl(),h((F,j,Y)=>{ys(F.element,"."+I1).each(me=>{To(me,I1)}),fr(Y,I1)})),Ie(MS(),h(F=>{ys(F.element,"."+I1).each(j=>{To(j,I1),ah(j)})})),Rd(h((F,j,Y,me)=>{Dt(F,sf,{name:t.name,value:me})}))],_=(F,j)=>_e(Tc(F.element,".tox-collection__item"),j),R=xo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:vn},behaviours:Ye([Jt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:F=>{_(F,j=>{fr(j,"tox-collection__item--state-disabled"),Pe(j,"aria-disabled",!0)})},onEnabled:F=>{_(F,j=>{To(j,"tox-collection__item--state-disabled"),N(j,"aria-disabled")})}}),gr(()=>s.checkUiComponentContext(t.context)),ln.config({}),Qs.config({...s.tooltips.getConfig({tooltipText:"",onShow:F=>{ys(F.element,"."+I1+"[data-mce-tooltip]").each(j=>{sn(j,"data-mce-tooltip").each(Y=>{Qs.setComponents(F,s.tooltips.getComponents({tooltipText:Y}))})})}}),mode:"children-keyboard-focus",anchor:F=>({type:"node",node:ys(F.element,"."+I1).orThunk(()=>yw(".tox-collection__item")),root:F.element,layouts:{onLtr:le([Cr,wo,Rr,Ec,Mr,Nr]),onRtl:le([Cr,wo,Rr,Ec,Mr,Nr])},bubble:Nl(0,-2,{})})}),bt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(F,j)=>{y(F,j),t.columns==="auto"&&jA(F,5,"tox-collection__item").each(({numRows:Y,numColumns:me})=>{Ht.setGridSize(F,Y,me)}),An(F,wB)}}),Cs.config({}),Ht.config(c7(t.columns,"normal")),dn("collection-events",T)]),eventOrder:{[xc()]:["disabling","alloy.base.behaviour","collection-events"],[kl()]:["collection-events","tooltipping"]}});return PC(i,R,["tox-form__group--collection"],[])},oH=["input","textarea"],xB=t=>{const s=kr(t);return yo(oH,s)},CO=(t,s)=>{const c=s.getRoot(t).getOr(t.element);To(c,s.invalidClass),s.notify.each(i=>{xB(t.element)&&Pe(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Qa(d,i.validHtml)}),i.onValid(t)})},K1=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);fr(d,s.invalidClass),s.notify.each(g=>{xB(t.element)&&Pe(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Qa(h,i)}),g.onInvalid(t,i)})},EB=(t,s,c)=>s.validator.fold(()=>ha.pure(Sn.value(!0)),i=>i.validate(t)),SO=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),EB(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(K1(t,s,c,d),Sn.error(d)),d=>(CO(t,s),Sn.value(d))):Sn.error("No longer in system")));var sT=Object.freeze({__proto__:null,markValid:CO,markInvalid:K1,query:EB,run:SO,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return ka(c,s.invalidClass)}}),wO=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>Eo([Ie(c.onEvent,i=>{SO(i,t,s).get(vn)})].concat(c.validateOnLoad?[ms(i=>{SO(i,t,s).get(ce)})]:[]))).getOr({})}),TB=[Fe("invalidClass"),ve("getRoot",k.none),oc("notify",[ve("aria","alert"),ve("getContainer",k.none),ve("validHtml",""),Gn("onValid"),Gn("onInvalid"),Gn("onValidate")]),oc("validator",[Fe("validate"),ve("onEvent","input"),ve("validateOnLoad",!0)])];const rf=rc({fields:TB,name:"invalidating",active:wO,apis:sT,extra:{validation:t=>s=>{const c=bt.getValue(s);return ha.pure(t(c))}}});var sH=Object.freeze({__proto__:null,events:()=>Eo([fy(Wk(),kt)]),exhibit:()=>Ta({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const bv=rc({fields:[],name:"unselecting",active:sH}),kB=(t,s)=>ul.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Ye([Ll.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),gr(()=>s.providers.checkUiComponentContext(t.context)),bv.config({}),Cs.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>ha.nu(i=>t.fetch(i)).map(i=>k.from(iB(Rs(gO(xt("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,ad.CLOSE_ON_EXECUTE,Hn,s.providers),{movement:jE(t.columns,t.presets)})))),parts:{menu:fC(!1,1,t.presets)}}),_B=xt("color-input-change"),AB=xt("color-swatch-change"),xO=xt("color-picker-cancel"),rH=(t,s,c,i)=>{const d=xo.parts.field({factory:Gd,inputClasses:["tox-textfield"],data:i,onSetValue:T=>rf.run(T).get(ce),inputBehaviours:Ye([Jt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.providers.checkUiComponentContext(t.context)),Cs.config({}),rf.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Pc(T.element),notify:{onValid:T=>{const _=bt.getValue(T);Dt(T,_B,{color:_})}},validator:{validateOnLoad:!1,validate:T=>{const _=bt.getValue(T);if(_.length===0)return ha.pure(Sn.value(!0));{const R=he.fromTag("span");Le(R,"background-color",_);const L=Do(R,"background-color").fold(()=>Sn.error("blah"),F=>Sn.value(_));return ha.pure(L)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>hg(T,s.providers)),h=(T,_)=>{Dt(T,AB,{value:_})},y=(T,_)=>{S.getOpt(T).each(R=>{_==="custom"?c.colorPicker(L=>{L.fold(()=>An(R,xO),F=>{h(R,F),kC(t.storageKey,F)})},"#ffffff"):_==="remove"?h(R,""):h(R,_)})},S=uo(kB({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Mr,Rr,Cr],onLtr:()=>[Rr,Mr,Cr]},components:[],fetch:lc(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:y,context:t.context},s));return xo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Ye([dn("form-field-events",[Ie(_B,(T,_)=>{S.getOpt(T).each(R=>{Le(R.element,"background-color",_.event.color)}),Dt(T,Oi,{name:t.name})}),Ie(AB,(T,_)=>{xo.getField(T).each(R=>{bt.setValue(R,_.event.value),Un.getCurrent(T).each(tn.focus)})}),Ie(xO,(T,_)=>{xo.getField(T).each(R=>{Un.getCurrent(T).each(tn.focus)})})])])})},OB=_i({schema:[Fe("dom")],name:"label"}),pg=t=>_i({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Eo([Vg(nu(),(d,g,h)=>i(d,h),[s]),Vg(yi(),(d,g,h)=>i(d,h),[s]),Vg(Rp(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),DB=pg("top-left"),cH=pg("top"),aH=pg("top-right"),iH=pg("right"),lH=pg("bottom-right"),uH=pg("bottom"),dH=pg("bottom-left"),EO=pg("left"),mH=oa({name:"thumb",defaults:le({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Eo([Dd(nu(),t,"spectrum"),Dd(Cm(),t,"spectrum"),Dd(Sf(),t,"spectrum"),Dd(yi(),t,"spectrum"),Dd(Rp(),t,"spectrum"),Dd(Pb(),t,"spectrum")])})}),rT=t=>Pr(t.event),RB=oa({schema:[fo("mouseIsDown",()=>$t(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:Ye([Ht.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,rT(g)),onRight:(d,g)=>c.onRight(d,t,rT(g)),onUp:(d,g)=>c.onUp(d,t,rT(g)),onDown:(d,g)=>c.onDown(d,t,rT(g))}),Cs.config({}),tn.config({})]),events:Eo([Ie(nu(),i),Ie(Cm(),i),Ie(yi(),i),Ie(Rp(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var fH=[OB,EO,iH,cH,uH,DB,aH,dH,lH,mH,RB];const IC=le("slider.change.value"),gH=t=>t.type.indexOf("touch")!==-1,TO=t=>{const s=t.event.raw;if(gH(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?k.some(c.touches[0]).map(i=>us(i.clientX,i.clientY)):k.none()}else{const c=s;return c.clientX!==void 0?k.some(c).map(i=>us(i.clientX,i.clientY)):k.none()}},hH="top",pH="right",MB="bottom",NB="left",Y1=t=>t.model.minX,X1=t=>t.model.minY,cT=t=>t.model.minX-1,aT=t=>t.model.minY-1,J1=t=>t.model.maxX,Q1=t=>t.model.maxY,LC=t=>t.model.maxX+1,FC=t=>t.model.maxY+1,kO=(t,s,c)=>s(t)-c(t),HC=t=>kO(t,J1,Y1),_O=t=>kO(t,Q1,X1),AO=t=>HC(t)/2,PB=t=>_O(t)/2,vv=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,BB=t=>t.snapToGrid,$B=t=>t.snapStart,iT=t=>t.rounded,md=(t,s)=>t[s+"-edge"]!==void 0,IB=t=>md(t,NB),yv=t=>md(t,pH),LB=t=>md(t,hH),lT=t=>md(t,MB),bg=t=>t.model.value.get(),jh=(t,s)=>({x:t,y:s}),fd=(t,s)=>{Dt(t,IC(),{value:s})},FB=(t,s)=>{fd(t,jh(cT(s),aT(s)))},bH=(t,s)=>{fd(t,aT(s))},OO=(t,s)=>{fd(t,jh(AO(s),aT(s)))},DO=(t,s)=>{fd(t,jh(LC(s),aT(s)))},RO=(t,s)=>{fd(t,LC(s))},vH=(t,s)=>{fd(t,jh(LC(s),PB(s)))},Fl=(t,s)=>{fd(t,jh(LC(s),FC(s)))},yH=(t,s)=>{fd(t,FC(s))},CH=(t,s)=>{fd(t,jh(AO(s),FC(s)))},HB=(t,s)=>{fd(t,jh(cT(s),FC(s)))},VB=(t,s)=>{fd(t,cT(s))},SH=(t,s)=>{fd(t,jh(cT(s),PB(s)))},MO=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),NO=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),zB=(t,s,c)=>Math.max(s,Math.min(c,t)),wH=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/i)*i;return zB(s+h,s-1,c+1)},g=>{const h=(t-g)%i,y=Math.round(h/i),S=Math.floor((t-g)/i),T=Math.floor((c-g)/i),_=Math.min(T,S+y),R=g+_*i;return Math.max(g,R)}),xH=(t,s,c)=>Math.min(c,Math.max(t,s))-s,UB=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:h,snapStart:y,rounded:S,hasMinEdge:T,hasMaxEdge:_,minBound:R,maxBound:L,screenRange:F}=t,j=T?s-1:s,Y=_?c+1:c;if(d<R)return j;if(d>L)return Y;{const me=xH(d,R,L),ee=zB(me/F*i+s,j,Y);return h&&ee>=s&&ee<=c?wH(ee,s,c,g,y):S?Math.round(ee):ee}},PO=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:y,maxOffset:S,centerMinEdge:T,centerMaxEdge:_}=t;return d<s?g?0:T:d>c?h?y:_:(d-s)/i*S},BO="top",WB="right",ZB="bottom",uT="left",$O="width",jB="height",Yd=t=>t.element.dom.getBoundingClientRect(),Cu=(t,s)=>t[s],VC=t=>{const s=Yd(t);return Cu(s,uT)},dT=t=>{const s=Yd(t);return Cu(s,WB)},mT=t=>{const s=Yd(t);return Cu(s,BO)},fT=t=>{const s=Yd(t);return Cu(s,ZB)},eb=t=>{const s=Yd(t);return Cu(s,$O)},IO=t=>{const s=Yd(t);return Cu(s,jB)},LO=(t,s,c)=>(t+s)/2-c,FO=(t,s)=>{const c=Yd(t),i=Yd(s),d=Cu(c,uT),g=Cu(c,WB),h=Cu(i,uT);return LO(d,g,h)},GB=(t,s)=>{const c=Yd(t),i=Yd(s),d=Cu(c,BO),g=Cu(c,ZB),h=Cu(i,BO);return LO(d,g,h)},gT=(t,s)=>{Dt(t,IC(),{value:s})},Cv=(t,s,c)=>{const i={min:Y1(s),max:J1(s),range:HC(s),value:c,step:vv(s),snap:BB(s),snapStart:$B(s),rounded:iT(s),hasMinEdge:IB(s),hasMaxEdge:yv(s),minBound:VC(t),maxBound:dT(t),screenRange:eb(t)};return UB(i)},EH=(t,s,c)=>{const i=Cv(t,s,c);return gT(t,i),i},TH=(t,s)=>{const c=Y1(s);gT(t,c)},qB=(t,s)=>{const c=J1(s);gT(t,c)},KB=(t,s,c,i)=>{const g=(t>0?NO:MO)(bg(c),Y1(c),J1(c),vv(c,i));return gT(s,g),k.some(g)},hT=t=>(s,c,i)=>KB(t,s,c,i).map(kt),YB=t=>TO(t).map(c=>c.left),ii=(t,s,c,i,d)=>{const h=eb(t),y=i.bind(_=>k.some(FO(_,t))).getOr(0),S=d.bind(_=>k.some(FO(_,t))).getOr(h),T={min:Y1(s),max:J1(s),range:HC(s),value:c,hasMinEdge:IB(s),hasMaxEdge:yv(s),minBound:VC(t),minOffset:0,maxBound:dT(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:S};return PO(T)},pT=(t,s,c,i,d,g)=>{const h=ii(s,g,c,i,d);return VC(s)-VC(t)+h},kH=(t,s,c,i)=>{const d=bg(c),g=pT(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),h=W(s.element)/2;Le(s.element,"left",g-h+"px")},_H=hT(-1),XB=hT(1),AH=k.none,OH=k.none,DH={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some(RO),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some(VB)};var JB=Object.freeze({__proto__:null,setValueFrom:EH,setToMin:TH,setToMax:qB,findValueOfOffset:Cv,getValueFromEvent:YB,findPositionOfValue:pT,setPositionFromValue:kH,onLeft:_H,onRight:XB,onUp:AH,onDown:OH,edgeActions:DH});const Su=(t,s)=>{Dt(t,IC(),{value:s})},zC=(t,s,c)=>{const i={min:X1(s),max:Q1(s),range:_O(s),value:c,step:vv(s),snap:BB(s),snapStart:$B(s),rounded:iT(s),hasMinEdge:LB(s),hasMaxEdge:lT(s),minBound:mT(t),maxBound:fT(t),screenRange:IO(t)};return UB(i)},QB=(t,s,c)=>{const i=zC(t,s,c);return Su(t,i),i},bT=(t,s)=>{const c=X1(s);Su(t,c)},HO=(t,s)=>{const c=Q1(s);Su(t,c)},RH=(t,s,c,i)=>{const g=(t>0?NO:MO)(bg(c),X1(c),Q1(c),vv(c,i));return Su(s,g),k.some(g)},e5=t=>(s,c,i)=>RH(t,s,c,i).map(kt),MH=t=>TO(t).map(c=>c.top),NH=(t,s,c,i,d)=>{const h=IO(t),y=i.bind(_=>k.some(GB(_,t))).getOr(0),S=d.bind(_=>k.some(GB(_,t))).getOr(h),T={min:X1(s),max:Q1(s),range:_O(s),value:c,hasMinEdge:LB(s),hasMaxEdge:lT(s),minBound:mT(t),minOffset:0,maxBound:fT(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:S};return PO(T)},VO=(t,s,c,i,d,g)=>{const h=NH(s,g,c,i,d);return mT(s)-mT(t)+h},PH=(t,s,c,i)=>{const d=bg(c),g=VO(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),h=Po(s.element)/2;Le(s.element,"top",g-h+"px")},BH=k.none,t5=k.none,$H=e5(-1),cf=e5(1),vT={"top-left":k.none(),top:k.some(bH),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some(yH),"bottom-left":k.none(),left:k.none()};var IH=Object.freeze({__proto__:null,setValueFrom:QB,setToMin:bT,setToMax:HO,findValueOfOffset:zC,getValueFromEvent:MH,findPositionOfValue:VO,setPositionFromValue:PH,onLeft:BH,onRight:t5,onUp:$H,onDown:cf,edgeActions:vT});const yT=(t,s)=>{Dt(t,IC(),{value:s})},UC=(t,s)=>({x:t,y:s}),n5=(t,s,c)=>{const i=Cv(t,s,c.left),d=zC(t,s,c.top),g=UC(i,d);return yT(t,g),g},zO=(t,s,c,i,d)=>{const g=t>0?NO:MO,h=s?bg(i).x:g(bg(i).x,Y1(i),J1(i),vv(i,d)),y=s?g(bg(i).y,X1(i),Q1(i),vv(i,d)):bg(i).y;return yT(c,UC(h,y)),k.some(h)},tb=(t,s)=>(c,i,d)=>zO(t,s,c,i,d).map(kt),WC=(t,s)=>{const c=Y1(s),i=X1(s);yT(t,UC(c,i))},ZC=(t,s)=>{const c=J1(s),i=Q1(s);yT(t,UC(c,i))},o5=t=>TO(t),s5=(t,s,c,i)=>{const d=bg(c),g=pT(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),h=VO(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),y=W(s.element)/2,S=Po(s.element)/2;Le(s.element,"left",g-y+"px"),Le(s.element,"top",h-S+"px")},r5=tb(-1,!1),c5=tb(1,!1),LH=tb(-1,!0),FH=tb(1,!0),HH={"top-left":k.some(FB),top:k.some(OO),"top-right":k.some(DO),right:k.some(vH),"bottom-right":k.some(Fl),bottom:k.some(CH),"bottom-left":k.some(HB),left:k.some(SH)};var VH=Object.freeze({__proto__:null,setValueFrom:n5,setToMin:WC,setToMax:ZC,getValueFromEvent:o5,setPositionFromValue:s5,onLeft:r5,onRight:c5,onUp:LH,onDown:FH,edgeActions:HH});const zH=[ve("stepSize",1),ve("speedMultiplier",10),ve("onChange",ce),ve("onChoose",ce),ve("onInit",ce),ve("onDragStart",ce),ve("onDragEnd",ce),ve("snapToGrid",!1),ve("rounded",!0),lo("snapStart"),go("model",rr("mode",{x:[ve("minX",0),ve("maxX",100),fo("value",t=>$t(t.mode.minX)),Fe("getInitialValue"),es("manager",JB)],y:[ve("minY",0),ve("maxY",100),fo("value",t=>$t(t.mode.minY)),Fe("getInitialValue"),es("manager",IH)],xy:[ve("minX",0),ve("maxX",100),ve("minY",0),ve("maxY",100),fo("value",t=>$t({x:t.mode.minX,y:t.mode.minY})),Fe("getInitialValue"),es("manager",VH)]})),ac("sliderBehaviours",[Ht,bt]),fo("mouseIsDown",()=>$t(!1))],wu=Uc({name:"Slider",configFields:zH,partFields:fH,factory:(t,s,c,i)=>{const d=Oe=>vt(Oe,t,"thumb"),g=Oe=>vt(Oe,t,"spectrum"),h=Oe=>jo(Oe,t,"left-edge"),y=Oe=>jo(Oe,t,"right-edge"),S=Oe=>jo(Oe,t,"top-edge"),T=Oe=>jo(Oe,t,"bottom-edge"),_=t.model,R=_.manager,L=(Oe,ot)=>{R.setPositionFromValue(Oe,ot,t,{getLeftEdge:h,getRightEdge:y,getTopEdge:S,getBottomEdge:T,getSpectrum:g})},F=(Oe,ot)=>{_.value.set(ot);const St=d(Oe);L(Oe,St)},j=(Oe,ot)=>{F(Oe,ot);const St=d(Oe);return t.onChange(Oe,St,ot),k.some(!0)},Y=Oe=>{R.setToMin(Oe,t)},me=Oe=>{R.setToMax(Oe,t)},ee=Oe=>{const ot=()=>{jo(Oe,t,"thumb").each($e=>{const wt=_.value.get();t.onChoose(Oe,$e,wt)})},St=t.mouseIsDown.get();t.mouseIsDown.set(!1),St&&ot()},ue=(Oe,ot)=>{ot.stop(),t.mouseIsDown.set(!0),t.onDragStart(Oe,d(Oe))},de=(Oe,ot)=>{ot.stop(),t.onDragEnd(Oe,d(Oe)),ee(Oe)},ke=Oe=>{jo(Oe,t,"spectrum").map(Ht.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.sliderBehaviours,[Ht.config({mode:"special",focusIn:ke}),bt.config({store:{mode:"manual",getValue:Oe=>_.value.get(),setValue:F}}),ti.config({channels:{[P0()]:{onReceive:ee}}})]),events:Eo([Ie(IC(),(Oe,ot)=>{j(Oe,ot.event.value)}),ms((Oe,ot)=>{const St=_.getInitialValue();_.value.set(St);const $e=d(Oe);L(Oe,$e);const wt=g(Oe);t.onInit(Oe,$e,wt,_.value.get())}),Ie(nu(),ue),Ie(Sf(),de),Ie(yi(),(Oe,ot)=>{ke(Oe),ue(Oe,ot)}),Ie(Pb(),de)]),apis:{resetToMin:Y,resetToMax:me,setValue:F,refresh:L},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),UO=xt("rgb-hex-update"),WO=xt("slider-update"),a5=xt("palette-update"),i5=(t,s)=>{const c=wu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=wu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return wu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:le(0)},components:[c,i],sliderBehaviours:Ye([tn.config({})]),onChange:(d,g,h)=>{Pe(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Dt(d,WO,{value:h})}})},Sv="form",WH=[ac("formBehaviours",[bt])],ZO=t=>"<alloy.field."+t+">",ZH=t=>{const s=(()=>{const g=[];return{field:(y,S)=>(g.push(y),Z0(Sv,ZO(y),S)),record:le(g)}})(),c=t(s),i=s.record(),d=_e(i,g=>oa({name:g,pname:ZO(g)}));return x1(Sv,WH,d,GH,c)},jH=(t,s)=>t.fold(()=>Sn.error(s),Sn.value),GH=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.formBehaviours,[bt.config({store:{mode:"manual",getValue:c=>{const i=Rx(c,t);return jn(i,(d,g)=>d().bind(h=>{const y=Un.getCurrent(h);return jH(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Rm(h.element)))}).map(bt.getValue))},setValue:(c,i)=>{gs(i,(d,g)=>{jo(c,t,g).each(h=>{Un.getCurrent(h).each(y=>{bt.setValue(y,d)})})})}}})]),apis:{getField:(c,i)=>jo(c,t,i).bind(Un.getCurrent)}}),wv={getField:o0((t,s,c)=>t.getField(s,c)),sketch:ZH},jO=xt("valid-input"),l5=xt("invalid-input"),GO=xt("validating-input"),jC="colorcustom.rgb.",vg={isEnabled:kt,setEnabled:ce,immediatelyShow:ce,immediatelyHide:ce},qO=(t,s,c,i,d,g)=>{const h=(Y,me)=>{const ee=me.get();Y!==ee.isEnabled()&&(ee.setEnabled(Y),Y?ee.immediatelyShow():ee.immediatelyHide())},y=(Y,me,ee)=>rf.config({invalidClass:s("invalid"),notify:{onValidate:ue=>{Dt(ue,GO,{type:Y})},onValid:ue=>{h(!1,ee),Dt(ue,jO,{type:Y,value:bt.getValue(ue)})},onInvalid:ue=>{h(!0,ee),Dt(ue,l5,{type:Y,value:bt.getValue(ue)})}},validator:{validate:ue=>{const de=bt.getValue(ue),ke=me(de)?Sn.value(!0):Sn.error(t("aria.input.invalid"));return ha.pure(ke)},validateOnLoad:!1}}),S=(Y,me,ee,ue,de)=>{const ke=$t(vg),Oe=t(jC+"range"),ot=xo.parts.label({dom:{tag:"label",attributes:{"aria-label":ue}},components:[Ts(ee)]}),St=xo.parts.field({data:de,factory:Gd,inputAttributes:{type:"text",...me==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ye([y(me,Y,ke),Cs.config({}),Qs.config({...d({tooltipText:"",onSetup:ro=>{ke.set({isEnabled:()=>Qs.isEnabled(ro),setEnabled:Ot=>Qs.setEnabled(ro,Ot),immediatelyShow:()=>Qs.immediateOpenClose(ro,!0),immediatelyHide:()=>Qs.immediateOpenClose(ro,!1)}),Qs.setEnabled(ro,!1)},onShow:(ro,Ot)=>{Qs.setComponents(ro,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Ts(t(me==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:ro=>{rf.isInvalid(ro)&&rf.run(ro).get(ce)}}),$e=xt("aria-invalid"),wt=uo(g("invalid",k.some($e),"warning")),ft=uo({dom:{tag:"div",classes:[s("invalid-icon")]},components:[wt.asSpec()]}),Tt=[ot,St,ft.asSpec()],Rn=me!=="hex"?[xo.parts["aria-descriptor"]({text:Oe})]:[],cs=Tt.concat(Rn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:cs}},T=(Y,me)=>{const ee=gv(me);return wv.getField(Y,"hex").each(ue=>{tn.isFocused(ue)||bt.setValue(Y,{hex:ee.value})}),ee},_=(Y,me)=>{const ee=me.red,ue=me.green,de=me.blue;bt.setValue(Y,{red:ee,green:ue,blue:de})},R=uo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),L=(Y,me)=>{R.getOpt(Y).each(ee=>{Le(ee.element,"background-color","#"+me.value)})};return ri({factory:()=>{const Y={red:$t(k.some(255)),green:$t(k.some(255)),blue:$t(k.some(255)),hex:$t(k.some("ffffff"))},me=(Ot,Ze)=>{const dt=TC(Ze);_(Ot,dt),ke(dt)},ee=Ot=>Y[Ot].get(),ue=(Ot,Ze)=>{Y[Ot].set(Ze)},de=()=>ee("red").bind(Ot=>ee("green").bind(Ze=>ee("blue").map(dt=>Z1(Ot,Ze,dt,1)))),ke=Ot=>{const Ze=Ot.red,dt=Ot.green,on=Ot.blue;ue("red",k.some(Ze)),ue("green",k.some(dt)),ue("blue",k.some(on))},Oe=(Ot,Ze)=>{const dt=Ze.event;dt.type!=="hex"?ue(dt.type,k.none()):i(Ot)},ot=(Ot,Ze)=>{c(Ot);const dt=IE(Ze);ue("hex",k.some(dt.value));const on=TC(dt);_(Ot,on),ke(on),Dt(Ot,UO,{hex:dt}),L(Ot,dt)},St=(Ot,Ze,dt)=>{const on=parseInt(dt,10);ue(Ze,k.some(on)),de().each(pn=>{const Lt=T(Ot,pn);Dt(Ot,UO,{hex:Lt}),L(Ot,Lt)})},$e=Ot=>Ot.type==="hex",wt=(Ot,Ze)=>{const dt=Ze.event;$e(dt)?ot(Ot,dt.value):St(Ot,dt.type,dt.value)},ft=Ot=>({label:t(jC+Ot+".label"),description:t(jC+Ot+".description")}),Tt=ft("red"),Rn=ft("green"),cs=ft("blue"),ro=ft("hex");return Rs(wv.sketch(Ot=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Ot.field("red",xo.sketch(S(sO,"red",Tt.label,Tt.description,255))),Ot.field("green",xo.sketch(S(sO,"green",Rn.label,Rn.description,255))),Ot.field("blue",xo.sketch(S(sO,"blue",cs.label,cs.description,255))),Ot.field("hex",xo.sketch(S(eO,"hex",ro.label,ro.description,"ffffff"))),R.asSpec()],formBehaviours:Ye([rf.config({invalidClass:s("form-invalid")}),dn("rgb-form-events",[Ie(jO,wt),Ie(l5,Oe),Ie(GO,Oe)])])})),{apis:{updateHex:(Ot,Ze)=>{bt.setValue(Ot,{hex:Ze.value}),me(Ot,Ze),L(Ot,Ze)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Y,me,ee)=>{Y.updateHex(me,ee)}},extraApis:{}})},u5=(t,s)=>{const c=wu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=wu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,_)=>{const{width:R,height:L}=T,F=T.getContext("2d");if(F===null)return;F.fillStyle=_,F.fillRect(0,0,R,L);const j=F.createLinearGradient(0,0,R,0);j.addColorStop(0,"rgba(255,255,255,1)"),j.addColorStop(1,"rgba(255,255,255,0)"),F.fillStyle=j,F.fillRect(0,0,R,L);const Y=F.createLinearGradient(0,0,0,L);Y.addColorStop(0,"rgba(0,0,0,0)"),Y.addColorStop(1,"rgba(0,0,0,1)"),F.fillStyle=Y,F.fillRect(0,0,R,L)},g=(T,_)=>{const R=T.components()[0].element.dom,L=q1(_,100,100),F=SP(L);d(R,xP(F))},h=(T,_)=>{const R=_C(TC(_));wu.setValue(T,{x:R.saturation,y:100-R.value}),Pe(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",R.saturation,R.value]))};return ri({factory:T=>{const _=le({x:0,y:0}),R=(j,Y,me)=>{pc(me)||Pe(j.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(me.x),Math.floor(100-me.y)])),Dt(j,a5,{value:me})},L=(j,Y,me,ee)=>{d(me.element.dom,xP(EP))},F=Ye([Un.config({find:k.some}),tn.config({})]);return wu.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[c,i],onChange:R,onInit:L,sliderBehaviours:F})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,_,R)=>{g(_,R)},setThumb:(T,_,R)=>{h(_,R)}},extraApis:{}})},d5=(t,s,c,i)=>{const d=h=>{const y=qO(t,s,h.onValidHex,h.onInvalidHex,c,i),S=u5(t,s),T=$e=>(100-$e)/100*360,_=$e=>100-$e/360*100,R={paletteRgba:$t(EP),paletteHue:$t(0)},L=uo(i5(t,s)),F=uo(S.sketch({})),j=uo(y.sketch({})),Y=($e,wt,ft)=>{F.getOpt($e).each(Tt=>{S.setHue(Tt,ft)})},me=($e,wt)=>{j.getOpt($e).each(ft=>{y.updateHex(ft,wt)})},ee=($e,wt,ft)=>{L.getOpt($e).each(Tt=>{wu.setValue(Tt,_(ft))})},ue=($e,wt)=>{F.getOpt($e).each(ft=>{S.setThumb(ft,wt)})},de=($e,wt)=>{const ft=TC($e);R.paletteRgba.set(ft),R.paletteHue.set(wt)},ke=($e,wt,ft,Tt)=>{de(wt,ft),Ke(Tt,Rn=>{Rn($e,wt,ft)})},Oe=()=>{const $e=[me];return(wt,ft)=>{const Tt=ft.event.value,Rn=R.paletteHue.get(),cs=q1(Rn,Tt.x,100-Tt.y),ro=PP(cs);ke(wt,ro,Rn,$e)}},ot=()=>{const $e=[Y,me];return(wt,ft)=>{const Tt=T(ft.event.value),Rn=R.paletteRgba.get(),cs=_C(Rn),ro=q1(Tt,cs.saturation,cs.value),Ot=PP(ro);ke(wt,Ot,Tt,$e)}},St=()=>{const $e=[Y,ee,ue];return(wt,ft)=>{const Tt=ft.event.hex,Rn=NP(Tt);ke(wt,Tt,Rn.hue,$e)}};return{uid:h.uid,dom:h.dom,components:[F.asSpec(),L.asSpec(),j.asSpec()],behaviours:Ye([dn("colour-picker-events",[Ie(UO,St()),Ie(a5,Oe()),Ie(WO,ot())]),Un.config({find:$e=>j.getOpt($e)}),Ht.config({mode:"acyclic"})])}};return ri({name:"ColourPicker",configFields:[Fe("dom"),ve("onValidHex",ce),ve("onInvalidHex",ce)],factory:d})},xu={self:()=>Un.config({find:k.some}),memento:t=>Un.config({find:t.getOpt}),childAt:t=>Un.config({find:s=>_r(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},f5=Yt([ve("preprocess",vn),ve("postprocess",vn)]),KH=(t,s)=>{const c=Va("RepresentingConfigs.memento processors",f5,s);return bt.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=bt.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),h=t.get(i);bt.setValue(h,g)}}})},nb=(t,s,c)=>bt.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),g5=(t,s,c)=>nb(t,i=>s(i.element),(i,d)=>c(i.element,d)),YH=t=>g5(t,Pd,Qa),CT=t=>bt.config({store:{mode:"memory",initialValue:t}}),h5={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},p5=t=>s=>bn(s)?t.translate(h5[s]):t.translate(s),XH=(t,s,c)=>{const i=T=>"tox-"+T,d=(T,_,R=T,L=T)=>$l(R,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(L),"aria-live":"polite",..._.fold(()=>({}),F=>({id:F}))}},s.icons),g=d5(p5(s),i,s.tooltips.getConfig,d),h=T=>{Dt(T,sf,{name:"hex-valid",value:!0})},y=T=>{Dt(T,sf,{name:"hex-valid",value:!1})},S=uo(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:y}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Ye([nb(c,T=>{const _=S.get(T);return Un.getCurrent(_).bind(F=>bt.getValue(F).hex).map(F=>"#"+Kl(F,"#")).getOr("")},(T,_)=>{const R=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,L=k.from(R.exec(_)).bind(Y=>bo(Y,1)),F=S.get(T);Un.getCurrent(F).fold(()=>{console.log("Can not find form")},Y=>{bt.setValue(Y,{hex:L.getOr("")}),wv.getField(Y,"hex").each(me=>{An(me,ou())})})}),xu.self()])}};var JH=tinymce.util.Tools.resolve("tinymce.Resource");const b5=t=>zn(t,"init"),ST=t=>{const s=mo(),c=uo({dom:{tag:t.tag}}),i=mo(),d=!b5(t)&&t.onFocus.isSome()?[tn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Cs.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ye([dn("custom-editor-events",[ms(g=>{c.getOpt(g).each(h=>{(b5(t)?t.init(h.element.dom):JH.load(t.scriptId,t.scriptUrl).then(y=>y(h.element.dom,t.settings))).then(y=>{i.on(S=>{y.setValue(S)}),i.clear(),s.set(y)})})})]),nb(k.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),y=>y.setValue(h))}),xu.self()].concat(d)),components:[c.asSpec()]}};var yg=tinymce.util.Tools.resolve("tinymce.util.Tools");const YO=xt("browse.files.event"),v5=(t,s)=>{const c=yg.explode(s.getOption("images_file_types")),i=d=>ks(c,g=>vc(d.name.toLowerCase(),`.${g.toLowerCase()}`));return kn(Bs(t),i)},y5=(t,s,c)=>{const i=(L,F)=>{F.stop()},d=L=>(F,j)=>{Ke(L,Y=>{Y(F,j)})},g=(L,F)=>{var j;if(!Jt.isDisabled(L)){const Y=F.event.raw;Dt(L,YO,{files:(j=Y.dataTransfer)===null||j===void 0?void 0:j.files})}},h=(L,F)=>{const j=F.event.raw.target;Dt(L,YO,{files:j.files})},y=(L,F)=>{F&&(bt.setValue(L,v5(F,s)),Dt(L,Oi,{name:t.name}))},S=uo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ye([dn("input-file-events",[_f(xf()),_f($b())])])}),T=t.label.map(L=>hg(L,s)),_=xo.parts.field({factory:jr,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ts(s.translate("Browse for an image")),S.asSpec()],action:L=>{S.get(L).element.dom.click()},buttonBehaviours:Ye([xu.self(),CT(c.getOr([])),Cs.config({}),Ll.button(()=>s.checkUiComponentContext(t.context).shouldDisable),gr(()=>s.checkUiComponentContext(t.context))])}),R={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ye([Jt.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.checkUiComponentContext(t.context)),wn.config({toggleClass:"dragenter",toggleOnExecute:!1}),dn("dropzone-events",[Ie("dragenter",d([i,wn.toggle])),Ie("dragleave",d([i,wn.toggle])),Ie("dragover",i),Ie("drop",d([i,g])),Ie(Gu(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ts(s.translate("Drop an image here"))]},_]}]};return PC(T,R,["tox-form__group--stretched"],[dn("handle-files",[Ie(YO,(L,F)=>{xo.getField(L).each(j=>{y(j,F.event.files)})})])])},QH=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:_e(t.items,s.interpreter)}),e9=(t,s)=>{let c=null,i=null;return{cancel:()=>{Ir(c)||(clearTimeout(c),c=null,i=null)},throttle:(...h)=>{i=h,Ir(c)&&(c=setTimeout(()=>{const y=i;c=null,i=null,t.apply(null,y)},s))}}},XO=(t,s)=>{let c=null;return{cancel:()=>{Ir(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Ir(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},JO=(t,s)=>{let c=null;const i=()=>{Ir(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},wT=xt("alloy-fake-before-tabstop"),QO=xt("alloy-fake-after-tabstop"),C5=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ye([tn.config({ignore:!0}),Cs.config({})])}),S5=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[C5([wT]),s,C5([QO])],behaviours:Ye([xu.childAt(1)])}),e3=(t,s)=>{Dt(t,qi(),{raw:{which:9,shiftKey:s}})},w5=(t,s)=>{const c=s.element;ka(c,wT)?e3(t,!0):ka(c,QO)&&e3(t,!1)},GC=t=>RC(t,["."+wT,"."+QO].join(","),Hn),xT=xt("update-dialog"),x5=xt("update-title"),E5=xt("update-body"),t3=xt("update-footer"),T5=xt("body-send-message"),qC=xt("dialog-focus-shifted"),n3=_n().browser,KC=n3.isSafari(),t9=n3.isFirefox(),k5=KC||t9,n9=n3.isChromium(),o9=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,_5=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),s9=(t,s)=>{const c=t.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!n9&&!KC||eo(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},A5=(t,s,c)=>{const i=t.dom;k.from(i.contentDocument).fold(c,d=>{let g=0;const h=s9(d,s).map(S=>(g=S.scrollTop,S)).forall(o9),y=()=>{const S=i.contentWindow;eo(S)&&(h?_5(S,"bottom"):!h&&k5&&g!==0&&_5(S,g))};KC&&i.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),KC||y()})},r9=zt(k5,KC?500:200).map(t=>e9(A5,t)),c9=(t,s)=>{const c=$t(t.getOr(""));return{getValue:i=>c.get(),setValue:(i,d)=>{if(c.get()!==d){const g=i.element,h=()=>Pe(g,"srcdoc",d);s?r9.fold(le(A5),y=>y.throttle)(g,d,h):h()}c.set(d)}}},a9=(t,s,c)=>{const i="tox-dialog__iframe",d=t.transparent?[]:[`${i}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(R=>({title:R})).getOr({}),...c.map(R=>({srcdoc:R})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=c9(c,t.streamContent),S=t.label.map(R=>hg(R,s)),T=R=>S5(k.from(g),{uid:R.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Ye([Cs.config({}),tn.config({}),nb(c,y.getValue,y.setValue),ti.config({channels:{[qC]:{onReceive:(L,F)=>{F.newFocus.each(j=>{Pc(L.element).each(Y=>{(ao(L.element,j)?fr:To)(Y,"tox-navobj-bordered-focus")})})}}}})])}),_=xo.parts.field({factory:{sketch:T}});return PC(S,_,["tox-form__group--stretched"],[])},YC=t=>new Promise((s,c)=>{const i=()=>{g(),s(t)},d=[_a(t,"load",i),_a(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>Ke(d,h=>h.unbind());t.dom.complete&&i()}),o3=(t,s,c,i,d)=>{const g=c*d,h=i*d,y=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:y.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},i9=(t,s,c)=>{const i=W(t),d=Po(t);return Math.min(i/s,d/c,1)},l9=(t,s)=>{const c=$t(s.getOr({url:""})),i=uo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=uo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,T)=>{const _={url:T.url};T.zoom.each(L=>_.zoom=L),T.cachedWidth.each(L=>_.cachedWidth=L),T.cachedHeight.each(L=>_.cachedHeight=L),c.set(_);const R=()=>{const{cachedWidth:L,cachedHeight:F,zoom:j}=_;if(!er(L)&&!er(F)){if(er(j)){const me=i9(S.element,L,F);_.zoom=me}const Y=o3(W(S.element),Po(S.element),L,F,_.zoom);d.getOpt(S).each(me=>{yn(me.element,Y)})}};i.getOpt(S).each(L=>{const F=L.element;T.url!==_t(F,"src")&&(Pe(F,"src",T.url),To(S.element,"tox-imagepreview__loaded")),R(),YC(F).then(j=>{S.getSystem().isConnected()&&(fr(S.element,"tox-imagepreview__loaded"),_.cachedWidth=j.dom.naturalWidth,_.cachedHeight=j.dom.naturalHeight,R())})})},h={};t.height.each(S=>h.height=S);const y=s.map(S=>({url:S.url,zoom:k.from(S.zoom),cachedWidth:k.from(S.cachedWidth),cachedHeight:k.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Ye([xu.self(),nb(y,()=>c.get(),g)])}},s3=(t,s,c)=>{const i="tox-label",d=t.align==="center"?[`${i}--center`]:[],g=t.align==="end"?[`${i}--end`]:[],h=uo({dom:{tag:"label",classes:[i,...d,...g]},components:[Ts(s.providers.translate(t.label))]}),y=_e(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...y],behaviours:Ye([xu.self(),ln.config({}),YH(k.none()),Ht.config({mode:"acyclic"}),dn("label",[ms(S=>{t.for.each(T=>{c(T).each(_=>{h.getOpt(S).each(R=>{var L;const F=(L=_t(_.element,"id"))!==null&&L!==void 0?L:xt("form-field");Pe(_.element,"id",F),Pe(R.element,"for",F)})})})})])])}},D5=xt("toolbar.button.execute"),r3=t=>Rd((s,c)=>{BE(t,s)(i=>{Dt(s,D5,{buttonApi:i}),t.onAction(i)})}),Gh=xt("common-button-display-events"),R5={[xc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[za()]:["toolbar-button-events",Gh],[Ci()]:["toolbar-button-events","dropdown-events","tooltipping"],[yi()]:["focusing","alloy.base.behaviour",Gh]},c3=t=>Le(t.element,"width",So(t.element,"width")),a3=(t,s,c)=>$l(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),ET=(t,s)=>a3(t,s,[]),qh=(t,s)=>a3(t,s,[ln.config({})]),i3=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Ts(c.translate(t))],behaviours:Ye([ln.config({})])}),Hl=xt("update-menu-text"),ob=xt("update-menu-icon"),TT=(t,s,c,i)=>{const d=$t(ce),g=t.text.map(Y=>uo(i3(Y,s,c.providers))),h=t.icon.map(Y=>uo(qh(Y,c.providers.icons))),y=(Y,me)=>{const ee=bt.getValue(Y);return tn.focus(ee),Dt(ee,"keydown",{raw:me.event.raw}),ul.close(ee),k.some(!0)},S=t.role.fold(()=>({}),Y=>({role:Y})),T=k.from(t.listRole).map(Y=>({listRole:Y})).getOr({}),_=t.ariaLabel.fold(()=>({}),Y=>({"aria-label":c.providers.translate(Y)})),R=$l("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),L=xt("common-button-display-events"),F="dropdown-events";return uo(ul.sketch({...t.uid?{uid:t.uid}:{},...S,...T,dom:{tag:"button",classes:[s,`${s}--select`].concat(_e(t.classes,Y=>`${s}--${Y}`)),attributes:{..._,...eo(i)?{"data-mce-name":i}:{}}},components:Uh([h.map(Y=>Y.asSpec()),g.map(Y=>Y.asSpec()),k.some(R)]),matchWidth:!0,useMinWidth:!0,onOpen:(Y,me,ee)=>{t.searchable&&F7(ee)},dropdownBehaviours:Ye([...t.dropdownBehaviours,Ll.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),gr(()=>c.providers.checkUiComponentContext(t.context)),bv.config({}),ln.config({}),...t.tooltip.map(Y=>Qs.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(Y)}))).toArray(),dn(F,[Vh(t,d),zh(t,d)]),dn(L,[ms((Y,me)=>{t.listRole!=="listbox"&&c3(Y)})]),dn("update-dropdown-width-variable",[Ie(Tf(),(Y,me)=>ul.close(Y))]),dn("menubutton-update-display-text",[Ie(Hl,(Y,me)=>{g.bind(ee=>ee.getOpt(Y)).each(ee=>{ln.set(ee,[Ts(c.providers.translate(me.event.text))])})}),Ie(ob,(Y,me)=>{h.bind(ee=>ee.getOpt(Y)).each(ee=>{ln.set(ee,[qh(me.event.icon,c.providers.icons)])})})])]),eventOrder:Rs(R5,{[yi()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[za()]:["toolbar-button-events",Qs.name(),F,L]}),sandboxBehaviours:Ye([Ht.config({mode:"special",onLeft:y,onRight:y}),dn("dropdown-sandbox-events",[Ie(OA,(Y,me)=>{B7(Y),me.stop()}),Ie(ZN,(Y,me)=>{$7(Y,me),me.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...fC(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:cB,onCollapseMenu:(Y,me,ee)=>{st.getHighlighted(ee).each(ue=>{cB(Y,ee,ue)})},onDehighlightItem:YE}}},getAnchorOverrides:()=>({maxHeightFunction:(Y,me)=>{zw()(Y,me-10)}}),fetch:Y=>ha.nu(Tn(t.fetch,Y))})).asSpec()},M5=t=>bn(t),l3=t=>t.type==="separator",u9=t=>zn(t,"getSubmenuItems"),d9={type:"separator"},m9=(t,s)=>{const c=co(t,(i,d)=>M5(d)?d===""?i:d==="|"?i.length>0&&!l3(i[i.length-1])?i.concat([d9]):i:zn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&l3(c[c.length-1])&&c.pop(),c},N5=(t,s)=>{const c=t.getSubmenuItems(),i=u3(c,s),d=Rs(i.menus,{[t.value]:i.items}),g=Rs(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},f9=t=>{const s=ct(t,"value").getOrThunk(()=>xt("generated-menu-item"));return Rs({value:s},t)},u3=(t,s)=>{const c=m9(bn(t)?t.split(" "):t,s);return zo(c,(i,d)=>{if(u9(d)){const g=f9(d),h=N5(g,s);return{menus:Rs(i.menus,h.menus),items:[h.item,...i.items],expansions:Rs(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},g9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),h9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Kh=(t,s,c,i)=>{const d=xt("primary-menu"),g=u3(t,c.shared.providers.menuItems());if(g.items.length===0)return k.none();const h=g9(i),y=aB(d,g.items,s,c,i.isHorizontalMenu,h),S=h9(i),T=jn(g.menus,(R,L)=>aB(L,R,s,c,!1,S)),_=Rs(T,yf(d,y));return k.from(Qm.tieredData(d,_,g.expansions))},kT=t=>!zn(t,"items"),P5="data-value",B5=(t,s,c,i,d)=>_e(c,g=>kT(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{bt.setValue(t,g.value),Dt(t,Oi,{name:s}),tn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>B5(t,s,g.items,i,d)}),XC=(t,s)=>Yo(t,c=>kT(c)?zt(c.value===s,c):XC(c.items,s)),p9=(t,s,c)=>{const i=ks(t.items,T=>!kT(T)),d=s.shared.providers,g=c.bind(T=>XC(t.items,T)).orThunk(()=>_s(t.items).filter(kT)),h=t.label.map(T=>hg(T,d)),y=xo.parts.field({dom:{},factory:{sketch:T=>TT({context:t.context,uid:T.uid,text:g.map(_=>_.text),icon:k.none(),tooltip:k.none(),role:zt(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(_,R)=>{const L=B5(_,t.name,t.items,bt.getValue(_),i);R(Kh(L,ad.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:k.none()}))},onSetup:le(ce),getApi:le({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Cs.config({}),nb(g.map(_=>_.value),_=>_t(_.element,P5),(_,R)=>{XC(t.items,R).each(L=>{Pe(_.element,P5,L.value),Dt(_,Hl,{text:L.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[y]};return xo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:qt([h.toArray(),[S]]),fieldBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{xo.getField(T).each(Jt.disable)},onEnabled:T=>{xo.getField(T).each(Jt.enable)}})])})},$5=(t,s)=>({dom:{tag:"div",classes:t.classes},components:_e(t.items,s.shared.interpreter)}),b9=(t,s)=>{const c=_e(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>yf("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:ic(t.selectBehaviours,[tn.config({}),bt.config({store:{mode:"manual",getValue:d=>Ml(d.element),setValue:(d,g)=>{const h=_s(t.options);Ut(t.options,S=>S.value===g).isSome()?zf(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>zf(d.element,S.value))},...i}})])}},I5=ri({name:"HtmlSelect",configFields:[Fe("options"),ac("selectBehaviours",[tn,bt]),ve("selectClasses",[]),ve("selectAttributes",{}),lo("data")],factory:b9}),v9=(t,s,c)=>{const i=_e(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>hg(S,s)),g=xo.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:I5,selectBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Cs.config({}),dn("selectbox-change",[Ie(Gu(),(S,T)=>{Dt(S,Oi,{name:t.name})})])])}),h=t.size>1?k.none():k.some($l("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:qt([[g],h.toArray()])};return xo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:qt([d.toArray(),[y]]),fieldBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{xo.getField(S).each(Jt.disable)},onEnabled:S=>{xo.getField(S).each(Jt.enable)}}),gr(()=>s.checkUiComponentContext(t.context))])})},y9=le([ve("field1Name","field1"),ve("field2Name","field2"),$f("onLockedChange"),Bd(["lockClass"]),ve("locked",!1),nl.field("coupledFieldBehaviours",[Un,bt])]),C9=(t,s,c)=>jo(t,s,c).bind(Un.getCurrent),L5=(t,s)=>oa({factory:xo,name:t,overrides:c=>({fieldBehaviours:Ye([dn("coupled-input-behaviour",[Ie(ou(),i=>{C9(i,c,s).each(d=>{jo(i,c,"lock").each(g=>{wn.isOn(g)&&c.onLockedChange(i,d,g)})})})])])})}),S9=le([L5("field1","field2"),L5("field2","field1"),oa({factory:jr,schema:[Fe("dom")],name:"lock",overrides:t=>({buttonBehaviours:Ye([wn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),F5=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:nl.augment(t.coupledFieldBehaviours,[Un.config({find:k.some}),bt.config({store:{mode:"manual",getValue:d=>{const g=kh(d,t,["field1","field2"]);return{[t.field1Name]:bt.getValue(g.field1()),[t.field2Name]:bt.getValue(g.field2())}},setValue:(d,g)=>{const h=kh(d,t,["field1","field2"]);Kr(g,t.field1Name)&&bt.setValue(h.field1(),g[t.field1Name]),Kr(g,t.field2Name)&&bt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>jo(d,t,"field1"),getField2:d=>jo(d,t,"field2"),getLock:d=>jo(d,t,"lock")}}),Vl=Uc({name:"FormCoupledInputs",configFields:y9(),partFields:S9(),factory:F5,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),w9=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},_T=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return Sn.value({value:i,unit:d})}else return Sn.error(t)},H5=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>zn(c,d);return t.unit===s?k.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?k.some(t.value):k.some(t.value/c[t.unit]*c[s]):k.none()},d3=t=>k.none(),x9=(t,s)=>c=>H5(c,s).map(i=>({value:i*t,unit:s})),V5=(t,s)=>{const c=_T(t).toOptional(),i=_T(s).toOptional();return Ca(c,i,(d,g)=>H5(d,g.unit).map(h=>g.value/h).map(h=>x9(h,g.unit)).getOr(d3)).getOr(d3)},E9=(t,s)=>{let c=d3;const i=xt("ratio-event"),d=F=>$l(F,{tag:"span",classes:["tox-icon","tox-lock-icon__"+F]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),y=Vl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.checkUiComponentContext(t.context)),Cs.config({}),Qs.config(s.tooltips.getConfig({tooltipText:h}))])}),S=F=>({dom:{tag:"div",classes:["tox-form__group"]},components:F}),T=F=>xo.parts.field({factory:Gd,inputClasses:["tox-textfield"],inputBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.checkUiComponentContext(t.context)),Cs.config({}),dn("size-input-events",[Ie(kl(),(j,Y)=>{Dt(j,i,{isField1:F})}),Ie(Gu(),(j,Y)=>{Dt(j,Oi,{name:t.name})})])]),selectOnFocus:!1}),_=F=>({dom:{tag:"label",classes:["tox-label"]},components:[Ts(s.translate(F))]}),R=Vl.parts.field1(S([xo.parts.label(_("Width")),T(!0)])),L=Vl.parts.field2(S([xo.parts.label(_("Height")),T(!1)]));return Vl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[R,L,S([_($_),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(F,j,Y)=>{_T(bt.getValue(F)).each(me=>{c(me).each(ee=>{bt.setValue(j,w9(ee))})})},coupledFieldBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:F=>{Vl.getField1(F).bind(xo.getField).each(Jt.disable),Vl.getField2(F).bind(xo.getField).each(Jt.disable),Vl.getLock(F).each(Jt.disable)},onEnabled:F=>{Vl.getField1(F).bind(xo.getField).each(Jt.enable),Vl.getField2(F).bind(xo.getField).each(Jt.enable),Vl.getLock(F).each(Jt.enable)}}),gr(()=>s.checkUiComponentContext("mode:design")),dn("size-input-events2",[Ie(i,(F,j)=>{const Y=j.event.isField1,me=Y?Vl.getField1(F):Vl.getField2(F),ee=Y?Vl.getField2(F):Vl.getField1(F),ue=me.map(bt.getValue).getOr(""),de=ee.map(bt.getValue).getOr("");c=V5(ue,de)})])])})},T9=(t,s,c)=>{const i=wu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ts(s.translate(t.label))]}),d=wu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=wu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return wu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:le(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Ye([xu.self(),tn.config({})]),onChoose:(h,y,S)=>{Dt(h,Oi,{name:t.name,value:S})},onChange:(h,y,S)=>{Dt(h,Oi,{name:t.name,value:S})}})},k9=(t,s)=>{const c=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),i=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:_e(y,c)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:_e(y,d)}),h=y=>({dom:{tag:"tbody"},components:_e(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),h(t.cells)],behaviours:Ye([Cs.config({}),tn.config({})])}},m3=(t,s)=>{const c=t.label.map(F=>hg(F,s)),i=[Jt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.checkUiComponentContext(t.context)),Ht.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:F=>(An(F,$C),k.some(!0))}),dn("textfield-change",[Ie(ou(),(F,j)=>{Dt(F,Oi,{name:t.name})}),Ie(Np(),(F,j)=>{Dt(F,Oi,{name:t.name})})]),Cs.config({})],d=t.validation.map(F=>rf.config({getRoot:j=>Pc(j.element),invalidClass:"tox-invalid",validator:{validate:j=>{const Y=bt.getValue(j),me=F.validator(Y);return ha.pure(me===!0?Sn.value(Y):Sn.error(me))},validateOnLoad:F.validateOnLoad}})).toArray(),g=t.placeholder.fold(le({}),F=>({placeholder:s.translate(F)})),h=t.inputMode.fold(le({}),F=>({inputmode:F})),y={...g,...h,"data-mce-name":t.name},S=xo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(F=>({data:F})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:Ye(qt([i,d])),selectOnFocus:!1,factory:Gd}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,R=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),L=[Jt.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:F=>{xo.getField(F).each(Jt.disable)},onEnabled:F=>{xo.getField(F).each(Jt.enable)}}),gr(()=>s.checkUiComponentContext(t.context))];return PC(c,T,R,L)},z5=(t,s,c)=>m3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:k.none(),maximized:t.maximized,data:c,context:t.context},s),U5=(t,s,c)=>m3({name:t.name,multiline:!0,label:t.label,inputMode:k.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:k.none(),maximized:t.maximized,data:c,context:t.context},s),Yh=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),Cg=t=>t.dimension.property,sb=(t,s)=>t.dimension.getDimension(s),AT=(t,s)=>{const c=Yh(t,s);au(c,[s.shrinkingClass,s.growingClass])},f3=(t,s)=>{To(t.element,s.openClass),fr(t.element,s.closedClass),Le(t.element,Cg(s),"0px"),qc(t.element)},OT=(t,s)=>{To(t.element,s.closedClass),fr(t.element,s.openClass),cn(t.element,Cg(s))},W5=(t,s,c,i)=>{c.setCollapsed(),Le(t.element,Cg(s),sb(s,t.element)),AT(t,s),f3(t,s),s.onStartShrink(t),s.onShrunk(t)},_9=(t,s,c,i)=>{const d=i.getOrThunk(()=>sb(s,t.element));c.setCollapsed(),Le(t.element,Cg(s),d),qc(t.element);const g=Yh(t,s);To(g,s.growingClass),fr(g,s.shrinkingClass),f3(t,s),s.onStartShrink(t)},Z5=(t,s,c)=>{const i=sb(s,t.element);(i==="0px"?W5:_9)(t,s,c,k.some(i))},g3=(t,s,c)=>{const i=Yh(t,s),d=ka(i,s.shrinkingClass),g=sb(s,t.element);OT(t,s);const h=sb(s,t.element);(d?()=>{Le(t.element,Cg(s),g),qc(t.element)}:()=>{f3(t,s)})(),To(i,s.shrinkingClass),fr(i,s.growingClass),OT(t,s),Le(t.element,Cg(s),h),c.setExpanded(),s.onStartGrow(t)},j5=(t,s,c)=>{if(c.isExpanded()){cn(t.element,Cg(s));const i=sb(s,t.element);Le(t.element,Cg(s),i)}},A9=(t,s,c)=>{c.isExpanded()||g3(t,s,c)},O9=(t,s,c)=>{c.isExpanded()&&Z5(t,s,c)},G5=(t,s,c)=>{c.isExpanded()&&W5(t,s,c)},D9=(t,s,c)=>c.isExpanded(),R9=(t,s,c)=>c.isCollapsed(),rn=(t,s,c)=>{const i=Yh(t,s);return ka(i,s.growingClass)===!0},xv=(t,s,c)=>{const i=Yh(t,s);return ka(i,s.shrinkingClass)===!0};var q5=Object.freeze({__proto__:null,refresh:j5,grow:A9,shrink:O9,immediateShrink:G5,hasGrown:D9,hasShrunk:R9,isGrowing:rn,isShrinking:xv,isTransitioning:(t,s,c)=>rn(t,s)||xv(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?Z5:g3)(t,s,c)},disableTransitions:AT,immediateGrow:(t,s,c)=>{c.isExpanded()||(OT(t,s),Le(t.element,Cg(s),sb(s,t.element)),AT(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),JC=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return Ta(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:yf(s.dimension.property,"0px")})},events:(t,s)=>Eo([km(Mp(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(AT(c,t),s.isExpanded()&&cn(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),$9=[Fe("closedClass"),Fe("openClass"),Fe("shrinkingClass"),Fe("growingClass"),lo("getAnimationRoot"),Gn("onShrunk"),Gn("onStartShrink"),Gn("onGrown"),Gn("onStartGrow"),ve("expanded",!1),go("dimension",rr("property",{width:[es("property","width"),es("getDimension",t=>W(t)+"px")],height:[es("property","height"),es("getDimension",t=>Po(t)+"px")]}))],L9=Object.freeze({__proto__:null,init:t=>{const s=$t(t.expanded),c=()=>"expanded: "+s.get();return ua({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Tn(s.set,!1),setExpanded:Tn(s.set,!0),readState:c})}});const Di=rc({fields:$9,name:"sliding",active:JC,apis:q5,state:L9}),K5=t=>({isEnabled:()=>!Jt.isDisabled(t),setEnabled:s=>Jt.set(t,!s),setActive:s=>{const c=t.element;s?(fr(c,"tox-tbtn--enabled"),Pe(c,"aria-pressed",!0)):(To(c,"tox-tbtn--enabled"),N(c,"aria-pressed"))},isActive:()=>ka(t.element,"tox-tbtn--enabled"),setText:s=>{Dt(t,Hl,{text:s})},setIcon:s=>Dt(t,ob,{icon:s})}),Ev=(t,s,c,i,d=!0,g)=>TT({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(h,y)=>{const S={pattern:t.search.isSome()?XE(h):""};t.fetch(T=>{y(Kh(T,ad.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},S,K5(h))},onSetup:t.onSetup,getApi:K5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Cs.config({})]:[]],context:t.context},s,c.shared,g),h3=(t,s,c)=>{const i=g=>h=>{const y=!h.isActive();h.setActive(y),g.storage.set(y),c.shared.getSink().each(S=>{s().getOpt(S).each(T=>{Qi(T.element),Dt(T,sf,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(_e(t,h=>{const y=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...y,context:h.context,onAction:i(h),onSetup:d(h)}}))}},p3=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Ts(t)]}),Y5=(t,s,c)=>{t.customStateIcon.each(i=>s.push(J5(i,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[Qs.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"],t.customStateIconTooltip.fold(()=>({}),d=>({title:d})))))},X5=xt("leaf-label-event-id"),b3=({leaf:t,onLeafAction:s,visible:c,treeId:i,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>Ev(S,"tox-mbtn",g,k.none(),c)),y=[p3(t.title)];return Y5(t,y,g),h.each(S=>y.push(S)),jr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[qi()]:[X5,"keying"]},buttonBehaviours:Ye([...c?[Cs.config({})]:[],wn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ti.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,T)=>{(T.value===t.id?wn.on:wn.off)(S)}}}}),dn(X5,[ms((S,T)=>{d.each(_=>{(_===t.id?wn.on:wn.off)(S)})}),Ie(qi(),(S,T)=>{const _=T.event.raw.code==="ArrowLeft",R=T.event.raw.code==="ArrowRight";_?(Dr(S.element,".tox-tree--directory").each(L=>{S.getSystem().getByDom(L).each(F=>{Ji(L,".tox-tree--directory__label").each(j=>{F.getSystem().getByDom(j).each(tn.focus)})})}),T.stop()):R&&T.stop()})])])})},J5=(t,s,c,i,d)=>$l(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:c,attributes:d},s),F9=(t,s)=>J5(t,s,[]),Q5=xt("directory-label-event-id"),H9=({directory:t,visible:s,noChildren:c,backstage:i})=>{const d=t.menu.map(y=>Ev(y,"tox-mbtn",i,k.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[F9("chevron-right",i.shared.providers.icons)]},p3(t.title)];Y5(t,g,i),d.each(y=>{g.push(y)});const h=y=>{Dr(y.element,".tox-tree--directory").each(S=>{y.getSystem().getByDom(S).each(T=>{const _=!wn.isOn(T);wn.toggle(T),Dt(y,"expand-tree-node",{expanded:_,node:t.id})})})};return jr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[qi()]:[Q5,"keying"]},buttonBehaviours:Ye([...s?[Cs.config({})]:[],dn(Q5,[Ie(qi(),(y,S)=>{const T=S.event.raw.code==="ArrowRight",_=S.event.raw.code==="ArrowLeft";T&&c&&S.stop(),(T||_)&&Dr(y.element,".tox-tree--directory").each(R=>{y.getSystem().getByDom(R).each(L=>{!wn.isOn(L)&&T||wn.isOn(L)&&_?(h(y),S.stop()):_&&!wn.isOn(L)&&(Dr(L.element,".tox-tree--directory").each(F=>{Ji(F,".tox-tree--directory__label").each(j=>{L.getSystem().getByDom(j).each(tn.focus)})}),S.stop())})})})])])})},V9=({children:t,onLeafAction:s,visible:c,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?b3({leaf:y,selectedId:g,onLeafAction:s,visible:c,treeId:i,backstage:h}):v3({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:h})),behaviours:Ye([Di.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),ln.config({})])}),z9=xt("directory-event-id"),v3=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:y}=t,S=$t(g),T=R=>y.map(L=>L.type==="leaf"?b3({leaf:L,selectedId:h,onLeafAction:s,visible:R,treeId:i,backstage:d}):v3({directory:L,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:R,treeId:i,backstage:d})),_=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[H9({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),V9({children:y,expandedIds:g,selectedId:h,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:Ye([dn(z9,[ms((R,L)=>{wn.set(R,_)}),Ie("expand-tree-node",(R,L)=>{const{expanded:F,node:j}=L.event;S.set(F?[...S.get(),j]:S.get().filter(Y=>Y!==j))})]),wn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(R,L)=>{const F=R.components()[1],j=T(L);L?Di.grow(F):Di.shrink(F),ln.set(F,j)}})])}},e$=xt("tree-event-id"),U9=(t,s)=>{const c=t.onLeafAction.getOr(ce),i=t.onToggleExpand.getOr(ce),d=t.defaultExpandedIds,g=$t(d),h=$t(t.defaultSelectedId),y=xt("tree-id"),S=(T,_)=>t.items.map(R=>R.type==="leaf"?b3({leaf:R,selectedId:T,onLeafAction:c,visible:!0,treeId:y,backstage:s}):v3({directory:R,selectedId:T,onLeafAction:c,expandedIds:_,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Ye([Ht.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),dn(e$,[Ie("expand-tree-node",(T,_)=>{const{expanded:R,node:L}=_.event;g.set(R?[...g.get(),L]:g.get().filter(F=>F!==L)),i(g.get(),{expanded:R,node:L})})]),ti.config({channels:{[`update-active-item-${y}`]:{onReceive:(T,_)=>{h.set(k.some(_.value)),ln.set(T,S(k.some(_.value),g.get()))}}}}),ln.config({})])}};var W9=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Eo([Ie(t.event,i),qu(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ie(d,()=>s.cancel())]).getOr([])))}});const t$=t=>{const s=$t(null);return ua({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var Z9=Object.freeze({__proto__:null,throttle:t$,init:t=>t.stream.streams.state(t)});const j9=(t,s)=>{const c=t.stream,i=JO(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var G9=[go("stream",rr("mode",{throttle:[Fe("delay"),ve("stopEvent",!0),es("streams",{setup:j9,state:t$})]})),ve("event","input"),lo("cancelEvent"),$f("onStream")];const y3=rc({fields:G9,name:"streaming",active:W9,state:Z9}),DT=(t,s,c)=>{const i=bt.getValue(c);bt.setValue(s,i),C3(s)},n$=(t,s)=>{const c=t.element,i=Ml(c),d=c.dom;_t(c,"type")!=="number"&&s(d,i)},C3=t=>{n$(t,(s,c)=>s.setSelectionRange(c.length,c.length))},q9=(t,s)=>{n$(t,(c,i)=>c.setSelectionRange(s,i.length))},K9=(t,s,c)=>{if(t.selectsOver){const i=bt.getValue(s),d=t.getDisplayText(i),g=bt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?k.some(()=>{DT(t,s,c),q9(s,d.length)}):k.none()}else return k.none()},S3=le("alloy.typeahead.itemexecute"),Y9=(t,s,c,i)=>{const d=(R,L,F)=>{t.previewing.set(!1);const j=ar.getCoupled(R,"sandbox");if(Yn.isOpen(j))Un.getCurrent(j).each(Y=>{st.getHighlighted(Y).fold(()=>{F(Y)},()=>{Vb(j,Y.element,"keydown",L)})});else{const Y=me=>{Un.getCurrent(me).each(F)};GE(t,h(R),R,j,i,Y,ai.HighlightMenuAndItem).get(ce)}},g=zN(t),h=R=>L=>L.map(F=>{const j=Fi(F.menus),Y=pe(j,ee=>kn(ee.items,ue=>ue.type==="item"));return bt.getState(R).update(_e(Y,ee=>ee.data)),F}),y=R=>Un.getCurrent(R),S="typeaheadevents",T=[tn.config({}),bt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:R=>Ml(R.element),getFallbackEntry:R=>({value:R,meta:{}}),setValue:(R,L)=>{zf(R.element,t.model.getDisplayText(L))},...t.initialData.map(R=>yf("initialValue",R)).getOr({})}}),y3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(R,L)=>{const F=ar.getCoupled(R,"sandbox");if(tn.isFocused(R)&&Ml(R.element).length>=t.minChars){const Y=y(F).bind(ee=>st.getHighlighted(ee).map(bt.getValue));t.previewing.set(!0);const me=ee=>{y(F).each(ue=>{Y.fold(()=>{t.model.selectsOver&&st.highlightFirst(ue)},de=>{st.highlightBy(ue,ke=>bt.getValue(ke).value===de.value),st.getHighlighted(ue).orThunk(()=>(st.highlightFirst(ue),k.none()))})})};GE(t,h(R),R,F,i,me,ai.HighlightJustMenu).get(ce)}},cancelEvent:Ib()}),Ht.config({mode:"special",onDown:(R,L)=>(d(R,L,st.highlightFirst),k.some(!0)),onEscape:R=>{const L=ar.getCoupled(R,"sandbox");return Yn.isOpen(L)?(Yn.close(L),k.some(!0)):k.none()},onUp:(R,L)=>(d(R,L,st.highlightLast),k.some(!0)),onEnter:R=>{const L=ar.getCoupled(R,"sandbox"),F=Yn.isOpen(L);if(F&&!t.previewing.get())return y(L).bind(j=>st.getHighlighted(j)).map(j=>(Dt(R,S3(),{item:j}),!0));{const j=bt.getValue(R);return An(R,Ib()),t.onExecute(L,R,j),F&&Yn.close(L),k.some(!0)}}}),wn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ar.config({others:{sandbox:R=>bO(t,R,{onOpen:()=>wn.on(R),onClose:()=>{t.lazyTypeaheadComp.get().each(L=>N(L.element,"aria-activedescendant")),wn.off(R)}})}}),dn(S,[ms(R=>{t.lazyTypeaheadComp.set(k.some(R))}),qu(R=>{t.lazyTypeaheadComp.set(k.none())}),Rd(R=>{const L=ce;pO(t,h(R),R,i,L,ai.HighlightMenuAndItem).get(ce)}),Ie(S3(),(R,L)=>{const F=ar.getCoupled(R,"sandbox");DT(t.model,R,L.event.item),An(R,Ib()),t.onItemExecute(R,F,L.event.item,bt.getValue(R)),Yn.close(F),C3(R)})].concat(t.dismissOnBlur?[Ie(Ef(),R=>{const L=ar.getCoupled(R,"sandbox");ma(L.element).isNone()&&Yn.close(L)})]:[]))],_={[Ci()]:[bt.name(),y3.name(),S],...t.eventOrder};return{uid:t.uid,dom:UN(Rs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ic(t.typeaheadBehaviours,T)},eventOrder:_}},X9=le([lo("lazySink"),Fe("fetch"),ve("minChars",5),ve("responseTime",1e3),Gn("onOpen"),ve("getHotspot",k.some),ve("getAnchorOverrides",le({})),ve("layouts",k.none()),ve("eventOrder",{}),_S("model",{},[ve("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ve("selectsOver",!0),ve("populateFromBrowse",!0)]),Gn("onSetValue"),ta("onExecute"),Gn("onItemExecute"),ve("inputClasses",[]),ve("inputAttributes",{}),ve("inputStyles",{}),ve("matchWidth",!0),ve("useMinWidth",!1),ve("dismissOnBlur",!0),Bd(["openClass"]),lo("initialData"),lo("listRole"),ac("typeaheadBehaviours",[tn,bt,y3,Ht,wn,ar]),fo("lazyTypeaheadComp",()=>$t(k.none)),fo("previewing",()=>$t(!0))].concat(VN()).concat(KE())),J9=le([ol({schema:[Ju()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{K9(t.model,d,i).fold(()=>{t.model.selectsOver?(st.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&DT(t.model,d,i),sn(i.element,"id").each(g=>Pe(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(Dt(i,S3(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&DT(t.model,i,c)})}})})]),o$=Uc({name:"Typeahead",configFields:X9(),partFields:J9(),factory:Y9}),gd=t=>({...t,toCached:()=>gd(t.toCached()),bindFuture:S=>gd(t.bind(T=>T.fold(_=>ha.pure(Sn.error(_)),_=>S(_)))),bindResult:S=>gd(t.map(T=>T.bind(S))),mapResult:S=>gd(t.map(T=>T.map(S))),mapError:S=>gd(t.map(T=>T.mapError(S))),foldResult:(S,T)=>t.map(_=>_.fold(S,T)),withTimeout:(S,T)=>gd(ha.nu(_=>{let R=!1;const L=setTimeout(()=>{R=!0,_(Sn.error(T()))},S);t.get(F=>{R||(clearTimeout(L),_(F))})}))}),w3=t=>gd(ha.nu(t)),s$=t=>gd(ha.pure(Sn.value(t))),c$={nu:w3,wrap:gd,pure:s$,value:s$,error:t=>gd(ha.pure(Sn.error(t))),fromResult:t=>gd(ha.pure(t)),fromFuture:t=>gd(t.map(Sn.value)),fromPromise:t=>w3(s=>{t.then(c=>{s(Sn.value(c))},c=>{s(Sn.error(c))})})},QC=(t,s,c=[],i,d,g,h)=>{const y=s.fold(()=>({}),_=>({action:_})),S={buttonBehaviours:Ye([Ll.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),gr(()=>h.checkUiComponentContext(t.context)),Cs.config({}),...g.map(_=>Qs.config(h.tooltips.getConfig({tooltipText:h.translate(_)}))).toArray(),dn("button press",[gy("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...y},T=Rs(S,{dom:i});return Rs(T,{components:d})},tV=(t,s,c,i=[],d)=>{const g=t.tooltip.map(T=>({"aria-label":c.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},y=t.icon.map(T=>ET(T,c.icons)),S=Uh([y]);return QC(t,s,i,h,S,t.tooltip,c)},RT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},a$=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(F=>ET(F,c.icons)),y=[h.getOrThunk(()=>Ts(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),R={tag:"button",classes:[...RT(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},L=t.icon.map(le(g));return QC(t,s,i,R,y,L,c)},i$=(t,s,c,i=[],d=[])=>{const g=a$(t,k.some(s),c,i,d);return jr.sketch(g)},hd=(t,s)=>c=>{s==="custom"?Dt(c,sf,{name:t,value:{}}):s==="submit"?An(c,$C):s==="cancel"?An(c,Zh):console.error("Unknown button type: ",s)},MT=(t,s)=>s==="menu",NT=(t,s)=>s==="custom"||s==="cancel"||s==="submit",nV=(t,s)=>s==="togglebutton",x3=(t,s,c)=>{var i,d;const g=t.icon.map(de=>qh(de,s.icons)).map(uo),h=de=>{Dt(de,sf,{name:t.name,value:{setIcon:ke=>{g.map(Oe=>Oe.getOpt(de).each(ot=>{ln.set(ot,[qh(ke,s.icons)])}))}}})},y=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(i=t.name)!==null&&i!==void 0?i:"",primary:y==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},T=S.tooltip.or(t.text).map(de=>({"aria-label":s.translate(de)})).getOr({}),_=RT(y??"secondary"),R=t.icon.isSome()&&t.text.isSome(),L={tag:"button",classes:[..._.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...R?["tox-button--icon-and-text"]:[]],attributes:{...T,...eo(c)?{"data-mce-name":c}:{}}},F=[],j=s.translate(t.text.getOr("")),Y=Ts(j),ee=[...Uh([g.map(de=>de.asSpec())]),...t.text.isSome()?[Y]:[]],ue=QC(S,k.some(h),F,L,ee,t.tooltip,s);return jr.sketch(ue)},PT=(t,s,c)=>{if(MT(t,s)){const i=()=>h,d=t,g={...t,type:"menubutton",search:k.none(),onSetup:y=>(y.setEnabled(t.enabled),ce),fetch:h3(d.items,i,c)},h=uo(Ev(g,"tox-tbtn",c,k.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(NT(t,s)){const i=hd(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return i$(d,i,c.shared.providers,[])}else{if(nV(t,s))return x3(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},E3=(t,s)=>{const c=hd(t.name,"custom");return yB(k.none(),xo.parts.field({factory:jr,...a$(t,k.some(c),s,[CT(""),xu.self()])}))},l$={type:"separator"},T3=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ce}),k3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ce}),oV=t=>_e(t,T3),u$=(t,s)=>kn(s,c=>c.type===t),d$=(t,s)=>oV(u$(t,s)),sV=t=>d$("header",t.targets),_3=t=>d$("anchor",t.targets),rV=t=>k.from(t.anchorTop).map(s=>k3("<top>",s)).toArray(),cV=t=>k.from(t.anchorBottom).map(s=>k3("<bottom>",s)).toArray(),m$=t=>_e(t,s=>k3(s,s)),f$=t=>co(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(l$,c),[]),A3=(t,s)=>{const c=t.toLowerCase();return kn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,h=(d=i.value)!==null&&d!==void 0?d:"";return nr(g.toLowerCase(),c)||nr(h.toLowerCase(),c)})},aV=(t,s,c)=>{var i,d;const g=bt.getValue(s),h=(d=(i=g==null?void 0:g.meta)===null||i===void 0?void 0:i.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],S=>{const T=A3(h,m$(c.getHistory(t)));return t==="file"?f$([T,A3(h,sV(S)),A3(h,qt([rV(S),_3(S),cV(S)]))]):T})},g$=xt("aria-invalid"),iV=(t,s,c,i)=>{const d=s.shared.providers,g=ue=>{const de=bt.getValue(ue);c.addToHistory(de.value,t.filetype)},h={...i.map(ue=>({initialData:ue})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":g$,type:"url"},minChars:0,responseTime:0,fetch:ue=>{const de=aV(t.filetype,ue,c),ke=Kh(de,ad.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:k.none()});return ha.pure(ke)},getHotspot:ue=>j.getOpt(ue),onSetValue:(ue,de)=>{ue.hasConfigured(rf)&&rf.run(ue).get(ce)},typeaheadBehaviours:Ye([...c.getValidationHandler().map(ue=>rf.config({getRoot:de=>Pc(de.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(de,ke)=>{_.getOpt(de).each(Oe=>{Pe(Oe.element,"title",d.translate(ke))})}},validator:{validate:de=>{const ke=bt.getValue(de);return c$.nu(Oe=>{ue({type:t.filetype,url:ke.value},ot=>{if(ot.status==="invalid"){const St=Sn.error(ot.message);Oe(St)}else{const St=Sn.value(ot.message);Oe(St)}})})},validateOnLoad:!1}})).toArray(),Jt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),Cs.config({}),dn("urlinput-events",[Ie(ou(),ue=>{const de=Ml(ue.element),ke=de.trim();ke!==de&&zf(ue.element,ke),t.filetype==="file"&&Dt(ue,Oi,{name:t.name})}),Ie(Gu(),ue=>{Dt(ue,Oi,{name:t.name}),g(ue)}),Ie(Np(),ue=>{Dt(ue,Oi,{name:t.name}),g(ue)})])]),eventOrder:{[ou()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ue=>ue.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:fC(!1,1,"normal")},onExecute:(ue,de,ke)=>{Dt(de,$C,{})},onItemExecute:(ue,de,ke,Oe)=>{g(ue),Dt(ue,Oi,{name:t.name})}},y=xo.parts.field({...h,factory:o$}),S=t.label.map(ue=>hg(ue,d)),_=uo(((ue,de,ke=ue,Oe=ue)=>$l(ke,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ue],attributes:{title:d.translate(Oe),"aria-live":"polite",...de.fold(()=>({}),ot=>({id:ot}))}},d.icons))("invalid",k.some(g$),"warning")),R=uo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),L=c.getUrlPicker(t.filetype),F=xt("browser.url.event"),j=uo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,R.asSpec()],behaviours:Ye([Jt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),Y=uo(i$({context:t.context,name:t.name,icon:k.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:k.none(),borderless:!0},ue=>An(ue,F),d,[],["tox-browse-url"])),me=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:qt([[j.asSpec()],L.map(()=>Y.asSpec()).toArray()])}),ee=ue=>{Un.getCurrent(ue).each(de=>{const ke=bt.getValue(de),Oe={fieldname:t.name,...ke};L.each(ot=>{ot(Oe).get(St=>{bt.setValue(de,St),Dt(ue,Oi,{name:t.name})})})})};return xo.sketch({dom:tH(),components:S.toArray().concat([me()]),fieldBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:ue=>{xo.getField(ue).each(Jt.disable),Y.getOpt(ue).each(Jt.disable)},onEnabled:ue=>{xo.getField(ue).each(Jt.enable),Y.getOpt(ue).each(Jt.enable)}}),gr(()=>d.checkUiComponentContext(t.context)),dn("url-input-events",[Ie(F,ee)])])})},h$=(t,s)=>{const c=xA(t.icon,s.icons);return Kd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[jr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:i=>Dt(i,sf,{name:"alert-banner",value:t.url}),buttonBehaviours:Ye([AN()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},Xd=(t,s)=>{t.dom.checked=s},O3=t=>t.dom.checked,lV=(t,s,c)=>{const i=S=>(S.element.dom.click(),k.some(!0)),d=xo.parts.field({factory:{sketch:vn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ye([xu.self(),Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Pc(S.element).each(T=>fr(T,"tox-checkbox--disabled"))},onEnabled:S=>{Pc(S.element).each(T=>To(T,"tox-checkbox--disabled"))}}),Cs.config({}),tn.config({}),g5(c,O3,Xd),Ht.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),dn("checkbox-events",[Ie(Gu(),(S,T)=>{Dt(S,Oi,{name:t.name})})])])}),g=xo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ts(s.translate(t.label))],behaviours:Ye([bv.config({})])}),h=S=>$l(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),y=uo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return xo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:Ye([Jt.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),gr(()=>s.checkUiComponentContext(t.context))])})},uV=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],i=dn("htmlpanel",[ms(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?Kd.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:Ye([Qs.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{ys(d.element,"[data-mce-tooltip]:hover").orThunk(()=>ma(d.element)).each(g=>{sn(g,"data-mce-tooltip").each(h=>{Qs.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:ys(d.element,"[data-mce-tooltip]:hover").orThunk(()=>ma(d.element).filter(g=>sn(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:le([Cr,wo,Rr,Ec,Mr,Nr]),onRtl:le([Cr,wo,Rr,Ec,Mr,Nr])},bubble:Nl(0,-2,{})})}),i])}):Kd.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ye([Cs.config({}),tn.config({}),i])})},uc=t=>(s,c,i,d,g)=>ct(c,"name").fold(()=>t(c,d,k.none(),g),h=>s.field(h,t(c,d,ct(i,h),g))),dV=t=>(s,c,i,d,g)=>{const h=Rs(c,{source:"dynamic"});return uc(t)(s,h,i,d,g)},mV={bar:uc((t,s)=>X7(t,s.shared)),collection:uc((t,s,c)=>nH(t,s.shared.providers,c)),alertbanner:uc((t,s)=>h$(t,s.shared.providers)),input:uc((t,s,c)=>z5(t,s.shared.providers,c)),textarea:uc((t,s,c)=>U5(t,s.shared.providers,c)),label:uc((t,s,c,i)=>s3(t,s.shared,i)),iframe:dV((t,s,c)=>a9(t,s.shared.providers,c)),button:uc((t,s)=>E3(t,s.shared.providers)),checkbox:uc((t,s,c)=>lV(t,s.shared.providers,c)),colorinput:uc((t,s,c)=>rH(t,s.shared,s.colorinput,c)),colorpicker:uc((t,s,c)=>XH(t,s.shared.providers,c)),dropzone:uc((t,s,c)=>y5(t,s.shared.providers,c)),grid:uc((t,s)=>QH(t,s.shared)),listbox:uc((t,s,c)=>p9(t,s,c)),selectbox:uc((t,s,c)=>v9(t,s.shared.providers,c)),sizeinput:uc((t,s)=>E9(t,s.shared.providers)),slider:uc((t,s,c)=>T9(t,s.shared.providers,c)),urlinput:uc((t,s,c)=>iV(t,s,s.urlinput,c)),customeditor:uc(ST),htmlpanel:uc((t,s)=>uV(t,s.shared.providers)),imagepreview:uc((t,s,c)=>l9(t,c)),table:uc((t,s)=>k9(t,s.shared.providers)),tree:uc((t,s)=>U9(t,s)),panel:uc((t,s)=>$5(t,s))},p$={field:(t,s)=>s,record:le([])},D3=(t,s,c,i,d)=>{const g=Rs(i,{shared:{interpreter:h=>b$(t,h,c,g,d)}});return b$(t,s,c,g,d)},b$=(t,s,c,i,d)=>ct(mV,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,i,d)),fV=(t,s,c,i)=>b$(p$,t,s,c,i),xr="layout-inset",eS=t=>t.x,v$=(t,s)=>t.x+t.width/2-s.width/2,Tv=(t,s)=>t.x+t.width-s.width,R3=t=>t.y,M3=(t,s)=>t.y+t.height-s.height,y$=(t,s)=>t.y+t.height/2-s.height/2,BT=(t,s,c)=>Fc(Tv(t,s),M3(t,s),c.insetSouthwest(),l0(),"southwest",Hc(t,{right:0,bottom:3}),xr),$T=(t,s,c)=>Fc(eS(t),M3(t,s),c.insetSoutheast(),Wy(),"southeast",Hc(t,{left:1,bottom:3}),xr),tS=(t,s,c)=>Fc(Tv(t,s),R3(t),c.insetNorthwest(),Uy(),"northwest",Hc(t,{right:0,top:2}),xr),nS=(t,s,c)=>Fc(eS(t),R3(t),c.insetNortheast(),i0(),"northeast",Hc(t,{left:1,top:2}),xr),pd=(t,s,c)=>Fc(v$(t,s),R3(t),c.insetNorth(),Et(),"north",Hc(t,{top:2}),xr),kv=(t,s,c)=>Fc(v$(t,s),M3(t,s),c.insetSouth(),Xp(),"south",Hc(t,{bottom:3}),xr),oS=(t,s,c)=>Fc(Tv(t,s),y$(t,s),c.insetEast(),ww(),"east",Hc(t,{right:0}),xr),N3=(t,s,c)=>Fc(eS(t),y$(t,s),c.insetWest(),Zy(),"west",Hc(t,{left:1}),xr),C$=t=>{switch(t){case"north":return pd;case"northeast":return nS;case"northwest":return tS;case"south":return kv;case"southeast":return $T;case"southwest":return BT;case"east":return oS;case"west":return N3}},S$=(t,s,c,i,d)=>Qy(i).map(C$).getOr(pd)(t,s,c,i,d),w$=t=>{switch(t){case"north":return kv;case"northeast":return $T;case"northwest":return BT;case"south":return pd;case"southeast":return nS;case"southwest":return tS;case"east":return N3;case"west":return oS}},gV=(t,s,c,i,d)=>Qy(i).map(w$).getOr(pd)(t,s,c,i,d),sS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},x$=(t,s,c)=>{const d={maxHeightFunction:Fm()},g=()=>({type:"node",root:Ya(Xs(t())),node:k.from(t()),bubble:Nl(12,12,sS),layouts:{onRtl:()=>[nS],onLtr:()=>[tS]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Nl(-12,12,sS),layouts:{onRtl:()=>[Rr,Mr,Cr],onLtr:()=>[Mr,Rr,Cr]},overrides:d});return()=>c()?g():h()},mG=(t,s,c,i)=>{const g={maxHeightFunction:Fm()},h=()=>({type:"node",root:Ya(Xs(s())),node:k.from(s()),bubble:Nl(12,12,sS),layouts:{onRtl:()=>[pd],onLtr:()=>[pd]},overrides:g}),y=()=>t?{type:"node",root:Ya(Xs(s())),node:k.from(s()),bubble:Nl(0,-La(s()),sS),layouts:{onRtl:()=>[wo],onLtr:()=>[wo]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Nl(0,0,sS),layouts:{onRtl:()=>[wo],onLtr:()=>[wo]},overrides:g};return()=>i()?h():y()},fG=(t,s,c)=>{const i=()=>({type:"node",root:Ya(Xs(t())),node:k.from(t()),layouts:{onRtl:()=>[pd],onLtr:()=>[pd]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Cr],onLtr:()=>[Cr]}});return()=>c()?i():d()},hV=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),i=t.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:he.fromDom(d),lastCell:he.fromDom(g)};return k.some(h)}return k.some(gh.range(he.fromDom(c.startContainer),c.startOffset,he.fromDom(c.endContainer),c.endOffset))}}),pV=t=>s=>({type:"node",root:t(),node:s}),bV=(t,s,c,i)=>{const d=rd(t),g=()=>he.fromDom(t.getBody()),h=()=>he.fromDom(t.getContentAreaContainer()),y=()=>d||!i();return{inlineDialog:x$(h,s,y),inlineBottomDialog:mG(t.inline,h,c,y),banner:fG(h,s,y),cursor:hV(t,g),node:pV(g)}},E$=t=>(s,c)=>{WP(t)(s,c)},P3=t=>()=>LP(t),vV=t=>s=>ZE(t,s),yV=t=>s=>IP(t,s),T$=t=>({colorPicker:E$(t),hasCustomColors:P3(t),getColors:vV(t),getColorCols:yV(t)}),CV=t=>()=>nE(t),SV=t=>({isDraggableModal:CV(t)}),wV=t=>{const s=$t(aA(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},k$=t=>Kr(t,"items"),IT=t=>Kr(t,"format"),B3=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],xV=t=>zn(t,"items"),EV=t=>zn(t,"block"),TV=t=>zn(t,"inline"),kV=t=>zn(t,"selector"),$3=t=>co(t,(s,c)=>{if(xV(c)){const i=$3(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(TV(c)||EV(c)||kV(c)){const d=`custom-${bn(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),_V=(t,s)=>{const c=$3(s),i=d=>{Ke(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",()=>{i(c.customFormats)}),c.formats},rS=t=>Y4(t).map(s=>{const c=_V(t,s);return YM(t)?B3.concat(c):c}).getOr(B3),AV=t=>{const s=Io(t);return s.length===1&&yo(s,"title")},cS=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),_$=(t,s,c,i)=>{const d=S=>cS(S,c,i),g=S=>{const T=y(S.items);return{...S,type:"submenu",getStyleItems:le(T)}},h=S=>{const T=bn(S.name)?S.name:xt(S.title),_=`custom-${T}`,R={...S,type:"formatter",format:_,isSelected:c(_),getStylePreview:i(_)};return t.formatter.register(T,R),R},y=S=>_e(S,T=>k$(T)?g(T):IT(T)?d(T):AV(T)?{...T,type:"separator"}:h(T));return y(s)},I3=t=>{const s=y=>()=>t.formatter.match(y),c=y=>()=>{const S=t.formatter.get(y);return S!==void 0?k.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):k.none()},i=$t([]),d=$t([]),g=$t(!1);return t.on("PreInit",y=>{const S=rS(t),T=_$(t,S,s,c);i.set(T)}),t.on("addStyleModifications",y=>{const S=_$(t,y.items,s,c);d.set(S),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:i.get(),S=d.get();return y.concat(S)}}},aS=t=>{let i=0;const d=()=>i>0,g=y=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ts(y.tooltipText)]}];return{getConfig:y=>({delayForShow:()=>d()?60:300,delayForHide:le(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(y),onShow:(S,T)=>{i++,y.onShow&&y.onShow(S,T)},onHide:(S,T)=>{i--,y.onHide&&y.onHide(S,T)},onSetup:y.onSetup}),getComponents:g}},A$=t=>eo(t)&&t.nodeType===1,OV=yg.trim,L3=t=>s=>!!(A$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),O$=L3("true"),D$=L3("false"),R$=(t,s,c,i,d)=>({type:t,title:s,url:c,level:i,attach:d}),F3=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return O$(s)}return!1},LT=(t,s)=>_e(Tc(he.fromDom(s),t),c=>c.dom),M$=t=>t.innerText||t.textContent,DV=t=>t.id?t.id:xt("h"),_v=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,N$=t=>_v(t)&&V3(t),H3=t=>t&&/^(H[1-6])$/.test(t.nodeName),V3=t=>F3(t)&&!D$(t),z3=t=>H3(t)&&V3(t),U3=t=>H3(t)?parseInt(t.nodeName.substr(1),10):0,RV=t=>{var s;const c=DV(t),i=()=>{t.id=c};return R$("header",(s=M$(t))!==null&&s!==void 0?s:"","#"+c,U3(t),i)},MV=t=>{const s=t.id||t.name,c=M$(t);return R$("anchor",c||"#"+s,"#"+s,0,ce)},NV=t=>_e(kn(t,z3),RV),W3=t=>_e(kn(t,N$),MV),PV=t=>LT("h1,h2,h3,h4,h5,h6,a:not([href])",t),BV=t=>OV(t.title).length>0,$V={find:t=>{const s=PV(t);return kn(NV(s).concat(W3(s)),BV)}},FT="tinymce-url-history",P$=5,B$=t=>bn(t)&&/^https?/.test(t),$$=t=>fs(t)&&t.length<=P$&&Er(t,B$),I$=t=>Qn(t)&&no(t,s=>!$$(s)).isNone(),Av=()=>{const t=G1.getItem(FT);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+FT+" was not valid JSON",c),{};throw c}return I$(s)?s:(console.log("Local storage "+FT+" was not valid format",s),{})},IV=t=>{if(!I$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));G1.setItem(FT,JSON.stringify(t))},LV=t=>{const s=Av();return ct(s,t).getOr([])},Z3=(t,s)=>{if(!B$(t))return;const c=Av(),i=ct(c,s).getOr([]),d=kn(i,g=>g!==t);c[s]=[t].concat(d).slice(0,P$),IV(c)},j3=t=>!!t,FV=t=>jn(yg.makeMap(t,/[, ]/),j3),G3=t=>k.from(eA(t)),HV=t=>{const s=k.from(tE(t)).filter(j3).map(FV);return G3(t).fold(Hn,c=>s.fold(kt,i=>Io(i).length>0?i:!1))},VV=(t,s)=>{const c=HV(t);return hc(c)?c?G3(t):k.none():c[s]?G3(t):k.none()},zV=(t,s)=>VV(t,s).map(c=>i=>ha.nu(d=>{const g=(y,S)=>{if(!bn(y))throw new Error("Expected value to be string");if(S!==void 0&&!Qn(S))throw new Error("Expected meta to be a object");d({value:y,meta:S})},h={filetype:s,fieldname:i.fieldname,...k.from(i.meta).getOr({})};c.call(t,g,i.value,h)})),L$=t=>k.from(t).filter(bn).getOrUndefined(),UV=t=>tA(t)?k.some({targets:$V.find(t.getBody()),anchorTop:L$(nA(t)),anchorBottom:L$(sN(t))}):k.none(),WV=t=>k.from(nN(t)),ZV=t=>({getHistory:LV,addToHistory:Z3,getLinkInformation:()=>UV(t),getValidationHandler:()=>WV(t),getUrlPicker:s=>zV(t,s)}),hG=(t,s,c,i)=>{const d=$t(!1),g=wV(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:vu.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:aS(t.dialog),checkUiComponentContext:ee=>{const[ue,de=""]=ee.split(":"),ke=s.ui.registry.getAll().contexts,Oe=ct(ke,ue).fold(()=>ct(ke,"mode").map(ot=>ot("design")).getOr(!1),ot=>de.charAt(0)==="!"?!ot(de.slice(1)):ot(de));return{contextType:ue,shouldDisable:!Oe}}},y=ZV(s),S=I3(s),T=T$(s),_=SV(s),R=()=>d.get(),L=ee=>d.set(ee),F={shared:{providers:h,anchors:bV(s,c,i,g.isPositionedAtTop),header:g},urlinput:y,styles:S,colorinput:T,dialog:_,isContextMenuOpen:R,setContextMenuState:L},j=ee=>k.none(),Y={...F,shared:{...F.shared,interpreter:ee=>fV(ee,{},Y,j),getSink:t.popup}},me={...F,shared:{...F.shared,interpreter:ee=>fV(ee,{},me,j),getSink:t.dialog}};return{popup:Y,dialog:me}},jV=(t,s,c)=>{const i=($e,wt)=>{Ke([s,...c],ft=>{ft.broadcastEvent($e,wt)})},d=($e,wt)=>{Ke([s,...c],ft=>{ft.broadcastOn([$e],wt)})},g=$e=>d(zd(),{target:$e.target}),h=Wi(),y=_a(h,"touchstart",g),S=_a(h,"touchmove",$e=>i(Zk(),$e)),T=_a(h,"touchend",$e=>i(NS(),$e)),_=_a(h,"mousedown",g),R=_a(h,"mouseup",$e=>{$e.raw.button===0&&d(P0(),{target:$e.target})}),L=$e=>d(zd(),{target:he.fromDom($e.target)}),F=$e=>{$e.button===0&&d(P0(),{target:he.fromDom($e.target)})},j=()=>{Ke(t.editorManager.get(),$e=>{t!==$e&&$e.dispatch("DismissPopups",{relatedTarget:t})})},Y=$e=>i(Em(),$w($e)),me=$e=>{d(Gm(),{}),i(Tf(),$w($e))},ee=Xs(he.fromDom(t.getElement())),ue=e2(ee,"scroll",$e=>{requestAnimationFrame(()=>{const wt=t.getContainer();if(wt!=null){const Tt=Bh(t,s.element).map(Rn=>[Rn.element,...Rn.others]).getOr([]);ks(Tt,Rn=>ao(Rn,$e.target))&&(t.dispatch("ElementScroll",{target:$e.target.dom}),i(uy(),$e))}})}),de=()=>d(Gm(),{}),ke=$e=>{$e.state&&d(zd(),{target:he.fromDom(t.getContainer())})},Oe=$e=>{d(zd(),{target:he.fromDom($e.relatedTarget.getContainer())})},ot=$e=>t.dispatch("focusin",$e),St=$e=>t.dispatch("focusout",$e);t.on("PostRender",()=>{t.on("click",L),t.on("tap",L),t.on("mouseup",F),t.on("mousedown",j),t.on("ScrollWindow",Y),t.on("ResizeWindow",me),t.on("ResizeEditor",de),t.on("AfterProgressState",ke),t.on("DismissPopups",Oe),Ke([s,...c],$e=>{$e.element.dom.addEventListener("focusin",ot),$e.element.dom.addEventListener("focusout",St)})}),t.on("remove",()=>{t.off("click",L),t.off("tap",L),t.off("mouseup",F),t.off("mousedown",j),t.off("ScrollWindow",Y),t.off("ResizeWindow",me),t.off("ResizeEditor",de),t.off("AfterProgressState",ke),t.off("DismissPopups",Oe),Ke([s,...c],$e=>{$e.element.dom.removeEventListener("focusin",ot),$e.element.dom.removeEventListener("focusout",St)}),_.unbind(),y.unbind(),S.unbind(),T.unbind(),R.unbind(),ue.unbind()}),t.on("detach",()=>{Ke([s,...c],Jf),Ke([s,...c],$e=>$e.destroy())})},dc=L2,Jd=Ox,HT=le([ve("shell",!1),Fe("makeItem"),ve("setupItem",ce),nl.field("listBehaviours",[ln])]),qV=_i({name:"items",overrides:()=>({behaviours:Ye([ln.config({})])})}),KV=le([qV]),YV=le("CustomList"),XV=(t,s,c,i)=>{const d=(y,S)=>{h(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const _=ln.contents(T),R=S.length,L=R-_.length,F=L>0?it(L,()=>t.makeItem()):[],j=_.slice(R);Ke(j,me=>ln.remove(T,me)),Ke(F,me=>ln.append(T,me));const Y=ln.contents(T);Ke(Y,(me,ee)=>{t.setupItem(y,me,S[ee],ee)})})},g=t.shell?{behaviours:[ln.config({})],components:[]}:{behaviours:[],components:s},h=y=>t.shell?k.some(y):jo(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:ic(t.listBehaviours,g.behaviours),apis:{setItems:d}}},F$=Uc({name:YV(),configFields:HT(),partFields:KV(),factory:XV,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),Ov=le([Fe("dom"),ve("shell",!0),ac("toolbarBehaviours",[ln])]),H$=le([_i({name:"groups",overrides:()=>({behaviours:Ye([ln.config({})])})})]),V$=(t,s,c,i)=>{const d=(y,S)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{ln.set(T,S)})},g=y=>t.shell?k.some(y):jo(y,t,"groups"),h=t.shell?{behaviours:[ln.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:ic(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ce},domModification:{attributes:{role:"group"}}}},Qd=Uc({name:"Toolbar",configFields:Ov(),partFields:H$(),factory:V$,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),z$=ce,JV=Hn,U$=le([]);var QV=Object.freeze({__proto__:null,setup:z$,isDocked:JV,getBehaviours:U$});const Sg=le(xt("toolbar-height-change")),em={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},Dv="tox-tinymce--toolbar-sticky-on",iS="tox-tinymce--toolbar-sticky-off",W$=(t,s)=>{const c=pr(s),d=Jr(s).dom.innerHeight,g=Jc(c),h=he.fromDom(t.elm),y=Fu(h),S=Po(h),T=y.y,_=T+S,R=ps(s),L=Po(s),F=R.top,j=F+L,Y=Math.abs(F-g.top)<2,me=Math.abs(j-(g.top+d))<2;if(Y&&T<j)kd(g.left,T-L,c);else if(me&&_>F){const ee=T-d+S+L;kd(g.left,ee,c)}},lS=(t,s)=>yo(ts.getModes(t),s),VT=t=>{const s=i=>La(i)+(parseInt(So(i,"margin-top"),10)||0)+(parseInt(So(i,"margin-bottom"),10)||0),c=t.element;Pc(c).each(i=>{const d="padding-"+ts.getModes(t)[0];if(ts.isDocked(t)){const g=W(i);Le(c,"width",g+"px"),Le(i,d,s(c)+"px")}else cn(c,"width"),cn(i,d)})},ez=(t,s)=>{s?(To(t,em.fadeOutClass),Zg(t,[em.transitionClass,em.fadeInClass])):(To(t,em.fadeInClass),Zg(t,[em.fadeOutClass,em.transitionClass]))},Z$=(t,s)=>{const c=he.fromDom(t.getContainer());s?(fr(c,Dv),To(c,iS)):(fr(c,iS),To(c,Dv))},tz=(t,s)=>{const c=pr(s);td(c).filter(i=>!ao(s,i)).filter(i=>ao(i,he.fromDom(c.dom.body))||hr(t,i)).each(()=>Qi(s))},nz=(t,s)=>ma(t).orThunk(()=>s().toOptional().bind(c=>ma(c.element))),oz=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(ts.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(VT)}),t.on("SkinLoaded",()=>{c().each(i=>{ts.isDocked(i)?ts.reset(i):ts.refresh(i)})}),t.on("FullscreenStateChanged",()=>{c().each(ts.reset)})),t.on("AfterScrollIntoView",i=>{c().each(d=>{ts.refresh(d);const g=d.element;E4(g)&&W$(i,g)})}),t.on("PostRender",()=>{Z$(t,!1)})},sz=t=>t().map(ts.isDocked).getOr(!1),Rv=()=>[ti.config({channels:{[Sg()]:{onReceive:VT}}})],Mv=(t,s)=>{const c=mo(),i=s.getSink,d=y=>{i().each(S=>y(S.element))},g=y=>{t.inline||VT(y),Z$(t,ts.isDocked(y)),y.getSystem().broadcastOn([Gm()],{}),i().each(S=>S.getSystem().broadcastOn([Gm()],{}))},h=t.inline?[]:Rv();return[tn.config({}),ts.config({contextual:{lazyContext:y=>{const S=La(y.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return k.from(T).map(_=>{const R=Os(he.fromDom(_));return Bh(t,y.element).fold(()=>{const F=R.height-S,j=R.y+(lS(y,"top")?0:S);return ws(R.x,j,R.width,F)},F=>{const j=yl(R,$h(F)),Y=lS(y,"top")?j.y:j.y+S;return ws(j.x,Y,j.width,j.height-S)})})},onShow:()=>{d(y=>ez(y,!0))},onShown:y=>{d(S=>au(S,[em.transitionClass,em.fadeInClass])),c.get().each(S=>{tz(y.element,S),c.clear()})},onHide:y=>{nz(y.element,i).fold(c.clear,c.set),d(S=>ez(S,!1))},onHidden:()=>{d(y=>au(y,[em.transitionClass]))},...em},lazyViewport:y=>Bh(t,y.element).fold(()=>{const T=Ar(),_=eN(t),R=T.y+(lS(y,"top")?_:0),L=T.height-(lS(y,"bottom")?_:0);return{bounds:ws(T.x,R,T.width,L),optScrollEnv:k.none()}},T=>({bounds:$h(T),optScrollEnv:k.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:ps(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var q3=Object.freeze({__proto__:null,setup:oz,isDocked:sz,getBehaviours:Mv});const rz=t=>{const s=t.editor,c=t.sticky?Mv:U$;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ye(c(s,t.sharedBackstage))}},cz=Yt([wr,go("items",TS([ty([PA,vi("items",pt)]),pt]))].concat(H1)),K3=t=>Ms("GroupToolbarButton",cz,t),az=[Ur("text"),Ur("tooltip"),Ur("icon"),ds("search",!1,TS([wl,Yt([Ur("placeholder")])],t=>hc(t)?t?k.some({placeholder:k.none()}):k.none():k.some(t))),El("fetch"),vs("onSetup",()=>ce),mr("context","mode:design")],Nv=Yt([wr,...az]),Y3=t=>Ms("menubutton",Nv,t),iz=Yt([wr,hC,Il,gg,nP,QN,F1,Cc("presets","normal",["normal","color","listpreview"]),oP(1),dv,eP,mr("context","mode:design")]),lz=t=>Ms("SplitButton",iz,t);var X3=ri({factory:(t,s)=>{const c=(d,g)=>{const h=_e(g,y=>{const S={type:"menubutton",text:y.text,fetch:_=>{_(y.getItems())},context:"any"},T=Y3(S).mapError(_=>vf(_)).getOrDie();return Ev(T,"tox-mbtn",s.backstage,k.some("menuitem"))});ln.set(d,h)},i={focus:Ht.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ye([ln.config({}),dn("menubar-events",[ms(d=>{t.onSetup(d)}),Ie(Tl(),(d,g)=>{ys(d.element,".tox-mbtn--active").each(h=>{Qu(g.event.target,".tox-mbtn").each(y=>{ao(h,y)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(y).each(T=>{ul.expand(T),ul.close(S),tn.focus(T)})})})})}),Ie(Bp(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{ul.isOpen(h)&&(ul.expand(y),ul.close(h))})})})]),Ht.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),k.some(!0))}),Cs.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Fe("dom"),Fe("uid"),Fe("onEscape"),Fe("backstage"),ve("onSetup",ce)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const uz="⚡️Upgrade",dz="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",j$=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:dz,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:uz}}]}),J3="container",Q3=[ac("slotBehaviours",[])],G$=t=>"<alloy.field."+t+">",zT=t=>{const s=(()=>{const g=[];return{slot:(y,S)=>(g.push(y),Z0(J3,G$(y),S)),record:le(g)}})(),c=t(s),i=s.record(),d=_e(i,g=>oa({name:g,pname:G$(g)}));return x1(J3,Q3,d,UT,c)},UT=(t,s)=>{const c=Y=>I2(t),i=(Y,me)=>jo(Y,t,me),d=(Y,me)=>(ee,ue)=>jo(ee,t,ue).map(de=>Y(de,ue)).getOr(me),g=Y=>(me,ee)=>{Ke(ee,ue=>Y(me,ue))},h=(Y,me)=>_t(Y.element,"aria-hidden")!=="true",y=(Y,me)=>{if(!h(Y)){const ee=Y.element;cn(ee,"display"),N(ee,"aria-hidden"),Dt(Y,Fg(),{name:me,visible:!0})}},S=(Y,me)=>{if(h(Y)){const ee=Y.element;Le(ee,"display","none"),Pe(ee,"aria-hidden","true"),Dt(Y,Fg(),{name:me,visible:!1})}},T=d(h,!1),_=d(S),R=g(_),L=Y=>R(Y,c()),F=d(y),j={getSlotNames:c,getSlot:i,isShowing:T,hideSlot:_,hideAllSlots:L,showSlot:F};return{uid:t.uid,dom:t.dom,components:s,behaviours:L0(t.slotBehaviours),apis:j}},Ra={...jn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>o0(t)),sketch:zT},fz=Yt([Il,hC,vs("onShow",ce),vs("onHide",ce),F1]),gz=t=>Ms("sidebar",fz,t),hz=t=>{const{sidebars:s}=t.ui.registry.getAll();Ke(Io(s),c=>{const i=s[c],d=()=>Gs(k.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},eD=t=>({element:()=>t.element.dom}),pz=(t,s)=>{const c=_e(Io(s),i=>{const d=s[i],g=qe(gz(d));return{name:i,getApi:eD,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return _e(c,i=>{const d=$t(ce);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:fv.unnamedEvents([Vh(i,d),zh(i,d),Ie(Fg(),(g,h)=>{const y=h.event;Ut(c,T=>T.name===y.name).each(T=>{(y.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},tD=t=>Ra.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:pz(s,t),slotBehaviours:fv.unnamedEvents([ms(c=>Ra.hideAllSlots(c))])})),bz=(t,s,c)=>{Un.getCurrent(t).each(d=>{ln.set(d,[tD(s)]);const g=c==null?void 0:c.toLowerCase();bn(g)&&zn(s,g)&&Un.getCurrent(d).each(h=>{Ra.showSlot(h,g),Di.immediateGrow(d),cn(d.element,"width"),Pv(t.element,"region")})})},Pv=(t,s)=>{Pe(t,"role",s)},vz=(t,s)=>{Un.getCurrent(t).each(i=>{Un.getCurrent(i).each(g=>{Di.hasGrown(i)?Ra.isShowing(g,s)?(Di.shrink(i),Pv(t.element,"presentation")):(Ra.hideAllSlots(g),Ra.showSlot(g,s),Pv(t.element,"region")):(Ra.hideAllSlots(g),Ra.showSlot(g,s),Di.grow(i),Pv(t.element,"region"))})})},yz=t=>Un.getCurrent(t).bind(c=>Di.isGrowing(c)||Di.hasGrown(c)?Un.getCurrent(c).bind(g=>Ut(Ra.getSlotNames(g),h=>Ra.isShowing(g,h))):k.none()),nD=xt("FixSizeEvent"),oD=xt("AutoSizeEvent"),Cz=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ye([Cs.config({}),tn.config({}),Di.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Un.getCurrent(s).each(Ra.hideAllSlots),An(s,oD)},onGrown:s=>{An(s,oD)},onStartGrow:s=>{Dt(s,nD,{width:Do(s.element,"width").getOr("")})},onStartShrink:s=>{Dt(s,nD,{width:W(s.element)+"px"})}}),ln.config({}),Un.config({find:s=>{const c=ln.contents(s);return _s(c)}})])}],behaviours:Ye([xu.childAt(0),dn("sidebar-sliding-events",[Ie(nD,(s,c)=>{Le(s.element,"width",c.event.width)}),Ie(oD,(s,c)=>{cn(s.element,"width")})])])});var wz=Object.freeze({__proto__:null,block:(t,s,c,i)=>{Pe(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Ye([Ht.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),tn.config({})]),h=i(d,g),y=d.getSystem().build(h);ln.append(d,wi(y)),y.hasConfigured(Ht)&&s.focus&&Ht.focusIn(y),c.isBlocked()||s.onBlock(t),c.blockWith(()=>ln.remove(d,y))},unblock:(t,s,c)=>{N(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),q$=[vs("getRoot",k.none),Sc("focus",!0),Gn("onBlock"),Gn("onUnblock")],xz=Object.freeze({__proto__:null,init:()=>{const t=Jv(),s=c=>{t.set({destroy:c})};return ua({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const tm=rc({fields:q$,name:"blocking",apis:wz,state:xz}),Ez=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Wd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),K$=t=>Un.getCurrent(t).each(s=>Qi(s.element,!0)),Y$=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;k.from(t.iframeElement).map(he.fromDom).each(d=>{s?(sn(d,c).each(g=>Pe(d,i,g)),Pe(d,c,-1)):(N(d,c),sn(d,i).each(g=>{Pe(d,c,g),N(d,i)}))})},Tz=(t,s,c,i)=>{const d=s.element;if(Y$(t,c),c)tm.block(s,Ez(i)),cn(d,"display"),N(d,"aria-hidden"),t.hasFocus()&&K$(s);else{const g=Un.getCurrent(s).exists(h=>ih(h.element));tm.unblock(s),Le(d,"display","none"),Pe(d,"aria-hidden","true"),g&&t.focus()}},kz=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ye([ln.config({}),tm.config({focus:!1}),Un.config({find:s=>_s(s.components())})]),components:[]}),_z=t=>t.type==="focusin",yG=t=>_z(t)?(t.composed?_s(t.composedPath()):k.from(t.target)).map(he.fromDom).filter($n).exists(c=>ka(c,"mce-pastebin")):!1,CG=(t,s,c)=>{const i=$t(!1),d=mo(),g=y=>{i.get()&&!yG(y)&&(y.preventDefault(),K$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const h=y=>{y!==i.get()&&(i.set(y),Tz(t,s(),y,c.providers),VE(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),pc(y.time)){const S=R1.setEditorTimeout(t,()=>h(y.state),y.time);d.set(S)}else h(y.state),d.clear()})},X$=(t,s)=>co(t,(d,g)=>s(g,d.len).fold(le(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,WT=(t,s,c)=>({within:t,extra:s,withinWidth:c}),J$=(t,s,c)=>{const i=X$(t,(y,S)=>{const T=c(y);return k.some({element:y,start:S,finish:S+T,width:T})}),d=kn(i,y=>y.finish<=s),g=zo(d,(y,S)=>y+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},ZT=t=>_e(t,s=>s.element),zl=(t,s,c)=>{const i=ZT(t.concat(s));return WT(i,[],c)},Az=(t,s,c,i)=>{const d=ZT(t).concat([c]);return WT(d,ZT(s),i)},Q$=(t,s,c)=>WT(ZT(t),[],c),eI=(t,s,c)=>{const i=J$(s,t,c);return i.extra.length===0?k.some(i):k.none()},Oz=(t,s,c,i)=>{const d=eI(t,s,c).getOrThunk(()=>J$(s,t-c(i),c)),g=d.within,h=d.extra,y=d.withinWidth;return h.length===1&&h[0].width<=c(i)?zl(g,h,y):h.length>=1?Az(g,h,i,y):Q$(g,h,y)},Bv=(t,s)=>{const c=_e(s,i=>wi(i));Qd.setGroups(t,c)},Dz=t=>Yo(t,s=>ma(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),uS=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=vt(t,s,"primary"),g=ar.getCoupled(t,"overflowGroup");Le(d.element,"visibility","hidden");const h=i.concat([g]),y=Dz(h);c([]),Bv(d,h);const S=W(d.element),T=Oz(S,s.builtGroups.get(),_=>Math.ceil(_.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(ln.remove(d,g),c([])):(Bv(d,T.within),c(T.extra)),cn(d.element,"visibility"),qc(d.element),y.each(tn.focus)},tI=le([ac("splitToolbarBehaviours",[ar]),fo("builtGroups",()=>$t([]))]),jT=le([Bd(["overflowToggledClass"]),ju("getOverflowBounds"),Fe("lazySink"),fo("overflowGroups",()=>$t([])),Gn("onOpened"),Gn("onClosed")].concat(tI())),Rz=le([oa({factory:Qd,schema:Ov(),name:"primary"}),ol({schema:Ov(),name:"overflow"}),ol({name:"overflow-button"}),ol({name:"overflow-group"})]),sD=le((t,s)=>{Ce(t,Math.floor(s))}),Eu=le([Bd(["toggledClass"]),Fe("lazySink"),El("fetch"),ju("getBounds"),oc("fireDismissalEventInstead",[ve("event",Si())]),Hm(),Gn("onToggled")]),Mz=le([ol({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ye([wn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),ol({factory:Qd,schema:Ov(),name:"toolbar",overrides:t=>({toolbarBehaviours:Ye([Ht.config({mode:"cyclic",onEscape:s=>(jo(s,t,"button").each(tn.focus),k.none())})])})})]),rb=mo(),nI=(t,s)=>{rb.set(!0),GT(t,s),rb.clear()},GT=(t,s)=>{const c=ar.getCoupled(t,"toolbarSandbox");Yn.isOpen(c)?Yn.close(c):Yn.open(c,s.toolbar())},rD=(t,s,c,i)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();_c.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:sD()}}},d)},cD=(t,s,c,i,d)=>{Qd.setGroups(s,d),rD(t,s,c,i),wn.on(t)},Nz=(t,s,c)=>{const i=Yp(),d=(h,y)=>{const S=rb.get().getOr(!1);c.fetch().get(T=>{cD(t,y,c,s.layouts,T),i.link(t.element),S||Ht.focusIn(y)})},g=()=>{wn.off(t),rb.get().getOr(!1)||tn.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Ye([Ht.config({mode:"special",onEscape:h=>(Yn.close(h),k.some(!0))}),Yn.config({onOpen:d,onClose:g,isPartOf:(h,y,S)=>Bm(y,S)||Bm(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),ti.config({channels:{...b1({isExtraPart:Hn,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...v1({doReposition:()=>{Yn.getState(ar.getCoupled(t,"toolbarSandbox")).each(h=>{rD(t,h,c,s.layouts)})}})}})])}},Xh=Uc({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...jr.sketch({...i.button(),action:d=>{GT(d,i)},buttonBehaviours:nl.augment({dump:i.button().buttonBehaviours},[ar.config({others:{toolbarSandbox:d=>Nz(d,c,t)}})])}),apis:{setGroups:(d,g)=>{Yn.getState(ar.getCoupled(d,"toolbarSandbox")).each(h=>{cD(d,h,t,c.layouts,g)})},reposition:d=>{Yn.getState(ar.getCoupled(d,"toolbarSandbox")).each(g=>{rD(d,g,t,c.layouts)})},toggle:d=>{GT(d,i)},toggleWithoutFocusing:d=>{nI(d,i)},getToolbar:d=>Yn.getState(ar.getCoupled(d,"toolbarSandbox")),isOpen:d=>Yn.isOpen(ar.getCoupled(d,"toolbarSandbox"))}}),configFields:Eu(),partFields:Mz(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),Pz=le([Fe("items"),Bd(["itemSelector"]),ac("tgroupBehaviours",[Ht])]),Bz=le([S1({name:"items",unit:"item"})]),$z=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.tgroupBehaviours,[Ht.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),qT=Uc({name:"ToolbarGroup",configFields:Pz(),partFields:Bz(),factory:$z}),aD=t=>_e(t,s=>wi(s)),iD=(t,s,c)=>{uS(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(d=>{Xh.setGroups(d,aD(i))})})},oI=(t,s,c,i)=>{const d=uo(Xh.sketch({fetch:()=>ha.nu(g=>{g(aD(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Mr,Rr],onRtl:()=>[Rr,Mr],onBottomLtr:()=>[Nr,Ec],onBottomRtl:()=>[Ec,Nr]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.splitToolbarBehaviours,[ar.config({others:{overflowGroup:()=>qT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(_e(h,g.getSystem().build)),iD(g,d,t)},refresh:g=>iD(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{Xh.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Xh.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Xh.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Xh.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Xh.getToolbar)},domModification:{attributes:{role:"group"}}}},sI=Uc({name:"SplitFloatingToolbar",configFields:jT(),partFields:Rz(),factory:oI,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),Iz=le([Bd(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Gn("onOpened"),Gn("onClosed")].concat(tI())),rI=le([oa({factory:Qd,schema:Ov(),name:"primary"}),oa({factory:Qd,schema:Ov(),name:"overflow",overrides:t=>({toolbarBehaviours:Ye([Di.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{jo(s,t,"overflow-button").each(c=>{wn.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{jo(s,t,"overflow-button").each(wn.on)}}),Ht.config({mode:"acyclic",onEscape:s=>(jo(s,t,"overflow-button").each(tn.focus),k.some(!0))})])})}),ol({name:"overflow-button",overrides:t=>({buttonBehaviours:Ye([wn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ol({name:"overflow-group"})]),cI=(t,s)=>jo(t,s,"overflow").map(Di.hasGrown).getOr(!1),KT=(t,s,c)=>{jo(t,s,"overflow-button").each(i=>{jo(t,s,"overflow").each(d=>{if(lD(t,s),Di.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||Ht.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||tn.focus(i),g(h),s.onClosed=g}}Di.toggleGrow(d)})})},lD=(t,s)=>{jo(t,s,"overflow").each(c=>{uS(t,s,i=>{const d=_e(i,g=>wi(g));Qd.setGroups(c,d)}),jo(t,s,"overflow-button").each(i=>{Di.hasGrown(c)&&wn.on(i)}),Di.refresh(c)})},Lz=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(h,y)=>{const S=_e(y,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ic(t.splitToolbarBehaviours,[ar.config({others:{overflowGroup:h=>qT.sketch({...i["overflow-group"](),items:[jr.sketch({...i["overflow-button"](),action:y=>{An(h,d)}})]})}}),dn("toolbar-toggle-events",[Ie(d,h=>{KT(h,t,!1)})])]),apis:{setGroups:(h,y)=>{g(h,y),lD(h,t)},refresh:h=>lD(h,t),toggle:h=>{KT(h,t,!1)},toggleWithoutFocusing:h=>{KT(h,t,!0)},isOpen:h=>cI(h,t)},domModification:{attributes:{role:"group"}}}},uD=Uc({name:"SplitSlidingToolbar",configFields:Iz(),partFields:rI(),factory:Lz,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),dD=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[qT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ye([Cs.config({}),tn.config({})])}},YT=t=>qT.sketch(dD(t)),aI=(t,s)=>{const c=ms(i=>{const d=_e(t.initGroups,YT);Qd.setGroups(i,d)});return Ye([Ll.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),gr(()=>t.providers.checkUiComponentContext("any")),Ht.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),dn("toolbar-events",[c])])},iI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":dD({title:k.none(),items:[]}),"overflow-button":tV({context:"any",name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:k.none(),borderless:!1},k.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:aI(t,s)}},Fz=t=>{const s=iI(t),c=4,i=sI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return sI.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Fu(d),h=mi(d),y=Fu(h),S=Math.max(h.dom.scrollHeight,y.height);return ws(g.x+c,y.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},Hz=t=>{const s=uD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=uD.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=iI(t);return uD.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Sg()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Sg()],{type:"closed"}),t.onToggled(d,!1)}})},XT=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Qd.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Bl.scrolling?["tox-toolbar--scrolling"]:[])},components:[Qd.parts.groups({})],toolbarBehaviours:aI(t,s)})},lI=[gg,Il,Ur("tooltip"),Cc("buttonType","secondary",["primary","secondary"]),Sc("borderless",!1),El("onAction"),mr("context","mode:design")],Vz=[...lI,fg,ea("type",["button"])],zz=[...lI,Sc("active",!1),ea("type",["togglebutton"])],uI={button:Vz,togglebutton:zz},dI=[ea("type",["group"]),ym("buttons",[],rr("type",uI))],Uz=rr("type",{...uI,group:dI}),Wz=Yt([ym("buttons",[],Uz),El("onShow"),El("onHide")]),mD=t=>Ms("view",Wz,t),Zz=(t,s)=>{var c,i;const d=t.type==="togglebutton",g=t.icon.map(de=>qh(de,s.icons)).map(uo),y=de=>{const ke=$e=>{g.map(wt=>wt.getOpt(de).each(ft=>{ln.set(ft,[qh($e,s.icons)])}))},Oe=$e=>{const wt=de.element;$e?(fr(wt,"tox-button--enabled"),Pe(wt,"aria-pressed",!0)):(To(wt,"tox-button--enabled"),N(wt,"aria-pressed"))},ot=()=>ka(de.element,"tox-button--enabled"),St=()=>Qi(de.element);if(d)return t.onAction({setIcon:ke,setActive:Oe,isActive:ot,focus:St});if(t.type==="button")return t.onAction({setIcon:ke})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:k.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=RT((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),_=d?t.text.map(s.translate):k.some(s.translate(t.text)),R=_.map(Ts),L=S.tooltip.or(_).map(de=>({"aria-label":s.translate(de)})).getOr({}),F=g.map(de=>de.asSpec()),j=Uh([F,R]),Y=t.icon.isSome()&&R.isSome(),me={tag:"button",classes:T.concat(...t.icon.isSome()&&!Y?["tox-button--icon"]:[]).concat(...Y?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:L},ee=[],ue=QC(S,k.some(y),ee,me,j,t.tooltip,s);return jr.sketch(ue)},dS=(t,s)=>Zz(t,s),jz=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:_e(t.buttons,c=>dS(c,s))}),fD=_n().deviceType,Gz=fD.isPhone(),qz=fD.isTablet(),wG=t=>{let s=!1;const c=_e(t.buttons,i=>i.type==="group"?(s=!0,jz(i,t.providers)):dS(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...Gz||qz?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ye([tn.config({}),Ht.config({mode:"flow",selector:"button, .tox-button",focusInside:Xm.OnEnterOrSpaceMode})]),components:s?c:[Kd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Kd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},Kz=t=>({uid:t.uid,behaviours:Ye([tn.config({}),Cs.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),Yz=(t,s,c,i)=>{const d={getPane:g=>dc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ye([tn.config({}),Ht.config({mode:"cyclic",focusInside:Xm.OnEnterOrSpaceMode})]),apis:d}};var Jh=Uc({name:"silver.View",configFields:[Fe("viewConfig")],partFields:[_i({factory:{sketch:wG},schema:[Fe("buttons"),Fe("providers")],name:"header"}),_i({factory:{sketch:Kz},schema:[],name:"pane"})],factory:Yz,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const Xz=(t,s,c)=>li(s,(i,d)=>{const g=qe(mD(i));return t.slot(d,Jh.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Jh.parts.header({buttons:g.buttons,providers:c})]:[],Jh.parts.pane({})]}))}),JT=(t,s)=>Ra.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Xz(c,t,s),slotBehaviours:fv.unnamedEvents([ms(i=>Ra.hideAllSlots(i))])})),gD=t=>Ut(Ra.getSlotNames(t),s=>Ra.isShowing(t,s)),mI=t=>{const s=t.element;Le(s,"display","none"),Pe(s,"aria-hidden","true")},hD=t=>{const s=t.element;cn(s,"display"),N(s,"aria-hidden")},Jz=t=>({getContainer:le(t)}),pD=(t,s,c)=>{Ra.getSlot(t,s).each(i=>{Jh.getPane(i).each(d=>{c(i)(Jz(d.element.dom))})})},$v=(t,s)=>pD(t,s,Jh.getOnShow),fI=(t,s)=>pD(t,s,Jh.getOnHide);var QT=ri({factory:(t,s)=>{const g={setViews:(h,y)=>{ln.set(h,[JT(y,s.backstage.shared.providers)])},whichView:h=>Un.getCurrent(h).bind(gD),toggleView:(h,y,S,T)=>Un.getCurrent(h).exists(_=>{const R=gD(_),L=R.exists(j=>T===j),F=Ra.getSlot(_,T).isSome();return F&&(Ra.hideAllSlots(_),L?(mI(h),y()):(S(),hD(h),Ra.showSlot(_,T),$v(_,T)),R.each(j=>fI(_,j))),F})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ye([ln.config({}),Un.config({find:h=>{const y=ln.contents(h);return _s(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Fe("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,i,d)=>t.toggleView(s,c,i,d),whichView:(t,s)=>t.whichView(s)}});const Qz=(t,s,c)=>{let i=!1;const d=h=>{p_(h,".tox-statusbar").each(y=>{So(y,"display")==="none"&&_t(y,"aria-hidden")==="true"?(cn(y,"display"),N(y,"aria-hidden")):(Le(y,"display","none"),Pe(y,"aria-hidden","true"))})},g={getSocket:h=>dc.getPart(h,t,"socket"),setSidebar:(h,y,S)=>{dc.getPart(h,t,"sidebar").each(T=>bz(T,y,S))},toggleSidebar:(h,y)=>{dc.getPart(h,t,"sidebar").each(S=>vz(S,y))},whichSidebar:h=>dc.getPart(h,t,"sidebar").bind(yz).getOrNull(),getHeader:h=>dc.getPart(h,t,"header"),getToolbar:h=>dc.getPart(h,t,"toolbar"),setToolbar:(h,y)=>{dc.getPart(h,t,"toolbar").each(S=>{const T=_e(y,YT);S.getApis().setGroups(S,T)})},setToolbars:(h,y)=>{dc.getPart(h,t,"multiple-toolbar").each(S=>{const T=_e(y,_=>_e(_,YT));F$.setItems(S,T)})},refreshToolbar:h=>{dc.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{dc.getPart(h,t,"toolbar").each(y=>{ho(y.getApis().toggle,S=>S(y))})},toggleToolbarDrawerWithoutFocusing:h=>{dc.getPart(h,t,"toolbar").each(y=>{ho(y.getApis().toggleWithoutFocusing,S=>S(y))})},isToolbarDrawerToggled:h=>dc.getPart(h,t,"toolbar").bind(y=>k.from(y.getApis().isOpen).map(S=>S(y))).getOr(!1),getThrobber:h=>dc.getPart(h,t,"throbber"),focusToolbar:h=>{dc.getPart(h,t,"toolbar").orThunk(()=>dc.getPart(h,t,"multiple-toolbar")).each(S=>{Ht.focusIn(S)})},setMenubar:(h,y)=>{dc.getPart(h,t,"menubar").each(S=>{X3.setMenus(S,y)})},focusMenubar:h=>{dc.getPart(h,t,"menubar").each(y=>{X3.focus(y)})},setViews:(h,y)=>{dc.getPart(h,t,"viewWrapper").each(S=>{QT.setViews(S,y)})},toggleView:(h,y)=>dc.getPart(h,t,"viewWrapper").exists(S=>QT.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),y)),whichView:h=>dc.getPart(h,t,"viewWrapper").bind(QT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),dc.getPart(h,t,"editorContainer").each(y=>{const S=y.element;d(S),Le(S,"display","none"),Pe(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),dc.getPart(h,t,"editorContainer").each(y=>{const S=y.element;d(S),cn(S,"display"),N(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},bD=Jd.optional({factory:X3,name:"menubar",schema:[Fe("backstage")]}),eU=t=>t.type===Bl.sliding?Hz:t.type===Bl.floating?Fz:XT,tU=Jd.optional({factory:{sketch:t=>F$.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ye([Ht.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>XT({type:t.type,uid:xt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),k.some(!0))}),setupItem:(s,c,i,d)=>{Qd.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[Fe("dom"),Fe("onEscape")]}),gI=Jd.optional({factory:{sketch:t=>{const s=eU(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),k.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[Fe("dom"),Fe("onEscape"),Fe("getSink")]}),hI=Jd.optional({factory:{sketch:rz},name:"header",schema:[Fe("dom")]}),ek=Jd.optional({factory:{sketch:j$},name:"promotion",schema:[Fe("dom")]}),vD=Jd.optional({name:"socket",schema:[Fe("dom")]}),nU=Jd.optional({factory:{sketch:Cz},name:"sidebar",schema:[Fe("dom")]}),oU=Jd.optional({factory:{sketch:kz},name:"throbber",schema:[Fe("dom")]}),pI=Jd.optional({factory:QT,name:"viewWrapper",schema:[Fe("backstage")]}),sU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),rU=Jd.optional({factory:{sketch:sU},name:"editorContainer",schema:[]});var rs=Uc({name:"OuterContainer",factory:Qz,configFields:[Fe("dom"),Fe("behaviours")],partFields:[hI,bD,gI,tU,vD,nU,ek,oU,pI,rU],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const bI="file edit view insert format tools table help",vI={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},cU=(t,s,c)=>{const i=QM(c).split(/[ ,]/);return{text:t.title,getItems:()=>pe(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ks(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},mS=t=>t.split(" "),yI=(t,s)=>{const c={...vI,...s.menus},i=Io(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?mS(bI):mS(s.menubar===!1?"":s.menubar),g=kn(d,y=>{const S=zn(vI,y);return i?S||ct(s.menus,y).exists(T=>zn(T,"items")):S}),h=_e(g,y=>{const S=c[y];return cU({title:S.title,items:mS(S.items)},s,t)});return kn(h,y=>{const S=T=>bn(T)||T.type!=="separator";return y.getItems().length>0&&ks(y.getItems(),S)})},aU=t=>{const s=()=>{t._skinLoaded=!0,TP(t)};return()=>{t.initialized?s():t.on("init",s)}},CI=(t,s)=>()=>I8(t,{message:s}),SI=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),tk=(t,s,c,i)=>(t.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,c)),iU=async(t,s)=>{const i="ui/"+rE(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(i);if(bn(d))tk(t,i,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return SI(t,h,t.ui.styleSheetLoader)}},wI=async(t,s)=>{if(br(he.fromDom(t.getElement()))){const d="ui/"+rE(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(bn(g))tk(t,d,g,Mh.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,y=s+`/skin.shadowdom${h}.css`;return SI(t,y,Mh.DOM.styleSheetLoader)}}},lU=async(t,s)=>{const c=()=>{const d=cA(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};rE(s).fold(c,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);bn(h)?tk(s,g,h,s.ui.styleSheetLoader):c()});const i=cA(s);if(!rA(s)&&bn(i))return Promise.all([iU(s,i),wI(s,i)]).then()},xI=(t,s)=>lU(t,s).then(aU(s),CI(s,"Skin could not be loaded")),uU=Tn(xI,!1),EI=Tn(xI,!0),Iv=(t,s,c)=>Uo(c)?t.translate(s):t.translate([s,t.translate(c)]),dU=(t,s)=>{const c=(h,y,S,T)=>{const _=t.shared.providers.translate(h.title);if(h.type==="separator")return k.some({type:"separator",text:_});if(h.type==="submenu"){const R=pe(h.getStyleItems(),L=>i(L,y,T));return y===0&&R.length<=0?k.none():k.some({type:"nestedmenuitem",text:_,enabled:R.length>0,getSubmenuItems:()=>pe(h.getStyleItems(),L=>i(L,y,T))})}else return k.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(T),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),R=>({meta:{style:R}}))})},i=(h,y,S)=>{const T=h.type==="formatter"&&s.isInvalid(h);return y===0?T?[]:c(h,y,!1,S).toArray():c(h,y,T,S).toArray()},d=h=>{const y=s.getCurrentValue(),S=s.shouldHide?0:1;return pe(h,T=>i(T,S,y))};return{validateItems:d,getFetch:(h,y)=>(S,T)=>{const _=y(),R=d(_),L=Kh(R,ad.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:k.none()});T(L)}}},Lv=(t,s)=>{const c=s.dataset,i=c.type==="basic"?()=>_e(c.data,d=>cS(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:dU(t,s),getStyleItems:i}},cb=(t,s,c,i,d,g)=>{const{items:h,getStyleItems:y}=Lv(s,c),S=$t(c.tooltip),T=R=>({getComponent:le(R),setTooltip:L=>{const F=s.shared.providers.translate(L);Pe(R.element,"aria-label",F),S.set(L)}}),_=R=>{const L=F=>R.setTooltip(Iv(t,i(F.value),F.value));return t.on(d,L),zE(j1(t,"NodeChange",F=>{const j=F.getComponent();c.updateText(j),Jt.set(F.getComponent(),!t.selection.isEditable())})(R),()=>t.off(d,L))};return TT({context:"mode:design",text:c.icon.isSome()?k.none():c.text,icon:c.icon,ariaLabel:k.some(c.tooltip),tooltip:k.none(),role:k.none(),fetch:h.getFetch(s,y),onSetup:_,getApi:T,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Qs.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:R=>{if(c.tooltip!==S.get()){const L=s.shared.providers.translate(S.get());Qs.setComponents(R,s.shared.providers.tooltips.getComponents({tooltipText:L}))}}})})]},"tox-tbtn",s.shared,g)},yD=t=>_e(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),mU=t=>({type:"basic",data:t});var Fv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Fv||(Fv={}));const fU=(t,s)=>s===Fv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),CD=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:yD(fU(i,c))}},gU="Align",TI=le("Alignment {0}"),kI="left",SD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],_I=t=>{const s=()=>Ut(SD,y=>t.formatter.match(y.format)),c=y=>()=>t.formatter.match(y),i=y=>k.none,d=y=>{const T=s().fold(le(kI),_=>_.title.toLowerCase());Dt(y,ob,{icon:`align-${T}`}),z8(t,{value:T})},g=mU(SD),h=y=>()=>Ut(SD,S=>S.format===y.format).each(S=>t.execCommand(S.command));return{tooltip:Iv(t,TI(),kI),text:k.none(),icon:k.some("align-left"),isSelectedFor:c,getCurrentValue:k.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},AI=(t,s)=>cb(t,s,_I(t),TI,"AlignTextUpdate","align"),nk=(t,s)=>{const c=Lv(s,_I(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(gU),onSetup:Da(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},ok=(t,s)=>{const c=s(),i=_e(c,d=>d.format);return k.from(t.formatter.closest(i)).bind(d=>Ut(c,g=>g.format===d))},OI="Blocks",wg=le("Block {0}"),sk="Paragraph",DI=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?k.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):k.none()},i=g=>{const y=ok(t,()=>d.data).fold(le(sk),S=>S.title);Dt(g,Hl,{text:y}),Z8(t,{value:y})},d=CD(t,"block_formats",Fv.SemiColon);return{tooltip:Iv(t,wg(),sk),text:k.some(sk),icon:k.none(),isSelectedFor:s,getCurrentValue:k.none,getPreviewFor:c,onAction:DP(t),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},hU=(t,s)=>cb(t,s,DI(t),wg,"BlocksTextUpdate","blocks"),pU=(t,s)=>{const c=Lv(s,DI(t));t.ui.registry.addNestedMenuItem("blocks",{text:OI,onSetup:Da(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},bU="Fonts",RI=le("Font {0}"),wD="System Font",vU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],xD=t=>{const s=t.split(/\s*,\s*/);return _e(s,c=>c.replace(/^['"]+|['"]+$/g,""))},MI=(t,s)=>s.length>0&&Er(s,c=>t.indexOf(c.toLowerCase())>-1),yU=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=xD(t.toLowerCase());return MI(c,vU)||MI(c,s)}else return!1},rk=t=>{const s=()=>{const S=j=>j?xD(j)[0]:"",T=t.queryCommandValue("FontName"),_=y.data,R=T?T.toLowerCase():"",L=J2(t);return{matchOpt:Ut(_,j=>{const Y=j.format;return Y.toLowerCase()===R||S(Y).toLowerCase()===S(R).toLowerCase()}).orThunk(()=>zt(yU(R,L),{title:wD,format:R})),font:T}},c=S=>T=>T.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>k.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:T,font:_}=s(),R=T.fold(le(_),L=>L.title);Dt(S,Hl,{text:R}),aO(t,{value:R})},y=CD(t,"font_family_formats",Fv.SemiColon);return{tooltip:Iv(t,RI(),wD),text:k.some(wD),icon:k.none(),isSelectedFor:c,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:Hn}},CU=(t,s)=>cb(t,s,rk(t),RI,"FontFamilyTextUpdate","fontfamily"),SU=(t,s)=>{const c=Lv(s,rk(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(bU),onSetup:Da(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},wU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},xU=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=y=>`(?:${y})?`,h=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),EU=(t,s)=>ks(s,c=>ks(wU[c],i=>t===i)),ck=(t,s)=>k.from(xU.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return EU(g,s)?k.some({value:d,unit:g}):k.none()}),NI=(t,s)=>ck(t,s).map(({value:c,unit:i})=>c+i),ED={tab:le(9),escape:le(27),enter:le(13),backspace:le(8),delete:le(46),left:le(37),up:le(38),right:le(39),down:le(40),space:le(32),home:le(36),end:le(35),pageUp:le(33),pageDown:le(34)},PI=(t,s,c,i)=>{let d=k.none();const g=de=>de.map(ke=>bt.getValue(ke)).getOr(""),h=j1(t,"NodeChange SwitchMode",de=>{const ke=de.getComponent();d=k.some(ke),c.updateInputValue(ke),Jt.set(ke,!t.selection.isEditable())}),y=de=>({getComponent:le(de)}),S=$t(ce),T=xt("custom-number-input-events"),_=(de,ke,Oe)=>{const ot=g(d),St=c.getNewValue(ot,de),$e=ot.length-`${St}`.length,wt=d.map(Tt=>Tt.element.dom.selectionStart-$e),ft=d.map(Tt=>Tt.element.dom.selectionEnd-$e);c.onAction(St,Oe),d.each(Tt=>{bt.setValue(Tt,St),ke&&(wt.each(Rn=>Tt.element.dom.selectionStart=Rn),ft.each(Rn=>Tt.element.dom.selectionEnd=Rn))})},R=(de,ke)=>_((Oe,ot)=>Oe-ot,de,ke),L=(de,ke)=>_((Oe,ot)=>Oe+ot,de,ke),F=de=>Pc(de.element).fold(k.none,ke=>(Qi(ke),k.some(!0))),j=de=>ih(de.element)?(gi(de.element).each(ke=>Qi(ke)),k.some(!0)):k.none(),Y=(de,ke,Oe,ot)=>{const St=$t(ce),$e=s.shared.providers.translate(Oe),wt=xt("altExecuting"),ft=j1(t,"NodeChange SwitchMode",Rn=>{Jt.set(Rn.getComponent(),!t.selection.isEditable())}),Tt=Rn=>{Jt.isDisabled(Rn)||de(!0)};return jr.sketch({dom:{tag:"button",attributes:{"aria-label":$e,"data-mce-name":ke},classes:ot.concat(ke)},components:[ET(ke,s.shared.providers.icons)],buttonBehaviours:Ye([Jt.config({}),Qs.config(s.shared.providers.tooltips.getConfig({tooltipText:$e})),dn(wt,[Vh({onSetup:ft,getApi:y},St),zh({getApi:y},St),Ie(qi(),(Rn,cs)=>{(cs.event.raw.keyCode===ED.space()||cs.event.raw.keyCode===ED.enter())&&(Jt.isDisabled(Rn)||de(!1))}),Ie(xf(),Tt),Ie(Sf(),Tt)])]),eventOrder:{[qi()]:[wt,"keying"],[xf()]:[wt,"alloy.base.behaviour"],[Sf()]:[wt,"alloy.base.behaviour"],[za()]:["alloy.base.behaviour",wt,"tooltipping"],[Ci()]:[wt,"tooltipping"]}})},me=uo(Y(de=>R(!1,de),"minus","Decrease font size",[])),ee=uo(Y(de=>L(!1,de),"plus","Increase font size",[])),ue=uo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Gd.sketch({inputBehaviours:Ye([Jt.config({}),dn(T,[Vh({onSetup:h,getApi:y},S),zh({getApi:y},S)]),dn("input-update-display-text",[Ie(Hl,(de,ke)=>{bt.setValue(de,ke.event.text)}),Ie(MS(),de=>{c.onAction(bt.getValue(de))}),Ie(Gu(),de=>{c.onAction(bt.getValue(de))})]),Ht.config({mode:"special",onEnter:de=>(_(vn,!0,!0),k.some(!0)),onEscape:F,onUp:de=>(L(!0,!1),k.some(!0)),onDown:de=>(R(!0,!1),k.some(!0)),onLeft:(de,ke)=>(ke.cut(),k.none()),onRight:(de,ke)=>(ke.cut(),k.none())})])})],behaviours:Ye([tn.config({}),Ht.config({mode:"special",onEnter:j,onSpace:j,onEscape:F}),dn("input-wrapper-events",[Ie(Tl(),de=>{Ke([me,ee],ke=>{const Oe=he.fromDom(ke.get(de).element.dom);ih(Oe)&&ah(Oe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...eo(i)?{"data-mce-name":i}:{}}},components:[me.asSpec(),ue.asSpec(),ee.asSpec()],behaviours:Ye([tn.config({}),Ht.config({mode:"flow",focusInside:Xm.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:de=>ih(de.element)?k.none():(Qi(de.element),k.some(!0))})])}},TU="Font sizes",TD=le("Font size {0}"),BI="12pt",kU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},_U={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},$I=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},AU=(t,s)=>/[0-9.]+px$/.test(t)?$I(parseInt(t,10)*72/96,s||0)+"pt":ct(_U,t).getOr(t),II=t=>ct(kU,t).getOr(""),LI=t=>{const s=()=>{let S=k.none();const T=y.data,_=t.queryCommandValue("FontSize");if(_)for(let R=3;S.isNone()&&R>=0;R--){const L=AU(_,R),F=II(L);S=Ut(T,j=>j.format===_||j.format===L||j.format===F)}return{matchOpt:S,size:_}},c=S=>T=>T.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=le(k.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:T,size:_}=s(),R=T.fold(le(_),L=>L.title);Dt(S,Hl,{text:R}),U8(t,{value:R})},y=CD(t,"font_size_formats",Fv.Space);return{tooltip:Iv(t,TD(),BI),text:k.some(BI),icon:k.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:Hn}},OU=(t,s)=>cb(t,s,LI(t),TD,"FontSizeTextUpdate","fontsize"),DU=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},RU=16,MU=t=>t>=0,NU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:i=>Dt(i,Hl,{text:s()}),onAction:(i,d)=>t.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{ck(i,["unsupportedLength","empty"]);const g=s(),h=ck(i,["unsupportedLength","empty"]).or(ck(g,["unsupportedLength","empty"])),y=h.map(L=>L.value).getOr(RU),S=oN(t),T=h.map(L=>L.unit).filter(L=>L!=="").getOr(S),_=d(y,DU(T).step),R=`${MU(_)?_:y}${T}`;return R!==g&&W8(t,{value:R}),R}}},PU=(t,s)=>PI(t,s,NU(t),"fontsizeinput"),FI=(t,s)=>{const c=Lv(s,LI(t));t.ui.registry.addNestedMenuItem("fontsize",{text:TU,onSetup:Da(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},BU="Formats",HI=t=>Uo(t)?"Formats":"Format {0}",VI=(t,s)=>{const c="Formats",i=h=>()=>t.formatter.match(h),d=h=>()=>{const y=t.formatter.get(h);return y!==void 0?k.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):k.none()},g=h=>{const y=R=>k$(R)?pe(R.items,y):IT(R)?[{title:R.title,format:R.format}]:[],S=pe(rS(t),y),_=ok(t,le(S)).fold(le({title:c,tooltipLabel:""}),R=>({title:R.title,tooltipLabel:R.title}));Dt(h,Hl,{text:_.title}),V8(t,{value:_.tooltipLabel})};return{tooltip:Iv(t,HI(""),""),text:k.some(c),icon:k.none(),isSelectedFor:i,getCurrentValue:k.none,getPreviewFor:d,onAction:DP(t),updateText:g,shouldHide:XM(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},$U=(t,s)=>{const c={type:"advanced",...s.styles};return cb(t,s,VI(t,c),HI,"StylesTextUpdate","styles")},IU=(t,s)=>{const c={type:"advanced",...s.styles},i=Lv(s,VI(t,c));t.ui.registry.addNestedMenuItem("styles",{text:BU,onSetup:Da(t),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},LU=le([Fe("toggleClass"),Fe("fetch"),$f("onExecute"),ve("getHotspot",k.some),ve("getAnchorOverrides",le({})),Hm(),$f("onItemExecute"),lo("lazySink"),Fe("dom"),Gn("onOpen"),ac("splitDropdownBehaviours",[ar,Ht,tn]),ve("matchWidth",!1),ve("useMinWidth",!1),ve("eventOrder",{}),lo("role"),lo("listRole")].concat(KE())),FU=oa({factory:jr,schema:[Fe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Ye([tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Tm)},buttonBehaviours:Ye([wn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),zI=oa({factory:jr,schema:[Fe("dom")],name:"button",defaults:()=>({buttonBehaviours:Ye([tn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),HU=le([FU,zI,_i({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Fe("text")],name:"aria-descriptor"}),ol({schema:[Ju()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,c)})}})}),eB()]),VU=(t,s,c,i)=>{const d=_=>{Un.getCurrent(_).each(R=>{st.highlightFirst(R),Ht.focusIn(R)})},g=_=>{pO(t,vn,_,i,d,ai.HighlightMenuAndItem).get(ce)},h=_=>(g(_),k.some(!0)),y=_=>{const R=vt(_,t,"button");return Tm(R),k.some(!0)},S={...Eo([ms((_,R)=>{jo(_,t,"aria-descriptor").each(F=>{const j=xt("aria");Pe(F.element,"id",j),Pe(_.element,"aria-describedby",j)})})]),...K2(k.some(g))},T={repositionMenus:_=>{wn.isOn(_)&&sB(_)}};return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[xc()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:ic(t.splitDropdownBehaviours,[ar.config({others:{sandbox:_=>{const R=vt(_,t,"arrow");return bO(t,_,{onOpen:()=>{wn.on(R),wn.on(_)},onClose:()=>{wn.off(R),wn.off(_)}})}}}),Ht.config({mode:"special",onSpace:y,onEnter:y,onDown:h}),tn.config({}),wn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},fS=Uc({name:"SplitDropdown",configFields:LU(),partFields:HU(),factory:VU,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),UI=t=>({isEnabled:()=>!Jt.isDisabled(t),setEnabled:s=>Jt.set(t,!s),setText:s=>Dt(t,Hl,{text:s}),setIcon:s=>Dt(t,ob,{icon:s})}),WI=t=>({setActive:s=>{wn.set(t,s)},isActive:()=>wn.isOn(t),isEnabled:()=>!Jt.isDisabled(t),setEnabled:s=>Jt.set(t,!s),setText:s=>Dt(t,Hl,{text:s}),setIcon:s=>Dt(t,ob,{icon:s})}),kD=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),ZI=xt("focus-button"),_D=(t,s,c,i,d,g,h)=>{const y=s.map(T=>uo(i3(T,"tox-tbtn",d))),S=t.map(T=>uo(qh(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...kD(c,d),...eo(h)?{"data-mce-name":h}:{}}},components:Uh([S.map(T=>T.asSpec()),y.map(T=>T.asSpec())]),eventOrder:{[yi()]:["focusing","alloy.base.behaviour",Gh],[za()]:[Gh,"toolbar-group-button-events"]},buttonBehaviours:Ye([Ll.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),gr(()=>d.checkUiComponentContext(g)),dn(Gh,[ms((T,_)=>c3(T)),Ie(Hl,(T,_)=>{y.bind(R=>R.getOpt(T)).each(R=>{ln.set(R,[Ts(d.translate(_.event.text))])})}),Ie(ob,(T,_)=>{S.bind(R=>R.getOpt(T)).each(R=>{ln.set(R,[qh(_.event.icon,d.icons)])})}),Ie(yi(),(T,_)=>{_.event.prevent(),An(T,ZI)})])].concat(i.getOr([])))}},zU=(t,s,c,i,d)=>{const g=s.shared,h=$t(ce),y={toolbarButtonBehaviours:[],getApi:UI,onSetup:t.onSetup},S=[dn("toolbar-group-button-events",[Vh(y,h),zh(y,h)])];return Xh.sketch({lazySink:g.getSink,fetch:()=>ha.nu(T=>{T(_e(c(t.items),YT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:_D(t.icon,t.text,t.tooltip,k.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},ab=(t,s,c,i)=>{var d;const g=$t(ce),h=_D(t.icon,t.text,t.tooltip,k.none(),c,t.context,i);return jr.sketch({dom:h.dom,components:h.components,eventOrder:R5,buttonBehaviours:{...Ye([dn("toolbar-button-events",[r3({onAction:t.onAction,getApi:s.getApi}),Vh(s,g),zh(s,g)]),...t.tooltip.map(y=>Qs.config(c.tooltips.getConfig({tooltipText:c.translate(y)+t.shortcut.map(S=>` (${qA(S)})`).getOr("")}))).toArray(),Ll.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),gr(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[Gh]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[Gh]}})},UU=(t,s,c)=>jI(t,s,[],c),jI=(t,s,c,i)=>ab(t,{toolbarButtonBehaviours:c.length>0?[dn("toolbarButtonWith",c)]:[],getApi:UI,onSetup:t.onSetup},s,i),WU=(t,s,c)=>GI(t,s,[],c),GI=(t,s,c,i)=>ab(t,{toolbarButtonBehaviours:[ln.config({}),wn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[dn("toolbarToggleButtonWith",c)]:[]),getApi:WI,onSetup:t.onSetup},s,i),ZU=(t,s,c)=>i=>ha.nu(d=>s.fetch(d)).map(d=>k.from(iB(Rs(gO(xt("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,ad.CLOSE_ON_EXECUTE,s.select.getOr(Hn),c),{movement:jE(s.columns,s.presets),menuBehaviours:fv.unnamedEvents(s.columns!=="auto"?[]:[ms((g,h)=>{jA(g,4,LN(s.presets)).each(({numRows:y,numColumns:S})=>{Ht.setGridSize(g,y,S)})})])})))),jU=(t,s,c)=>{const i=$t(t.tooltip.getOr("")),d=y=>({isEnabled:()=>!Jt.isDisabled(y),setEnabled:S=>Jt.set(y,!S),setIconFill:(S,T)=>{ys(y.element,`svg path[class="${S}"], rect[class="${S}"]`).each(_=>{Pe(_,"fill",T)})},setActive:S=>{Pe(y.element,"aria-pressed",S),ys(y.element,"span").each(T=>{y.getSystem().getByDom(T).each(_=>wn.set(_,S))})},isActive:()=>ys(y.element,"span").exists(S=>y.getSystem().getByDom(S).exists(wn.isOn)),setText:S=>ys(y.element,"span").each(T=>y.getSystem().getByDom(T).each(_=>Dt(_,Hl,{text:S}))),setIcon:S=>ys(y.element,"span").each(T=>y.getSystem().getByDom(T).each(_=>Dt(_,ob,{icon:S}))),setTooltip:S=>{const T=s.providers.translate(S);Pe(y.element,"aria-label",T),i.set(S)}}),g=$t(ce),h={getApi:d,onSetup:t.onSetup};return fS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...kD(t.tooltip,s.providers),...eo(c)?{"data-mce-name":c}:{}}},onExecute:y=>{const S=d(y);S.isEnabled()&&t.onAction(S)},onItemExecute:(y,S,T)=>{},splitDropdownBehaviours:Ye([dn("split-dropdown-events",[ms((y,S)=>c3(y)),Ie(ZI,tn.focus),Vh(h,g),zh(h,g)]),Ll.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),gr(()=>s.providers.checkUiComponentContext(t.context)),bv.config({}),...t.tooltip.map(y=>Qs.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(y),onShow:S=>{if(i.get()!==y){const T=s.providers.translate(i.get());Qs.setComponents(S,s.providers.tooltips.getComponents({tooltipText:T}))}}})})).toArray()]),eventOrder:{[za()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Ci()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:ZU(d,t,s.providers),parts:{menu:fC(!1,t.columns,t.presets)},components:[fS.parts.button(_D(t.icon,t.text,k.none(),k.some([wn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Ll.toolbarButton(Hn),gr(le({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),fS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:xA("chevron-down",s.providers.icons)},buttonBehaviours:Ye([Ll.splitButton(Hn),gr(le({contextType:"any",shouldDisable:!1}))])}),fS.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},GU=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],gS=(t,s)=>(c,i,d,g)=>{const h=t(c).mapError(y=>vf(y)).getOrDie();return s(h,i,d,g)},AD={button:gS(pC,(t,s,c,i)=>UU(t,s.shared.providers,i)),togglebutton:gS(vC,(t,s,c,i)=>WU(t,s.shared.providers,i)),menubutton:gS(Y3,(t,s,c,i)=>Ev(t,"tox-tbtn",s,k.none(),!1,i)),splitbutton:gS(lz,(t,s,c,i)=>jU(t,s.shared,i)),grouptoolbarbutton:gS(K3,(t,s,c,i)=>{const d=c.ui.registry.getAll().buttons,g=y=>ak(c,{buttons:d,toolbar:y,allowToolbarGroups:!1},s,k.none()),h={[Zw]:s.shared.header.isPositionedAtTop()?Sr.TopToBottom:Sr.BottomToTop};switch(Nh(c)){case Bl.floating:return zU(t,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},qU=(t,s,c,i)=>ct(AD,t.type).fold(()=>(console.error("skipping button defined by",t),k.none()),d=>k.some(d(t,s,c,i))),qI={styles:$U,fontsize:OU,fontsizeinput:PU,fontfamily:CU,blocks:hU,align:AI},KI=t=>{const s=_e(GU,c=>{const i=kn(c.items,d=>zn(t,d)||zn(qI,d));return{name:c.name,items:i}});return kn(s,c=>c.items.length>0)},YI=t=>{const s=t.split("|");return _e(s,c=>({items:c.trim().split(" ")}))},KU=t=>Gt(t,s=>zn(s,"name")&&zn(s,"items")),YU=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?KI(c):bn(s)?YI(s):KU(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},XU=(t,s,c,i,d,g)=>ct(s,c.toLowerCase()).orThunk(()=>g.bind(h=>Yo(h,y=>ct(s,y+c.toLowerCase())))).fold(()=>ct(qI,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none()):qU(h,d,t,c.toLowerCase())),ak=(t,s,c,i)=>{const d=YU(s),g=_e(d,h=>{const y=pe(h.items,S=>S.trim().length===0?[]:XU(t,s.buttons,S,s.allowToolbarGroups,c,i).toArray());return{title:k.from(t.translate(h.name)),items:y}});return kn(g,h=>h.items.length>0)},XI=(t,s,c,i)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(Gt(g,bn)){const y=g.map(S=>{const T={toolbar:S,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return ak(t,T,i,k.none())});rs.setToolbars(d,y)}else rs.setToolbar(d,ak(t,c,i,k.none()))},JI=_n(),QI=JI.os.isiOS()&&JI.os.version.major<=12,JU=(t,s)=>{const{uiMotherships:c}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=$t(us(d.innerWidth,d.innerHeight)),y=$t(us(g.offsetWidth,g.offsetHeight)),S=()=>{const L=h.get();(L.left!==d.innerWidth||L.top!==d.innerHeight)&&(h.set(us(d.innerWidth,d.innerHeight)),cO(t))},T=()=>{const L=t.getDoc().documentElement,F=y.get();(F.left!==L.offsetWidth||F.top!==L.offsetHeight)&&(y.set(us(L.offsetWidth,L.offsetHeight)),cO(t))},_=L=>{F8(t,L)};i.bind(d,"resize",S),i.bind(d,"scroll",_);const R=e2(he.fromDom(t.getBody()),"load",T);t.on("hide",()=>{Ke(c,L=>{Le(L.element,"display","none")})}),t.on("show",()=>{Ke(c,L=>{cn(L.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{R.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",_),d=null})},QU=(t,s,c)=>{mg(t)&&A2(c.mainUi.mothership.element,c.popupUi.mothership),si(s,c.dialogUi.mothership)};var eW=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=s,y=$t(0),S=g.outerContainer;uU(t);const T=he.fromDom(d.targetNode),_=Ya(Xs(T));A2(T,g.mothership),QU(t,_,s),t.on("PostRender",()=>{rs.setSidebar(S,c.sidebar,sA(t))}),t.on("SkinLoaded",()=>{XI(t,s,c,i),y.set(t.getWin().innerWidth),rs.setMenubar(S,yI(t,c)),rs.setViews(S,c.views),JU(t,s)});const R=rs.getSocket(S).getOrDie("Could not find expected socket element");if(QI){yn(R.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Y=XO(()=>{t.dispatch("ScrollContent")},20),me=_a(R.element,"scroll",Y.throttle);t.on("remove",me.unbind)}mP(t,s),t.addCommand("ToggleSidebar",(Y,me)=>{rs.toggleSidebar(S,me),AP(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var Y;return(Y=rs.whichSidebar(S))!==null&&Y!==void 0?Y:""}),t.addCommand("ToggleView",(Y,me)=>{if(rs.toggleView(S,me)){const ee=S.element;g.mothership.broadcastOn([zd()],{target:ee}),Ke(h,ue=>{ue.broadcastOn([zd()],{target:ee})}),Ir(rs.whichView(S))&&(t.focus(),t.nodeChanged(),rs.refreshToolbar(S)),OP(t)}}),t.addQueryValueHandler("ToggleView",()=>{var Y;return(Y=rs.whichView(S))!==null&&Y!==void 0?Y:""});const L=Nh(t),F=()=>{rs.refreshToolbar(s.mainUi.outerContainer)};(L===Bl.sliding||L===Bl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Y=t.getWin().innerWidth;Y!==y.get()&&(F(),y.set(Y))});const j={setEnabled:Y=>{xC(s,Y?"setEnabled":"setDisabled")},isEnabled:()=>!Jt.isDisabled(S)};return{iframeContainer:R.element.dom,editorContainer:S.element.dom,api:j}}});const hS=t=>/^[0-9\.]+(|px)$/i.test(""+t)?k.some(parseInt(""+t,10)):k.none(),OD=t=>pc(t)?t+"px":t,ib=(t,s,c)=>{const i=s.filter(g=>t<g),d=c.filter(g=>t>g);return i.or(d).getOr(t)},ik=t=>{const s=q4(t),c=N1(t),i=Jx(t);return hS(s).map(d=>ib(d,c,i))},eL=t=>ik(t).getOr(q4(t)),tL=t=>{const s=X2(t),c=K4(t),i=P1(t);return hS(s).map(d=>ib(d,c,i))},tW=t=>tL(t).getOr(X2(t)),{ToolbarLocation:DD,ToolbarMode:nL}=T6,nW=40,lk=(t,s,c,i,d)=>{const{mainUi:g,uiMotherships:h}=c,y=Mh.DOM,S=rd(t),T=Ph(t),_=P1(t).or(tL(t)),R=i.shared.header,L=R.isPositionedAtTop,F=150,j=Nh(t),Y=j===nL.sliding||j===nL.floating,me=$t(!1),ee=()=>me.get()&&!t.removed,ue=Ot=>Y?Ot.fold(le(0),Ze=>Ze.components().length>1?Po(Ze.components()[1].element):0):0,de=Ot=>{switch(Qx(t)){case DD.auto:const Ze=rs.getToolbar(g.outerContainer),dt=ue(Ze),on=Po(Ot.element)-dt,pn=Os(s);if(pn.y>on)return"top";{const un=mi(s),Ho=Math.max(un.dom.scrollHeight,Po(un));return pn.bottom<Ho-on||Ar().bottom<pn.bottom-on?"bottom":"top"}case DD.bottom:return"bottom";case DD.top:default:return"top"}},ke=Ot=>{d.on(Ze=>{ts.setModes(Ze,[Ot]),R.setDockingMode(Ot);const dt=L()?Sr.TopToBottom:Sr.BottomToTop;Pe(Ze.element,Zw,dt)})},Oe=()=>{d.on(Ot=>{const Ze=_.getOrThunk(()=>fm().width-Ui(s).left-10);Le(Ot.element,"max-width",Ze+"px")})},ot=(Ot,Ze)=>{d.on(dt=>{const on=rs.getToolbar(g.outerContainer),pn=ue(on),Lt=Os(s),un=St(t,g.outerContainer.element),Ho=()=>un.fold(()=>Lt.x,va=>{const Zl=Os(va);return ao(va,ie())?Lt.x:Lt.x-Zl.x}),_o=()=>un.fold(()=>L()?Math.max(Lt.y-Po(dt.element)+pn,0):Lt.bottom,va=>{var Zl;const jl=Os(va),yd=(Zl=va.dom.scrollTop)!==null&&Zl!==void 0?Zl:0,lf=ao(va,ie())?Math.max(Lt.y-Po(dt.element)+pn,0):Lt.y-jl.y+yd-Po(dt.element)+pn;return L()?lf:Lt.bottom}),Pi=Ho(),Ps=zt(Ot,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(va=>va>F).map(va=>{const Zl=Ze.getOr(Jc()),jl=window.innerWidth-(Pi-Zl.left),yd=Math.max(Math.min(va,jl),F);return jl<va&&Le(g.outerContainer.element,"width",yd+"px"),{width:yd+"px"}}).getOr({width:"max-content"}),Wl={position:"absolute",left:Math.round(Pi)+"px",top:_o()+"px"};yn(g.outerContainer.element,{...Wl,...Ps})})},St=(Ot,Ze)=>mg(Ot)?jg(Ze):k.none(),$e=()=>{Ke(h,Ot=>{Ot.broadcastOn([Gm()],{})})},wt=()=>!S&&(ps(g.outerContainer.element).left+K(g.outerContainer.element)>=window.innerWidth-nW||Do(g.outerContainer.element,"width").isSome())?(Le(g.outerContainer.element,"position","absolute"),Le(g.outerContainer.element,"left","0px"),cn(g.outerContainer.element,"width"),!0):!1,ft=Ot=>{if(!ee())return;S||Oe();const Ze=Jc(),dt=S?!1:wt();if(Y&&rs.refreshToolbar(g.outerContainer),!S){const on=Jc(),pn=zt(Ze.left!==on.left,Ze);ot(dt,pn),pn.each(Lt=>{kd(Lt.left,on.top)})}T&&d.on(Ot),$e()},Tt=()=>S||!T||!ee()?!1:d.get().exists(Ot=>{const Ze=R.getDockingMode(),dt=de(Ot);return dt!==Ze?(ke(dt),!0):!1});return{isVisible:ee,isPositionedAtTop:L,show:()=>{me.set(!0),Le(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),Ke(h,Ot=>{cn(Ot.element,"display")}),Tt(),mg(t)?ft(Ot=>ts.isDocked(Ot)?ts.reset(Ot):ts.refresh(Ot)):ft(ts.refresh)},hide:()=>{me.set(!1),Le(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),Ke(h,Ot=>{Le(Ot.element,"display","none")})},update:ft,updateMode:()=>{Tt()&&ft(ts.reset)},repositionPopups:$e}},RD=(t,s)=>{const c=Os(t);return{pos:s?c.y:c.bottom,bounds:c}},oL=(t,s,c,i)=>{const d=$t(RD(s,c.isPositionedAtTop())),g=T=>{const{pos:_,bounds:R}=RD(s,c.isPositionedAtTop()),{pos:L,bounds:F}=d.get(),j=R.height!==F.height||R.width!==F.width;d.set({pos:_,bounds:R}),j&&cO(t,T),c.isVisible()&&(L!==_?c.update(ts.reset):j&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(ts.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const y=JO(()=>c.update(ts.refresh),33);t.on("ScrollWindow",()=>{const T=Jc().left;T!==h&&(h=T,y.throttle()),c.updateMode()}),mg(t)&&t.on("ElementScroll",T=>{c.update(ts.refresh)});const S=Xa();S.set(e2(he.fromDom(t.getBody()),"load",T=>g(T.raw))),t.on("remove",()=>{S.clear()})};var sL=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mainUi:g}=s,h=mo(),y=he.fromDom(d.targetNode),S=lk(t,y,s,i,h),T=Q4(t);EI(t);const _=()=>{if(h.isSet()){S.show();return}h.set(rs.getHeader(g.outerContainer).getOrDie());const L=iA(t);mg(t)?(A2(y,g.mothership),A2(y,s.popupUi.mothership)):si(L,g.mothership),si(L,s.dialogUi.mothership);const F=()=>{XI(t,s,c,i),rs.setMenubar(g.outerContainer,yI(t,c)),S.show(),oL(t,y,S,T),t.nodeChanged()};T?t.once("SkinLoaded",F):F()};t.on("show",_),t.on("hide",S.hide),T||(t.on("focus",_),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||T)&&_()}),mP(t,s);const R={show:_,hide:S.hide,setEnabled:L=>{xC(s,L?"setEnabled":"setDisabled")},isEnabled:()=>!Jt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:R}}});const sW=()=>{const t=mo(),s=mo(),c=mo();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),h=s.get().map(y=>y.mothership);return g.fold(()=>h.toArray(),y=>h.fold(()=>[y],S=>ao(y.element,S.element)?[y]:[y,S]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(y=>h(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},rL="contexttoolbar-show",cL="contexttoolbar-hide",rW=t=>({hide:()=>An(t,sc()),getValue:()=>bt.getValue(t)}),aL=(t,s)=>Ie(D5,(c,i)=>{const d=t.get(c),g=rW(d);s.onAction(g,i.event.buttonApi)}),cW=(t,s,c)=>{const{primary:i,...d}=s.original,g=qe(pC({...d,type:"button",onAction:ce}));return jI(g,c,[aL(t,s)])},aW=(t,s,c)=>{const{primary:i,...d}=s.original,g=qe(vC({...d,type:"togglebutton",onAction:ce}));return GI(g,c,[aL(t,s)])},pS=t=>t.type==="contextformtogglebutton",iW=(t,s,c)=>pS(s)?aW(t,s,c):cW(t,s,c),lW=(t,s,c)=>{const i=_e(s,h=>uo(iW(t,h,c)));return{asSpecs:()=>_e(i,h=>h.asSpec()),findPrimary:h=>Yo(s,(y,S)=>y.primary?k.from(i[S]).bind(T=>T.getOpt(h)).filter(Me(Jt.isDisabled)):k.none())}},iL=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),i=uo(Gd.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:Ye([Jt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),gr(()=>s.checkUiComponentContext("mode:design")),Ht.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Tm(h),!0)),onLeft:(g,h)=>(h.cut(),k.none()),onRight:(g,h)=>(h.cut(),k.none())})])})),d=lW(i,t.commands,s);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:d.asSpecs()}]},dW={renderContextForm:(t,s,c)=>XT({type:t,uid:xt("context-toolbar"),initGroups:iL(s,c),onEscape:k.none,cyclicKeying:!0,providers:c}),buildInitGroups:iL},MD=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,mW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=pl(he.fromDom(t.startContainer),t.startOffset).element;return(ur(c)?Qr(c):k.some(c)).filter($n).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},ND=t=>{const s=t.selection.getRng(),c=mW(s);if(t.inline){const i=Jc();return ws(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=Fu(he.fromDom(t.getBody()));return ws(i.x+c.left,i.y+c.top,c.width,c.height)}},fW=(t,s)=>s.filter(c=>J(c)&&ra(c)).map(Fu).getOrThunk(()=>ND(t)),gW=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},hW=(t,s,c,i,d,g)=>{const h=he.fromDom(t.getContainer()),y=ys(h,".tox-editor-header").getOr(h),S=Os(y),T=S.y>=s.bottom,_=i&&!T;if(t.inline&&_)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!_)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const R=d==="line"?Os(h):s;return _?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(R.bottom-g,c.bottom)}:{y:Math.max(R.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},Hv=(t,s,c,i=0)=>{const d=fm(window),g=Os(he.fromDom(t.getContentAreaContainer())),h=sE(t)||cE(t)||Q2(t),{x:y,width:S}=gW(g,d,i);if(t.inline&&!h)return ws(y,d.y,S,d.height);{const T=s.header.isPositionedAtTop(),{y:_,bottom:R}=hW(t,g,d,T,c,i);return ws(y,_,S,R-_)}},bS=12,lL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},uL={maxHeightFunction:Fm(),maxWidthFunction:sD()},dL=(t,s)=>{const c=t.selection.getRng(),i=pl(he.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&ao(i.element,s)},PD=(t,s,c)=>{const i=Do(t,"position");Le(t,"position",s);const d=c(t);return i.each(g=>Le(t,"position",g)),d},BD=t=>t==="node",mL=(t,s,c,i,d)=>{const g=ND(t),h=i.lastElement().exists(y=>ao(c,y));if(dL(t,c))return h?S$:pd;if(h)return PD(s,i.getMode(),()=>MD(g,Os(s),-20)&&!i.isReposition()?gV:S$);{const y=i.getMode()==="fixed"?d.y+Jc().top:d.y,S=Po(s)+bS;return y+S<=g.y?pd:kv}},pW=(t,s,c,i)=>{const d=S=>(T,_,R,L,F)=>{const j=mL(t,L,S,c,F),Y={...T,y:F.y,height:F.height};return{...j(Y,_,R,L,F),alwaysFit:!0}},g=S=>BD(i)?[d(S)]:[];return s?{onLtr:S=>[Cr,Rr,Mr,Ec,Nr,wo].concat(g(S)),onRtl:S=>[Cr,Mr,Rr,Nr,Ec,wo].concat(g(S))}:{onLtr:S=>[wo,Cr,Ec,Rr,Nr,Mr].concat(g(S)),onRtl:S=>[wo,Cr,Nr,Mr,Ec,Rr].concat(g(S))}},Vv=(t,s,c,i)=>s==="line"?{bubble:Nl(bS,0,lL),layouts:{onLtr:()=>[u0],onRtl:()=>[qy]},overrides:uL}:{bubble:Nl(0,bS,lL,1/bS),layouts:pW(t,c,i,s),overrides:uL},zv=(t,s)=>{const c=kn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=tr(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},uk=t=>{if(t.length<=1)return t;{const s=g=>ks(t,h=>h.position===g),c=g=>kn(t,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),h=_e(c("selection"),y=>({...y,position:"node"}));return g.concat(h)}else return c(i?"selection":"node");else return c("line")}},$D=t=>{if(t.length<=1)return t;{const s=i=>Ut(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>kn(t,d=>d.position===i))}},ID=(t,s,c)=>{const i=zv(t,s);if(i.contextForms.length>0)return k.some({elem:t,toolbars:[i.contextForms[0]]});{const d=zv(t,c);if(d.contextForms.length>0)return k.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=uk(i.contextToolbars.concat(d.contextToolbars));return k.some({elem:t,toolbars:g})}else return k.none()}},fL=(t,s,c)=>t(s)?k.none():Ob(s,i=>{if($n(i)){const{contextToolbars:d,contextForms:g}=zv(i,c.inNodeScope),h=g.length>0?g:$D(d);return h.length>0?k.some({elem:i,toolbars:h}):k.none()}else return k.none()},t),dk=(t,s)=>{const c=he.fromDom(s.getBody()),i=h=>ao(h,c),d=h=>!i(h)&&!hr(c,h),g=he.fromDom(s.selection.getNode());return d(g)?k.none():ID(g,t.inNodeScope,t.inEditorScope).orThunk(()=>fL(i,g,t))},gL=(t,s)=>{const c={},i=[],d=[],g={},h={},y=(_,R)=>{const L=qe(CC(R));c[_]=L,L.launch.map(F=>{g["form:"+_]={...R.launch,type:F.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(L)}}}),L.scope==="editor"?d.push(L):i.push(L),h[_]=L},S=(_,R)=>{f8(R).each(L=>{R.scope==="editor"?d.push(L):i.push(L),h[_]=L})},T=Io(t);return Ke(T,_=>{const R=t[_];R.type==="contextform"?y(_,R):R.type==="contexttoolbar"&&S(_,R)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},LD=xt("forward-slide"),mk=xt("backward-slide"),FD=xt("change-slide-event"),fk="tox-pop--resizing",bW=t=>{const s=$t([]);return Ns.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Ns.getContent(c).each(i=>{cn(i.element,"visibility")}),To(c.element,fk),cn(c.element,"width")},inlineBehaviours:Ye([dn("context-toolbar-events",[km(Mp(),(c,i)=>{i.event.raw.propertyName==="width"&&(To(c.element,fk),cn(c.element,"width"))}),Ie(FD,(c,i)=>{const d=c.element;cn(d,"width");const g=W(d);Ns.setContent(c,i.event.contents),fr(d,fk);const h=W(d);Le(d,"width",g+"px"),Ns.getContent(c).each(y=>{i.event.focus.bind(S=>(Qi(S),ma(d))).orThunk(()=>(Ht.focusIn(y),td(Xs(d))))}),setTimeout(()=>{Le(c.element,"width",h+"px")},0)}),Ie(LD,(c,i)=>{Ns.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:td(Xs(c.element))}]))}),Dt(c,FD,{contents:i.event.forwardContents,focus:k.none()})}),Ie(mk,(c,i)=>{fl(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Dt(c,FD,{contents:wi(d.bar),focus:d.focus})})})]),Ht.config({mode:"special",onEscape:c=>fl(s.get()).fold(()=>t.onEscape(),i=>(An(c,mk),k.some(!0)))})]),lazySink:()=>Sn.value(t.sink)})},HD="tox-pop--transition",gk=(t,s,c,i)=>{const d=i.backstage,g=d.shared,h=_n().deviceType.isTouch,y=mo(),S=mo(),T=mo(),_=Zr(bW({sink:c,onEscape:()=>(t.focus(),k.some(!0))})),R=()=>{const ft=T.get().getOr("node"),Tt=BD(ft)?1:0;return Hv(t,g,ft,Tt)},L=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),F=ft=>Gs(Ca(ft,y.get(),ao),!0),j=()=>{if(L()){const ft=R(),Tt=Gs(T.get(),"node")?fW(t,y.get()):ND(t);return ft.height<=0||!MD(Tt,ft,.01)}else return!0},Y=()=>{y.clear(),S.clear(),T.clear(),Ns.hide(_)},me=()=>{if(Ns.isOpen(_)){const ft=_.element;cn(ft,"display"),j()?Le(ft,"display","none"):(S.set(0),Ns.reposition(_))}},ee=ft=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[ft],behaviours:Ye([Ht.config({mode:"acyclic"}),dn("pop-dialog-wrap-events",[ms(Tt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Ht.focusIn(Tt))}),qu(Tt=>{t.shortcuts.remove("ctrl+F9")})])])}),ue=Be(()=>gL(s,ft=>{const Tt=Oe([ft]);Dt(_,LD,{forwardContents:ee(Tt)})})),de=(ft,Tt)=>ak(t,{buttons:ft,toolbar:Tt.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])),ke=(ft,Tt)=>dW.buildInitGroups(ft,Tt),Oe=ft=>{const{buttons:Tt}=t.ui.registry.getAll(),Rn=ue(),cs={...Tt,...Rn.formNavigators},ro=Nh(t)===Bl.scrolling?Bl.scrolling:Bl.default,Ot=qt(_e(ft,Ze=>Ze.type==="contexttoolbar"?de(cs,Ze):ke(Ze,g.providers)));return XT({type:ro,uid:xt("context-toolbar"),initGroups:Ot,onEscape:k.none,cyclicKeying:!0,providers:g.providers})},ot=(ft,Tt)=>{const Rn=ft==="node"?g.anchors.node(Tt):g.anchors.cursor(),cs=Vv(t,ft,h(),{lastElement:y.get,isReposition:()=>Gs(S.get(),0),getMode:()=>_c.getMode(c)});return Rs(Rn,cs)},St=(ft,Tt)=>{if(wt.cancel(),!L())return;const Rn=Oe(ft),cs=ft[0].position,ro=ot(cs,Tt);T.set(cs),S.set(1);const Ot=_.element;cn(Ot,"display"),F(Tt)||(To(Ot,HD),_c.reset(c,_)),Ns.showWithinBounds(_,ee(Rn),{anchor:ro,transition:{classes:[HD],mode:"placement"}},()=>k.some(R())),Tt.fold(y.clear,y.set),j()&&Le(Ot,"display","none")};let $e=!1;const wt=JO(()=>{if(!(!t.hasFocus()||t.removed||$e))if(ka(_.element,HD))wt.throttle();else{const ft=ue();dk(ft,t).fold(Y,Tt=>{St(Tt.toolbars,k.some(Tt.elem))})}},17);t.on("init",()=>{t.on("remove",Y),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",me),t.on("click keyup focus SetContent",wt.throttle),t.on(cL,Y),t.on(rL,ft=>{const Tt=ue();ct(Tt.lookupTable,ft.toolbarKey).each(Rn=>{St([Rn],zt(ft.target!==t,ft.target)),Ns.getContent(_).each(Ht.focusIn)})}),t.on("focusout",ft=>{R1.setEditorTimeout(t,()=>{ma(c.element).isNone()&&ma(_.element).isNone()&&Y()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Y()}),t.on("ExecCommand",({command:ft})=>{ft.toLowerCase()==="toggleview"&&Y()}),t.on("AfterProgressState",ft=>{ft.state?Y():t.hasFocus()&&wt.throttle()}),t.on("dragstart",()=>{$e=!0}),t.on("dragend drop",()=>{$e=!1}),t.on("NodeChange",ft=>{ma(_.element).fold(wt.throttle,ce)})})},hL=t=>{Ke([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:ll(t,c.cmd),onSetup:UE(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Da(t),onAction:ll(t,"JustifyNone")})},pL=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=mo();return _e(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:y=>{const S=_=>{_&&(g.on(R=>R.setActive(!1)),g.set(y)),y.setActive(_)};S(Gs(d,s.hash(h)));const T=s.watcher(t,h,S);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},vW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:uN,hash:s=>NI(s,["fixed","relative","empty"]).getOr(s),display:vn,watcher:(s,c,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:c}).unbind,getCurrent:s=>k.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:Da(t),onMenuSetup:Da(t)}),yW=t=>k.from(JM(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:le(c),hash:i=>er(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var h;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:i=>{const d=he.fromDom(i.selection.getNode());return Gi(d,g=>k.some(g).filter($n).bind(h=>sn(h,"lang").map(S=>{const T=sn(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Xa();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),zE(d.clear,Da(t)(i))},onMenuSetup:Da(t)})),CW=t=>{pL(t,vW(t)),yW(t).each(s=>pL(t,s))},SW=(t,s)=>{nk(t,s),SU(t,s),IU(t,s),pU(t,s),FI(t,s)},bL=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",kt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},vL=t=>j1(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),yL=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:vL(t),onAction:ll(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Da(t),onAction:ll(t,"indent")})},CL=t=>{yL(t)},SL=(t,s)=>c=>{c.setActive(s.get());const i=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",i),zE(()=>t.off("PastePlainTextToggle",i),Da(t)(c))},wL=t=>{const s=$t(iN(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:SL(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:SL(t,s)})},hk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},wW=t=>{yg.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:UE(t,s.name),onAction:hk(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,i=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:UE(t,c),onAction:hk(t,c),shortcut:i})}},TG=t=>{yg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ll(t,s.action),shortcut:s.shortcut,context:s.context})}),yg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Da(t),onAction:ll(t,s.action)})})},xW=t=>{yg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ll(t,s.action),onSetup:UE(t,s.name)})})},EW=t=>{wW(t),TG(t),xW(t)},TW=t=>{yg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ll(t,s.action),context:s.context})}),yg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Da(t),onAction:ll(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Da(t),onAction:hk(t,"code")})},kW=t=>{EW(t),TW(t)},pk=(t,s)=>j1(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),_W=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:pk(t,"hasUndo"),onAction:ll(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:pk(t,"hasRedo"),onAction:ll(t,"redo")})},AW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:pk(t,"hasUndo"),onAction:ll(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:pk(t,"hasRedo"),onAction:ll(t,"redo"),shortcut:"Meta+Y"})},OW=t=>{_W(t),AW(t)},DW=t=>j1(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),RW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:DW(t),onAction:ll(t,"mceToggleVisualAid"),context:"any"})},MW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ll(t,"mceToggleVisualAid"),context:"any"})},NW=t=>{MW(t),RW(t)},PW=(t,s)=>{hL(t),kW(t),SW(t,s),OW(t),s7(t),NW(t),CL(t),CW(t),wL(t),bL(t)},xL=t=>bn(t)?t.split(/[ ,]/):t,EL=t=>s=>s.options.get(t),BW=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:bn(c)||Gt(c,bn)?{value:xL(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},TL=EL("contextmenu_never_use_native"),$W=EL("contextmenu_avoid_overlap"),IW=t=>kL(t).length===0,kL=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:kn(c,i=>zn(s,i))},vS=(t,s)=>({type:"makeshift",x:t,y:s}),LW=(t,s,c)=>vS(t.x+s,t.y+c),_L=t=>t.type==="longpress"||t.type.indexOf("touch")===0,VD=t=>{if(_L(t)){const s=t.touches[0];return vS(s.pageX,s.pageY)}else return vS(t.pageX,t.pageY)},FW=t=>{if(_L(t)){const s=t.touches[0];return vS(s.clientX,s.clientY)}else return vS(t.clientX,t.clientY)},HW=(t,s)=>{const c=Mh.DOM.getPos(t);return LW(s,c.x,c.y)},zD=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?VD(s):HW(t.getContentAreaContainer(),FW(s)):UD(t),UD=t=>({type:"selection",root:he.fromDom(t.selection.getNode())}),AL=t=>({type:"node",node:k.some(he.fromDom(t.selection.getNode())),root:he.fromDom(t.getBody())}),OL=(t,s,c)=>{switch(c){case"node":return AL(t);case"point":return zD(t,s);case"selection":return UD(t)}},VW=(t,s,c,i,d,g)=>{const h=c(),y=OL(t,s,g);Kh(h,ad.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(S=>{s.preventDefault(),Ns.showMenuAt(d,{anchor:y},{menu:{markers:Lh("normal")},data:S})})},zW={onLtr:()=>[Cr,Rr,Mr,Ec,Nr,wo,pd,kv,nS,$T,tS,BT],onRtl:()=>[Cr,Mr,Rr,Nr,Ec,wo,pd,kv,tS,BT,nS,$T]},UW=12,WW={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},WD=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return d1(t.getWin(),gh.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},ZW=t=>{const s=t.selection.getRng(),c=()=>{R1.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",i)}},DL=(t,s,c)=>{const i=OL(t,s,c);return{bubble:Nl(0,c==="point"?UW:0,WW),layouts:zW,overrides:{maxWidthFunction:sD(),maxHeightFunction:Fm()},...i}},jW=(t,s,c,i,d,g,h)=>{const y=DL(t,s,g);Kh(c,ad.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(S=>{s.preventDefault();const T=h?ai.HighlightMenuAndItem:ai.HighlightNone;Ns.showMenuWithinBounds(d,{anchor:y},{menu:{markers:Lh("normal"),highlightOnOpen:T},data:S,type:"horizontal"},()=>k.some(Hv(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(cL)})},GW=(t,s,c,i,d,g)=>{const h=_n(),y=h.os.isiOS(),S=h.os.isMacOS(),T=h.os.isAndroid(),_=h.deviceType.isTouch(),R=()=>!(T||y||S&&_),L=()=>{const F=c();jW(t,s,F,i,d,g,R())};if((S||y)&&g!=="node"){const F=()=>{ZW(t),L()};WD(t,s)?F():(t.once("selectionchange",F),t.once("touchend",()=>t.off("selectionchange",F)))}else L()},bk=t=>bn(t)?t==="|":t.type==="separator",ZD={type:"separator"},jD=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(bn(t))return t;switch(t.type){case"separator":return ZD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return bn(i)?i:_e(i,jD)}};default:const c=t;return{type:"menuitem",...s(c),onAction:ut(c.onAction)}}},RL=(t,s)=>{if(s.length===0)return t;const i=fl(t).filter(d=>!bk(d)).fold(()=>[],d=>[ZD]);return t.concat(i).concat(s).concat([ZD])},qW=(t,s,c)=>{const i=co(s,(d,g)=>ct(t,g.toLowerCase()).map(h=>{const y=h.update(c);if(bn(y)&&Is(or(y)))return RL(d,y.split(" "));if(fs(y)&&y.length>0){const S=_e(y,jD);return RL(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&bk(i[i.length-1])&&i.pop(),i},GD=(t,s)=>s.ctrlKey&&!TL(t),KW=t=>t.type==="longpress"||zn(t,"touches"),ML=(t,s)=>!KW(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),NL=(t,s)=>ML(t,s)?t.selection.getStart(!0):s.target,YW=(t,s)=>{const c=$W(t),i=ML(t,s)?"selection":"point";if(Is(c)){const d=NL(t,s);return RC(he.fromDom(d),c)?"node":i}else return i},XW=(t,s,c)=>{const d=_n().deviceType.isTouch,g=Zr(Ns.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ye([dn("dismissContextMenu",[Ie(Si(),(S,T)=>{Yn.close(S),t.focus()})])])})),h=()=>Ns.hide(g),y=S=>{if(TL(t)&&S.preventDefault(),GD(t,S)||IW(t))return;const T=YW(t,S),_=()=>{const L=NL(t,S),F=t.ui.registry.getAll(),j=kL(t);return qW(F.contextMenus,j,L)};(d()?GW:VW)(t,S,_,c,g,T)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",y)})},vk=Ja.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),yk=t=>s=>s.translate(-t.left,-t.top),Ck=t=>s=>s.translate(t.left,t.top),xg=t=>(s,c)=>co(t,(i,d)=>d(i),us(s,c)),Sk=(t,s,c)=>t.fold(xg([Ck(c),yk(s)]),xg([yk(s)]),xg([])),Uv=(t,s,c)=>t.fold(xg([Ck(c)]),xg([]),xg([Ck(s)])),PL=(t,s,c)=>t.fold(xg([]),xg([yk(c)]),xg([Ck(s),yk(c)])),JW=(t,s,c,i,d,g)=>{const h=Uv(t,d,g),y=Uv(s,d,g);return Math.abs(h.left-y.left)<=c&&Math.abs(h.top-y.top)<=i},QW=(t,s,c,i,d,g)=>{const h=Uv(t,d,g),y=Uv(s,d,g),S=Math.abs(h.left-y.left),T=Math.abs(h.top-y.top);return us(S,T)},qD=(t,s,c)=>{const i=t.fold((d,g)=>({position:k.some("absolute"),left:k.some(d+"px"),top:k.some(g+"px")}),(d,g)=>({position:k.some("absolute"),left:k.some(d-c.left+"px"),top:k.some(g-c.top+"px")}),(d,g)=>({position:k.some("fixed"),left:k.some(d+"px"),top:k.some(g+"px")}));return{right:k.none(),bottom:k.none(),...i}},eZ=(t,s,c)=>t.fold((i,d)=>xk(i+s,d+c),(i,d)=>Qh(i+s,d+c),(i,d)=>lb(i+s,d+c)),wk=(t,s,c,i)=>{const d=(g,h)=>(y,S)=>{const T=g(s,c,i);return h(y.getOr(T.left),S.getOr(T.top))};return t.fold(d(PL,xk),d(Uv,Qh),d(Sk,lb))},xk=vk.offset,Qh=vk.absolute,lb=vk.fixed,ep=(t,s)=>{const c=_t(t,s);return er(c)?NaN:parseInt(c,10)},BL=(t,s)=>{const c=t.element,i=ep(c,s.leftAttr),d=ep(c,s.topAttr);return isNaN(i)||isNaN(d)?k.none():k.some(us(i,d))},tZ=(t,s,c)=>{const i=t.element;Pe(i,s.leftAttr,c.left+"px"),Pe(i,s.topAttr,c.top+"px")},nZ=(t,s)=>{const c=t.element;N(c,s.leftAttr),N(c,s.topAttr)},oZ=(t,s,c,i)=>BL(t,s).fold(()=>c,d=>lb(d.left+i.left,d.top+i.top)),sZ=(t,s,c,i,d,g)=>{const h=oZ(t,s,c,i),y=s.mustSnap?rZ(t,s,h,d,g):cZ(t,s,h,d,g),S=Sk(h,d,g);return tZ(t,s,S),y.fold(()=>({coord:lb(S.left,S.top),extra:k.none()}),T=>({coord:T.output,extra:T.extra}))},$L=(t,s)=>{nZ(t,s)},IL=(t,s,c,i)=>Yo(t,d=>{const g=d.sensor;return JW(s,g,d.range.left,d.range.top,c,i)?k.some({output:wk(d.output,s,c,i),extra:d.extra}):k.none()}),rZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return IL(g,c,i,d).orThunk(()=>co(g,(S,T)=>{const _=T.sensor,R=QW(c,_,T.range.left,T.range.top,i,d);return S.deltas.fold(()=>({deltas:k.some(R),snap:k.some(T)}),L=>{const F=(R.left+R.top)/2,j=(L.left+L.top)/2;return F<=j?{deltas:k.some(R),snap:k.some(T)}:S})},{deltas:k.none(),snap:k.none()}).snap.map(S=>({output:wk(S.output,c,i,d),extra:S.extra})))},cZ=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return IL(g,c,i,d)},aZ=(t,s,c)=>({coord:wk(t.output,t.output,s,c),extra:t.extra});var iZ=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=pr(t.element),h=Jc(g),y=jb(d),S=aZ(i,h,y),T=qD(S.coord,h,y);io(d,T)}}});const KD="data-initial-z-index",lZ=t=>{Qr(t.element).filter($n).each(s=>{sn(s,KD).fold(()=>cn(s,"z-index"),c=>Le(s,"z-index",c)),N(s,KD)})},uZ=t=>{Qr(t.element).filter($n).each(s=>{Do(s,"z-index").each(c=>{Pe(s,KD,c)}),Le(s,"z-index",So(t.element,"z-index"))})},LL=(t,s)=>{t.getSystem().addToGui(s),uZ(s)},FL=t=>{lZ(t),t.getSystem().removeFromGui(t)},YD=(t,s,c)=>t.getSystem().build(Kd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var dZ=oc("snaps",[Fe("getSnapPoints"),Gn("onSensor"),Fe("leftAttr"),Fe("topAttr"),ve("lazyViewport",Ar),ve("mustSnap",!1)]);const ub=[ve("useFixed",Hn),Fe("blockerClass"),ve("getTarget",vn),ve("onDrag",ce),ve("repositionTarget",!0),ve("onDrop",ce),vs("getBounds",Ar),dZ],mZ=t=>ja(Do(t,"left"),Do(t,"top"),Do(t,"position"),(s,c,i)=>(i==="fixed"?lb:xk)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=ps(t);return Qh(s.left,s.top)}),fZ=(t,s,c,i,d)=>{const g=d.bounds,h=Uv(s,c,i),y=Dl(h.left,g.x,g.x+g.width-d.width),S=Dl(h.top,g.y,g.y+g.height-d.height),T=Qh(y,S);return s.fold(()=>{const _=PL(T,c,i);return xk(_.left,_.top)},le(T),()=>{const _=Sk(T,c,i);return lb(_.left,_.top)})},XD=(t,s,c,i,d,g,h)=>{const y=s.fold(()=>{const S=eZ(c,g.left,g.top),T=Sk(S,i,d);return lb(T.left,T.top)},S=>{const T=sZ(t,S,c,g,i,d);return T.extra.each(_=>{S.onSensor(t,_)}),T.coord});return fZ(t,y,i,d,h)},gZ=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=pr(t.element),h=Jc(g),y=jb(d),S=mZ(d),T=XD(t,s.snaps,S,h,y,i,c),_=qD(T,h,y);io(d,_)}s.onDrag(t,d,i)},HL=(t,s)=>({bounds:t.getBounds(),height:La(s.element),width:K(s.element)}),JD=(t,s,c,i,d)=>{const g=c.update(i,d),h=c.getStartData().getOrThunk(()=>HL(s,t));g.each(y=>{gZ(t,s,h,y)})},VL=(t,s,c,i)=>{s.each(FL),c.snaps.each(g=>{$L(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},QD=t=>(s,c)=>{const i=d=>{c.setStartData(HL(s,d))};return Eo([Ie(Em(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},hZ=t=>Eo([Ie(yi(),t.forceDrop),Ie(Pb(),t.drop),Ie(Rp(),(s,c)=>{t.move(c.event)}),Ie(Nb(),t.delayDrop)]);var pZ=Object.freeze({__proto__:null,getData:t=>k.from(us(t.x,t.y)),getDelta:(t,s)=>us(s.left-t.left,s.top-t.top)});const zL=(t,s,c)=>[Ie(yi(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>VL(i,k.some(T),t,s),y=uB(h,200),S={drop:h,delayDrop:y.schedule,forceDrop:h,move:R=>{y.cancel(),JD(i,t,s,pZ,R)}},T=YD(i,t.blockerClass,hZ(S));(()=>{c(i),LL(i,T)})()})],bZ=[...ub,es("dragger",{handlers:QD(zL)})],vZ=t=>Eo([Ie(nu(),t.forceDrop),Ie(Sf(),t.drop),Ie(Mb(),t.drop),Ie(Cm(),(s,c)=>{t.move(c.event)})]),yZ=t=>{const s=t[0];return k.some(us(s.clientX,s.clientY))};var UL=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?yZ(c):k.none()},getDelta:(t,s)=>us(s.left-t.left,s.top-t.top)});const WL=(t,s,c)=>{const i=mo(),d=g=>{VL(g,i.get(),t,s),i.clear()};return[Ie(nu(),(g,h)=>{h.stop();const y=()=>d(g),S={drop:y,delayDrop:ce,forceDrop:y,move:R=>{JD(g,t,s,UL,R)}},T=YD(g,t.blockerClass,vZ(S));i.set(T),(()=>{c(g),LL(g,T)})()}),Ie(Cm(),(g,h)=>{h.stop(),JD(g,t,s,UL,h.event)}),Ie(Sf(),(g,h)=>{h.stop(),d(g)}),Ie(Mb(),d)]},Ek=[...ub,es("dragger",{handlers:QD(WL)})],CZ=(t,s,c)=>[...zL(t,s,c),...WL(t,s,c)],SZ=[...ub,es("dragger",{handlers:QD(CZ)})];var wZ=Object.freeze({__proto__:null,mouse:bZ,touch:Ek,mouseOrTouch:SZ}),EZ=Object.freeze({__proto__:null,init:()=>{let t=k.none(),s=k.none();const c=()=>{t=k.none(),s=k.none()},i=(S,T)=>{const _=t.map(R=>S.getDelta(R,T));return t=k.some(T),_},d=(S,T)=>S.getData(T).bind(_=>i(S,_)),g=S=>{s=k.some(S)},h=()=>s,y=le({});return ua({readState:y,reset:c,update:d,getStartData:h,setStartData:g})}});const db=yy({branchKey:"mode",branches:wZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:k.from(t.extra)})},state:EZ,apis:iZ}),eR=40,Tk=eR/2,ZL=(t,s,c,i,d,g)=>t.fold(()=>db.snap({sensor:Qh(c-Tk,i-Tk),range:us(d,g),output:Qh(k.some(c),k.some(i)),extra:{td:s}}),h=>{const y=c-Tk,S=i-Tk,T=eR,_=eR,R=h.element.dom.getBoundingClientRect();return db.snap({sensor:Qh(y,S),range:us(T,_),output:Qh(k.some(c-R.width/2),k.some(i-R.height/2)),extra:{td:s}})}),kk=(t,s,c)=>{const i=(d,g)=>d.exists(h=>ao(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},tR=t=>uo(jr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ye([db.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),bv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),TZ=(t,s)=>{const c=$t([]),i=$t([]),d=$t(!1),g=mo(),h=mo(),y=St=>{const $e=Fu(St);return ZL(F.getOpt(s),St,$e.x,$e.y,$e.width,$e.height)},S=()=>_e(c.get(),St=>y(St)),T=St=>{const $e=Fu(St);return ZL(j.getOpt(s),St,$e.right,$e.bottom,$e.width,$e.height)},_=()=>_e(i.get(),St=>T(St)),R=kk(S,g,St=>{h.get().each($e=>{t.dispatch("TableSelectorChange",{start:St,finish:$e})})}),L=kk(_,h,St=>{g.get().each($e=>{t.dispatch("TableSelectorChange",{start:$e,finish:St})})}),F=tR(R),j=tR(L),Y=Zr(F.asSpec()),me=Zr(j.asSpec()),ee=(St,$e,wt,ft)=>{const Tt=$e.dom.getBoundingClientRect();cn(St.element,"display");const Rn=Jr(he.fromDom(t.getBody())).dom.innerHeight,cs=wt(Tt),ro=ft(Tt,Rn);(cs||ro)&&Le(St.element,"display","none")},ue=(St,$e,wt,ft)=>{const Tt=wt($e);db.snapTo(St,Tt),ee(St,$e,ro=>ro[ft]<0,(ro,Ot)=>ro[ft]>Ot)},de=St=>ue(Y,St,y,"top"),ke=()=>g.get().each(de),Oe=St=>ue(me,St,T,"bottom"),ot=()=>h.get().each(Oe);if(_n().deviceType.isTouch()){const St=$e=>_e($e,he.fromDom);t.on("TableSelectionChange",$e=>{d.get()||(Hd(s,Y),Hd(s,me),d.set(!0));const wt=he.fromDom($e.start),ft=he.fromDom($e.finish);g.set(wt),h.set(ft),k.from($e.otherCells).each(Tt=>{c.set(St(Tt.upOrLeftCells)),i.set(St(Tt.downOrRightCells)),de(wt),Oe(ft)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ke(),ot()}),t.on("TableSelectionClear",()=>{d.get()&&(Vd(Y),Vd(me),d.set(!1)),g.clear(),h.clear()})}};var kZ=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const _Z=(t,s)=>{const c=k.from(_t(t,"id")).getOrThunk(()=>{const i=xt("aria");return Pe(s,"id",i),i});Pe(t,"aria-describedby",c)},AZ=t=>{N(t,"aria-describedby")},OZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",DZ=(t,s,c)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(T,_,R)=>jr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":R}},components:[Ts(T)],action:L=>{t.focus(),t.selection.select(_),t.nodeChanged()},buttonBehaviours:Ye([Qs.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",_.nodeName.toLowerCase()]),onShow:(L,F)=>{_Z(L.element,F.element)},onHide:L=>{AZ(L.element)}})}),Ll.button(c.isDisabled),gr(()=>c.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ts(` ${d} `)]}),y=T=>co(T,(_,R,L)=>{const F=g(R.name,R.element,L);return L===0?_.concat([F]):_.concat([h(),F])},[]),S=T=>{const _=[];let R=T.length;for(;R-- >0;){const L=T[R];if(L.nodeType===1&&!OZ(L)){const F=_P(t,L);if(F.isDefaultPrevented()||_.push({name:F.name,element:L}),F.isPropagationStopped())break}}return _};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ye([Ht.config({mode:"flow",selector:"div[role=button]"}),Jt.config({disabled:c.isDisabled}),gr(()=>c.checkUiComponentContext("any")),Cs.config({}),ln.config({}),dn("elementPathEvents",[ms((T,_)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Ht.focusIn(T)),t.on("NodeChange",R=>{const L=S(R.parents),F=L.length>0?y(L):[];ln.set(T,F)})})])]),components:[]}};var tp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(tp||(tp={}));const RZ=(t,s,c,i,d)=>{const g={height:ib(i+s.top,N1(t),Jx(t))};return c===tp.Both&&(g.width=ib(d+s.left,K4(t),P1(t))),g},jL=(t,s,c)=>{const i=he.fromDom(t.getContainer()),d=RZ(t,s,c,Po(i),W(i));gs(d,(g,h)=>{pc(g)&&Le(i,h,OD(g))}),L8(t)},MZ=t=>{const s=aN(t);return s===!1?tp.None:s==="both"?tp.Both:tp.Vertical},_k=(t,s,c,i)=>{const g=us(c*20,i*20);return jL(t,g,s),k.some(!0)},NZ=(t,s)=>{const c=MZ(t);if(c===tp.None)return k.none();const i=c===tp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some($l("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle"},behaviours:[db.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>jL(t,h,c),blockerClass:"tox-blocker"}),Ht.config({mode:"special",onLeft:()=>_k(t,c,-1,0),onRight:()=>_k(t,c,1,0),onUp:()=>_k(t,c,0,-1),onDown:()=>_k(t,c,0,1)}),Cs.config({}),tn.config({}),Qs.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},PZ=(t,s)=>{const c=(i,d,g)=>ln.set(i,[Ts(s.translate(["{0} "+g,d[g]]))]);return jr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ye([Ll.button(s.isDisabled),gr(()=>s.checkUiComponentContext("any")),Cs.config({}),ln.config({}),bt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),dn("wordcount-events",[Rd(i=>{const d=bt.getValue(i),g=d.mode==="words"?"characters":"words";bt.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),ms(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=bt.getValue(i);bt.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[xc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},BZ=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",kZ.trim()])},behaviours:Ye([tn.config({})])}]}),i=()=>{const y=qA("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ts(vu.translate(["Press {0} for help",y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(PZ(t,s)),oA(t)&&y.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],S=lN(t),T=cN(t),_=oA(t)||t.hasPlugin("wordcount"),R=()=>{const L="tox-statusbar__text-container--flex-start",F="tox-statusbar__text-container--flex-end",j="tox-statusbar__text-container--space-around";if(S){const Y="tox-statusbar__text-container-3-cols";return!_&&!T?[Y,j]:_&&!T?[Y,F]:[Y,L]}return[_&&!T?F:L]};return T&&y.push(DZ(t,{},s)),S&&y.push(i()),_&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...R()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),S=NZ(t,s);return y.concat(S.toArray())})()}},nR=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),$Z=(t,s)=>{const c=t.inline,i=c?sL:eW,d=Ph(t)?q3:QV,g=sW(),h=mo(),y=mo(),S=mo(),L=_n().deviceType.isTouch()?["tox-platform-touch"]:[],F=aA(t),j=Nh(t),Y=uo({dom:{tag:"div",classes:["tox-anchorbar"]}}),me=uo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ee=()=>g.mainUi.get().map(Lt=>Lt.outerContainer).bind(rs.getHeader),ue=()=>Sn.fromOption(g.dialogUi.get().map(Lt=>Lt.sink),"UI has not been rendered"),de=()=>Sn.fromOption(g.popupUi.get().map(Lt=>Lt.sink),"(popup) UI has not been rendered"),ke=g.lazyGetInOuterOrDie("anchor bar",Y.getOpt),Oe=g.lazyGetInOuterOrDie("bottom anchor bar",me.getOpt),ot=g.lazyGetInOuterOrDie("toolbar",rs.getToolbar),St=g.lazyGetInOuterOrDie("throbber",rs.getThrobber),$e=hG({popup:de,dialog:ue},t,ke,Oe),wt=()=>{const Lt={attributes:{[Zw]:F?Sr.BottomToTop:Sr.TopToBottom}},un=rs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:$e.popup,onEscape:()=>{t.focus()}}),Ho=rs.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:$e.popup.shared.getSink,providers:$e.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:lf=>{H8(t,lf)},type:j,lazyToolbar:ot,lazyHeader:()=>ee().getOrDie("Could not find header element"),...Lt}),_o=rs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:$e.popup.shared.providers,onEscape:()=>{t.focus()},type:j}),Pi=Q2(t),Ps=cE(t),Wl=sE(t),va=oE(t),Zl=ft(),jl=Pi||Ps||Wl,yd=()=>Pi?[_o]:Ps?[Ho]:[],xS=va?[Zl,un]:[un];return rs.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(jl?[]:["tox-editor-header--empty"]),...Lt},components:qt([Wl?xS:[],yd(),rd(t)?[]:[Y.asSpec()]]),sticky:Ph(t),editor:t,sharedBackstage:$e.popup.shared})},ft=()=>rs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Tt=()=>{const Lt=rs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),un=rs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Lt,un]}},Rn=()=>{const Lt=iA(t),un=ao(ie(),Lt)&&So(Lt,"display")==="grid",Ho={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(L),attributes:{...vu.isRtl()?{dir:"rtl"}:{}}},behaviours:Ye([_c.config({useFixed:()=>d.isDocked(ee)})])},_o={dom:{styles:{width:document.body.clientWidth+"px"}},events:Eo([Ie(Tf(),Wl=>{Le(Wl.element,"width",document.body.clientWidth+"px")})])},Pi=Zr(Rs(Ho,un?_o:{})),Ps=vO(Pi);return y.set(Ps),{sink:Pi,mothership:Ps}},cs=()=>{const Lt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(L),attributes:{...vu.isRtl()?{dir:"rtl"}:{}}},behaviours:Ye([_c.config({useFixed:()=>d.isDocked(ee),getBounds:()=>s.getPopupSinkBounds()})])},un=Zr(Lt),Ho=vO(un);return S.set(Ho),{sink:un,mothership:Ho}},ro=()=>{const Lt=wt(),un=Tt(),Ho=rs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:$e.popup}),_o=rs.parts.viewWrapper({backstage:$e.popup}),Pi=rN(t)&&!c?k.some(BZ(t,$e.popup.shared.providers)):k.none(),Ps=qt([F?[]:[Lt],c?[]:[un],F?[Lt]:[]]),Wl=rs.parts.editorContainer({components:qt([Ps,c?[]:[me.asSpec()]])}),va=lA(t),Zl={role:"application",...vu.isRtl()?{dir:"rtl"}:{},...va?{"aria-hidden":"true"}:{}},jl=Zr(rs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(F?["tox-tinymce--toolbar-bottom"]:[]).concat(L),styles:{visibility:"hidden",...va?{opacity:"0",border:"0"}:{}},attributes:Zl},components:[Wl,...c?[]:[_o,...Pi.toArray()],Ho],behaviours:Ye([gr(()=>$e.popup.shared.providers.checkUiComponentContext("any")),Jt.config({disableClass:"tox-tinymce--disabled"}),Ht.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),yd=vO(jl);return h.set(yd),{mothership:yd,outerContainer:jl}},Ot=Lt=>{const un=OD(eL(t)),Ho=OD(tW(t));return t.inline||(zi("div","width",Ho)&&Le(Lt.element,"width",Ho),zi("div","height",un)?Le(Lt.element,"height",un):Le(Lt.element,"height","400px")),un},Ze=Lt=>{t.addShortcut("alt+F9","focus menubar",()=>{rs.focusMenubar(Lt)}),t.addShortcut("alt+F10","focus toolbar",()=>{rs.focusToolbar(Lt)}),t.addCommand("ToggleToolbarDrawer",(un,Ho)=>{Ho!=null&&Ho.skipFocus?rs.toggleToolbarDrawerWithoutFocusing(Lt):rs.toggleToolbarDrawer(Lt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>rs.isToolbarDrawerToggled(Lt))},dt=Lt=>{const{mainUi:un,popupUi:Ho,uiMotherships:_o}=Lt;jn(X4(t),(hb,SR)=>{t.ui.registry.addGroupToolbarButton(SR,hb)});const{buttons:Pi,menuItems:Ps,contextToolbars:Wl,sidebars:va,views:Zl}=t.ui.registry.getAll(),jl=aE(t),yd={menuItems:Ps,menus:dN(t),menubar:tN(t),toolbar:jl.getOrThunk(()=>eE(t)),allowToolbarGroups:j===Bl.floating,buttons:Pi,sidebar:va,views:Zl};Ze(un.outerContainer),jV(t,un.mothership,_o),d.setup(t,$e.popup.shared,ee),PW(t,$e.popup),XW(t,$e.popup.shared.getSink,$e.popup),hz(t),CG(t,St,$e.popup.shared),gk(t,Wl,Ho.sink,{backstage:$e.popup}),TZ(t,Ho.sink);const xS=t.getElement(),lf=Ot(un.outerContainer),CR={targetNode:xS,height:lf};return i.render(t,Lt,yd,$e.popup,CR)},on=Lt=>(S.set(Lt.mothership),Lt),pn=()=>{const Lt=ro(),un=Rn(),Ho=mg(t)?cs():on(un);g.dialogUi.set(un),g.popupUi.set(Ho),g.mainUi.set(Lt);const _o={popupUi:Ho,dialogUi:un,mainUi:Lt,uiMotherships:g.getUiMotherships()};return dt(_o)};return{popups:{backstage:$e.popup,getMothership:()=>nR("popups",S)},dialogs:{backstage:$e.dialog,getMothership:()=>nR("dialogs",y)},renderUI:pn}},IZ=t=>t.dom.textContent,LZ=(t,s)=>{const c=sn(t,"id").fold(()=>{const i=xt("dialog-label");return Pe(s,"id",i),i},vn);Pe(t,"aria-labelledby",c)},FZ=le([Fe("lazySink"),lo("dragBlockClass"),vs("getBounds",Ar),ve("useTabstopAt",kt),ve("firstTabstop",0),ve("eventOrder",{}),ac("modalBehaviours",[Ht]),ta("onExecute"),eh("onEscape")]),oR={sketch:vn},HZ=le([_i({name:"draghandle",overrides:(t,s)=>({behaviours:Ye([db.config({mode:"mouse",getTarget:c=>Dr(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),oa({schema:[Fe("dom")],name:"title"}),oa({factory:oR,schema:[Fe("dom")],name:"close"}),oa({factory:oR,schema:[Fe("dom")],name:"body"}),_i({factory:oR,schema:[Fe("dom")],name:"footer"}),ol({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ve("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ve("components",[])],name:"blocker"})]),VZ=(t,s,c,i)=>{const d=mo(),g=j=>{d.set(j);const Y=t.lazySink(j).getOrDie(),me=i.blocker(),ee=Y.getSystem().build({...me,components:me.components.concat([wi(j)]),behaviours:Ye([tn.config({}),dn("dialog-blocker-events",[km(kl(),()=>{tm.isBlocked(j)?ce():Ht.focusIn(j)})])])});Hd(Y,ee),Ht.focusIn(j)},h=j=>{d.clear(),Qr(j.element).each(Y=>{j.getSystem().getByDom(Y).each(me=>{Vd(me)})})},y=j=>vt(j,t,"body"),S=j=>jo(j,t,"footer"),T=(j,Y)=>{tm.block(j,Y)},_=j=>{tm.unblock(j)},R=xt("modal-events"),L={...t.eventOrder,[za()]:[R].concat(t.eventOrder["alloy.system.attached"]||[])},F=_n();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:y,getFooter:S,setIdle:_,setBusy:T},eventOrder:L,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ic(t.modalBehaviours,[ln.config({}),Ht.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),tm.config({getRoot:d.get}),dn(R,[ms(j=>{const Y=vt(j,t,"title").element,me=IZ(Y);F.os.isMacOS()&&eo(me)?Pe(j.element,"aria-label",me):LZ(j.element,Y)})])])}},mc=Uc({name:"ModalDialog",configFields:FZ(),partFields:HZ(),factory:VZ,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),GL=Yt([wr,PA].concat(Hh)),qL=wl,sR=[RE("button"),Il,Cc("align","end",["start","end"]),DE,id,_b("buttonType",["primary","secondary"]),mr("context","mode:design")],Ak=[...sR,fg],Ok=[ea("type",["submit","cancel","custom"]),...Ak],zZ=[ea("type",["menu"]),gg,hC,Il,vi("items",GL),...sR],UZ=[...sR,ea("type",["togglebutton"]),hC,Il,gg,Sc("active",!1)],WZ=rr("type",{submit:Ok,cancel:Ok,custom:Ok,menu:zZ,togglebutton:UZ}),ZZ=[wr,fg,ea("level",["info","warn","error","success"]),JN,ve("url","")],jZ=Yt(ZZ),GZ=t=>[wr,t],Wv=[wr,fg,id,RE("button"),Il,i8,_b("buttonType",["primary","secondary","toolbar"]),DE,mr("context","mode:design")],qZ=Yt(Wv),Zv=[wr,PA],nm=Zv.concat([$A]),KZ=Zv.concat([BA,id,mr("context","mode:design")]),YZ=Yt(KZ),XZ=wl,JZ=nm.concat([oP("auto"),mr("context","mode:design")]),rR=Yt(JZ),yS=ty([L1,fg,JN]),cR=nm.concat([mr("storageKey","default"),mr("context","mode:design")]),Dk=Yt(cR),mb=pt,QZ=Yt(nm),KL=pt,YL=Zv.concat([mr("tag","textarea"),zr("scriptId"),zr("scriptUrl"),ju("onFocus"),Ab("settings",void 0)]),XL=Zv.concat([mr("tag","textarea"),El("init")]),ej=Tp(t=>Ms("customeditor.old",bi(XL),t).orThunk(()=>Ms("customeditor.new",bi(YL),t))),tj=pt,nj=nm.concat([mr("context","mode:design")]),JL=Yt(nj),QL=Od(),iR=t=>[wr,kb("columns"),t],oj=[wr,zr("html"),Cc("presets","presentation",["presentation","document"]),vs("onInit",ce),Sc("stretched",!1)],sj=Yt(oj),rj=nm.concat([Sc("border",!1),Sc("sandboxed",!0),Sc("streamContent",!1),Sc("transparent",!0)]),eF=Yt(rj),cj=pt,aj=Yt(Zv.concat([Ur("height")])),ij=Yt([zr("url"),_p("zoom"),_p("cachedWidth"),_p("cachedHeight")]),lR=nm.concat([Ur("inputMode"),Ur("placeholder"),Sc("maximized",!1),id,mr("context","mode:design")]),uR=Yt(lR),lj=pt,tF=t=>[wr,BA,t,Cc("align","start",["start","center","end"]),Ur("for")],uj=[fg,L1],dj=[fg,vi("items",$g("items",()=>dR))],dR=TS([Yt(uj),Yt(dj)]),mj=nm.concat([vi("items",dR),id,mr("context","mode:design")]),fj=Yt(mj),fb=pt,nF=nm.concat([sy("items",[fg,L1]),ry("size",1),id,mr("context","mode:design")]),gj=Yt(nF),Rk=pt,jv=nm.concat([Sc("constrain",!0),id,mr("context","mode:design")]),Mk=Yt(jv),mR=Yt([zr("width"),zr("height")]),Nk=Zv.concat([BA,ry("min",0),ry("max",0)]),Ri=Yt(Nk),Pk=pf,oF=[wr,vi("header",pt),vi("cells",Cl(pt))],sF=Yt(oF),hj=nm.concat([Ur("placeholder"),Sc("maximized",!1),id,mr("context","mode:design")]),pj=Yt(hj),np=pt,bj=[ea("type",["directory","leaf"]),XN,zr("id"),Zu("menu",Nv),Ur("customStateIcon"),Ur("customStateIconTooltip")],fR=Yt(bj),Gv=bj.concat([vi("children",$g("children",()=>bf("type",{directory:CS,leaf:fR})))]),CS=Yt(Gv),rF=bf("type",{directory:CS,leaf:fR}),vj=[wr,vi("items",rF),ju("onLeafAction"),ju("onToggleExpand"),ym("defaultExpandedIds",[],pt),Ur("defaultSelectedId")],yj=Yt(vj),Cj=nm.concat([Cc("filetype","file",["image","media","file"]),id,Ur("picker_text"),mr("context","mode:design")]),Sj=Yt(Cj),qv=Yt([L1,LA]),cF=t=>nc("items","items",ji(),Cl(Tp(s=>Ms(`Checking item of ${t}`,gR,s).fold(c=>Sn.error(vf(c)),c=>Sn.value(c))))),gR=Vr(()=>bf("type",{alertbanner:jZ,bar:Yt(GZ(cF("bar"))),button:qZ,checkbox:YZ,colorinput:Dk,colorpicker:QZ,dropzone:JL,grid:Yt(iR(cF("grid"))),iframe:eF,input:uR,listbox:fj,selectbox:gj,sizeinput:Mk,slider:Ri,textarea:pj,urlinput:Sj,customeditor:ej,htmlpanel:sj,imagepreview:aj,collection:rR,label:Yt(tF(cF("label"))),table:sF,tree:yj,panel:xj})),wj=[wr,ve("classes",[]),vi("items",gR)],xj=Yt(wj),Ej=[RE("tab"),XN,vi("items",gR)],Tj=[wr,sy("tabs",Ej)],SS=Yt(Tj),kj=Ak,_j=WZ,aF=Yt([zr("title"),go("body",bf("type",{panel:xj,tabpanel:SS})),mr("size","normal"),ym("buttons",[],_j),ve("initialData",{}),vs("onAction",ce),vs("onChange",ce),vs("onSubmit",ce),vs("onClose",ce),vs("onCancel",ce),vs("onTabChange",ce)]),Aj=t=>Ms("dialog",aF,t),BG=Yt([ea("type",["cancel","custom"]),...kj]),e=Yt([zr("title"),zr("url"),_p("height"),_p("width"),Ap("buttons",BG),vs("onAction",ce),vs("onCancel",ce),vs("onClose",ce),vs("onMessage",ce)]),n=t=>Ms("dialog",e,t),o=t=>Qn(t)?[t].concat(pe(Fi(t),o)):fs(t)?pe(t,o):[],r=t=>bn(t.type)&&bn(t.name),a={checkbox:XZ,colorinput:mb,colorpicker:KL,dropzone:QL,input:lj,iframe:cj,imagepreview:ij,selectbox:Rk,sizeinput:mR,slider:Pk,listbox:fb,size:mR,textarea:np,urlinput:qv,customeditor:tj,collection:yS,togglemenuitem:qL},u=t=>k.from(a[t.type]),f=t=>kn(o(t),r),b=t=>{const s=f(t),c=pe(s,i=>u(i).fold(()=>[],d=>[go(i.name,d)]));return Yt(c)},C=t=>{var s;const c=qe(Aj(t)),i=b(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:i,initialData:d}},x={open:(t,s)=>{const c=C(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=qe(n(s));return t(c)},redial:t=>C(t)};var M=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(g=>{const h=g(i,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?rv:TM)(i,h)})};return Eo([Ie(ru(),(i,d)=>{const g=d;if(!g.universal){const h=t.channel;yo(g.channels,h)&&c(i,g.data)}}),ms((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),z=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),G=[Fe("channel"),lo("renderComponents"),lo("updateState"),lo("initialData"),Sc("reuseDom",!0)],X=Object.freeze({__proto__:null,init:()=>{const t=$t(k.none()),s=()=>t.set(k.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const oe=rc({fields:G,name:"reflecting",active:M,apis:z,state:X}),fe=t=>{const s=[],c={};return gs(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?Sn.error(s):Sn.value(c)},ge=(t,s,c,i)=>{const d=uo(wv.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:_e(t.items,h=>D3(g,h,s,c,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Ye([Ht.config({mode:"acyclic",useTabstopAt:Me(GC)}),xu.memento(d),KH(d,{postprocess:g=>fe(g).fold(h=>(console.error(h),{}),vn)}),dn("dialog-body-panel",[Ie(kl(),(g,h)=>{g.getSystem().broadcastOn([qC],{newFocus:k.some(h.event.target)})})])])}},be=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:K2(t.action),behaviours:ic(t.tabButtonBehaviours,[tn.config({}),Ht.config({mode:"execution",useSpace:!0,useEnter:!0}),bt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),He=ri({name:"TabButton",configFields:[ve("uid",void 0),Fe("value"),nc("dom","dom",Pg(()=>({attributes:{role:"tab",id:xt("aria"),"aria-selected":"false"}})),Sl()),lo("action"),ve("domModification",{}),ac("tabButtonBehaviours",[tn,Ht,bt]),Fe("view")],factory:be}),Qe=le([Fe("tabs"),Fe("dom"),ve("clickToDismiss",!1),ac("tabbarBehaviours",[st,Ht]),Bd(["tabClass","selectedClass"])]),yt=S1({factory:He,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{st.dehighlight(i,d),Dt(i,BS(),{tabbar:i,button:d})},c=(i,d)=>{st.highlight(i,d),Dt(i,PS(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=st.isHighlighted(d,i);(g&&t.clickToDismiss?s:g?ce:c)(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Re=le([yt]),Ee=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ic(t.tabbarBehaviours,[st.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Pe(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Pe(g.element,"aria-selected","false")}}),Ht.config({mode:"flow",getInitial:d=>st.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Ue=Uc({name:"Tabbar",configFields:Qe(),partFields:Re(),factory:Ee}),Ct=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ic(t.tabviewBehaviours,[ln.config({})]),domModification:{attributes:{role:"tabpanel"}}}),It=ri({name:"Tabview",configFields:[ac("tabviewBehaviours",[ln])],factory:Ct}),On=le([ve("selectFirst",!0),Gn("onChangeTab"),Gn("onDismissTab"),ve("tabs",[]),ac("tabSectionBehaviours",[])]),Dn=oa({factory:Ue,schema:[Fe("dom"),vm("markers",[Fe("tabClass"),Fe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),vo=oa({factory:It,name:"tabview"}),Ro=le([Dn,vo]),ir=(t,s,c,i)=>{const d=h=>{const y=bt.getValue(h);jo(h,t,"tabview").each(S=>{Ut(t.tabs,_=>_.value===y).each(_=>{const R=_.view();sn(h.element,"id").each(L=>{Pe(S.element,"aria-labelledby",L)}),ln.set(S,R),t.onChangeTab(S,h,R)})})},g=(h,y)=>{jo(h,t,"tabbar").each(S=>{y(S).each(Tm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:L0(t.tabSectionBehaviours),events:Eo(qt([t.selectFirst?[ms((h,y)=>{g(h,st.getFirst)})]:[],[Ie(PS(),(h,y)=>{const S=y.event.button;d(S)}),Ie(BS(),(h,y)=>{const S=y.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>jo(h,t,"tabview").map(y=>ln.contents(y)).getOr([]),showTab:(h,y)=>{g(h,T=>{const _=st.getCandidates(T);return Ut(_,L=>bt.getValue(L)===y).filter(L=>!st.isHighlighted(T,L))})}}}},Br=Uc({name:"TabSection",configFields:On(),partFields:Ro(),factory:ir,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),Ac=(t,s,c)=>_e(t,(i,d)=>{ln.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return ln.set(c,[]),g.height}),at=t=>_s(Oc(t,(s,c)=>s>c?-1:s<c?1:0)),Mt=(t,s,c)=>{const i=mi(t).dom,d=Dr(t,".tox-dialog-wrap").getOr(t),g=So(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const y=Po(s),T=s.dom.offsetLeft>=c.dom.offsetLeft+W(c)?Math.max(Po(c),y):y,_=parseInt(So(t,"margin-top"),10)||0,R=parseInt(So(t,"margin-bottom"),10)||0,F=Po(t)+_+R-T;return h-F},so=(t,s)=>{_s(t).each(c=>Br.showTab(s,c.value))},ht=(t,s)=>{Le(t,"height",s+"px"),Le(t,"flex-basis",s+"px")},jt=(t,s,c)=>{Dr(t,'[role="dialog"]').each(i=>{ys(i,'[role="tablist"]').each(d=>{c.get().map(g=>(Le(s,"height","0"),Le(s,"flex-basis","0"),Math.min(g,Mt(i,s,d)))).each(g=>{ht(s,g)})})})},Qt=t=>ys(t,'[role="tabpanel"]'),gt=t=>{const s=mo();return{extraEvents:[ms(d=>{const g=d.element;Qt(g).each(h=>{Le(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(y=>{const S=Ac(t,h,y);at(S).fold(s.clear,s.set)}),jt(g,h,s),cn(h,"visibility"),so(t,d),requestAnimationFrame(()=>{jt(g,h,s)})})}),Ie(Tf(),d=>{const g=d.element;Qt(g).each(h=>{jt(g,h,s)})}),Ie(wB,(d,g)=>{const h=d.element;Qt(h).each(y=>{const S=td(Xs(y));Le(y,"visibility","hidden");const T=Do(y,"height").map(L=>parseInt(L,10));cn(y,"height"),cn(y,"flex-basis");const _=y.dom.getBoundingClientRect().height;T.forall(L=>_>L)?(s.set(_),jt(h,y,s)):T.each(L=>{ht(y,L)}),cn(y,"visibility"),S.each(Qi)})})],selectFirst:!1}},En="send-data-to-section",Pn="send-data-to-view",Gr=(t,s,c,i)=>{const d=$t({}),g=_=>{const R=bt.getValue(_),L=fe(R).getOr({}),F=d.get(),j=Rs(F,L);d.set(j)},h=_=>{const R=d.get();bt.setValue(_,R)},y=$t(null),S=_e(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ts(c.shared.providers.translate(_.title))],view:()=>[wv.sketch(R=>({dom:{tag:"div",classes:["tox-form"]},components:_e(_.items,L=>D3(R,L,s,c,i)),formBehaviours:Ye([Ht.config({mode:"acyclic",useTabstopAt:Me(GC)}),dn("TabView.form.events",[ms(h),qu(g)]),ti.config({channels:Ig([{key:En,value:{onReceive:g}},{key:Pn,value:{onReceive:h}}])})])}))]})),T=gt(S);return Br.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,R,L)=>{const F=bt.getValue(R);Dt(_,SB,{name:F,oldName:y.get()}),y.set(F)},tabs:S,components:[Br.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ue.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ye([Cs.config({})])}),Br.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:Ye([dn("tabpanel",T.extraEvents),Ht.config({mode:"acyclic"}),Un.config({find:_=>_s(Br.getViewItems(_))}),nb(k.none(),_=>(_.getSystem().broadcastOn([En],{}),d.get()),(_,R)=>{d.set(R),_.getSystem().broadcastOn([Pn],{})})])})},Fo=(t,s,c,i,d,g)=>{const h=T=>{const _=T.body;switch(_.type){case"tabpanel":return[Gr(_,T.initialData,i,g)];default:return[ge(_,T.initialData,i,g)]}},y=(T,_)=>k.some({isTabPanel:()=>_.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(T=>({id:T})).getOr({}),...d?S:{}}},components:[],behaviours:Ye([xu.childAt(0),oe.config({channel:`${E5}-${s}`,updateState:y,renderComponents:h,initialData:t})])}},pa=(t,s,c,i,d,g)=>Fo(t,s,k.some(c),i,d,g),Mi=(t,s,c,i)=>{const d=Fo(t,s,k.none(),c,!1,i);return mc.parts.body(d)},om=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[S5(k.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ye([Cs.config({}),tn.config({})])})]}],behaviours:Ye([Ht.config({mode:"acyclic",useTabstopAt:Me(GC)})])};return mc.parts.body(s)},Ma=M1.deviceType.isTouch(),dl=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Tu=(t,s)=>mc.parts.close(jr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Ye([Cs.config({})])})),ba=()=>mc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Ni=(t,s)=>mc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Wd(`<p>${EN(s.translate(t))}</p>`)}]}]}),Rt=t=>mc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Jn=(t,s)=>[Kd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Kd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Us=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return mc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),k.some(!0)),useTabstopAt:g=>!GC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Wd(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:Ma?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:Ye([tn.config({}),dn("dialog-events",t.dialogEvents.concat([km(kl(),(g,h)=>{tm.isBlocked(g)?ce():Ht.focusIn(g)}),Ie(Bp(),(g,h)=>{g.getSystem().broadcastOn([qC],{newFocus:h.event.newFocus})})])),dn("scroll-lock",[ms(()=>{fr(ie(),d)}),qu(()=>{To(ie(),d)})]),...t.extraBehaviours]),eventOrder:{[xc()]:["dialog-events"],[za()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Ci()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},qr=t=>jr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ye([Cs.config({}),Qs.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[$l("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{An(s,Zh)}}),fc=(t,s,c,i)=>{const d=g=>[Ts(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:Ye([oe.config({channel:`${x5}-${s}`,initialData:t,renderComponents:d})])}},$r=()=>({dom:Wd('<div class="tox-dialog__draghandle"></div>')}),Ws=(t,s,c,i)=>Kd.sketch({dom:Wd('<div class="tox-dialog__header"></div>'),components:[fc(t,s,k.some(c),i),$r(),qr(i)],containerBehaviours:Ye([db.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Qu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Zs=(t,s,c)=>{const i=mc.parts.title(fc(t,s,k.none(),c)),d=mc.parts.draghandle($r()),g=mc.parts.close(qr(c)),h=[i].concat(t.draggable?[d]:[]).concat([g]);return Kd.sketch({dom:Wd('<div class="tox-dialog__header"></div>'),components:h})},Wa=(t,s,c)=>Zs({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),ku=(t,s,c,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Wd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),sm=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{const d=ys(t().element,".tox-dialog__header").map(g=>Po(g));mc.setBusy(t(),(g,h)=>ku(i.message,h,s,d))},onUnblock:()=>{mc.setIdle(t())}}),bd="tox-dialog--fullscreen",op="tox-dialog--width-lg",sp="tox-dialog--width-md",af=t=>{switch(t){case"large":return k.some(op);case"medium":return k.some(sp);default:return k.none()}},_u=(t,s)=>{const c=he.fromDom(s.element.dom);ka(c,bd)||(au(c,[op,sp]),af(t).each(i=>fr(c,i)))},Eg=(t,s)=>{const c=he.fromDom(t.element.dom),i=VS(c),d=Ut(i,g=>g===op||g===sp).or(af(s));_R(c,[bd,...d.toArray()])},Kv=(t,s,c)=>Zr(Us({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[CT({}),...t.extraBehaviours],onEscape:i=>{An(i,Zh)},dialogEvents:s,eventOrder:{[ru()]:[oe.name(),ti.name()],[za()]:["scroll-lock",oe.name(),"messages","dialog-events","alloy.base.behaviour"],[Ci()]:["alloy.base.behaviour","dialog-events","messages",oe.name(),"scroll-lock"]}})),rp=(t,s={})=>{const c=i=>{const d=_e(i.items,g=>{const h=ct(s,g.name).getOr($t(!1));return{...g,storage:h}});return{...i,items:d}};return _e(t,i=>i.type==="menu"?c(i):i)},hR=t=>co(t,(s,c)=>c.type==="menu"?co(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),gb=(t,s)=>[zb(kl(),w5),t(BC,(c,i,d,g)=>{td(Xs(g.element)).fold(ce,ah),s.onClose(),i.onClose()}),t(Zh,(c,i,d,g)=>{i.onCancel(c),An(g,BC)}),Ie(oT,(c,i)=>s.onUnblock()),Ie(nT,(c,i)=>s.onBlock(i.event))],iF=(t,s)=>{const c=(d,g)=>Ie(d,(h,y)=>{i(h,(S,T)=>{g(t(),S,y.event,h)})}),i=(d,g)=>{oe.getState(d).get().each(h=>{g(h,d)})};return[...gb(c,s),c(sf,(d,g,h)=>{g.onAction(d,{name:h.name})})]},pR=(t,s,c)=>{const i=(g,h)=>Ie(g,(y,S)=>{d(y,(T,_)=>{h(t(),T,S.event,y)})}),d=(g,h)=>{oe.getState(g).get().each(y=>{h(y.internalDialog,g)})};return[...gb(i,s),i($C,(g,h)=>h.onSubmit(g)),i(Oi,(g,h,y)=>{h.onChange(g,{name:y.name})}),i(sf,(g,h,y,S)=>{const T=()=>S.getSystem().isConnected()?Ht.focusIn(S):void 0,_=F=>Qo(F,"disabled")||sn(F,"aria-disabled").exists(j=>j==="true"),R=Xs(S.element),L=td(R);h.onAction(g,{name:y.name,value:y.value}),td(R).fold(T,F=>{_(F)||L.exists(j=>hr(F,j)&&_(j))?T():c().toOptional().filter(j=>!hr(j.element,F)).each(T)})}),i(SB,(g,h,y)=>{h.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),qu(g=>{const h=t();bt.setValue(g,h.getData())})]},Na=(t,s)=>PT(t,t.type,s),Au=(t,s,c)=>Ut(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),Bk=(t,s)=>{const c=s.map(y=>y.footerButtons).getOr([]),i=tr(c,y=>y.align==="start"),d=(y,S)=>Kd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:_e(S,T=>T.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},we=(t,s,c)=>{const i=(d,g)=>{const h=_e(g.buttons,S=>{const T=uo(Na(S,c));return{name:S.name,align:S.align,memento:T}}),y=S=>Au(d,h,S);return k.some({lookupByName:y,footerButtons:h})};return{dom:Wd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ye([oe.config({channel:`${t3}-${s}`,initialData:t,updateState:i,renderComponents:Bk})])}},xe=(t,s,c)=>we(t,s,c),rt=(t,s,c)=>mc.parts.footer(we(t,s,c)),Je=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Un.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return wv.getField(i,s).orThunk(()=>t.getFooter().bind(h=>oe.getState(h).get()).bind(h=>h.lookupByName(s)))}else return k.none()},en=(t,s)=>{const c=t.getRoot();return oe.getState(c).get().map(i=>qe(Ms("data",i.dataValidator,s))).getOr(s)},oo=(t,s,c)=>{const i=j=>{const Y=t.getRoot();Y.getSystem().isConnected()&&j(Y)},F={getData:()=>{const j=t.getRoot(),Y=j.getSystem().isConnected()?t.getFormWrapper():j,me=bt.getValue(Y),ee=jn(c,ue=>ue.get());return{...me,...ee}},setData:j=>{i(Y=>{const me=F.getData(),ee=Rs(me,j),ue=en(t,ee),de=t.getFormWrapper();bt.setValue(de,ue),gs(c,(ke,Oe)=>{zn(ee,Oe)&&ke.set(ee[Oe])})})},setEnabled:(j,Y)=>{Je(t,j).each(Y?Jt.enable:Jt.disable)},focus:j=>{Je(t,j).each(tn.focus)},block:j=>{if(!bn(j))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(Y=>{Dt(Y,nT,{message:j})})},unblock:()=>{i(j=>{An(j,oT)})},showTab:j=>{i(Y=>{const me=t.getBody();oe.getState(me).get().exists(ue=>ue.isTabPanel())&&Un.getCurrent(me).each(ue=>{Br.showTab(ue,j)})})},redial:j=>{i(Y=>{const me=t.getId(),ee=s(j),ue=rp(ee.internalDialog.buttons,c);Y.getSystem().broadcastOn([`${xT}-${me}`],ee),Y.getSystem().broadcastOn([`${x5}-${me}`],ee.internalDialog),Y.getSystem().broadcastOn([`${E5}-${me}`],ee.internalDialog),Y.getSystem().broadcastOn([`${t3}-${me}`],{...ee.internalDialog,buttons:ue}),F.setData(ee.initialData)})},close:()=>{i(j=>{An(j,BC)})},toggleFullscreen:t.toggleFullscreen};return F},lr=(t,s,c)=>{const i=xt("dialog"),d=t.internalDialog,g=Wa(d.title,i,c),h=$t(d.size),y=de=>Je(ee,de),S=af(h.get()).toArray(),T=(de,ke)=>(h.set(ke.internalDialog.size),_u(ke.internalDialog.size,de),k.some(ke)),_=Mi({body:d.body,initialData:d.initialData},i,c,y),R=rp(d.buttons),L=hR(R),F=zt(R.length!==0,rt({buttons:R},i,c)),j=pR(()=>ue,sm(()=>me,c.shared.providers,s),c.shared.getSink),Y={id:i,header:g,body:_,footer:F,extraClasses:S,extraBehaviours:[oe.config({channel:`${xT}-${i}`,updateState:T,initialData:t})],extraStyles:{}},me=Kv(Y,j,c),ee=(()=>{const de=()=>{const Oe=mc.getBody(me);return Un.getCurrent(Oe).getOr(Oe)},ke=()=>{Eg(me,h.get())};return{getId:le(i),getRoot:le(me),getBody:()=>mc.getBody(me),getFooter:()=>mc.getFooter(me),getFormWrapper:de,toggleFullscreen:ke}})(),ue=oo(ee,s.redial,L);return{dialog:me,instanceApi:ue}},vd=(t,s,c,i=!1,d)=>{const g=xt("dialog"),h=xt("dialog-label"),y=xt("dialog-content"),S=t.internalDialog,T=wt=>Je(St,wt),_=$t(S.size),R=af(_.get()).toArray(),L=(wt,ft)=>(_.set(ft.internalDialog.size),_u(ft.internalDialog.size,wt),d(),k.some(ft)),F=uo(Ws({title:S.title,draggable:!0},g,h,c.shared.providers)),j=uo(pa({body:S.body,initialData:S.initialData},g,y,c,i,T)),Y=rp(S.buttons),me=hR(Y),ee=zt(Y.length!==0,uo(xe({buttons:Y},g,c))),ue=pR(()=>$e,{onBlock:wt=>{tm.block(Oe,(ft,Tt)=>{const Rn=F.getOpt(Oe).map(cs=>Po(cs.element));return ku(wt.message,Tt,c.shared.providers,Rn)})},onUnblock:()=>{tm.unblock(Oe)},onClose:()=>s.closeWindow()},c.shared.getSink),de="tox-dialog-inline",ke=_n().os,Oe=Zr({dom:{tag:"div",classes:["tox-dialog",de,...R],attributes:{role:"dialog",...ke.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[ru()]:[oe.name(),ti.name()],[xc()]:["execute-on-form"],[za()]:["reflecting","execute-on-form"]},behaviours:Ye([Ht.config({mode:"cyclic",onEscape:wt=>(An(wt,BC),k.some(!0)),useTabstopAt:wt=>!GC(wt)&&(kr(wt)!=="button"||_t(wt,"disabled")!=="disabled"),firstTabstop:1}),oe.config({channel:`${xT}-${g}`,updateState:L,initialData:t}),tn.config({}),dn("execute-on-form",ue.concat([km(kl(),(wt,ft)=>{Ht.focusIn(wt)}),Ie(Bp(),(wt,ft)=>{wt.getSystem().broadcastOn([qC],{newFocus:ft.event.newFocus})})])),tm.config({getRoot:()=>k.some(Oe)}),ln.config({}),CT({})]),components:[F.asSpec(),j.asSpec(),...ee.map(wt=>wt.asSpec()).toArray()]}),ot=()=>{Eg(Oe,_.get())},St={getId:le(g),getRoot:le(Oe),getFooter:()=>ee.map(wt=>wt.get(Oe)),getBody:()=>j.get(Oe),getFormWrapper:()=>{const wt=j.get(Oe);return Un.getCurrent(wt).getOr(wt)},toggleFullscreen:ot},$e=oo(St,s.redial,me);return{dialog:Oe,instanceApi:$e}};var Ul=tinymce.util.Tools.resolve("tinymce.util.URI");const wS=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!bn(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{Dt(y,nT,{message:h})})},unblock:()=>{s(h=>{An(h,oT)})},close:()=>{s(h=>{An(h,BC)})},sendMessage:h=>{s(y=>{y.getSystem().broadcastOn([T5],h)})}}},lF=["insertContent","setContent","execCommand","close","block","unblock"],bR=t=>Qn(t)&&lF.indexOf(t.mceAction)!==-1,uF=t=>!bR(t)&&Qn(t)&&zn(t,"mceAction"),dF=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=hc(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},Tg=(t,s,c,i)=>{const d=xt("dialog"),g=Wa(t.title,d,i),h=om(t),y=t.buttons.bind(de=>de.length===0?k.none():k.some(rt({buttons:de},d,i))),S=iF(()=>ue,sm(()=>ee,i.shared.providers,s)),T={...t.height.fold(()=>({}),de=>({height:de+"px","max-height":de+"px"})),...t.width.fold(()=>({}),de=>({width:de+"px","max-width":de+"px"}))},_=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],R=new Ul(t.url,{base_uri:new Ul(window.location.href)}),L=`${R.protocol}://${R.host}${R.port?":"+R.port:""}`,F=Xa(),j=(de,ke)=>k.some(ke),Y=[oe.config({channel:`${xT}-${d}`,updateState:j,initialData:t}),dn("messages",[ms(()=>{const de=_a(he.fromDom(window),"message",ke=>{if(R.isSameOrigin(new Ul(ke.raw.origin))){const Oe=ke.raw.data;bR(Oe)?dF(c,ue,Oe):uF(Oe)&&t.onMessage(ue,Oe)}});F.set(de)}),qu(F.clear)]),ti.config({channels:{[T5]:{onReceive:(de,ke)=>{ys(de.element,"iframe").each(Oe=>{const ot=Oe.dom.contentWindow;eo(ot)&&ot.postMessage(ke,L)})}}}})],ee=Kv({id:d,header:g,body:h,footer:y,extraClasses:_,extraBehaviours:Y,extraStyles:T},S,i),ue=wS(ee);return{dialog:ee,instanceApi:ue}},mF=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{mc.hide(T),d()},h=uo(PT({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",t)),y=ba(),S=Tu(g,s.providers),T=Zr(Us({lazySink:()=>s.getSink(),header:dl(y,S),body:Ni(i,s.providers),footer:k.some(Rt(Jn([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ie(Zh,g)],eventOrder:{}}));mc.show(T);const _=h.get(T);tn.focus(_)}}},fF=t=>{const s=t.shared;return{open:(i,d)=>{const g=L=>{mc.hide(_),d(L)},h=uo(PT({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",t)),y=PT({context:"any",name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",t),S=ba(),T=Tu(()=>g(!1),s.providers),_=Zr(Us({lazySink:()=>s.getSink(),header:dl(S,T),body:Ni(i,s.providers),footer:k.some(Rt(Jn([],[y,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ie(Zh,()=>g(!1)),Ie($C,()=>g(!0))],eventOrder:{}}));mc.show(_);const R=h.get(_);tn.focus(R)}}},vR=(t,s)=>qe(Ms("data",s,t)),yR=t=>RC(t,".tox-alert-dialog")||RC(t,".tox-confirm-dialog"),Oj=(t,s,c)=>s&&c?[]:[ts.config({contextual:{lazyContext:()=>k.some(Os(he.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>Bh(t,i.element).map(g=>({bounds:$h(g),optScrollEnv:k.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:ps(g.element).top})})).getOrThunk(()=>({bounds:Ar(),optScrollEnv:k.none()}))})],Ln=t=>{const s=t.editor,c=Ph(s),i=mF(t.backstages.dialog),d=fF(t.backstages.dialog),g=(j,Y,me)=>{if(!er(Y)){if(Y.inline==="toolbar")return T(j,t.backstages.popup.shared.anchors.inlineDialog(),me,Y);if(Y.inline==="bottom")return _(j,t.backstages.popup.shared.anchors.inlineBottomDialog(),me,Y);if(Y.inline==="cursor")return T(j,t.backstages.popup.shared.anchors.cursor(),me,Y)}return S(j,me)},h=(j,Y)=>y(j,Y),y=(j,Y)=>{const me=ee=>{const ue=Tg(ee,{closeWindow:()=>{mc.hide(ue.dialog),Y(ue.instanceApi)}},s,t.backstages.dialog);return mc.show(ue.dialog),ue.instanceApi};return x.openUrl(me,j)},S=(j,Y)=>{const me=(ee,ue,de)=>{const ke=ue,ot=lr({dataValidator:de,initialData:ke,internalDialog:ee},{redial:x.redial,closeWindow:()=>{mc.hide(ot.dialog),Y(ot.instanceApi)}},t.backstages.dialog);return mc.show(ot.dialog),ot.instanceApi.setData(ke),ot.instanceApi};return x.open(me,j)},T=(j,Y,me,ee)=>{const ue=(de,ke,Oe)=>{const ot=vR(ke,Oe),St=mo(),$e=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Oe,initialData:ot,internalDialog:de},ft=()=>St.on(ro=>{Ns.reposition(ro),(!c||!$e)&&ts.refresh(ro)}),Tt=vd(wt,{redial:x.redial,closeWindow:()=>{St.on(Ns.hide),s.off("ResizeEditor",ft),St.clear(),me(Tt.instanceApi)}},t.backstages.popup,ee.ariaAttrs,ft),Rn=Zr(Ns.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ee.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ye([dn("window-manager-inline-events",[Ie(Si(),(ro,Ot)=>{An(Tt.dialog,Zh)})]),...Oj(s,c,$e)]),isExtraPart:(ro,Ot)=>yR(Ot)}));St.set(Rn);const cs=()=>{const ro=s.inline?ie():he.fromDom(s.getContainer()),Ot=Os(ro);return k.some(Ot)};return Ns.showWithinBounds(Rn,wi(Tt.dialog),{anchor:Y},cs),(!c||!$e)&&(ts.refresh(Rn),s.on("ResizeEditor",ft)),Tt.instanceApi.setData(ot),Ht.focusIn(Tt.dialog),Tt.instanceApi};return x.open(ue,j)},_=(j,Y,me,ee)=>{const ue=(de,ke,Oe)=>{const ot=vR(ke,Oe),St=mo(),$e=t.backstages.popup.shared.header.isPositionedAtTop(),wt={dataValidator:Oe,initialData:ot,internalDialog:de},ft=()=>St.on(ro=>{Ns.reposition(ro),ts.refresh(ro)}),Tt=vd(wt,{redial:x.redial,closeWindow:()=>{St.on(Ns.hide),s.off("ResizeEditor ScrollWindow ElementScroll",ft),St.clear(),me(Tt.instanceApi)}},t.backstages.popup,ee.ariaAttrs,ft),Rn=Zr(Ns.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ee.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ye([dn("window-manager-inline-events",[Ie(Si(),(ro,Ot)=>{An(Tt.dialog,Zh)})]),ts.config({contextual:{lazyContext:()=>k.some(Os(he.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:ro=>Bh(s,ro.element).map(Ze=>({bounds:$h(Ze),optScrollEnv:k.some({currentScrollTop:Ze.element.dom.scrollTop,scrollElmTop:ps(Ze.element).top})})).getOrThunk(()=>({bounds:Ar(),optScrollEnv:k.none()}))})]),isExtraPart:(ro,Ot)=>yR(Ot)}));St.set(Rn);const cs=()=>t.backstages.popup.shared.getSink().toOptional().bind(ro=>{const Ot=Bh(s,ro.element),Ze=15,dt=Ot.map(Lt=>$h(Lt)).getOr(Ar()),on=Os(he.fromDom(s.getContentAreaContainer())),pn=yl(on,dt);return k.some(ws(pn.x,pn.y,pn.width,pn.height-Ze))});return Ns.showWithinBounds(Rn,wi(Tt.dialog),{anchor:Y},cs),ts.refresh(Rn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",ft),Tt.instanceApi.setData(ot),Ht.focusIn(Tt.dialog),Tt.instanceApi};return x.open(ue,j)};return{open:g,openUrl:h,alert:(j,Y)=>{i.open(j,Y)},close:j=>{j.close()},confirm:(j,Y)=>{d.open(j,Y)}}},Te=t=>{qM(t),Y8(t),BW(t)};var Vt=()=>{Vu.add("silver",t=>{Te(t);let s=()=>Ar();const{dialogs:c,popups:i,renderUI:d}=$Z(t,{getPopupSinkBounds:()=>s()}),g=()=>{const T=d();return Bh(t,i.getMothership().element).each(R=>{s=()=>$h(R)}),T};lB.register(t,i.backstage.shared);const h=Ln({editor:t,backstages:{popup:i.backstage,dialog:c.backstage}}),y=mo(),S=()=>DN(t,{backstage:i.backstage},i.getMothership(),y);return{renderUI:g,getWindowManagerImpl:le(h),getNotificationManagerImpl:S}})};Vt()})();(function(){var mn=tinymce.util.Tools.resolve("tinymce.ModelManager");const Fn=(l,m,p)=>{var v;return p(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},Kn=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Fn(l,String,(p,v)=>v.isPrototypeOf(p))?"string":m},Xn=l=>m=>Kn(m)===l,po=l=>m=>typeof m===l,as=l=>m=>l===m,Vo=Xn("string"),bn=Xn("object"),Qn=Xn("array"),Ii=as(null),fs=po("boolean"),Ir=as(void 0),hc=l=>l==null,er=l=>!hc(l),Wc=po("function"),eo=po("number"),Nt=()=>{},pc=(l,m)=>(...p)=>l(m.apply(null,p)),Gt=(l,m)=>p=>l(m(p)),ce=l=>()=>l,ut=l=>l,Ao=(l,m)=>l===m;function Zn(l,...m){return(...p)=>{const v=m.concat(p);return l.apply(null,v)}}const le=l=>m=>!l(m),vn=l=>()=>{throw new Error(l)},fn=l=>l(),Tn=ce(!1),Me=ce(!0);class re{constructor(m,p){this.tag=m,this.value=p}static some(m){return new re(!0,m)}static none(){return re.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?re.some(m(this.value)):re.none()}bind(m){return this.tag?m(this.value):re.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:re.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return er(m)?re.some(m):re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}re.singletonNone=new re(!1);const is=Array.prototype.slice,Hn=Array.prototype.indexOf,kt=Array.prototype.push,k=(l,m)=>Hn.call(l,m),Mo=(l,m)=>k(l,m)>-1,et=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const E=l[p];if(m(E,p))return!0}return!1},Oo=(l,m)=>{const p=[];for(let v=0;v<l;v++)p.push(m(v));return p},Kt=(l,m)=>{const p=l.length,v=new Array(p);for(let E=0;E<p;E++){const A=l[E];v[E]=m(A,E)}return v},Ve=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const E=l[p];m(E,p)}},yo=(l,m)=>{for(let p=l.length-1;p>=0;p--){const v=l[p];m(v,p)}},ks=(l,m)=>{const p=[],v=[];for(let E=0,A=l.length;E<A;E++){const B=l[E];(m(B,E)?p:v).push(B)}return{pass:p,fail:v}},it=(l,m)=>{const p=[];for(let v=0,E=l.length;v<E;v++){const A=l[v];m(A,v)&&p.push(A)}return p},Xt=(l,m,p)=>(yo(l,(v,E)=>{p=m(p,v,E)}),p),_e=(l,m,p)=>(Ve(l,(v,E)=>{p=m(p,v,E)}),p),Ke=(l,m,p)=>{for(let v=0,E=l.length;v<E;v++){const A=l[v];if(m(A,v))return re.some(A);if(p(A,v))break}return re.none()},$=(l,m)=>Ke(l,m,Tn),tr=(l,m)=>{for(let p=0,v=l.length;p<v;p++){const E=l[p];if(m(E,p))return re.some(p)}return re.none()},kn=l=>{const m=[];for(let p=0,v=l.length;p<v;++p){if(!Qn(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);kt.apply(m,l[p])}return m},zo=(l,m)=>kn(Kt(l,m)),co=(l,m)=>{for(let p=0,v=l.length;p<v;++p){const E=l[p];if(m(E,p)!==!0)return!1}return!0},Li=l=>{const m=is.call(l,0);return m.reverse(),m},Ut=(l,m)=>{const p={};for(let v=0,E=l.length;v<E;v++){const A=l[v];p[String(A)]=m(A,v)}return p},Vn=(l,m)=>{const p=is.call(l,0);return p.sort(m),p},qt=(l,m)=>m>=0&&m<l.length?re.some(l[m]):re.none(),pe=l=>qt(l,0),Er=l=>qt(l,l.length-1),$o=(l,m)=>{for(let p=0;p<l.length;p++){const v=m(l[p],p);if(v.isSome())return v}return re.none()},Bt=Object.keys,Lr=Object.hasOwnProperty,Bn=(l,m)=>{const p=Bt(l);for(let v=0,E=p.length;v<E;v++){const A=p[v],B=l[A];m(B,A)}},Oc=(l,m)=>bo(l,(p,v)=>({k:v,v:m(p,v)})),bo=(l,m)=>{const p={};return Bn(l,(v,E)=>{const A=m(v,E);p[A.k]=A.v}),p},_s=l=>(m,p)=>{l[p]=m},fl=(l,m,p,v)=>{Bn(l,(E,A)=>{(m(E,A)?p:v)(E,A)})},Bs=(l,m)=>{const p={};return fl(l,m,_s(p),Nt),p},Yo=(l,m)=>{const p=[];return Bn(l,(v,E)=>{p.push(m(v,E))}),p},Io=l=>Yo(l,ut),Dc=(l,m)=>gs(l,m)?re.from(l[m]):re.none(),gs=(l,m)=>Lr.call(l,m),jn=(l,m)=>gs(l,m)&&l[m]!==void 0&&l[m]!==null,Pa=l=>{for(const m in l)if(Lr.call(l,m))return!1;return!0},js=typeof window<"u"?window:Function("return this;")(),Ss=(l,m)=>{let p=m??js;for(let v=0;v<l.length&&p!==void 0&&p!==null;++v)p=p[l[v]];return p},Tr=(l,m)=>{const p=l.split(".");return Ss(p,m)},Rc=(l,m)=>Tr(l,m),li=(l,m)=>{const p=Rc(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},no=Object.getPrototypeOf,Fi=l=>li("HTMLElement",l),ct=l=>{const m=Tr("ownerDocument.defaultView",l);return bn(l)&&(Fi(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(no(l).constructor.name))},zn=8,Kr=9,Gs=11,Za=1,ya=3,Co=l=>l.dom.nodeName.toLowerCase(),Ca=l=>l.dom.nodeType,ja=l=>m=>Ca(m)===l,ho=l=>Ca(l)===zn||Co(l)==="#comment",zt=l=>$s(l)&&ct(l.dom),$s=ja(Za),bc=ja(ya),ql=ja(Kr),Kl=ja(Gs),Xo=l=>m=>$s(m)&&Co(m)===l,nr=(l,m,p)=>{if(Vo(p)||fs(p)||eo(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},ls=(l,m,p)=>{nr(l.dom,m,p)},vc=(l,m)=>{const p=l.dom;Bn(m,(v,E)=>{nr(p,E,v)})},Ba=(l,m)=>{Bn(m,(p,v)=>{p.fold(()=>{Uo(l,v)},E=>{nr(l.dom,v,E)})})},or=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},Is=(l,m)=>re.from(or(l,m)),Uo=(l,m)=>{l.dom.removeAttribute(m)},qs=l=>_e(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Mc=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return Zc(v.childNodes[0])},Ga=(l,m)=>{const v=(m||document).createElement(l);return Zc(v)},gl=(l,m)=>{const v=(m||document).createTextNode(l);return Zc(v)},Zc=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},he={fromHtml:Mc,fromTag:Ga,fromText:gl,fromDom:Zc,fromPoint:(l,m,p)=>re.from(l.dom.elementFromPoint(m,p)).map(Zc)},Yr=(l,m)=>{const p=l.dom;if(p.nodeType!==Za)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},$a=l=>l.nodeType!==Za&&l.nodeType!==Kr&&l.nodeType!==Gs||l.childElementCount===0,Ou=(l,m)=>{const p=m===void 0?document:m.dom;return $a(p)?[]:Kt(p.querySelectorAll(l),he.fromDom)},Du=(l,m)=>{const p=m===void 0?document:m.dom;return $a(p)?re.none():re.from(p.querySelector(l)).map(he.fromDom)},No=(l,m)=>l.dom===m.dom,Ru=(l,m)=>{const p=l.dom,v=m.dom;return p===v?!1:p.contains(v)},ui=Yr,Xr=l=>he.fromDom(l.dom.ownerDocument),Hi=l=>ql(l)?l:Xr(l),Ls=l=>he.fromDom(Hi(l).dom.documentElement),Jo=l=>he.fromDom(Hi(l).dom.defaultView),jc=l=>re.from(l.dom.parentNode).map(he.fromDom),kr=l=>re.from(l.dom.parentElement).map(he.fromDom),hs=(l,m)=>{const p=Wc(m)?m:Tn;let v=l.dom;const E=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,B=he.fromDom(A);if(E.push(B),p(B)===!0)break;v=A}return E},di=l=>re.from(l.dom.previousSibling).map(he.fromDom),ra=l=>re.from(l.dom.nextSibling).map(he.fromDom),$n=l=>Kt(l.dom.childNodes,he.fromDom),ur=(l,m)=>{const p=l.dom.childNodes;return re.from(p[m]).map(he.fromDom)},Ks=l=>ur(l,0),qa=(l,m)=>{jc(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},ca=(l,m)=>{ra(l).fold(()=>{jc(l).each(E=>{Wo(E,m)})},v=>{qa(v,m)})},Ys=(l,m)=>{Ks(l).fold(()=>{Wo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Wo=(l,m)=>{l.dom.appendChild(m.dom)},rm=(l,m,p)=>{ur(l,p).fold(()=>{Wo(l,m)},v=>{qa(v,m)})},Gc=(l,m)=>{qa(l,m),Wo(m,l)},ao=(l,m)=>{Ve(m,(p,v)=>{const E=v===0?l:m[v-1];ca(E,p)})},hr=(l,m)=>{Ve(m,p=>{Wo(l,p)})},pr=l=>{l.dom.textContent="",Ve($n(l),m=>{Fs(m)})},Fs=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},mi=l=>{const m=$n(l);m.length>0&&ao(l,m),Fs(l)},Jr=(l,m)=>he.fromDom(l.dom.cloneNode(m)),Qr=l=>Jr(l,!1),Nc=l=>Jr(l,!0),Pc=(l,m)=>{const p=he.fromTag(m),v=qs(l);return vc(p,v),p},hl=(l,m)=>{const p=Pc(l,m),v=$n(Nc(l));return hr(p,v),p},Vi=(l,m)=>{const p=Pc(l,m);ca(l,p);const v=$n(l);return hr(p,v),Fs(l),p},fi=["tfoot","thead","tbody","colgroup"],Bc=l=>Mo(fi,l),_r=(l,m)=>({rows:l,columns:m}),gi=(l,m)=>({row:l,column:m}),hi=(l,m,p)=>({element:l,rowspan:m,colspan:p}),pl=(l,m,p,v)=>({element:l,rowspan:m,colspan:p,isNew:v}),Ka=(l,m,p,v,E,A)=>({element:l,rowspan:m,colspan:p,row:v,column:E,isLocked:A}),Xs=(l,m,p)=>({element:l,cells:m,section:p}),Ya=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),br=(l,m,p)=>({element:l,isNew:m,isLocked:p}),yc=(l,m,p,v)=>({element:l,cells:m,section:p,isNew:v}),Yl=(l,m,p,v)=>({startRow:l,startCol:m,finishRow:p,finishCol:v}),Xl=(l,m,p)=>({element:l,colspan:m,column:p}),H=(l,m)=>({element:l,columns:m}),J=l=>Kl(l)&&er(l.dom.host),ie=l=>he.fromDom(l.dom.getRootNode()),Ne=l=>J(l)?l:he.fromDom(Hi(l).dom.body),Xe=l=>{const m=ie(l);return J(m)?re.some(m):re.none()},Pe=l=>he.fromDom(l.dom.host),to=l=>{if(er(l.target)){const m=he.fromDom(l.target);if($s(m)&&_t(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return pe(p)}}return re.from(l.target)},_t=l=>er(l.dom.shadowRoot),sn=l=>{const m=bc(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Xe(he.fromDom(m)).fold(()=>p.body.contains(m),Gt(sn,Pe))},Qo=()=>N(he.fromDom(document)),N=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return he.fromDom(m)},Z=(l,m,p)=>it(hs(l,p),m),te=(l,m)=>it($n(l),m),Se=(l,m)=>{let p=[];return Ve($n(l),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Se(v,m))}),p},Le=(l,m,p)=>Z(l,v=>Yr(v,m),p),yn=(l,m)=>te(l,p=>Yr(p,m)),io=(l,m)=>Ou(m,l);var So=(l,m,p,v,E)=>l(p,v)?re.some(p):Wc(E)&&E(p)?re.none():m(p,v,E);const je=(l,m,p)=>{let v=l.dom;const E=Wc(p)?p:Tn;for(;v.parentNode;){v=v.parentNode;const A=he.fromDom(v);if(m(A))return re.some(A);if(E(A))break}return re.none()},Do=(l,m,p)=>So((E,A)=>A(E),je,l,m,p),vr=(l,m)=>{const p=E=>m(he.fromDom(E));return $(l.dom.childNodes,p).map(he.fromDom)},zi=(l,m)=>{const p=v=>{for(let E=0;E<v.childNodes.length;E++){const A=he.fromDom(v.childNodes[E]);if(m(A))return re.some(A);const B=p(v.childNodes[E]);if(B.isSome())return B}return re.none()};return p(l.dom)},cn=(l,m,p)=>je(l,v=>Yr(v,m),p),qc=(l,m)=>vr(l,p=>Yr(p,m)),Ia=(l,m)=>Du(m,l),sr=(l,m,p)=>So((E,A)=>Yr(E,A),cn,l,m,p),Po=(l,m,p=Ao)=>l.exists(v=>p(v,m)),La=l=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(p);return m},uf=(l,m)=>l!=null?m(l):re.none(),wd=(l,m)=>l?re.some(m):re.none(),us=(l,m)=>l.substring(m),Mu=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,cm=(l,m)=>Ui(l,m)?us(l,m.length):l,ps=(l,m,p=0,v)=>{const E=l.indexOf(m,p);return E!==-1?Ir(v)?!0:E+m.length<=v:!1},Ui=(l,m)=>Mu(l,m,0),aa=(l,m)=>Mu(l,m,l.length-m.length),W=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),K=l=>l.length>0,Ce=l=>{const m=parseFloat(l);return isNaN(m)?re.none():re.some(m)},Be=l=>l.style!==void 0&&Wc(l.style.getPropertyValue),Ft=(l,m,p)=>{if(!Vo(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);Be(l)&&l.style.setProperty(m,p)},Nn=(l,m)=>{Be(l)&&l.style.removeProperty(m)},Cn=(l,m,p)=>{const v=l.dom;Ft(v,m,p)},Bo=(l,m)=>{const p=l.dom;Bn(m,(v,E)=>{Ft(p,E,v)})},Hs=(l,m)=>{const p=l.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!sn(l)?$c(p,m):E},$c=(l,m)=>Be(l)?l.style.getPropertyValue(m):"",ec=(l,m)=>{const p=l.dom,v=$c(p,m);return re.from(v).filter(E=>E.length>0)},Vs=(l,m)=>{const p=l.dom;Nn(p,m),Po(Is(l,"style").map(W),"")&&Uo(l,"style")},zs=(l,m)=>{const p=l.dom,v=m.dom;Be(p)&&Be(v)&&(v.style.cssText=p.style.cssText)},dr=(l,m,p=0)=>Is(l,m).map(v=>parseInt(v,10)).getOr(p),tc=(l,m)=>dr(l,m,1),Kc=l=>Xo("col")(l)?dr(l,"span",1)>1:tc(l,"colspan")>1,As=l=>tc(l,"rowspan")>1,bs=(l,m)=>parseInt(Hs(l,m),10),bl=ce(10),kg=ce(10),Ed=(l,m)=>df(l,m,Me),df=(l,m,p)=>zo($n(l),v=>Yr(v,m)?p(v)?[v]:[]:df(v,m,p)),vb=(l,m,p=Tn)=>{if(p(m))return re.none();if(Mo(l,Co(m)))return re.some(m);const v=E=>Yr(E,"table")||p(E);return cn(m,l.join(","),v)},Nu=(l,m)=>vb(["td","th"],l,m),Pu=l=>Ed(l,"th,td"),Bu=l=>Yr(l,"colgroup")?yn(l,"col"):zo($u(l),m=>yn(m,"col")),Sa=(l,m)=>sr(l,"table",m),lp=l=>Ed(l,"tr"),$u=l=>Sa(l).fold(ce([]),m=>yn(m,"colgroup")),_g=(l,m)=>Kt(l,p=>{if(Co(p)==="colgroup"){const v=Kt(Bu(p),E=>{const A=dr(E,"span",1);return hi(E,1,A)});return Xs(p,v,"colgroup")}else{const v=Kt(Pu(p),E=>{const A=dr(E,"rowspan",1),B=dr(E,"colspan",1);return hi(E,A,B)});return Xs(p,v,m(p))}}),am=l=>jc(l).map(m=>{const p=Co(m);return Bc(p)?p:"tbody"}).getOr("tbody"),up=l=>{const m=lp(l),v=[...$u(l),...m];return _g(v,am)},Ag=(l,m)=>_g(l,()=>m),im=l=>{let m=!1,p;return(...v)=>(m||(m=!0,p=l.apply(null,v)),p)},Og=(l,m,p,v)=>{const E=l.isiOS()&&/ipad/i.test(p)===!0,A=l.isiOS()&&!E,B=l.isiOS()||l.isAndroid(),V=B||v("(pointer:coarse)"),q=E||!A&&B&&v("(min-device-width:768px)"),se=A||B&&!q,ye=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Ge=!se&&!q&&!ye;return{isiPad:ce(E),isiPhone:ce(A),isTablet:ce(q),isPhone:ce(se),isTouch:ce(V),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ce(ye),isDesktop:ce(Ge)}},dp=(l,m)=>{for(let p=0;p<l.length;p++){const v=l[p];if(v.test(m))return v}},Iu=(l,m)=>{const p=dp(l,m);if(!p)return{major:0,minor:0};const v=E=>Number(m.replace(p,"$"+E));return Td(v(1),v(2))},mp=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?ne():Iu(l,p)},ne=()=>Td(0,0),Td=(l,m)=>({major:l,minor:m}),Fa={nu:Td,detect:mp,unknown:ne},yb=(l,m)=>$o(m.brands,p=>{const v=p.brand.toLowerCase();return $(l,E=>{var A;return v===((A=E.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(E=>({current:E.name,version:Fa.nu(parseInt(p.version,10),0)}))}),Cb=(l,m)=>{const p=String(m).toLowerCase();return $(l,v=>v.search(p))},lm=(l,m)=>Cb(l,m).map(p=>{const v=Fa.detect(p.versionRegexes,m);return{current:p.name,version:v}}),_n=(l,m)=>Cb(l,m).map(p=>{const v=Fa.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Ic=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ia=l=>m=>ps(m,l),Lu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>ps(l,"edge/")&&ps(l,"chrome")&&ps(l,"safari")&&ps(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ic],search:l=>ps(l,"chrome")&&!ps(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>ps(l,"msie")||ps(l,"trident")},{name:"Opera",versionRegexes:[Ic,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ia("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ia("firefox")},{name:"Safari",versionRegexes:[Ic,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(ps(l,"safari")||ps(l,"mobile/"))&&ps(l,"applewebkit")}],fp=[{name:"Windows",search:ia("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>ps(l,"iphone")||ps(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ia("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ia("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ia("linux"),versionRegexes:[]},{name:"Solaris",search:ia("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ia("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ia("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],um={browsers:ce(Lu),oses:ce(fp)},Yc="Edge",mf="Chromium",vl="IE",Dg="Opera",Jl="Firefox",Xc="Safari",Sb=()=>dm({current:void 0,version:Fa.unknown()}),dm=l=>{const m=l.current,p=l.version,v=E=>()=>m===E;return{current:m,version:p,isEdge:v(Yc),isChromium:v(mf),isIE:v(vl),isOpera:v(Dg),isFirefox:v(Jl),isSafari:v(Xc)}},Fr={unknown:Sb,nu:dm,edge:ce(Yc),chromium:ce(mf),ie:ce(vl),opera:ce(Dg),firefox:ce(Jl),safari:ce(Xc)},wa="Windows",Jc="iOS",kd="Android",mm="Linux",gp="macOS",fm="Solaris",Wi="FreeBSD",gm="ChromeOS",Yv=()=>hp({current:void 0,version:Fa.unknown()}),hp=l=>{const m=l.current,p=l.version,v=E=>()=>m===E;return{current:m,version:p,isWindows:v(wa),isiOS:v(Jc),isAndroid:v(kd),isMacOS:v(gp),isLinux:v(mm),isSolaris:v(fm),isFreeBSD:v(Wi),isChromeOS:v(gm)}},wb={unknown:Yv,nu:hp,windows:ce(wa),ios:ce(Jc),android:ce(kd),linux:ce(mm),macos:ce(gp),solaris:ce(fm),freebsd:ce(Wi),chromeos:ce(gm)},Rg={detect:(l,m,p)=>{const v=um.browsers(),E=um.oses(),A=m.bind(q=>yb(v,q)).orThunk(()=>lm(v,l)).fold(Fr.unknown,Fr.nu),B=_n(E,l).fold(wb.unknown,wb.nu),V=Og(B,A,l,p);return{browser:A,os:B,deviceType:V}}},_d=l=>window.matchMedia(l).matches;let pp=im(()=>Rg.detect(window.navigator.userAgent,re.from(window.navigator.userAgentData),_d));const ws=()=>pp(),Os=(l,m)=>{const p=(V,q)=>{if(!eo(q)&&!q.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+q);const se=V.dom;Be(se)&&(se.style[l]=q+"px")},v=V=>{const q=m(V);if(q<=0||q===null){const se=Hs(V,l);return parseFloat(se)||0}return q},E=v,A=(V,q)=>_e(q,(se,ye)=>{const Ge=Hs(V,ye),mt=Ge===void 0?0:parseInt(Ge,10);return isNaN(mt)?se:se+mt},0);return{set:p,get:v,getOuter:E,aggregate:A,max:(V,q,se)=>{const ye=A(V,se);return q>ye?q-ye:0}}},Fu=(l,m)=>Ce(l).getOr(m),yl=(l,m,p)=>Fu(Hs(l,m),p),bp=(l,m,p,v)=>{const E=yl(l,`padding-${p}`,0),A=yl(l,`padding-${v}`,0),B=yl(l,`border-${p}-width`,0),V=yl(l,`border-${v}-width`,0);return m-E-A-B-V},Ar=(l,m)=>{const p=l.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:bp(l,v,"left","right")},$t=l=>yl(l,"height",l.dom.offsetHeight),Hu=l=>yl(l,"width",l.dom.offsetWidth),Jv=l=>Ar(l,"content-box"),Xa=Os("width",l=>l.dom.offsetWidth),mo=l=>Xa.get(l),Vu=l=>Xa.getOuter(l),ff=Jv,Mg=Hu,vp=(l,m,p)=>{const v=l.cells,E=v.slice(0,m),A=v.slice(m),B=E.concat(p).concat(A);return hm(l,B)},Sn=(l,m,p)=>vp(l,m,[p]),Js=(l,m,p)=>{const v=l.cells;v[m]=p},hm=(l,m)=>yc(l.element,m,l.section,l.isNew),pm=(l,m)=>{const p=l.cells,v=Kt(p,m);return yc(l.element,v,l.section,l.isNew)},Ha=(l,m)=>l.cells[m],xa=(l,m)=>Ha(l,m).element,pi=l=>l.cells.length,qo=l=>{const m=ks(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Zi=(l,m,p)=>{const v=Kt(l.cells,p);return yc(m(l.element),v,l.section,!0)},Ad="data-snooker-locked-cols",Or=l=>Is(l,Ad).bind(m=>re.from(m.match(/\d+/g))).map(m=>Ut(m,Me)),Ql=l=>{const m=_e(qo(l).rows,(v,E)=>(Ve(E.cells,(A,B)=>{A.isLocked&&(v[B]=!0)}),v),{}),p=Yo(m,(v,E)=>parseInt(E,10));return Vn(p)},Ds=(l,m)=>l+","+m,zu=(l,m,p)=>re.from(l.access[Ds(m,p)]),bm=(l,m,p)=>{const v=Zo(l,E=>p(m,E.element));return v.length>0?re.some(v[0]):re.none()},Zo=(l,m)=>{const p=zo(l.all,v=>v.cells);return it(p,m)},eu=l=>{const m={};let p=0;return Ve(l.cells,v=>{const E=v.colspan;Oo(E,A=>{const B=p+A;m[B]=Xl(v.element,E,B)}),p+=E}),m},xb=l=>{const m={},p=[],E=pe(l).map(lt=>lt.element).bind(Sa).bind(Or).getOr({});let A=0,B=0,V=0;const{pass:q,fail:se}=ks(l,lt=>lt.section==="colgroup");Ve(se,lt=>{const tt=[];Ve(lt.cells,At=>{let We=0;for(;m[Ds(V,We)]!==void 0;)We++;const nt=jn(E,We.toString()),st=Ka(At.element,At.rowspan,At.colspan,V,We,nt);for(let nn=0;nn<At.colspan;nn++)for(let Wn=0;Wn<At.rowspan;Wn++){const ko=V+Wn,ns=We+nn,Es=Ds(ko,ns);m[Es]=st,B=Math.max(B,ns+1)}tt.push(st)}),A++,p.push(Xs(lt.element,tt,lt.section)),V++});const{columns:ye,colgroups:Ge}=Er(q).map(lt=>{const tt=eu(lt);return{colgroups:[H(lt.element,Io(tt))],columns:tt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:_r(A,B),access:m,all:p,columns:ye,colgroups:Ge}},In={fromTable:l=>{const m=up(l);return xb(m)},generate:xb,getAt:zu,findItem:bm,filterItems:Zo,justCells:l=>zo(l.all,m=>m.cells),justColumns:l=>Io(l.columns),hasColumns:l=>Bt(l.columns).length>0,getColumnAt:(l,m)=>re.from(l.columns[m])},gf=(l,m=Me)=>{const p=l.grid,v=Oo(p.columns,ut),E=Oo(p.rows,ut);return Kt(v,A=>Pg(()=>zo(E,se=>In.getAt(l,se,A).filter(ye=>ye.column===A).toArray()),se=>se.colspan===1&&m(se.element),()=>In.getAt(l,0,A)))},Pg=(l,m,p)=>{const v=l();return $(v,m).orThunk(()=>re.from(v[0]).orThunk(p)).map(B=>B.element)},w=l=>{const m=l.grid,p=Oo(m.rows,ut),v=Oo(m.columns,ut);return Kt(p,E=>Pg(()=>zo(v,q=>In.getAt(l,E,q).filter(se=>se.row===E).fold(ce([]),se=>[se])),q=>q.rowspan===1,()=>In.getAt(l,E,0)))},O=(l,m)=>{if(m<0||m>=l.length-1)return re.none();const p=l[m].fold(()=>{const E=Li(l.slice(0,m));return $o(E,(A,B)=>A.map(V=>({value:V,delta:B+1})))},E=>re.some({value:E,delta:0})),v=l[m+1].fold(()=>{const E=l.slice(m+1);return $o(E,(A,B)=>A.map(V=>({value:V,delta:B+1})))},E=>re.some({value:E,delta:1}));return p.bind(E=>v.map(A=>{const B=A.delta+E.delta;return Math.abs(A.value-E.value)/B}))},I=(l,m)=>p=>Q(p)==="rtl"?m:l,Q=l=>Hs(l,"direction")==="rtl"?"rtl":"ltr",ae=Os("height",l=>{const m=l.dom;return sn(l)?m.getBoundingClientRect().height:m.offsetHeight}),ze=l=>ae.get(l),Zt=l=>ae.getOuter(l),gn=$t,an=(l,m)=>({left:l,top:m,translate:(v,E)=>an(l+v,m+E)}),Pt=an,xs=l=>{const m=l.getBoundingClientRect();return Pt(m.left,m.top)},yr=(l,m)=>l!==void 0?l:m!==void 0?m:0,Qc=l=>{const m=l.dom.ownerDocument,p=m.body,v=m.defaultView,E=m.documentElement;if(p===l.dom)return Pt(p.offsetLeft,p.offsetTop);const A=yr(v==null?void 0:v.pageYOffset,E.scrollTop),B=yr(v==null?void 0:v.pageXOffset,E.scrollLeft),V=yr(E.clientTop,p.clientTop),q=yr(E.clientLeft,p.clientLeft);return Uu(l).translate(B-q,A-V)},Uu=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?Pt(v.offsetLeft,v.offsetTop):sn(l)?xs(m):Pt(0,0)},hf=(l,m)=>({row:l,y:m}),Eb=(l,m)=>({col:l,x:m}),Ea=l=>Qc(l).left+Vu(l),Tb=l=>Qc(l).left,ES=(l,m)=>Eb(l,Tb(m)),Qv=(l,m)=>Eb(l,Ea(m)),Hr=l=>Qc(l).top,Sp=(l,m)=>hf(l,Hr(m)),Vr=(l,m)=>hf(l,Hr(m)+Zt(m)),wp=(l,m,p)=>{if(p.length===0)return[];const v=Kt(p.slice(1),(A,B)=>A.map(V=>l(B,V))),E=p[p.length-1].map(A=>m(p.length-1,A));return v.concat([E])},bi=l=>-l,Yt={delta:ut,positions:l=>wp(Sp,Vr,l),edge:Hr},ey=I({delta:ut,edge:Tb,positions:l=>wp(ES,Qv,l)},{delta:bi,edge:Ea,positions:l=>wp(Qv,ES,l)}),xp={delta:(l,m)=>ey(m).delta(l,m),positions:(l,m)=>ey(m).positions(l,m),edge:l=>ey(l).edge(l)},ty={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Sl=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),v="\\.",E=V=>`(?:${V})?`,B=`[+-]?(?:${["Infinity",l+v+E(l)+E(p),v+l+E(p),l+E(p)].join("|")})`;return new RegExp(`^(${B})(.*)$`)})(),Wu=(l,m)=>et(m,p=>et(ty[p],v=>l===v)),pf=(l,m)=>re.from(Sl.exec(l)).bind(v=>{const E=Number(v[1]),A=v[2];return Wu(A,m)?re.some({value:E,unit:A}):re.none()}),pt=/(\d+(\.\d+)?)%/,wl=/(\d+(\.\d+)?)px|em/,ny=Xo("col"),Bg=Xo("tr"),xl=(l,m,p)=>{const v=kr(l).getOrThunk(()=>N(Xr(l)));return m(l)/p(v)*100},Ep=(l,m)=>{Cn(l,"width",m+"px")},bf=(l,m)=>{Cn(l,"width",m+"%")},Od=(l,m)=>{Cn(l,"height",m+"px")},Tp=l=>{Vs(l,"height")},tu=l=>gn(l)+"px",kS=(l,m,p,v)=>{const E=Sa(l).map(A=>{const B=p(A);return Math.floor(m/100*B)}).getOr(m);return v(l,E),E},Ms=(l,m,p,v)=>{const E=parseFloat(l);return aa(l,"%")&&Co(m)!=="table"?kS(m,E,p,v):E},qe=l=>{const m=tu(l);return m?Ms(m,l,ze,Od):ze(l)},Va=(l,m,p)=>{const v=p(l),E=tc(l,m);return v/E},vf=(l,m)=>ec(l,m).orThunk(()=>Is(l,m).map(p=>p+"px")),rr=l=>vf(l,"width"),$g=l=>vf(l,"height"),nc=l=>xl(l,mo,ff),fo=l=>ny(l)?mo(l):Mg(l),kp=l=>Bg(l)?ze(l):Va(l,"rowspan",qe),Fe=l=>rr(l).bind(p=>pf(p,["fixed","relative","empty"])),go=(l,m,p)=>{Cn(l,"width",m+p)},kb=l=>mo(l)+"px",zr=l=>ze(l)+"px",ea=l=>xl(l,mo,ff)+"%",El=l=>rr(l).exists(m=>pt.test(m)),oy=l=>rr(l).exists(m=>wl.test(m)),vm=l=>rr(l).isNone(),sy=ce(pt),vi=Xo("col"),lo=l=>rr(l).getOrThunk(()=>fo(l)+"px"),Zu=l=>$g(l).getOrThunk(()=>kp(l)+"px"),_p=l=>Kt(In.justColumns(l),m=>re.from(m.element)),Ur=l=>{const m=ws().browser,p=m.isChromium()||m.isFirefox();return vi(l)?p:!0},_b=(l,m,p,v,E,A)=>l.filter(v).fold(()=>A(O(p,m)),B=>E(B)),ju=(l,m,p,v)=>{const E=gf(l),A=In.hasColumns(l)?_p(l):E,B=[re.some(xp.edge(m))].concat(Kt(xp.positions(E,m),q=>q.map(se=>se.x))),V=le(Kc);return Kt(A,(q,se)=>_b(q,se,B,V,ye=>{if(Ur(ye))return p(ye);{const Ge=uf(E[se],ut);return _b(Ge,se,B,V,mt=>v(re.some(mo(mt))),v)}},v))},Ap=l=>l.map(m=>m+"px").getOr(""),oc=(l,m)=>ju(l,m,lo,Ap),la=(l,m,p)=>ju(l,m,nc,v=>v.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),ve=(l,m,p)=>ju(l,m,fo,v=>v.getOrThunk(p.minCellWidth)),ds=(l,m,p,v)=>{const E=w(l),A=Kt(l.all,V=>re.some(V.element)),B=[re.some(Yt.edge(m))].concat(Kt(Yt.positions(E,m),V=>V.map(q=>q.y)));return Kt(A,(V,q)=>_b(V,q,B,Me,p,v))},ry=(l,m)=>ds(l,m,kp,p=>p.getOrThunk(kg)),mr=(l,m)=>ds(l,m,Zu,Ap),Cc=(l,m)=>()=>sn(l)?m(l):parseFloat(ec(l,"width").getOr("0")),Sc=l=>{const m=Cc(l,mo),p=ce(0);return{width:m,pixelWidth:m,getWidths:(E,A)=>ve(E,l,A),getCellDelta:p,singleColumnWidth:ce([0]),minCellWidth:p,setElementWidth:Nt,adjustTableWidth:Nt,isRelative:!0,label:"none"}},vs=l=>{const m=Cc(l,q=>parseFloat(ea(q))),p=Cc(l,mo);return{width:m,pixelWidth:p,getWidths:(q,se)=>la(q,l,se),getCellDelta:q=>q/p()*100,singleColumnWidth:(q,se)=>[100-q],minCellWidth:()=>bl()/p()*100,setElementWidth:bf,adjustTableWidth:q=>{const se=m(),ye=q/100*se,Ge=se+ye;bf(l,Ge)},isRelative:!0,label:"percent"}},Ab=l=>{const m=Cc(l,mo);return{width:m,pixelWidth:m,getWidths:(B,V)=>ve(B,l,V),getCellDelta:ut,singleColumnWidth:(B,V)=>[Math.max(bl(),B+V)-B],minCellWidth:bl,setElementWidth:Ep,adjustTableWidth:B=>{const V=m()+B;Ep(l,V)},isRelative:!1,label:"pixel"}},ym=(l,m)=>sy().exec(m)!==null?vs(l):Ab(l),Op={getTableSize:l=>rr(l).fold(()=>Sc(l),p=>ym(l,p)),pixelSize:Ab,percentageSize:vs,noneSize:Sc},Ja=(l,m,p,v,E,A)=>({minRow:l,minCol:m,maxRow:p,maxCol:v,allCells:E,selectedCells:A}),Vk=(l,m)=>{const p=l.grid.columns;let E=l.grid.rows,A=p,B=0,V=0;const q=[],se=[];return Bn(l.access,ye=>{if(q.push(ye),m(ye)){se.push(ye);const Ge=ye.row,mt=Ge+ye.rowspan-1,lt=ye.column,tt=lt+ye.colspan-1;Ge<E?E=Ge:mt>B&&(B=mt),lt<A?A=lt:tt>V&&(V=tt)}}),Ja(E,A,B,V,q,se)},cy=(l,m,p)=>{const v=l[p].element,E=he.fromTag("td");Wo(E,he.fromTag("br")),(m?Wo:Ys)(v,E)},AS=(l,m,p,v)=>{const E=it(l,V=>V.section!=="colgroup"),A=m.grid.columns,B=m.grid.rows;for(let V=0;V<B;V++){let q=!1;for(let se=0;se<A;se++)V<p.minRow||V>p.maxRow||se<p.minCol||se>p.maxCol||(In.getAt(m,V,se).filter(v).isNone()?cy(E,q,V):q=!0)}},OS=(l,m,p,v)=>{Bn(p.columns,B=>{(B.column<m.minCol||B.column>m.maxCol)&&Fs(B.element)});const E=it(Ed(l,"tr"),B=>B.dom.childElementCount===0);Ve(E,Fs),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ve(Ed(l,"th,td"),B=>{Uo(B,"rowspan"),Uo(B,"colspan")}),Uo(l,Ad),Uo(l,"data-snooker-col-series"),Op.getTableSize(l).adjustTableWidth(v)},DS=(l,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const E=ve(m,l,p),A=_e(E,(se,ye)=>se+ye,0),q=_e(E.slice(v.minCol,v.maxCol+1),(se,ye)=>se+ye,0)/A*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(q)},yf=(l,m)=>{const p=mt=>Yr(mt.element,m),v=Nc(l),E=up(v),A=Op.getTableSize(l),B=In.generate(E),V=Vk(B,p),q="th:not("+m+"),td:not("+m+")",se=df(v,"th,td",mt=>Yr(mt,q));Ve(se,Fs),AS(E,B,V,p);const ye=In.fromTable(l),Ge=DS(l,ye,A,V);return OS(v,V,B,Ge),v},Ig=" ",Dp=((l,m)=>{const p=A=>{if(!l(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>l(A)?re.from(A.dom.nodeValue):re.none();return{get:p,getOption:v,set:(A,B)=>{if(!l(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=B}}})(bc,"text"),ay=l=>Dp.get(l),iy=l=>Dp.getOption(l),Ob=(l,m)=>Dp.set(l,m),Gi=l=>Co(l)==="img"?1:iy(l).fold(()=>$n(l).length,m=>m.length),Db=l=>iy(l).filter(m=>m.trim().length!==0||m.indexOf(Ig)>-1).isSome(),Cf=l=>zt(l)&&or(l,"contenteditable")==="false",Lg=["img","br"],Rb=l=>Db(l)||Mo(Lg,Co(l))||Cf(l),RS=l=>zi(l,Rb),ly=l=>zk(l,Rb),zk=(l,m)=>{const p=v=>{const E=$n(v);for(let A=E.length-1;A>=0;A--){const B=E[A];if(m(B))return re.some(B);const V=p(B);if(V.isSome())return V}return re.none()};return p(l)},wc={scope:["row","col"]},nu=l=>()=>{const m=he.fromTag("td",l.dom);return Wo(m,he.fromTag("br",l.dom)),m},Cm=l=>()=>he.fromTag("col",l.dom),Sf=l=>()=>he.fromTag("colgroup",l.dom),Mb=l=>()=>he.fromTag("tr",l.dom),yi=(l,m,p)=>{const v=hl(l,m);return Bn(p,(E,A)=>{E===null?Uo(v,A):ls(v,A,E)}),v},Rp=l=>l,Nb=(l,m,p)=>RS(l).map(E=>{const A=p.join(","),B=Le(E,A,V=>No(V,l));return Xt(B,(V,q)=>{const se=Qr(q);return Wo(V,se),se},m)}).getOr(m),Pb=(l,m)=>{Bn(wc,(p,v)=>Is(l,v).filter(E=>Mo(p,E)).each(E=>ls(m,v,E)))},Tl=(l,m,p)=>{const v=(B,V)=>{zs(B.element,V),Vs(V,"height"),B.colspan!==1&&Vs(V,"width")},E=B=>{const V=he.fromTag(Co(B.element),m.dom),q=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),se=q.length>0?Nb(B.element,V,q):V;return Wo(se,he.fromTag("br")),v(B,V),Pb(B.element,V),l(B.element,V),V};return{col:B=>{const V=he.fromTag(Co(B.element),m.dom);return v(B,V),l(B.element,V),V},colgroup:Sf(m),row:Mb(m),cell:E,replace:yi,colGap:Cm(m),gap:nu(m)}},kl=l=>({col:Cm(l),colgroup:Sf(l),row:Mb(l),cell:nu(l),replace:Rp,colGap:Cm(l),gap:nu(l)}),MS=(l,m)=>{const v=document.createElement("div");return v.innerHTML=l,$n(he.fromDom(v))},qi=l=>Kt(l,he.fromDom),wf=l=>m=>m.options.get(l),ou="100%",Gu=l=>{var m;const p=l.dom,v=(m=p.getParent(l.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:l.getBody();return ff(he.fromDom(v))+"px"},xf=(l,m)=>wm(l)||!xm(l)?m:xc(l)?{...m,width:Gu(l)}:{...m,width:ou},Uk=(l,m)=>wm(l)||xm(l)?m:xc(l)?{...m,width:Gu(l)}:{...m,width:ou},Mp=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=Mo(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=Mo(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Sm=l=>re.from(l.options.get("table_clone_elements")),Wk=l=>{const m=l.options.get("object_resizing");return Mo(m.split(","),"table")},cr=wf("table_header_type"),Bb=wf("table_column_resizing"),su=l=>Bb(l)==="preservetable",Ef=l=>Bb(l)==="resizetable",Np=wf("table_sizing_mode"),ru=l=>Np(l)==="relative",xc=l=>Np(l)==="fixed",wm=l=>Np(l)==="responsive",$b=wf("table_resize_bars"),xm=wf("table_style_by_css"),sc=wf("table_merge_content_on_paste"),Ib=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Uk(l,p)},Lb=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:xf(l,p)},Zk=wf("table_use_colgroups"),NS=l=>sr(l,"[contenteditable]"),Em=(l,m=!1)=>sn(l)?l.dom.isContentEditable:NS(l).fold(ce(m),p=>Tf(p)==="true"),Tf=l=>l.dom.contentEditable,za=l=>he.fromDom(l.getBody()),Ci=l=>m=>No(m,za(l)),Si=l=>{Uo(l,"data-mce-style");const m=p=>Uo(p,"data-mce-style");Ve(Pu(l),m),Ve(Bu(l),m),Ve(lp(l),m)},Pp=l=>he.fromDom(l.selection.getStart()),Bp=l=>l.getBoundingClientRect().width,Fg=l=>l.getBoundingClientRect().height,uy=l=>(m,p)=>{const v=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return re.from(v).filter(K)},PS=uy("width"),BS=uy("height"),dy=l=>/^(\d+(\.\d+)?)%$/.test(l),Hg=l=>/^(\d+(\.\d+)?)px$/.test(l),An=l=>Do(l,Xo("table")).exists(Em),Dt=(l,m)=>{const p=m.column,v=m.column+m.colspan-1,E=m.row,A=m.row+m.rowspan-1;return p<=l.finishCol&&v>=l.startCol&&E<=l.finishRow&&A>=l.startRow},Tm=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Fb=(l,m)=>{let p=!0;const v=Zn(Tm,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let A=m.startCol;A<=m.finishCol;A++)p=p&&In.getAt(l,E,A).exists(v);return p?re.some(m):re.none()},Hb=(l,m)=>Yl(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),my=(l,m,p)=>{const v=In.findItem(l,m,No),E=In.findItem(l,p,No);return v.bind(A=>E.map(B=>Hb(A,B)))},Vb=(l,m,p)=>my(l,m,p).bind(v=>Fb(l,v)),Eo=(l,m,p,v)=>In.findItem(l,m,No).bind(E=>{const A=p>0?E.row+E.rowspan-1:E.row,B=v>0?E.column+E.colspan-1:E.column;return In.getAt(l,A+p,B+v).map(q=>q.element)}),fy=(l,m,p)=>my(l,m,p).map(v=>{const E=In.filterItems(l,Zn(Dt,v));return Kt(E,A=>A.element)}),$S=(l,m)=>{const p=(v,E)=>Ru(E,v);return In.findItem(l,m,p).map(v=>v.element)},gy=(l,m,p)=>Sa(l).bind(v=>{const E=kf(v);return Eo(E,l,m,p)}),Ie=(l,m,p)=>{const v=kf(l);return fy(v,m,p)},Vg=(l,m,p,v,E)=>{const A=kf(l),B=No(l,p)?re.some(m):$S(A,m),V=No(l,E)?re.some(v):$S(A,v);return B.bind(q=>V.bind(se=>fy(A,q,se)))},IS=(l,m,p)=>{const v=kf(l);return Vb(v,m,p)},kf=In.fromTable;var LS=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Dd=()=>{const l=se=>he.fromDom(se.dom.cloneNode(!1)),m=se=>Hi(se).dom,p=se=>$s(se)?Co(se)==="body"?!0:Mo(LS,Co(se)):!1,v=se=>$s(se)?Mo(["br","img","hr","input"],Co(se)):!1,E=se=>$s(se)&&or(se,"contenteditable")==="false",A=(se,ye)=>se.dom.compareDocumentPosition(ye.dom),B=(se,ye)=>{const Ge=qs(se);vc(ye,Ge)},V=se=>{const ye=Co(se);return Mo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ye)},q=se=>$s(se)?Is(se,"lang"):re.none();return{up:ce({selector:cn,closest:sr,predicate:je,all:hs}),down:ce({selector:io,predicate:Se}),styles:ce({get:Hs,getRaw:ec,set:Cn,remove:Vs}),attrs:ce({get:or,set:ls,remove:Uo,copyTo:B}),insert:ce({before:qa,after:ca,afterAll:ao,append:Wo,appendAll:hr,prepend:Ys,wrap:Gc}),remove:ce({unwrap:mi,remove:Fs}),create:ce({nu:he.fromTag,clone:l,text:he.fromText}),query:ce({comparePosition:A,prevSibling:di,nextSibling:ra}),property:ce({children:$n,name:Co,parent:jc,document:m,isText:bc,isComment:ho,isElement:$s,isSpecial:V,getLanguage:q,getText:ay,setText:Ob,isBoundary:p,isEmptyTag:v,isNonEditable:E}),eq:No,is:ui}};const zb=(l,m,p,v)=>{const E=p[0],A=p.slice(1);return v(l,m,E,A)},_f=(l,m,p)=>p.length>0?zb(l,m,p,$p):re.none(),$p=(l,m,p,v)=>{const E=m(l,p);return Xt(v,(A,B)=>{const V=m(l,B);return km(l,A,V)},E)},km=(l,m,p)=>m.bind(v=>p.filter(Zn(l.eq,v))),ms=(l,m)=>Zn(l.eq,m),qu=(l,m,p,v=Tn)=>{const E=[m].concat(l.up().all(m)),A=[p].concat(l.up().all(p)),B=ye=>tr(ye,v).fold(()=>ye,mt=>ye.slice(0,mt+1)),V=B(E),q=B(A),se=$(V,ye=>et(q,ms(l,ye)));return{firstpath:V,secondpath:q,shared:se}},FS=_f,Rd=qu,hy=Dd(),Af=(l,m)=>FS(hy,(p,v)=>l(v),m),py=(l,m,p)=>Rd(hy,l,m,p),by=l=>cn(l,"table"),Ta=(l,m,p)=>{const v=E=>A=>p!==void 0&&p(A)||No(A,E);return No(l,m)?re.some({boxes:re.some([l]),start:l,finish:m}):by(l).bind(E=>by(m).bind(A=>{if(No(E,A))return re.some({boxes:Ie(E,l,m),start:l,finish:m});if(Ru(E,A)){const B=Le(m,"td,th",v(E)),V=B.length>0?B[B.length-1]:m;return re.some({boxes:Vg(E,l,E,m,A),start:l,finish:V})}else if(Ru(A,E)){const B=Le(l,"td,th",v(A)),V=B.length>0?B[B.length-1]:l;return re.some({boxes:Vg(A,l,E,m,A),start:l,finish:V})}else return py(l,m).shared.bind(B=>sr(B,"table",p).bind(V=>{const q=Le(m,"td,th",v(V)),se=q.length>0?q[q.length-1]:m,ye=Le(l,"td,th",v(V)),Ge=ye.length>0?ye[ye.length-1]:l;return re.some({boxes:Vg(V,l,E,m,A),start:Ge,finish:se})}))}))},zg=(l,m)=>{const p=io(l,m);return p.length>0?re.some(p):re.none()},jk=(l,m)=>$(l,p=>Yr(p,m)),_m=(l,m,p)=>Ia(l,m).bind(v=>Ia(l,p).bind(E=>Af(by,[v,E]).map(A=>({first:v,last:E,table:A})))),Gk=(l,m)=>cn(l,"table").bind(p=>Ia(p,m).bind(v=>Ta(v,l).bind(E=>E.boxes.map(A=>({boxes:A,start:E.start,finish:E.finish}))))),Of=(l,m,p,v,E)=>jk(l,E).bind(A=>gy(A,m,p).bind(B=>Gk(B,v))),Ub=(l,m)=>zg(l,m),qk=(l,m,p)=>_m(l,m,p).bind(v=>{const E=q=>No(l,q),A="thead,tfoot,tbody,table",B=cn(v.first,A,E),V=cn(v.last,A,E);return B.bind(q=>V.bind(se=>No(q,se)?IS(v.table,v.first,v.last):re.none()))}),Ip=ut,cu=l=>{const m=(v,E)=>Is(v,E).exists(A=>parseInt(A,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&co(l,p)?re.some(l):re.none()},ua=(l,m,p)=>m.length<=1?re.none():qk(l,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Ye="data-mce-selected",Ug="td["+Ye+"],th["+Ye+"]",rc="["+Ye+"]",vy="data-mce-first-selected",yy="td["+vy+"],th["+vy+"]",Cy="data-mce-last-selected",Ko="td["+Cy+"],th["+Cy+"]",Kk=rc,Df={selected:Ye,selectedSelector:Ug,firstSelected:vy,firstSelectedSelector:yy,lastSelected:Cy,lastSelectedSelector:Ko},Md=(l,m,p)=>({element:p,mergable:ua(m,l,Df),unmergable:cu(l),selection:Ip(l)}),Wg=(l,m,p)=>({element:l,clipboard:m,generators:p}),Sy=(l,m,p,v)=>({selection:Ip(l),clipboard:p,generators:v}),Ku=l=>Sa(l).bind(m=>Ub(m,Df.firstSelectedSelector)).fold(ce(l),m=>m[0]),HS=l=>(m,p)=>{const v=Co(m),E=v==="col"||v==="colgroup"?Ku(m):m;return sr(E,l,p)},fr=HS("th,td,caption"),Wb=HS("th,td"),To=l=>qi(l.model.table.getSelectedCells()),wy=l=>it(To(l),m=>Yr(m,Df.selectedSelector)),ka=l=>Sa(l[0]).map(m=>{const p=yf(m,Kk);return Si(p),[p]}),Zg=(l,m)=>Kt(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),au=(l,m)=>{const p=l.getDoc(),v=ie(he.fromDom(l.getBody())),E=he.fromTag("div",p);ls(E,"data-mce-bogus","all"),Bo(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const A=Ne(v);hr(E,m),Wo(A,E);const B=E.dom.innerText;return Fs(E),B},_R=(l,m)=>{l.on("BeforeGetContent",p=>{const v=E=>{p.preventDefault(),ka(E).each(A=>{const B=p.format==="text"?au(l,A):Zg(l,A);p.content=B})};if(p.selection===!0){const E=wy(l);E.length>=1&&v(E)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=To(l);pe(v).each(E=>{Sa(E).each(A=>{const B=it(MS(p.content),q=>Co(q)!=="meta"),V=Xo("table");if(sc(l)&&B.length===1&&V(B[0])){p.preventDefault();const q=he.fromDom(l.getDoc()),se=kl(q),ye=Wg(E,B[0],se);m.pasteCells(A,ye).each(()=>{l.focus()})}})})}})},Zb=(l,m)=>({element:l,offset:m}),Yk=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(v=>Yk(l,v,p).orThunk(()=>re.some(v))):re.none(),VS=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,_l=(l,m)=>{const p=Yk(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return Zb(p,VS(l,p));const v=l.property().children(p);return v.length>0?_l(l,v[v.length-1]):Zb(p,VS(l,p))},iu=_l,da=Dd(),jg=l=>iu(da,l),jb=(l,m)=>{Kc(l)||Fe(l).each(v=>{const E=v.value/2;go(l,E,v.unit),go(m,E,v.unit)})},Gb=l=>Kt(l,ce(0)),Gg=(l,m,p,v,E)=>E(l.slice(0,m)).concat(v).concat(E(l.slice(p))),Am=l=>(m,p,v,E)=>{if(l(v)){const A=Math.max(E,m[p]-Math.abs(v)),B=Math.abs(A-m[p]);return v>=0?B:-B}else return v},Yu=Am(l=>l<0),qg=Am(Me),Om=()=>{const l=(V,q,se,ye,Ge)=>{const mt=Yu(V,q,ye,Ge);return Gg(V,q,se+1,[mt,0],Gb)},m=(V,q,se,ye)=>{const Ge=(100+se)/100,mt=Math.max(ye,(V[q]+se)/Ge);return Kt(V,(lt,tt)=>(tt===q?mt:lt/Ge)-lt)},p=(V,q,se,ye,Ge,mt)=>mt?m(V,q,ye,Ge):l(V,q,se,ye,Ge);return{resizeTable:(V,q)=>V(q),clampTableDelta:Yu,calcLeftEdgeDeltas:p,calcMiddleDeltas:(V,q,se,ye,Ge,mt,lt)=>p(V,se,ye,Ge,mt,lt),calcRightEdgeDeltas:(V,q,se,ye,Ge,mt)=>{if(mt)return m(V,se,ye,Ge);{const lt=Yu(V,se,ye,Ge);return Gb(V.slice(0,se)).concat([lt])}},calcRedestributedWidths:(V,q,se,ye)=>{if(ye){const mt=(q+se)/q,lt=Kt(V,tt=>tt/mt);return{delta:mt*100-100,newSizes:lt}}else return{delta:se,newSizes:V}}}},Nd=()=>{const l=(B,V,q,se,ye)=>{const Ge=se>=0?q:V,mt=qg(B,Ge,se,ye);return Gg(B,V,q+1,[mt,-mt],Gb)};return{resizeTable:(B,V,q)=>{q&&B(V)},clampTableDelta:(B,V,q,se,ye)=>{if(ye){if(q>=0)return q;{const Ge=_e(B,(mt,lt)=>mt+lt-se,0);return Math.max(-Ge,q)}}else return Yu(B,V,q,se)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(B,V,q,se,ye,Ge)=>l(B,q,se,ye,Ge),calcRightEdgeDeltas:(B,V,q,se,ye,Ge)=>{if(Ge)return Gb(B);{const mt=se/B.length;return Kt(B,ce(mt))}},calcRedestributedWidths:(B,V,q,se)=>({delta:0,newSizes:B})}},Rf=l=>In.fromTable(l).grid,Lp=Xo("th"),qb=l=>co(l,m=>Lp(m.element)),zS=(l,m)=>l&&m?"sectionCells":l?"section":"cells",xy=l=>{const m=l.section==="thead",p=Po(Kg(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:zS(m,p)}:{type:"body"}},Kg=l=>{const m=it(l,p=>Lp(p.element));return m.length===0?re.some("td"):m.length===l.length?re.some("th"):re.none()},US=l=>{const m=Kt(l,E=>xy(E).type),p=Mo(m,"header"),v=Mo(m,"footer");if(!p&&!v)return re.some("body");{const E=Mo(m,"body");return p&&!E&&!v?re.some("header"):!p&&!E&&v?re.some("footer"):re.none()}},Xk=l=>$o(l.all,m=>{const p=xy(m);return p.type==="header"?re.from(p.subType):re.none()}),Kb=(l,m,p)=>br(p(l.element,m),!0,l.isLocked),Ey=(l,m)=>l.section!==m?yc(l.element,l.cells,m,l.isNew):l,Fp=()=>({transformRow:Ey,transformCell:(l,m,p)=>{const v=p(l.element,m),E=Co(v)!=="td"?Vi(v,"td"):v;return br(E,l.isNew,l.isLocked)}}),Ty=()=>({transformRow:Ey,transformCell:Kb}),Yg=()=>({transformRow:(l,m)=>Ey(l,m==="thead"?"tbody":m),transformCell:Kb}),Xg={getTableSectionType:(l,m)=>{const p=In.fromTable(l);switch(Xk(p).getOr(m)){case"section":return Fp();case"sectionCells":return Ty();case"cells":return Yg()}},section:Fp,sectionCells:Ty,cells:Yg,fallback:()=>({transformRow:ut,transformCell:Kb})},Al=(l,m,p,v)=>{p===v?Uo(l,m):ls(l,m,p)},Hp=(l,m,p)=>{Er(yn(l,m)).fold(()=>Ys(l,p),v=>ca(v,p))},WS=(l,m)=>{const p=qc(l,m).getOrThunk(()=>{const v=he.fromTag(m,Xr(l).dom);return m==="thead"?Hp(l,"caption,colgroup",v):m==="colgroup"?Hp(l,"caption",v):Wo(l,v),v});return pr(p),p},ZS=(l,m)=>{const p=[],v=[],E=lt=>Kt(lt,tt=>{tt.isNew&&p.push(tt.element);const At=tt.element;return pr(At),Ve(tt.cells,We=>{We.isNew&&v.push(We.element),Al(We.element,"colspan",We.colspan,1),Al(We.element,"rowspan",We.rowspan,1),Wo(At,We.element)}),At}),A=lt=>zo(lt,tt=>Kt(tt.cells,At=>(Al(At.element,"span",At.colspan,1),At.element))),B=(lt,tt)=>{const At=WS(l,tt),nt=(tt==="colgroup"?A:E)(lt);hr(At,nt)},V=lt=>{qc(l,lt).each(Fs)},q=(lt,tt)=>{lt.length>0?B(lt,tt):V(tt)},se=[],ye=[],Ge=[],mt=[];return Ve(m,lt=>{switch(lt.section){case"thead":se.push(lt);break;case"tbody":ye.push(lt);break;case"tfoot":Ge.push(lt);break;case"colgroup":mt.push(lt);break}}),q(mt,"colgroup"),q(se,"thead"),q(ye,"tbody"),q(Ge,"tfoot"),{newRows:p,newCells:v}},jS=l=>Kt(l,m=>{const p=Qr(m.element);return Ve(m.cells,v=>{const E=Nc(v.element);Al(E,"colspan",v.colspan,1),Al(E,"rowspan",v.rowspan,1),Wo(p,E)}),p}),Mf=(l,m)=>Kt(l,p=>Ha(p,m)),DR=(l,m)=>l[m],Nf=(l,m)=>{if(l.length===0)return 0;const p=l[0];return tr(l,E=>!m(p.element,E.element)).getOr(l.length)},Jg=(l,m,p,v)=>{const E=DR(l,m),A=E.section==="colgroup",B=Nf(E.cells.slice(p),v),V=A?1:Nf(Mf(l.slice(m),p),v);return{colspan:B,rowspan:V}},GS=(l,m)=>{const p=Kt(l,E=>Kt(E.cells,Tn)),v=(E,A,B,V)=>{for(let q=E;q<E+B;q++)for(let se=A;se<A+V;se++)p[q][se]=!0};return Kt(l,(E,A)=>{const B=zo(E.cells,(V,q)=>{if(p[A][q]===!1){const se=Jg(l,A,q,m);return v(A,q,se.rowspan,se.colspan),[pl(V.element,se.rowspan,se.colspan,V.isNew)]}else return[]});return Ya(E.element,B,E.section,E.isNew)})},Qg=(l,m,p)=>{const v=[];Ve(l.colgroups,E=>{const A=[];for(let B=0;B<l.grid.columns;B++){const V=In.getColumnAt(l,B).map(q=>br(q.element,p,!1)).getOrThunk(()=>br(m.colGap(),!0,!1));A.push(V)}v.push(yc(E.element,A,"colgroup",p))});for(let E=0;E<l.grid.rows;E++){const A=[];for(let q=0;q<l.grid.columns;q++){const se=In.getAt(l,E,q).map(ye=>br(ye.element,p,ye.isLocked)).getOrThunk(()=>br(m.gap(),!0,!1));A.push(se)}const B=l.all[E],V=yc(B.element,A,B.section,p);v.push(V)}return v},Jk=(l,m)=>Qg(l,m,!1),ky=l=>GS(l,No),qS=(l,m)=>$o(l.all,p=>$(p.cells,v=>No(m,v.element))),KS=(l,m,p)=>{const v=Kt(m.selection,A=>Nu(A).bind(B=>qS(l,B)).filter(p)),E=La(v);return wd(E.length>0,E)},Lc=(l,m,p,v,E)=>(A,B,V,q)=>{const se=In.fromTable(A),ye=re.from(q==null?void 0:q.section).getOrThunk(Xg.fallback);return m(se,B).map(mt=>{const lt=Jk(se,V),tt=l(lt,mt,No,E(V),ye),At=Ql(tt.grid),We=ky(tt.grid);return{info:mt,grid:We,cursor:tt.cursor,lockedColumns:At}}).bind(mt=>{const lt=ZS(A,mt.grid),tt=re.from(q==null?void 0:q.sizing).getOrThunk(()=>Op.getTableSize(A)),At=re.from(q==null?void 0:q.resize).getOrThunk(Nd);return p(A,mt.grid,mt.info,{sizing:tt,resize:At,section:ye}),v(A),Uo(A,Ad),mt.lockedColumns.length>0&&ls(A,Ad,mt.lockedColumns.join(",")),re.some({cursor:mt.cursor,newRows:lt.newRows,newCells:lt.newCells})})},RR=(l,m)=>Nu(m.element).bind(p=>qS(l,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Dm=(l,m)=>KS(l,m,Me).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Qk=(l,m)=>m.mergable,Pd=(l,m)=>m.unmergable,Qa=(l,m)=>KS(l,m,Me),lu=(l,m)=>KS(l,m,p=>!p.isLocked),Pf=(l,m)=>qS(l,m).exists(p=>!p.isLocked),YS=(l,m)=>co(m,p=>Pf(l,p)),Vp=(l,m)=>Qk(l,m).filter(p=>YS(l,p.cells)),Yb=(l,m)=>Pd(l,m).filter(p=>YS(l,p)),Rm=(l,m,p,v)=>{const E=qo(l).rows;if(E.length===0)return l;for(let A=m.startRow;A<=m.finishRow;A++)for(let B=m.startCol;B<=m.finishCol;B++){const V=E[A],q=Ha(V,B).isLocked;Js(V,B,br(v(),!1,q))}return l},_y=(l,m,p,v)=>{const E=qo(l).rows;let A=!0;for(let B=0;B<E.length;B++)for(let V=0;V<pi(E[0]);V++){const q=E[B],se=Ha(q,V),ye=se.element,Ge=p(ye,m);Ge&&!A?Js(q,V,br(v(),!0,se.isLocked)):Ge&&(A=!1)}return l},uu=(l,m)=>_e(l,(p,v)=>et(p,E=>m(E.element,v.element))?p:p.concat([v]),[]),Xu=(l,m,p,v)=>(m>0&&m<l[0].cells.length&&Ve(l,E=>{const A=E.cells[m-1];let B=0;const V=v();for(;E.cells.length>m+B&&p(A.element,E.cells[m+B].element);)Js(E,m+B,br(V,!0,E.cells[m+B].isLocked)),B++}),l),e_=(l,m,p,v)=>{const E=qo(l).rows;if(m>0&&m<E.length){const A=E[m-1].cells,B=uu(A,p);Ve(B,V=>{let q=re.none();for(let se=m;se<E.length;se++)for(let ye=0;ye<pi(E[0]);ye++){const Ge=E[se],mt=Ha(Ge,ye);p(mt.element,V.element)&&(q.isNone()&&(q=re.some(v())),q.each(tt=>{Js(Ge,ye,br(tt,!0,mt.isLocked))}))}})}return l},Wr=l=>{const m=A=>A(l),p=ce(l),v=()=>E,E={tag:!0,inner:l,fold:(A,B)=>B(l),isValue:Me,isError:Tn,map:A=>Xb.value(A(l)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:A=>{A(l)},toOptional:()=>re.some(l)};return E},zp=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(v,E)=>v(l),isValue:Tn,isError:Me,map:m,mapError:v=>Xb.error(v(l)),bind:m,exists:Tn,forall:Me,getOr:ut,or:ut,getOrThunk:fn,orThunk:fn,getOrDie:vn(String(l)),each:Nt,toOptional:re.none};return p},Xb={value:Wr,error:zp,fromOption:(l,m)=>l.fold(()=>zp(m),Wr)},Ay=(l,m,p)=>{if(l.row>=m.length||l.column>pi(m[0]))return Xb.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),E=v[0].cells.slice(l.column),A=pi(p[0]),B=p.length;return Xb.value({rowDelta:v.length-B,colDelta:E.length-A})},Bf=(l,m)=>{const p=pi(l[0]),v=pi(m[0]);return{rowDelta:0,colDelta:p-v}},Mm=(l,m)=>{const p=l.length,v=m.length;return{rowDelta:p-v,colDelta:0}},Ol=(l,m,p,v)=>{const E=m.section==="colgroup"?p.col:p.cell;return Oo(l,A=>br(E(),!0,v(A)))},Yi=(l,m,p,v)=>{const E=l[l.length-1];return l.concat(Oo(m,()=>{const A=E.section==="colgroup"?p.colgroup:p.row,B=Zi(E,A,ut),V=Ol(B.cells.length,B,p,q=>gs(v,q.toString()));return hm(B,V)}))},XS=(l,m,p,v)=>Kt(l,E=>{const A=Ol(m,E,p,Tn);return vp(E,v,A)}),t_=(l,m,p)=>Kt(l,v=>_e(p,(E,A)=>{const B=Ol(1,v,m,Me)[0];return Sn(E,A,B)},v)),Ju=(l,m,p)=>{const v=m.colDelta<0?XS:ut,E=m.rowDelta<0?Yi:ut,A=Ql(l),B=pi(l[0]),V=et(A,ye=>ye===B-1),q=v(l,Math.abs(m.colDelta),p,V?B-1:B),se=Ql(q);return E(q,Math.abs(m.rowDelta),p,Ut(se,Me))},Bd=(l,m,p,v)=>{const E=Ha(l[m],p),A=Zn(v,E.element),B=l[m];return l.length>1&&pi(B)>1&&(p>0&&A(xa(B,p-1))||p<B.cells.length-1&&A(xa(B,p+1))||m>0&&A(xa(l[m-1],p))||m<l.length-1&&A(xa(l[m+1],p)))},Jb=(l,m,p,v,E,A)=>{const B=l.row,V=l.column,q=p.length,se=pi(p[0]),ye=B+q,Ge=V+se+A.length,mt=Ut(A,Me);for(let lt=B;lt<ye;lt++){let tt=0;for(let At=V;At<Ge;At++){if(mt[At]){tt++;continue}Bd(m,lt,At,E)&&_y(m,xa(m[lt],At),E,v.cell);const We=At-V-tt,nt=Ha(p[lt-B],We),st=nt.element,nn=v.replace(st);Js(m[lt],At,br(nn,!0,nt.isLocked))}}return m},Gn=(l,m,p)=>{const v=pi(m[0]),E=qo(m).cols.length+l.row,A=Oo(v-l.column,V=>V+l.column),B=$(A,V=>co(p,q=>q!==V)).getOr(v-1);return{row:E,column:B}},ta=(l,m,p)=>it(p,v=>v>=l.column&&v<=pi(m[0])+l.column),$f=(l,m,p,v,E)=>{const A=Ql(m),B=Gn(l,m,A),V=qo(p).rows,q=ta(B,V,A);return Ay(B,m,V).map(ye=>{const Ge={...ye,colDelta:ye.colDelta-q.length},mt=Ju(m,Ge,v),lt=Ql(mt),tt=ta(B,V,lt);return Jb(B,mt,V,v,E,tt)})},eh=(l,m,p,v,E)=>{Xu(m,l,E,v.cell);const A=Mm(p,m),B=Ju(p,A,v),V=Mm(m,B),q=Ju(m,V,v);return Kt(q,(se,ye)=>vp(se,l,B[ye].cells))},es=(l,m,p,v,E)=>{e_(m,l,E,v.cell);const A=Ql(m),B=Bf(m,p),V={...B,colDelta:B.colDelta-A.length},q=Ju(m,V,v),{cols:se,rows:ye}=qo(q),Ge=Ql(q),mt=Bf(p,m),lt={...mt,colDelta:mt.colDelta+Ge.length},tt=t_(p,v,Ge),At=Ju(tt,lt,v);return[...se,...ye.slice(0,l),...At,...ye.slice(l,ye.length)]},If=(l,m,p,v)=>Zi(l,E=>v(E,p),m),$d=(l,m,p,v,E)=>{const{rows:A,cols:B}=qo(l),V=A.slice(0,m),q=A.slice(m),se=If(A[p],(ye,Ge)=>m>0&&m<A.length&&v(xa(A[m-1],Ge),xa(A[m],Ge))?Ha(A[m],Ge):br(E(ye.element,v),!0,ye.isLocked),v,E);return[...B,...V,se,...q]},JS=(l,m,p,v,E,A,B)=>{if(p==="colgroup"||!v){const V=Ha(l,E);return br(B(V.element,A),!0,!1)}else return Ha(l,m)},n_=(l,m,p,v,E)=>Kt(l,A=>{const B=m>0&&m<pi(A)&&v(xa(A,m-1),xa(A,m)),V=JS(A,m,A.section,B,p,v,E);return Sn(A,m,V)}),QS=(l,m)=>zo(l,p=>{const v=p.cells,E=Xt(m,(A,B)=>B>=0&&B<A.length?A.slice(0,B).concat(A.slice(B+1)):A,v);return E.length>0?[yc(p.element,E,p.section,p.isNew)]:[]}),ts=(l,m,p)=>{const{rows:v,cols:E}=qo(l);return[...E,...v.slice(0,m),...v.slice(p+1)]},Up=(l,m,p,v)=>xa(l[m],p)!==void 0&&m>0&&v(xa(l[m-1],p),xa(l[m],p)),o_=(l,m,p)=>m>0&&p(xa(l,m-1),xa(l,m)),ew=(l,m,p,v)=>Up(l,m,p,v)||o_(l[m],p,v),Lf=(l,m)=>co(m,ut)&&qb(l.cells)?Me:(v,E,A)=>!(Co(v.element)==="th"&&m[A]),Dl=(l,m)=>co(m,ut)&&qb(l)?Me:(v,E,A)=>!(Co(v.element)==="th"&&m[E]),Wp=(l,m,p,v)=>{const E=B=>B==="row"?As(m):Kc(m),A=B=>E(B)?`${B}group`:B;return l?Lp(m)?A(p):null:v&&Lp(m)?A(p==="row"?"col":"row"):null},Id=(l,m)=>(p,v,E)=>re.some(Wp(l,p.element,"col",m[E])),xt=(l,m)=>(p,v)=>re.some(Wp(l,p.element,"row",m[v])),tw=(l,m,p)=>br(p(l.element,m),!0,l.isLocked),Qb=(l,m,p,v,E,A,B)=>{const V=q=>et(m,se=>p(q.element,se.element));return Kt(l,(q,se)=>pm(q,(ye,Ge)=>{if(V(ye)){const mt=B(ye,se,Ge)?E(ye,p,v):ye;return A(mt,se,Ge).each(lt=>{Ba(mt.element,{scope:re.from(lt)})}),mt}else return ye}))},nw=(l,m,p)=>zo(l,(v,E)=>ew(l,E,m,p)?[]:[Ha(v,m)]),ow=(l,m,p)=>{const v=l[m];return zo(v.cells,(E,A)=>ew(l,m,A,p)?[]:[E])},Oy=(l,m,p,v,E)=>{const A=qo(l).rows,B=zo(m,ye=>nw(A,ye,v)),V=Kt(A,ye=>qb(ye.cells)),q=Dl(B,V),se=xt(p,V);return Qb(l,B,v,E,tw,se,q)},Dy=(l,m,p,v,E,A,B)=>{const{cols:V,rows:q}=qo(l),se=q[m[0]],ye=zo(m,We=>ow(q,We,E)),Ge=Kt(se.cells,(We,nt)=>qb(nw(q,nt,E))),mt=[...q];Ve(m,We=>{mt[We]=B.transformRow(q[We],p)});const lt=[...V,...mt],tt=Lf(se,Ge),At=Id(v,Ge);return Qb(lt,ye,E,A,B.transformCell,At,tt)},th=(l,m,p,v)=>{const E=qo(l).rows,A=Kt(m,B=>Ha(E[B.row],B.column));return Qb(l,A,p,v,tw,re.none,Me)},Ff={generate:l=>{if(!Qn(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Ve(l,(v,E)=>{const A=Bt(v);if(A.length!==1)throw new Error("one and only one name per case");const B=A[0],V=v[B];if(p[B]!==void 0)throw new Error("duplicate key detected:"+B);if(B==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qn(V))throw new Error("case arguments must be an array");m.push(B),p[B]=(...q)=>{const se=q.length;if(se!==V.length)throw new Error("Wrong number of arguments to case "+B+". Expected "+V.length+" ("+V+"), got "+se);return{fold:(...Ge)=>{if(Ge.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Ge.length);return Ge[E].apply(null,q)},match:Ge=>{const mt=Bt(Ge);if(m.length!==mt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+mt.join(","));if(!co(m,tt=>Mo(mt,tt)))throw new Error("Not all branches were specified when using match. Specified: "+mt.join(", ")+`
Required: `+m.join(", "));return Ge[B].apply(null,q)},log:Ge=>{console.log(Ge,{constructors:m,constructor:B,params:q})}}}}),p}},nh={...Ff.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},t0=(l,m)=>l.length===0?nh.none():l.length===1?nh.only(0):m===0?nh.left(0,1):m===l.length-1?nh.right(m-1,m):m>0&&m<l.length-1?nh.middle(m-1,m,m+1):nh.none(),Rl=(l,m,p,v,E)=>{const A=l.slice(0),B=t0(l,m),V=ce(Kt(A,ce(0))),q=mt=>v.singleColumnWidth(A[mt],p),se=(mt,lt)=>E.calcLeftEdgeDeltas(A,mt,lt,p,v.minCellWidth(),v.isRelative),ye=(mt,lt,tt)=>E.calcMiddleDeltas(A,mt,lt,tt,p,v.minCellWidth(),v.isRelative),Ge=(mt,lt)=>E.calcRightEdgeDeltas(A,mt,lt,p,v.minCellWidth(),v.isRelative);return B.fold(V,q,se,ye,Ge)},s_=(l,m,p)=>{let v=0;for(let E=l;E<m;E++)v+=p[E]!==void 0?p[E]:0;return v},n0=(l,m)=>{const p=In.justCells(l);return Kt(p,v=>{const E=s_(v.column,v.column+v.colspan,m);return{element:v.element,width:E,colspan:v.colspan}})},o0=(l,m)=>{const p=In.justColumns(l);return Kt(p,(v,E)=>({element:v.element,width:m[E],colspan:v.colspan}))},r_=(l,m)=>Kt(l.all,(p,v)=>({element:p.element,height:m[v]})),c_=l=>Xt(l,(m,p)=>m+p,0),sw=(l,m)=>In.hasColumns(l)?o0(l,m):n0(l,m),jp=(l,m,p)=>{const v=sw(l,m);Ve(v,E=>{p.setElementWidth(E.element,E.width)})},rw=(l,m,p,v,E)=>{const A=In.fromTable(l),B=E.getCellDelta(m),V=E.getWidths(A,E),q=p===A.grid.columns-1,se=v.clampTableDelta(V,p,B,E.minCellWidth(),q),ye=Rl(V,p,se,E,v),Ge=Kt(ye,(mt,lt)=>mt+V[lt]);jp(A,Ge,E),v.resizeTable(E.adjustTableWidth,se,q)},Ry=(l,m,p)=>{const v=In.fromTable(l),E=ry(v,l),A=Kt(E,(q,se)=>p===se?Math.max(m+q,kg()):q),B=r_(v,A);Ve(B,q=>{Od(q.element,q.height)}),Ve(In.justCells(v),q=>{Tp(q.element)});const V=c_(A);Od(l,V)},a_=(l,m,p,v,E)=>{const A=In.generate(m),B=v.getWidths(A,v),V=v.pixelWidth(),{newSizes:q,delta:se}=E.calcRedestributedWidths(B,V,p.pixelDelta,v.isRelative);jp(A,q,v),v.adjustTableWidth(se)},Gp=(l,m,p,v)=>{const E=In.generate(m),A=v.getWidths(E,v);jp(E,A,v)},oh=l=>_e(l,(p,v)=>et(p,A=>A.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Nm=Xo("col"),s0=Xo("colgroup"),My=l=>Co(l)==="tr"||s0(l),r0=l=>{const m=dr(l,"colspan",1),p=dr(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},Ny=(l,m=r0)=>{const p=V=>Nm(V.element)?l.col(V):l.cell(V),v=V=>s0(V.element)?l.colgroup(V):l.row(V),E=V=>{if(My(V))return v({element:V});{const q=V,se=p(m(q));return A=re.some({item:q,replacement:se}),se}};let A=re.none();return{getOrInit:(V,q)=>A.fold(()=>E(V),se=>q(V,se.item)?se.replacement:E(V))}},Py=l=>m=>{const p=[],v=(B,V)=>$(p,q=>V(q.item,B)),E=B=>{const V=l==="td"?{scope:null}:{},q=m.replace(B,l,V);return p.push({item:B,sub:q}),q};return{replaceOrInit:(B,V)=>{if(My(B)||Nm(B))return B;{const q=B;return v(q,V).fold(()=>E(q),se=>V(B,se.item)?se.sub:E(q))}}}},By=l=>Is(l,"scope").map(m=>m.substr(0,3)),ei={modification:Ny,transform:Py,merging:l=>({unmerge:v=>{const E=By(v);return E.each(A=>ls(v,"scope",A)),()=>{const A=l.cell({element:v,colspan:1,rowspan:1});return Vs(A,"width"),Vs(v,"width"),E.each(B=>ls(A,"scope",B)),A}},merge:v=>{const E=()=>{const A=La(Kt(v,By));if(A.length===0)return re.none();{const B=A[0],V=["row","col"];return et(A,se=>se!==B&&Mo(V,se))?re.none():re.from(B)}};return Vs(v[0],"width"),E().fold(()=>Uo(v[0],"scope"),A=>ls(v[0],"scope",A+"group")),ce(v[0])}})},Hf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],aw=(l,m)=>{const p=l.property().name(m);return Mo(["ol","ul"],p)},Pm=(l,m)=>{const p=l.property().name(m);return Mo(Hf,p)},Vf=(l,m)=>Mo(["br","img","hr","input"],l.property().name(m)),$y=Dd(),De=l=>Pm($y,l),Ml=l=>aw($y,l),zf=l=>Vf($y,l),i_=l=>{const m=Xo("br"),p=q=>co(q,se=>m(se)||bc(se)&&ay(se).trim().length===0),v=q=>Co(q)==="li"||je(q,Ml).isSome(),E=q=>ra(q).map(se=>De(se)?!0:zf(se)?Co(se)!=="img":!1).getOr(!1),A=q=>ly(q).bind(se=>{const ye=E(se);return jc(se).map(Ge=>ye===!0||v(Ge)||m(se)||De(Ge)&&!No(q,Ge)?[]:[he.fromTag("br")])}).getOr([]),V=(()=>{const q=zo(l,se=>{const ye=$n(se);return p(ye)?[]:ye.concat(A(se))});return q.length===0?[he.fromTag("br")]:q})();pr(l[0]),hr(l[0],V)},qp=l=>Em(l,!0),Xi=l=>{Pu(l).length===0&&Fs(l)},sh=(l,m)=>({grid:l,cursor:m}),iw=l=>$o(l,m=>$o(m.cells,p=>{const v=p.element;return wd(qp(v),v)})),lw=(l,m,p)=>{var v,E;const A=qo(l).rows;return re.from((E=(v=A[m])===null||v===void 0?void 0:v.cells[p])===null||E===void 0?void 0:E.element).filter(qp).orThunk(()=>iw(A))},na=(l,m,p)=>{const v=lw(l,m,p);return sh(l,v)},c0=l=>_e(l,(p,v)=>et(p,A=>A.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),uw=(l,m,p,v)=>{const E=m[0].row,A=c0(m),B=Xt(A,(V,q)=>({grid:$d(V.grid,E,q.row+V.delta,p,v.getOrInit),delta:V.delta+1}),{grid:l,delta:0}).grid;return na(B,E,m[0].column)},l_=(l,m,p,v)=>{const E=c0(m),A=E[E.length-1],B=A.row+A.rowspan,V=Xt(E,(q,se)=>$d(q,B,se.row,p,v.getOrInit),l);return na(V,B,m[0].column)},dw=(l,m,p,v)=>{const E=m.details,A=oh(E),B=A[0].column,V=Xt(A,(q,se)=>({grid:n_(q.grid,B,se.column+q.delta,p,v.getOrInit),delta:q.delta+1}),{grid:l,delta:0}).grid;return na(V,E[0].row,B)},u_=(l,m,p,v)=>{const E=m.details,A=E[E.length-1],B=A.column+A.colspan,V=oh(E),q=Xt(V,(se,ye)=>n_(se,B,ye.column,p,v.getOrInit),l);return na(q,E[0].row,B)},mw=(l,m,p,v)=>{const E=oh(m),A=Kt(E,V=>V.column),B=Oy(l,A,!0,p,v.replaceOrInit);return na(B,m[0].row,m[0].column)},d_=(l,m,p,v)=>{const E=th(l,m,p,v.replaceOrInit);return na(E,m[0].row,m[0].column)},m_=(l,m,p,v)=>{const E=oh(m),A=Kt(E,V=>V.column),B=Oy(l,A,!1,p,v.replaceOrInit);return na(B,m[0].row,m[0].column)},fw=(l,m,p,v)=>{const E=th(l,m,p,v.replaceOrInit);return na(E,m[0].row,m[0].column)},rh=(l,m)=>(p,v,E,A,B)=>{const V=c0(v),q=Kt(V,ye=>ye.row),se=Dy(p,q,l,m,E,A.replaceOrInit,B);return na(se,v[0].row,v[0].column)},f_=rh("thead",!0),gw=rh("tbody",!1),g_=rh("tfoot",!1),Ts=(l,m,p,v)=>{const E=oh(m.details),A=QS(l,Kt(E,V=>V.column)),B=A.length>0?A[0].cells.length-1:0;return na(A,E[0].row,Math.min(E[0].column,B))},Iy=(l,m,p,v)=>{const E=c0(m),A=ts(l,E[0].row,E[E.length-1].row),B=Math.max(qo(A).rows.length-1,0);return na(A,Math.min(m[0].row,B),m[0].column)},hw=(l,m,p,v)=>{const E=m.cells;i_(E);const A=Rm(l,m.bounds,p,v.merge(E));return sh(A,re.from(E[0]))},pw=(l,m,p,v)=>{const A=Xt(m,(B,V)=>_y(B,V,p,v.unmerge(V)),l);return sh(A,re.from(m[0]))},Ly=(l,m,p,v)=>{const A=((q,se)=>{const ye=In.fromTable(q);return Qg(ye,se,!0)})(m.clipboard,m.generators),B=gi(m.row,m.column);return $f(B,l,A,m.generators,p).fold(()=>sh(l,re.some(m.element)),q=>na(q,m.row,m.column))},Zr=(l,m,p)=>{const v=Ag(l,p.section),E=In.generate(v);return Qg(E,m,!0)},wi=(l,m,p,v)=>{const E=qo(l).rows,A=m.cells[0].column,B=E[m.cells[0].row],V=Zr(m.clipboard,m.generators,B),q=eh(A,l,V,m.generators,p);return na(q,m.cells[0].row,m.cells[0].column)},bw=(l,m,p,v)=>{const E=qo(l).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,B=E[m.cells[0].row],V=Zr(m.clipboard,m.generators,B),q=eh(A,l,V,m.generators,p);return na(q,m.cells[0].row,A)},Fy=(l,m,p,v)=>{const E=qo(l).rows,A=m.cells[0].row,B=E[A],V=Zr(m.clipboard,m.generators,B),q=es(A,l,V,m.generators,p);return na(q,m.cells[0].row,m.cells[0].column)},Hy=(l,m,p,v)=>{const E=qo(l).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,B=E[m.cells[0].row],V=Zr(m.clipboard,m.generators,B),q=es(A,l,V,m.generators,p);return na(q,A,m.cells[0].column)},h_=(l,m)=>{const p=In.fromTable(l);return Qa(p,m).bind(E=>{const A=E[E.length-1],B=E[0].column,V=A.column+A.colspan,q=kn(Kt(p.all,se=>it(se.cells,ye=>ye.column>=B&&ye.column<V)));return Kg(q)}).getOr("")},a0=(l,m)=>{const p=In.fromTable(l);return Qa(p,m).bind(Kg).getOr("")},vw=(l,m)=>{const p=In.fromTable(l);return Qa(p,m).bind(E=>{const A=E[E.length-1],B=E[0].row,V=A.row+A.rowspan,q=p.all.slice(B,V);return US(q)}).getOr("")},Kp=(l,m,p,v)=>Gp(l,m,p,v.sizing),yw=(l,m,p,v)=>a_(l,m,p,v.sizing,v.resize),Dr=(l,m)=>et(m,p=>p.column===0&&p.isLocked),p_=(l,m)=>et(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),Ji=(l,m)=>{const p=gf(l),v=oh(m);return _e(v,(E,A)=>{const V=p[A.column].map(Vu).getOr(0);return E+V},0)},ys=l=>(m,p)=>Qa(m,p).filter(v=>!(l?Dr:p_)(m,v)).map(v=>({details:v,pixelDelta:Ji(m,v)})),Qu=(l,m)=>lu(l,m).map(p=>({details:p,pixelDelta:-Ji(l,p)})),ch=l=>(m,p)=>Dm(m,p).filter(v=>!(l?Dr:p_)(m,v.cells)),Vy=ei.transform("th"),Yp=ei.transform("td"),Cw=Lc(uw,Qa,Nt,Nt,ei.modification),Bm=Lc(l_,Qa,Nt,Nt,ei.modification),Fc=Lc(dw,ys(!0),yw,Nt,ei.modification),ed=Lc(u_,ys(!1),yw,Nt,ei.modification),Sw=Lc(Ts,Qu,yw,Xi,ei.modification),b_=Lc(Iy,Qa,Nt,Xi,ei.modification),zy=Lc(mw,lu,Nt,Nt,Vy),i0=Lc(m_,lu,Nt,Nt,Yp),Uy=Lc(f_,lu,Nt,Nt,Vy),Wy=Lc(gw,lu,Nt,Nt,Yp),l0=Lc(g_,lu,Nt,Nt,Yp),Et=Lc(d_,lu,Nt,Nt,Vy),Xp=Lc(fw,lu,Nt,Nt,Yp),Zy=Lc(hw,Vp,Kp,Nt,ei.merging),ww=Lc(pw,Yb,Kp,Nt,ei.merging),v_=Lc(Ly,RR,Kp,Nt,ei.modification),Hc=Lc(wi,ch(!0),Nt,Nt,ei.modification),xw=Lc(bw,ch(!1),Nt,Nt,ei.modification),$m=Lc(Fy,Dm,Nt,Nt,ei.modification),Ew=Lc(Hy,Dm,Nt,Nt,ei.modification),jy=h_,Tw=a0,Vc=vw,Im=(l,m)=>l.dispatch("NewRow",{node:m}),Gy=(l,m)=>l.dispatch("NewCell",{node:m}),Uf=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},y_=(l,m,p,v,E)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:E})},Rr=l=>{l.dispatch("TableSelectionClear")},Mr=(l,m,p,v,E)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:E})},Ec=(l,m,p,v,E)=>{l.dispatch("ObjectResized",{target:m,width:p,height:v,origin:E})},Nr={structure:!1,style:!0},wo={structure:!0,style:!1},Cr={structure:!0,style:!0},u0=(l,m)=>ru(l)?Op.percentageSize(m):xc(l)?Op.pixelSize(m):Op.getTableSize(m),qy=(l,m,p)=>{const v=Pr=>Co(za(Pr))==="table",E=Pr=>!v(l)||Rf(Pr).rows>1,A=Pr=>!v(l)||Rf(Pr).columns>1,B=Sm(l),V=Ef(l)?Nt:jb,q=Pr=>{switch(cr(l)){case"section":return Xg.section();case"sectionCells":return Xg.sectionCells();case"cells":return Xg.cells();default:return Xg.getTableSectionType(Pr,"section")}},se=(Pr,J0)=>J0.cursor.fold(()=>{const Ud=Pu(Pr);return pe(Ud).filter(sn).map(xn=>{p.clearSelectedCells(Pr.dom);const sa=l.dom.createRng();return sa.selectNode(xn.dom),l.selection.setRng(sa),ls(xn,"data-mce-selected","1"),sa})},Ud=>{const xn=jg(Ud),sa=l.dom.createRng();return sa.setStart(xn.element.dom,xn.offset),sa.setEnd(xn.element.dom,xn.offset),l.selection.setRng(sa),p.clearSelectedCells(Pr.dom),re.some(sa)}),ye=(Pr,J0,Ud,xn)=>(sa,Q0,ev=!1)=>{Si(sa);const Bx=he.fromDom(l.getDoc()),Xm=Tl(Ud,Bx,B),lg={sizing:u0(l,sa),resize:Ef(l)?Om():Nd(),section:q(sa)};return J0(sa)?Pr(sa,Q0,Xm,lg).bind(tv=>{m.refresh(sa.dom),Ve(tv.newRows,k1=>{Im(l,k1.dom)}),Ve(tv.newCells,k1=>{Gy(l,k1.dom)});const y4=se(sa,tv);return sn(sa)&&(Si(sa),ev||Uf(l,sa.dom,xn)),y4.map(k1=>({rng:k1,effect:xn}))}):re.none()},Ge=ye(b_,E,Nt,wo),mt=ye(Sw,A,Nt,wo),lt=ye(Cw,Me,Nt,wo),tt=ye(Bm,Me,Nt,wo),At=ye(Fc,Me,V,wo),We=ye(ed,Me,V,wo),nt=ye(Zy,Me,Nt,wo),st=ye(ww,Me,Nt,wo),nn=ye(Hc,Me,Nt,wo),Wn=ye(xw,Me,Nt,wo),ko=ye($m,Me,Nt,wo),ns=ye(Ew,Me,Nt,wo),Es=ye(v_,Me,Nt,Cr),Ai=ye(Et,Me,Nt,wo),hu=ye(Xp,Me,Nt,wo),ig=ye(zy,Me,Nt,wo),sd=ye(i0,Me,Nt,wo),Go=ye(Uy,Me,Nt,wo),Aa=ye(Wy,Me,Nt,wo),Oa=ye(l0,Me,Nt,wo);return{deleteRow:Ge,deleteColumn:mt,insertRowsBefore:lt,insertRowsAfter:tt,insertColumnsBefore:At,insertColumnsAfter:We,mergeCells:nt,unmergeCells:st,pasteColsBefore:nn,pasteColsAfter:Wn,pasteRowsBefore:ko,pasteRowsAfter:ns,pasteCells:Es,makeCellsHeader:Ai,unmakeCellsHeader:hu,makeColumnsHeader:ig,unmakeColumnsHeader:sd,makeRowsHeader:Go,makeRowsBody:Aa,makeRowsFooter:Oa,getTableRowType:Vc,getTableCellType:Tw,getTableColType:jy}},Ky=(l,m,p)=>{const v=dr(l,m,1);p===1||v<=1?Uo(l,m):ls(l,m,Math.min(p,v))},Yy=(l,m)=>p=>{const v=p.column+p.colspan-1,E=p.column;return v>=l&&E<m},kw=(l,m,p)=>{if(In.hasColumns(l)){const v=it(In.justColumns(l),Yy(m,p)),E=Kt(v,B=>{const V=Nc(B.element);return Ky(V,"span",p-m),V}),A=he.fromTag("colgroup");return hr(A,E),[A]}else return[]},_w=(l,m,p)=>Kt(l.all,v=>{const E=it(v.cells,Yy(m,p)),A=Kt(E,V=>{const q=Nc(V.element);return Ky(q,"colspan",p-m),q}),B=he.fromTag("tr");return hr(B,A),B}),Jp=(l,m)=>{const p=In.fromTable(l);return lu(p,m).map(E=>{const A=E[E.length-1],B=E[0].column,V=A.column+A.colspan,q=kw(p,B,V),se=_w(p,B,V);return[...q,...se]})},d0=(l,m,p)=>{const v=In.fromTable(l);return Qa(v,m).bind(A=>{const B=Qg(v,p,!1),q=qo(B).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),se=zo(q,Ge=>{const mt=it(Ge.cells,lt=>!lt.isLocked);return mt.length>0?[{...Ge,cells:mt}]:[]}),ye=ky(se);return wd(ye.length>0,ye)}).map(A=>jS(A))},Qp=Ff.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Aw=(l,m,p)=>{const v=p.substring(0,p.length-l.length),E=parseFloat(v);return v===E.toString()?m(E):Qp.invalid(p)},Wf={...Qp,from:l=>aa(l,"%")?Aw("%",Qp.percent,l):aa(l,"px")?Aw("px",Qp.pixels,l):Qp.invalid(l)},ti=(l,m)=>Kt(l,p=>Wf.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),C_=(l,m,p)=>{const v=p/m;return Kt(l,E=>Wf.from(E).fold(()=>E,B=>B*v+"px",B=>B/100*p+"px"))},S_=(l,m)=>{const p=l.fold(()=>ce(""),v=>{const E=v/m;return ce(E+"px")},()=>{const v=100/m;return ce(v+"%")});return Oo(m,p)},Qi=(l,m,p)=>l.fold(()=>m,v=>C_(m,p,v),v=>ti(m,p)),ah=(l,m,p)=>{const v=Wf.from(p),E=co(l,A=>A==="0px")?S_(v,l.length):Qi(v,l,m);return Xy(E)},ih=(l,m)=>l.length===0?m:Xt(l,(p,v)=>Wf.from(v).fold(ce(0),ut,ut)+p,0),td=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},ma=(l,m)=>Wf.from(l).fold(ce(l),p=>p+m+"px",p=>p+m+"%"),Xy=l=>{if(l.length===0)return l;const m=Xt(l,(v,E)=>{const A=Wf.from(E).fold(()=>({value:E,remainder:0}),B=>td(B,"px"),B=>({value:B+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([ma(p[p.length-1],Math.round(m.remainder))])},Lm=Wf.from,Ow=(l,m,p)=>{Ve(m,v=>{const E=l.slice(v.column,v.colspan+v.column),A=ih(E,bl());Cn(v.element,"width",A+p)})},m0=(l,m,p)=>{Ve(m,(v,E)=>{const A=ih([l[E]],bl());Cn(v.element,"width",A+p)})},Jy=(l,m,p)=>{Ve(p,v=>{Vs(v.element,"height")}),Ve(m,(v,E)=>{Cn(v.element,"height",l[E])})},e1=l=>Lm(l).fold(ce("px"),ce("px"),ce("%")),f0=(l,m,p)=>{const v=In.fromTable(l),E=v.all,A=In.justCells(v),B=In.justColumns(v);m.each(V=>{const q=e1(V),se=mo(l),ye=oc(v,l),Ge=ah(ye,se,V);In.hasColumns(v)?m0(Ge,B,q):Ow(Ge,A,q),Cn(l,"width",V)}),p.each(V=>{const q=ze(l),se=mr(v,l),ye=ah(se,q,V);Jy(ye,E,A),Cn(l,"height",V)})},Dw=El,Rw=oy,Mw=vm,t1=l=>{Uo(l,"width"),Uo(l,"height")},Zf=l=>{const m=ea(l);f0(l,re.some(m),re.none()),t1(l)},n1=l=>{const m=kb(l);f0(l,re.some(m),re.none()),t1(l)},w_=l=>{const m=zr(l);f0(l,re.none(),re.some(m)),t1(l)},Qy=l=>{Vs(l,"width");const m=Bu(l),p=m.length>0?m:Pu(l);Ve(p,v=>{Vs(v,"width"),t1(v)}),t1(l)},x_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},g0=()=>he.fromTag("th"),E_=()=>he.fromTag("td"),Nw=()=>he.fromTag("col"),T_=(l,m,p,v)=>{const E=he.fromTag("tr");for(let A=0;A<l;A++){const B=v<m||A<p?g0():E_();A<p&&ls(B,"scope","row"),v<m&&ls(B,"scope","col"),Wo(B,he.fromTag("br")),Wo(E,B)}return E},Pw=l=>{const m=he.fromTag("colgroup");return Oo(l,()=>Wo(m,Nw())),m},o1=(l,m,p,v)=>Oo(l,E=>T_(m,p,v,E)),Bw=(l,m,p,v,E,A=x_)=>{const B=he.fromTag("table"),V=E!=="cells";Bo(B,A.styles),vc(B,A.attributes),A.colGroups&&Wo(B,Pw(m));const q=Math.min(l,p);if(V&&p>0){const lt=he.fromTag("thead");Wo(B,lt);const At=o1(p,m,E==="sectionCells"?q:0,v);hr(lt,At)}const se=he.fromTag("tbody");Wo(B,se);const ye=V?l-q:l,mt=o1(ye,m,V?0:p,v);return hr(se,mt),B},_a=l=>l.dom.innerHTML,e2=l=>{const m=he.fromTag("div"),p=he.fromDom(l.dom.cloneNode(!0));return Wo(m,p),_a(m)},$w=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},t2=(l,m)=>{Ia(m,"td,th").each(Zn($w,l))},s1=(l,m)=>{Ve(io(m,"tr"),p=>{Im(l,p.dom),Ve(io(p,"th,td"),v=>{Gy(l,v.dom)})})},k_=l=>Vo(l)&&l.indexOf("%")!==-1,__=(l,m,p,v,E)=>{const A=Lb(l),B={styles:A,attributes:Ib(l),colGroups:Zk(l)};return l.undoManager.ignore(()=>{const V=Bw(p,m,E,v,cr(l),B);ls(V,"data-mce-id","__mce");const q=e2(V);l.insertContent(q),l.addVisual()}),Ia(za(l),'table[data-mce-id="__mce"]').map(V=>(xc(l)?n1(V):wm(l)?Qy(V):(ru(l)||k_(A.width))&&Zf(V),Si(V),Uo(V,"data-mce-id"),s1(l,V),t2(l,V),V.dom)).getOrNull()},A_=(l,m,p,v={})=>{const E=A=>eo(A)&&A>0;if(E(m)&&E(p)){const A=v.headerRows||0,B=v.headerColumns||0;return __(l,p,m,B,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var h0=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Iw="x-tinymce/dom-table-",n2=Iw+"rows",o2=Iw+"columns",r1=l=>{const m=h0.FakeClipboardItem(l);h0.write([m])},s2=l=>{var m;const p=(m=h0.read())!==null&&m!==void 0?m:[];return $o(p,v=>re.from(v.getType(l)))},Lw=l=>{s2(l).isSome()&&h0.clear()},Fw=l=>{l.fold(O_,m=>r1({[n2]:m}))},Hw=()=>s2(n2),O_=()=>Lw(n2),Vw=l=>{l.fold(zw,m=>r1({[o2]:m}))},r2=()=>s2(o2),zw=()=>Lw(o2),Fm=l=>fr(Pp(l),Ci(l)).filter(An),Uw=l=>Wb(Pp(l),Ci(l)).filter(An),D_=(l,m)=>{const p=Ci(l),v=()=>Fm(l).each(We=>{Sa(We,p).filter(le(p)).each(nt=>{const st=he.fromText("");if(ca(nt,st),Fs(nt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const nn=l.dom.createRng();nn.setStart(st.dom,0),nn.setEnd(st.dom,0),l.selection.setRng(nn),l.nodeChanged()}})}),E=We=>Fm(l).each(nt=>{wm(l)||xc(l)||ru(l)||Sa(nt,p).each(nn=>{We==="relative"&&!Dw(nn)?Zf(nn):We==="fixed"&&!Rw(nn)?n1(nn):We==="responsive"&&!Mw(nn)&&Qy(nn),Si(nn),Uf(l,nn.dom,wo)})}),A=We=>Sa(We,p),B=We=>Uw(l).bind(nt=>A(nt).map(st=>We(st,nt))),V=(We,nt)=>{B(st=>{l.formatter.toggle("tableclass",{value:nt},st.dom),Uf(l,st.dom,Nr)})},q=(We,nt)=>{B(st=>{const nn=To(l),ko=co(nn,ns=>l.formatter.match("tablecellclass",{value:nt},ns.dom))?l.formatter.remove:l.formatter.apply;Ve(nn,ns=>ko("tablecellclass",{value:nt},ns.dom)),Uf(l,st.dom,Nr)})},se=()=>{Fm(l).each(We=>{Sa(We,p).each(nt=>{qc(nt,"caption").fold(()=>{const st=he.fromTag("caption");Wo(st,he.fromText("Caption")),rm(nt,st,0),l.selection.setCursorLocation(st.dom,0)},st=>{Xo("caption")(We)&&Du("td",nt).each(nn=>l.selection.setCursorLocation(nn.dom,0)),Fs(st)}),Uf(l,nt.dom,wo)})})},ye=We=>{l.focus()},Ge=(We,nt=!1)=>B((st,nn)=>{const Wn=Md(To(l),st,nn);We(st,Wn,nt).each(ye)}),mt=()=>B((We,nt)=>{const st=Md(To(l),We,nt),nn=Tl(Nt,he.fromDom(l.getDoc()),re.none());return d0(We,st,nn)}),lt=()=>B((We,nt)=>{const st=Md(To(l),We,nt);return Jp(We,st)}),tt=(We,nt)=>nt().each(st=>{const nn=Kt(st,Wn=>Nc(Wn));B((Wn,ko)=>{const ns=kl(he.fromDom(l.getDoc())),Es=Sy(To(l),ko,nn,ns);We(Wn,Es).each(ye)})}),At=We=>(nt,st)=>Dc(st,"type").each(nn=>{Ge(We(nn),st.no_events)});Bn({mceTableSplitCells:()=>Ge(m.unmergeCells),mceTableMergeCells:()=>Ge(m.mergeCells),mceTableInsertRowBefore:()=>Ge(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ge(m.insertRowsAfter),mceTableInsertColBefore:()=>Ge(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ge(m.insertColumnsAfter),mceTableDeleteCol:()=>Ge(m.deleteColumn),mceTableDeleteRow:()=>Ge(m.deleteRow),mceTableCutCol:()=>lt().each(We=>{Vw(We),Ge(m.deleteColumn)}),mceTableCutRow:()=>mt().each(We=>{Fw(We),Ge(m.deleteRow)}),mceTableCopyCol:()=>lt().each(We=>Vw(We)),mceTableCopyRow:()=>mt().each(We=>Fw(We)),mceTablePasteColBefore:()=>tt(m.pasteColsBefore,r2),mceTablePasteColAfter:()=>tt(m.pasteColsAfter,r2),mceTablePasteRowBefore:()=>tt(m.pasteRowsBefore,Hw),mceTablePasteRowAfter:()=>tt(m.pasteRowsAfter,Hw),mceTableDelete:v,mceTableCellToggleClass:q,mceTableToggleClass:V,mceTableToggleCaption:se,mceTableSizingMode:(We,nt)=>E(nt),mceTableCellType:At(We=>We==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:At(We=>We==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:At(We=>{switch(We){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(We,nt)=>l.addCommand(nt,We)),l.addCommand("mceInsertTable",(We,nt)=>{A_(l,nt.rows,nt.columns,nt.options)}),l.addCommand("mceTableApplyCellStyle",(We,nt)=>{const st=ko=>"tablecell"+ko.toLowerCase().replace("-","");if(!bn(nt))return;const nn=it(To(l),An);if(nn.length===0)return;const Wn=Bs(nt,(ko,ns)=>l.formatter.has(st(ns))&&Vo(ko));Pa(Wn)||(Bn(Wn,(ko,ns)=>{const Es=st(ns);Ve(nn,Ai=>{ko===""?l.formatter.remove(Es,{value:null},Ai.dom,!0):l.formatter.apply(Es,{value:ko},Ai.dom)})}),A(nn[0]).each(ko=>Uf(l,ko.dom,Nr)))})},R_=(l,m)=>{const p=Ci(l),v=E=>Wb(Pp(l)).bind(A=>Sa(A,p).map(B=>{const V=Md(To(l),B,A);return E(B,V)})).getOr("");Bn({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(E,A)=>l.addQueryValueHandler(A,E))},p0=Ff.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nl=(l,m,p,v)=>l.fold(m,p,v),b0=l=>l.fold(ut,ut,ut),v0=p0.before,c2=p0.on,Ww=p0.after,Sr={before:v0,on:c2,after:Ww,cata:Nl,getStart:b0},lh={create:(l,m)=>({selection:l,kill:m})},Hm=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},y0=(l,m)=>{const p=l.document.createRange();return jw(p,m),p},jw=(l,m)=>l.selectNodeContents(m.dom),M_=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,v)=>{l.setStart(p.dom,v)},p=>{l.setStartAfter(p.dom)})},N_=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,v)=>{l.setEnd(p.dom,v)},p=>{l.setEndAfter(p.dom)})},Gw=(l,m,p)=>{const v=l.document.createRange();return M_(v,m),N_(v,p),v},c1=(l,m,p,v,E)=>{const A=l.document.createRange();return A.setStart(m.dom,p),A.setEnd(v.dom,E),A},a2=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),P_=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?re.some(p).map(a2):re.none()},uh=Ff.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),qw=(l,m,p)=>m(he.fromDom(p.startContainer),p.startOffset,he.fromDom(p.endContainer),p.endOffset),Kw=(l,m)=>m.match({domRange:p=>({ltr:ce(p),rtl:re.none}),relative:(p,v)=>({ltr:im(()=>Gw(l,p,v)),rtl:im(()=>re.some(Gw(l,v,p)))}),exact:(p,v,E,A)=>({ltr:im(()=>c1(l,p,v,E,A)),rtl:im(()=>re.some(c1(l,E,A,p,v)))})}),Yw=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>uh.rtl(he.fromDom(E.endContainer),E.endOffset,he.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>qw(l,uh.ltr,p)):qw(l,uh.ltr,p)},i2=(l,m)=>{const p=Kw(l,m);return Yw(l,p)},C0=(l,m)=>i2(l,m).match({ltr:(v,E,A,B)=>{const V=l.document.createRange();return V.setStart(v.dom,E),V.setEnd(A.dom,B),V},rtl:(v,E,A,B)=>{const V=l.document.createRange();return V.setStart(A.dom,B),V.setEnd(v.dom,E),V}});uh.ltr,uh.rtl;const Vm={create:(l,m,p,v)=>({start:l,soffset:m,finish:p,foffset:v})},Jw={create:(l,m,p,v)=>({start:Sr.on(l,m),finish:Sr.on(p,v)})},Qw=(l,m)=>{const p=C0(l,m);return Vm.create(he.fromDom(p.startContainer),p.startOffset,he.fromDom(p.endContainer),p.endOffset)},S0=Jw.create,$_=(l,m,p,v,E,A,B)=>No(p,E)&&v===A?re.none():sr(p,"td,th",m).bind(V=>sr(E,"td,th",m).bind(q=>jf(l,m,V,q,B))),jf=(l,m,p,v,E)=>No(p,v)?re.none():Ta(p,v,m).bind(A=>{const B=A.boxes.getOr([]);return B.length>1?(E(l,B,A.start,A.finish),re.some(lh.create(re.some(S0(p,0,p,Gi(p))),!0))):re.none()}),w0=(l,m,p,v,E)=>{const A=B=>(E.clearBeforeUpdate(p),E.selectRange(p,B.boxes,B.start,B.finish),B.boxes);return Of(v,l,m,E.firstSelectedSelector,E.lastSelectedSelector).map(A)},a1=(l,m)=>({item:l,mode:m}),ex=(l,m,p,v=dh)=>l.property().parent(m).map(E=>a1(E,v)),dh=(l,m,p,v=mh)=>p.sibling(l,m).map(E=>a1(E,v)),mh=(l,m,p,v=mh)=>{const E=l.property().children(m);return p.first(E).map(B=>a1(B,v))},I_=[{current:ex,next:dh,fallback:re.none()},{current:dh,next:mh,fallback:re.some(ex)},{current:mh,next:mh,fallback:re.some(dh)}],tx=(l,m,p,v,E=I_)=>$(E,B=>B.current===p).bind(B=>B.current(l,m,v,B.next).orThunk(()=>B.fallback.bind(V=>tx(l,m,V,v)))),fh={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?re.some(p[p.length-1]):re.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?re.some(p[0]):re.none()})},l2=(l,m,p,v,E,A)=>tx(l,m,v,E).bind(V=>A(V.item)?re.none():p(V.item)?re.some(V.item):l2(l,V.item,p,V.mode,E,A)),u2=(l,m,p,v)=>l2(l,m,p,dh,fh.left(),v),F_=(l,m,p,v)=>l2(l,m,p,dh,fh.right(),v),d2=l=>m=>l.property().children(m).length===0,nx=(l,m,p)=>gh(l,m,d2(l),p),ox=(l,m,p)=>sx(l,m,d2(l),p),gh=u2,sx=F_,x0=Dd(),zm=(l,m)=>nx(x0,l,m),Ld=(l,m)=>ox(x0,l,m),i1=(l,m,p)=>gh(x0,l,m,p),l1=(l,m,p)=>sx(x0,l,m,p),H_=(l,m,p)=>je(l,m,p).isSome(),ni=Ff.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),du=(l,m,p)=>{const v=l.getRect(m),E=l.getRect(p);return E.right>v.left&&E.left<v.right},m2=l=>sr(l,"tr"),Um={...ni,verify:(l,m,p,v,E,A,B)=>sr(v,"td,th",B).bind(V=>sr(m,"td,th",B).map(q=>No(V,q)?No(v,V)&&Gi(V)===E?A(q):ni.none("in same cell"):Af(m2,[V,q]).fold(()=>du(l,q,V)?ni.success():A(q),se=>A(q)))).getOr(ni.none("default")),cata:(l,m,p,v,E)=>l.fold(m,p,v,E)},hh=(l,m,p,v)=>({parent:l,children:m,element:p,index:v}),Tc=l=>jc(l).bind(m=>{const p=$n(m);return f2(p,l).map(v=>hh(m,p,l,v))}),f2=(l,m)=>tr(l,Zn(No,m)),E0=Xo("br"),qf=(l,m,p)=>m(l,p).bind(v=>bc(v)&&ay(v).trim().length===0?qf(v,m,p):re.some(v)),u1=(l,m,p)=>p.traverse(m).orThunk(()=>qf(m,p.gather,l)).map(p.relative),z_=(l,m)=>ur(l,m).filter(E0).orThunk(()=>ur(l,m-1).filter(E0)),g2=(l,m,p,v)=>z_(m,p).bind(E=>v.traverse(E).fold(()=>qf(E,v.gather,l).map(v.relative),A=>Tc(A).map(B=>Sr.on(B.parent,B.index)))),d1=(l,m,p,v)=>(E0(m)?u1(l,m,v):g2(l,m,p,v)).map(A=>({start:A,finish:A})),kc=l=>Um.cata(l,m=>re.none(),()=>re.none(),m=>re.some(Zb(m,0)),m=>re.some(Zb(m,Gi(m)))),h2=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),el=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),p2=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),ph=l=>l.top,bh=l=>l.bottom,b2=(l,m,p)=>p>=0&&p<Gi(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):re.none(),Fd=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),v2=(l,m)=>re.some(l.getRect(m)),y2=(l,m,p)=>$s(m)?v2(l,m).map(Fd):bc(m)?b2(l,m,p).map(Fd):re.none(),C2=(l,m)=>$s(m)?v2(l,m).map(Fd):bc(m)?l.getRangedRect(m,0,m,Gi(m)).map(Fd):re.none(),nd=5,T0=100,zc=Ff.generate([{none:[]},{retry:["caret"]}]),rx=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,S2=(l,m,p)=>Do(m,De).fold(Tn,v=>C2(l,v).exists(E=>rx(p,E))),w2=(l,m,p,v,E)=>{const A=h2(E,nd);return Math.abs(p.bottom-v.bottom)<1||p.top>E.bottom?zc.retry(A):p.top===E.bottom?zc.retry(h2(E,1)):S2(l,m,E)?zc.retry(p2(A,nd,0)):zc.none()},x2={point:ph,adjuster:(l,m,p,v,E)=>{const A=el(E,nd);return Math.abs(p.top-v.top)<1||p.bottom<E.top?zc.retry(A):p.bottom===E.top?zc.retry(el(E,1)):S2(l,m,E)?zc.retry(p2(A,nd,0)):zc.none()},move:el,gather:zm},ax={point:bh,adjuster:w2,move:h2,gather:Ld},ix=(l,m,p)=>l.elementFromPoint(m,p).filter(v=>Co(v)==="table").isSome(),xi=(l,m,p,v,E)=>Wm(l,m,p,m.move(v,nd),E),Wm=(l,m,p,v,E)=>E===0?re.some(v):ix(l,v.left,m.point(v))?xi(l,m,p,v,E-1):l.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(re.none,B=>C2(l,B).bind(V=>m.adjuster(l,B,V,p,v).fold(re.none,q=>Wm(l,m,p,q,E-1))).orThunk(()=>re.some(v)),re.none)),lx=(l,m,p)=>l.point(m)>p.getInnerHeight()?re.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?re.some(-l.point(m)):re.none(),Kf=(l,m,p)=>{const v=l.move(p,nd),E=Wm(m,l,p,v,T0).getOr(v);return lx(l,E,m).fold(()=>m.situsFromPoint(E.left,l.point(E)),A=>(m.scrollBy(0,A),m.situsFromPoint(E.left,l.point(E)-A)))},fa={tryUp:Zn(Kf,x2),tryDown:Zn(Kf,ax),getJumpSize:ce(nd)},oi=20,ga=(l,m,p)=>l.getSelection().bind(v=>d1(m,v.finish,v.foffset,p).fold(()=>re.some(Zb(v.finish,v.foffset)),E=>{const A=l.fromSitus(E),B=Um.verify(l,v.finish,v.foffset,A.finish,A.foffset,p.failure,m);return kc(B)})),Ei=(l,m,p,v,E,A)=>A===0?re.none():Yf(l,m,p,v,E).bind(B=>{const V=l.fromSitus(B),q=Um.verify(l,p,v,V.finish,V.foffset,E.failure,m);return Um.cata(q,()=>re.none(),()=>re.some(B),se=>No(p,se)&&v===0?k0(l,p,v,el,E):Ei(l,m,se,0,E,A-1),se=>No(p,se)&&v===Gi(se)?k0(l,p,v,h2,E):Ei(l,m,se,Gi(se),E,A-1))}),k0=(l,m,p,v,E)=>y2(l,m,p).bind(A=>Ti(l,E,v(A,fa.getJumpSize()))),Ti=(l,m,p)=>{const v=ws().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,p):re.none()},Yf=(l,m,p,v,E)=>y2(l,p,v).bind(A=>Ti(l,E,A)),ux=(l,m,p)=>ga(l,m,p).bind(v=>Ei(l,m,v.element,v.offset,p,oi).map(l.fromSitus)),PR=(l,m)=>H_(l,p=>jc(p).exists(v=>No(v,m))),U_=(l,m,p,v,E)=>sr(v,"td,th",m).bind(A=>sr(A,"table",m).bind(B=>PR(E,B)?ux(l,m,p).bind(V=>sr(V.finish,"td,th",m).map(q=>({start:A,finish:q,range:V}))):re.none())),E2=(l,m,p,v,E,A)=>A(v,m).orThunk(()=>U_(l,m,p,v,E).map(B=>{const V=B.range;return lh.create(re.some(S0(V.start,V.soffset,V.finish,V.foffset)),!0)})),W_=(l,m)=>sr(l,"tr",m).bind(p=>sr(p,"table",m).bind(v=>{const E=io(v,"tr");return No(p,E[0])?i1(v,A=>ly(A).isSome(),m).map(A=>{const B=Gi(A);return lh.create(re.some(S0(A,B,A,B)),!0)}):re.none()})),_0=(l,m)=>sr(l,"tr",m).bind(p=>sr(p,"table",m).bind(v=>{const E=io(v,"tr");return No(p,E[E.length-1])?l1(v,A=>RS(A).isSome(),m).map(A=>lh.create(re.some(S0(A,0,A,0)),!0)):re.none()})),_c=(l,m,p,v,E,A,B)=>U_(l,p,v,E,A).bind(V=>jf(m,p,V.start,V.finish,B)),m1=l=>{let m=l;return{get:()=>m,set:E=>{m=E}}},f1=l=>{const m=m1(re.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(re.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:V=>{p(),m.set(re.some(V))}}},Zm=()=>{const l=f1(Nt);return{...l,on:p=>l.get().each(p)}},T2=(l,m)=>sr(l,"td,th",m),A0=l=>kr(l).exists(Em),k2=(l,m,p,v)=>{const E=Zm(),A=E.clear,B=ye=>{E.on(Ge=>{v.clearBeforeUpdate(m),T2(ye.target,p).each(mt=>{Ta(Ge,mt,p).each(lt=>{const tt=lt.boxes.getOr([]);if(tt.length===1){const At=tt[0],We=Tf(At)==="false",nt=Po(NS(ye.target),At,No);We&&nt&&v.selectRange(m,tt,At,At)}else tt.length>1&&(v.selectRange(m,tt,lt.start,lt.finish),l.selectContents(mt))})})})};return{clearstate:A,mousedown:ye=>{v.clear(m),T2(ye.target,p).filter(A0).each(E.set)},mouseover:ye=>{B(ye)},mouseup:ye=>{B(ye),A()}}},O0={traverse:ra,gather:Ld,relative:Sr.before,retry:fa.tryDown,failure:Um.failedDown},_2={traverse:di,gather:zm,relative:Sr.before,retry:fa.tryUp,failure:Um.failedUp},vh=l=>m=>m===l,Hd=vh(38),g1=vh(40),Xf=l=>l>=37&&l<=40,Vd={isBackward:vh(37),isForward:vh(39)},dx={isBackward:vh(39),isForward:vh(37)},si=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Pt(p,v)},A2=(l,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(l,m)},jm=Ff.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Jf=l=>jm.exact(l.start,l.soffset,l.finish,l.foffset),D0=l=>l.match({domRange:m=>he.fromDom(m.startContainer),relative:(m,p)=>Sr.getStart(m),exact:(m,p,v,E)=>m}),R0=jm.domRange,Z_=jm.relative,j_=jm.exact,mx=l=>{const m=D0(l);return Jo(m)},fx=Vm.create,Qf={domRange:R0,relative:Z_,exact:j_,exactFromRange:Jf,getWin:mx,range:fx},yh=(l,m,p)=>{var v;return re.from((v=l.caretPositionFromPoint)===null||v===void 0?void 0:v.call(l,m,p)).bind(E=>{if(E.offsetNode===null)return re.none();const A=l.createRange();return A.setStart(E.offsetNode,E.offset),A.collapse(),re.some(A)})},h1=(l,m,p)=>{var v;return re.from((v=l.caretRangeFromPoint)===null||v===void 0?void 0:v.call(l,m,p))},G_=(l,m,p)=>l.caretPositionFromPoint?yh(l,m,p):l.caretRangeFromPoint?h1(l,m,p):re.none(),gx=(l,m,p)=>{const v=l.document;return G_(v,m,p).map(E=>Vm.create(he.fromDom(E.startContainer),E.startOffset,he.fromDom(E.endContainer),E.endOffset))},p1=(l,m)=>{const p=Co(l);return p==="input"?Sr.after(l):Mo(["br","img"],p)?m===0?Sr.before(l):Sr.after(l):Sr.on(l,m)},M0=(l,m)=>{const p=l.fold(Sr.before,p1,Sr.after),v=m.fold(Sr.before,p1,Sr.after);return Qf.relative(p,v)},O2=(l,m,p,v)=>{const E=p1(l,m),A=p1(p,v);return Qf.relative(E,A)},hx=(l,m,p,v)=>{const A=Xr(l).dom.createRange();return A.setStart(l.dom,m),A.setEnd(p.dom,v),A},N0=(l,m,p,v)=>{const E=hx(l,m,p,v),A=No(l,p)&&m===v;return E.collapsed&&!A},Ch=l=>re.from(l.getSelection()),px=(l,m)=>{Ch(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},eg=(l,m,p,v,E)=>{const A=c1(l,m,p,v,E);px(l,A)},Yn=(l,m,p,v,E,A)=>{m.collapse(p.dom,v),m.extend(E.dom,A)},zd=(l,m)=>i2(l,m).match({ltr:(p,v,E,A)=>{eg(l,p,v,E,A)},rtl:(p,v,E,A)=>{Ch(l).each(B=>{if(B.setBaseAndExtent)B.setBaseAndExtent(p.dom,v,E.dom,A);else if(B.extend)try{Yn(l,B,p,v,E,A)}catch{eg(l,E,A,p,v)}else eg(l,E,A,p,v)})}}),Gm=(l,m,p,v,E)=>{const A=O2(m,p,v,E);zd(l,A)},P0=(l,m,p)=>{const v=M0(m,p);zd(l,v)},D2=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return re.some(Vm.create(he.fromDom(m.startContainer),m.startOffset,he.fromDom(p.endContainer),p.endOffset))}else return re.none()},b1=l=>{if(l.anchorNode===null||l.focusNode===null)return D2(l);{const m=he.fromDom(l.anchorNode),p=he.fromDom(l.focusNode);return N0(m,l.anchorOffset,p,l.focusOffset)?re.some(Vm.create(m,l.anchorOffset,p,l.focusOffset)):D2(l)}},tg=(l,m,p=!0)=>{const E=(p?y0:Hm)(l,m);px(l,E)},v1=l=>Ch(l).filter(m=>m.rangeCount>0).bind(b1),B0=l=>v1(l).map(m=>Qf.exact(m.start,m.soffset,m.finish,m.foffset)),bx=(l,m)=>{const p=C0(l,m);return P_(p)},q_=(l,m,p)=>gx(l,m,p),ng=l=>{Ch(l).each(m=>m.removeAllRanges())},$0=l=>({elementFromPoint:(We,nt)=>he.fromPoint(he.fromDom(l.document),We,nt),getRect:We=>We.dom.getBoundingClientRect(),getRangedRect:(We,nt,st,nn)=>{const Wn=Qf.exact(We,nt,st,nn);return bx(l,Wn)},getSelection:()=>B0(l).map(We=>Qw(l,We)),fromSitus:We=>{const nt=Qf.relative(We.start,We.finish);return Qw(l,nt)},situsFromPoint:(We,nt)=>q_(l,We,nt).map(st=>Jw.create(st.start,st.soffset,st.finish,st.foffset)),clearSelection:()=>{ng(l)},collapseSelection:(We=!1)=>{B0(l).each(nt=>nt.fold(st=>st.collapse(We),(st,nn)=>{const Wn=We?st:nn;P0(l,Wn,Wn)},(st,nn,Wn,ko)=>{const ns=We?st:Wn,Es=We?nn:ko;Gm(l,ns,Es,ns,Es)}))},setSelection:We=>{Gm(l,We.start,We.soffset,We.finish,We.foffset)},setRelativeSelection:(We,nt)=>{P0(l,We,nt)},selectNode:We=>{tg(l,We,!1)},selectContents:We=>{tg(l,We)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>si(he.fromDom(l.document)).top,scrollBy:(We,nt)=>{A2(We,nt,he.fromDom(l.document))}}),qm=(l,m)=>({rows:l,cols:m}),R2=(l,m,p,v)=>{const E=$0(l),A=k2(E,m,p,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},M2=l=>Do(l,zt).exists(Em),og=(l,m)=>M2(l)||M2(m),N2=(l,m,p,v)=>{const E=$0(l),A=()=>(v.clear(m),re.none());return{keydown:(q,se,ye,Ge,mt,lt)=>{const tt=q.raw,At=tt.which,We=tt.shiftKey===!0;return zg(m,v.selectedSelector).fold(()=>(Xf(At)&&!We&&v.clearBeforeUpdate(m),Xf(At)&&We&&!og(se,Ge)?re.none:g1(At)&&We?Zn(_c,E,m,p,O0,Ge,se,v.selectRange):Hd(At)&&We?Zn(_c,E,m,p,_2,Ge,se,v.selectRange):g1(At)?Zn(E2,E,p,O0,Ge,se,_0):Hd(At)?Zn(E2,E,p,_2,Ge,se,W_):re.none),st=>{const nn=Wn=>()=>$o(Wn,ns=>w0(ns.rows,ns.cols,m,st,v)).fold(()=>_m(m,v.firstSelectedSelector,v.lastSelectedSelector).map(ns=>{const Es=g1(At)||lt.isForward(At)?Sr.after:Sr.before;return E.setRelativeSelection(Sr.on(ns.first,0),Es(ns.table)),v.clear(m),lh.create(re.none(),!0)}),ns=>re.some(lh.create(re.none(),!0)));return Xf(At)&&We&&!og(se,Ge)?re.none:g1(At)&&We?nn([qm(1,0)]):Hd(At)&&We?nn([qm(-1,0)]):lt.isBackward(At)&&We?nn([qm(0,-1),qm(-1,0)]):lt.isForward(At)&&We?nn([qm(0,1),qm(1,0)]):Xf(At)&&!We?A:re.none})()},keyup:(q,se,ye,Ge,mt)=>zg(m,v.selectedSelector).fold(()=>{const lt=q.raw,tt=lt.which;return lt.shiftKey===!0&&Xf(tt)&&og(se,Ge)?$_(m,p,se,ye,Ge,mt,v.selectRange):re.none()},re.none)}},vx=(l,m,p,v)=>{const E=$0(l);return(A,B)=>{v.clearBeforeUpdate(m),Ta(A,B,p).each(V=>{const q=V.boxes.getOr([]);v.selectRange(m,q,V.start,V.finish),E.selectContents(B),E.collapseSelection()})}},yx=(l,m)=>{const p=or(l,m);return p===void 0||p===""?[]:p.split(" ")},od=(l,m,p)=>{const E=yx(l,m).concat([p]);return ls(l,m,E.join(" ")),!0},Cx=(l,m,p)=>{const v=it(yx(l,m),E=>E!==p);return v.length>0?ls(l,m,v.join(" ")):Uo(l,m),!1},I0=l=>l.dom.classList!==void 0,tl=l=>yx(l,"class"),cc=(l,m)=>od(l,"class",m),K_=(l,m)=>Cx(l,"class",m),mu=(l,m)=>{I0(l)?l.dom.classList.add(m):cc(l,m)},Y_=l=>{(I0(l)?l.dom.classList:tl(l)).length===0&&Uo(l,"class")},Sx=(l,m)=>{I0(l)?l.dom.classList.remove(m):K_(l,m),Y_(l)},y1=(l,m)=>I0(l)&&l.dom.classList.contains(m),Sh=(l,m)=>{Ve(m,p=>{Sx(l,p)})},wx=l=>m=>{mu(m,l)},xx=l=>m=>{Sh(m,l)},Ex={byClass:l=>{const m=wx(l.selected),p=xx([l.selected,l.lastSelected,l.firstSelected]),v=A=>{const B=io(A,l.selectedSelector);Ve(B,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,B,V,q)=>{v(A),Ve(B,m),mu(V,l.firstSelected),mu(q,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const v=q=>{Uo(q,l.selected),Uo(q,l.firstSelected),Uo(q,l.lastSelected)},E=q=>{ls(q,l.selected,"1")},A=q=>{B(q),p()},B=q=>{const se=io(q,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ve(se,v)};return{clearBeforeUpdate:B,clear:A,selectRange:(q,se,ye,Ge)=>{A(q),Ve(se,E),ls(ye,l.firstSelected,"1"),ls(Ge,l.lastSelected,"1"),m(se,ye,Ge)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},bt=(l,m,p,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return p(l.elements)}},ac=()=>({tag:"none"}),L0=l=>({tag:"multiple",elements:l}),ic=l=>({tag:"single",element:l}),nl=(l,m,p)=>({get:()=>Ub(l(),p).fold(()=>m().fold(ac,ic),L0)}),P2=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),v=ky(p);return zo(v,E=>{const A=E.cells.slice(0,m[m.length-1].column+1);return Kt(A,B=>B.element)})},C1=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),v=ky(p);return zo(v,E=>{const A=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return Kt(A,B=>B.element)})},wh=(l,m,p)=>{const v=In.fromTable(l);return Qa(v,m).map(A=>{const B=Qg(v,p,!1),{rows:V}=qo(B),q=P2(V,A),se=C1(V,A);return{upOrLeftCells:q,downOrRightCells:se}})},Tx=(l,m,p,v,E,A,B)=>({target:l,x:m,y:p,stop:v,prevent:E,kill:A,raw:B}),Km=l=>{const m=he.fromDom(to(l).getOr(l.target)),p=()=>l.stopPropagation(),v=()=>l.preventDefault(),E=pc(v,p);return Tx(m,l.clientX,l.clientY,p,v,E,l)},xh=(l,m)=>p=>{l(p)&&m(Km(p))},X_=(l,m,p,v,E)=>{const A=xh(p,v);return l.dom.addEventListener(m,A,E),{unbind:Zn(Q_,l,m,A,E)}},J_=(l,m,p,v)=>X_(l,m,p,v,!1),Q_=(l,m,p,v)=>{l.dom.removeEventListener(m,p,v)},kx=Me,sg=(l,m,p)=>J_(l,m,kx,p),Eh=Km,rg=l=>!y1(he.fromDom(l.target),"ephox-snooker-resizer-bar"),F0=(l,m)=>{const p=nl(()=>he.fromDom(l.getBody()),()=>Wb(Pp(l),Ci(l)),Df.selectedSelector),v=(q,se,ye)=>{Sa(se).each(mt=>{const lt=Kt(q,st=>st.dom),tt=Sm(l),At=Tl(Nt,he.fromDom(l.getDoc()),tt),We=To(l),nt=wh(mt,{selection:We},At).map(st=>Oc(st,nn=>Kt(nn,Wn=>Wn.dom))).getOrUndefined();y_(l,lt,se.dom,ye.dom,nt)})},E=()=>Rr(l),A=Ex.byAttr(Df,v,E);return l.on("init",q=>{const se=l.getWin(),ye=za(l),Ge=Ci(l),mt=()=>{const Go=l.selection,Aa=he.fromDom(Go.getStart()),Oa=he.fromDom(Go.getEnd());Af(Sa,[Aa,Oa]).fold(()=>A.clear(ye),Nt)},lt=R2(se,ye,Ge,A),tt=N2(se,ye,Ge,A),At=vx(se,ye,Ge,A),We=Go=>Go.raw.shiftKey===!0;l.on("TableSelectorChange",Go=>At(Go.start,Go.finish));const nt=(Go,Aa)=>{We(Go)&&(Aa.kill&&Go.kill(),Aa.selection.each(Oa=>{const sl=Qf.relative(Oa.start,Oa.finish),hn=C0(se,sl);l.selection.setRng(hn)}))},st=Go=>{const Aa=Eh(Go);if(Aa.raw.shiftKey&&Xf(Aa.raw.which)){const Oa=l.selection.getRng(),sl=he.fromDom(Oa.startContainer),hn=he.fromDom(Oa.endContainer);tt.keyup(Aa,sl,Oa.startOffset,hn,Oa.endOffset).each(Ua=>{nt(Aa,Ua)})}},nn=Go=>{const Aa=Eh(Go);m.hide();const Oa=l.selection.getRng(),sl=he.fromDom(Oa.startContainer),hn=he.fromDom(Oa.endContainer),Ua=I(Vd,dx)(he.fromDom(l.selection.getStart()));tt.keydown(Aa,sl,Oa.startOffset,hn,Oa.endOffset,Ua).each(Pr=>{nt(Aa,Pr)}),m.show()},Wn=Go=>Go.button===0,ko=Go=>Go.buttons===void 0?!0:(Go.buttons&1)!==0,ns=Go=>{lt.clearstate()},Es=Go=>{Wn(Go)&&rg(Go)&&lt.mousedown(Eh(Go))},Ai=Go=>{ko(Go)&&rg(Go)&&lt.mouseover(Eh(Go))},hu=Go=>{Wn(Go)&&rg(Go)&&lt.mouseup(Eh(Go))},sd=(()=>{const Go=m1(he.fromDom(ye)),Aa=m1(0);return{touchEnd:sl=>{const hn=he.fromDom(sl.target);if(Xo("td")(hn)||Xo("th")(hn)){const Ua=Go.get(),Pr=Aa.get();No(Ua,hn)&&sl.timeStamp-Pr<300&&(sl.preventDefault(),At(hn,hn))}Go.set(hn),Aa.set(sl.timeStamp)}}})();l.on("dragstart",ns),l.on("mousedown",Es),l.on("mouseover",Ai),l.on("mouseup",hu),l.on("touchend",sd.touchEnd),l.on("keyup",st),l.on("keydown",nn),l.on("NodeChange",mt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Df.firstSelected),l.serializer.addTempAttr(Df.lastSelected)}),{getSelectedCells:()=>bt(p.get(),ce([]),q=>Kt(q,se=>se.dom),q=>[q.dom]),clearSelectedCells:q=>A.clear(he.fromDom(q))}},ki=l=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=it(m,B=>B!==A)},trigger:(...A)=>{const B={};Ve(l,(V,q)=>{B[V]=A[q]}),Ve(m,V=>{V(B)})}}},fu=l=>{const m=Oc(l,v=>({bind:v.bind,unbind:v.unbind})),p=Oc(l,v=>v.trigger);return{registry:m,trigger:p}},cg=(l,m)=>{let p=null;const v=()=>{Ii(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...A)=>{v(),p=setTimeout(()=>{p=null,l.apply(null,A)},m)}}},Th=l=>l.slice(0).sort(),H0=(l,m)=>{throw new Error("All required keys ("+Th(l).join(", ")+") were not specified. Specified keys were: "+Th(m).join(", ")+".")},V0=l=>{throw new Error("Unsupported keys for object: "+Th(l).join(", "))},e4=(l,m)=>{if(!Qn(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ve(m,p=>{if(!Vo(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},t4=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Th(l).join(", ")+") were not.")},n4=l=>{const m=Th(l);$(m,(v,E)=>E<m.length-1&&v===m[E+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},o4=(l,m)=>_x(l,m,{validate:Wc,label:"function"}),_x=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return e4("required",m),n4(m),v=>{const E=Bt(v);co(m,V=>Mo(E,V))||H0(m,E),l(m,E);const B=it(m,V=>!p.validate(v[V],V));return B.length>0&&t4(B,p.label),v}},Ax=(l,m)=>{const p=it(m,v=>!Mo(l,v));p.length>0&&V0(p)},B2=l=>o4(Ax,l),z0=B2(["compare","extract","mutate","sink"]),oa=B2(["element","start","stop","destroy"]),ol=B2(["forceDrop","drop","move","delayDrop"]),_i=()=>{let l=re.none();const m=()=>{l=re.none()},p=(A,B)=>{const V=l.map(q=>A.compare(q,B));return l=re.some(B),V},v=(A,B)=>{B.extract(A).each(q=>{p(B,q).each(ye=>{E.trigger.move(ye)})})},E=fu({move:ki(["info"])});return{onEvent:v,reset:m,events:E.registry}},S1=()=>{const l=fu({move:ki(["info"])});return{onEvent:Nt,reset:Nt,events:l.registry}},$2=()=>{const l=S1(),m=_i();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(V,q)=>{p.onEvent(V,q)},events:m.events}},Ox=(l,m,p)=>{let v=!1;const E=fu({start:ki([]),stop:ki([])}),A=$2(),B=()=>{tt.stop(),A.isOn()&&(A.off(),E.trigger.stop())},V=cg(B,200),q=We=>{tt.start(We),A.on(),E.trigger.start()},se=We=>{V.cancel(),A.onEvent(We,m)};A.events.move.bind(We=>{m.mutate(l,We.info)});const ye=()=>{v=!0},Ge=()=>{v=!1},mt=()=>v,lt=We=>(...nt)=>{v&&We.apply(null,nt)},tt=m.sink(ol({forceDrop:B,drop:lt(B),move:lt(se),delayDrop:lt(V.throttle)}),p),At=()=>{tt.destroy()};return{element:tt.element,go:q,on:ye,off:Ge,isActive:mt,destroy:At,events:E.registry}},U0=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},W0=U0("ephox-dragster").resolve,r4=l=>{const m={layerClass:W0("blocker"),...l},p=he.fromTag("div");return ls(p,"role","presentation"),Bo(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),mu(p,W0("blocker")),mu(p,m.layerClass),{element:ce(p),destroy:()=>{Fs(p)}}};var j0=z0({compare:(l,m)=>Pt(m.left-l.left,m.top-l.top),extract:l=>re.some(Pt(l.x,l.y)),sink:(l,m)=>{const p=r4(m),v=sg(p.element(),"mousedown",l.forceDrop),E=sg(p.element(),"mouseup",l.drop),A=sg(p.element(),"mousemove",l.move),B=sg(p.element(),"mouseout",l.delayDrop),V=()=>{p.destroy(),E.unbind(),A.unbind(),B.unbind(),v.unbind()},q=ye=>{Wo(ye,p.element())},se=()=>{Fs(p.element())};return oa({element:p.element,start:q,stop:se,destroy:V})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const jo=(l,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:j0;return Ox(l,v,m)},gu=U0("ephox-snooker").resolve,Rx=()=>{const l=fu({drag:ki(["xDelta","yDelta"])});return{mutate:(p,v)=>{l.trigger.drag(p,v)},events:l.registry}},I2=()=>{const l=fu({drag:ki(["xDelta","yDelta","target"])});let m=re.none();const p=Rx();return p.events.drag.bind(A=>{m.each(B=>{l.trigger.drag(A.xDelta,A.yDelta,B)})}),{assign:A=>{m=re.some(A)},get:()=>m,mutate:p.mutate,events:l.registry}},kh=(l,m,p,v,E)=>{const A=he.fromTag("div");return Bo(A,{position:"absolute",left:m-v/2+"px",top:p+"px",height:E+"px",width:v+"px"}),vc(A,{"data-column":l,role:"presentation"}),A},G0=(l,m,p,v,E)=>{const A=he.fromTag("div");return Bo(A,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:v+"px"}),vc(A,{"data-row":l,role:"presentation"}),A},w1=gu("resizer-bar"),L2=gu("resizer-rows"),Mx=gu("resizer-cols"),F2=7,Nx=(l,m)=>zo(l.all,(p,v)=>m(p.element)?[v]:[]),x1=(l,m)=>{const p=[];return Oo(l.grid.columns,v=>{In.getColumnAt(l,v).map(A=>A.element).forall(m)&&p.push(v)}),it(p,v=>{const E=In.filterItems(l,A=>A.column===v);return co(E,A=>m(A.element))})},ag=l=>{const m=io(l.parent(),"."+w1);Ve(m,Fs)},q0=(l,m,p)=>{const v=l.origin();Ve(m,E=>{E.each(A=>{const B=p(v,A);mu(B,w1),Wo(l.parent(),B)})})},i4=(l,m,p,v)=>{q0(l,m,(E,A)=>{const B=kh(A.col,A.x-E.left,p.top-E.top,F2,v);return mu(B,Mx),B})},l4=(l,m,p,v)=>{q0(l,m,(E,A)=>{const B=G0(A.row,p.left-E.left,A.y-E.top,v,F2);return mu(B,L2),B})},u4=(l,m,p,v,E)=>{const A=Qc(p),B=m.isResizable,V=v.length>0?Yt.positions(v,p):[],q=V.length>0?Nx(l,B):[],se=it(V,(lt,tt)=>et(q,At=>tt===At));l4(m,se,A,Vu(p));const ye=E.length>0?xp.positions(E,p):[],Ge=ye.length>0?x1(l,B):[],mt=it(ye,(lt,tt)=>et(Ge,At=>tt===At));i4(m,mt,A,Zt(p))},ri=(l,m)=>{if(ag(l),l.isResizable(m)){const p=In.fromTable(m),v=w(p),E=gf(p);u4(p,l,m,v,E)}},Uc=(l,m)=>{const p=io(l.parent(),"."+w1);Ve(p,m)},_h=l=>{Uc(l,m=>{Cn(m,"display","none")})},IR=l=>{Uc(l,m=>{Cn(m,"display","block")})},d4=l=>y1(l,L2),m4=l=>y1(l,Mx),Un=gu("resizer-bar-dragging"),f4=l=>{const m=I2(),p=jo(m,{});let v=re.none();const E=(tt,At)=>re.from(or(tt,At));m.events.drag.bind(tt=>{E(tt.target,"data-row").each(At=>{const We=bs(tt.target,"top");Cn(tt.target,"top",We+tt.yDelta+"px")}),E(tt.target,"data-column").each(At=>{const We=bs(tt.target,"left");Cn(tt.target,"left",We+tt.xDelta+"px")})});const A=(tt,At)=>{const We=bs(tt,At),nt=dr(tt,"data-initial-"+At,0);return We-nt};p.events.stop.bind(()=>{m.get().each(tt=>{v.each(At=>{E(tt,"data-row").each(We=>{const nt=A(tt,"top");Uo(tt,"data-initial-top"),lt.trigger.adjustHeight(At,nt,parseInt(We,10))}),E(tt,"data-column").each(We=>{const nt=A(tt,"left");Uo(tt,"data-initial-left"),lt.trigger.adjustWidth(At,nt,parseInt(We,10))}),ri(l,At)})})});const B=(tt,At)=>{lt.trigger.startAdjust(),m.assign(tt),ls(tt,"data-initial-"+At,bs(tt,At)),mu(tt,Un),Cn(tt,"opacity","0.2"),p.go(l.parent())},V=sg(l.parent(),"mousedown",tt=>{d4(tt.target)&&B(tt.target,"top"),m4(tt.target)&&B(tt.target,"left")}),q=tt=>No(tt,l.view()),se=tt=>sr(tt,"table",q).filter(Em),ye=sg(l.view(),"mouseover",tt=>{se(tt.target).fold(()=>{sn(tt.target)&&ag(l)},At=>{p.isActive()&&(v=re.some(At),ri(l,At))})}),Ge=()=>{V.unbind(),ye.unbind(),p.destroy(),ag(l)},mt=tt=>{ri(l,tt)},lt=fu({adjustHeight:ki(["table","delta","row"]),adjustWidth:ki(["table","delta","column"]),startAdjust:ki([])});return{destroy:Ge,refresh:mt,on:p.on,off:p.off,hideBars:Zn(_h,l),showBars:Zn(IR,l),events:lt.registry}},H2={create:(l,m,p)=>{const v=Yt,E=xp,A=f4(l),B=fu({beforeResize:ki(["table","type"]),afterResize:ki(["table","type"]),startDrag:ki([])});return A.events.adjustHeight.bind(V=>{const q=V.table;B.trigger.beforeResize(q,"row");const se=v.delta(V.delta,q);Ry(q,se,V.row),B.trigger.afterResize(q,"row")}),A.events.startAdjust.bind(V=>{B.trigger.startDrag()}),A.events.adjustWidth.bind(V=>{const q=V.table;B.trigger.beforeResize(q,"col");const se=E.delta(V.delta,q),ye=p(q);rw(q,se,V.column,m,ye),B.trigger.afterResize(q,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:B.registry}}},E1={only:(l,m)=>{const p=ql(l)?Ls(l):l;return{parent:ce(p),view:ce(l),origin:ce(Pt(0,0)),isResizable:m}},detached:(l,m,p)=>{const v=()=>Qc(m);return{parent:ce(m),view:ce(l),origin:v,isResizable:p}},body:(l,m,p)=>({parent:ce(m),view:ce(l),origin:ce(Pt(0,0)),isResizable:p})},h4=()=>{const l=he.fromTag("div");return Bo(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Wo(Qo(),l),l},p4=(l,m)=>l.inline?E1.body(he.fromDom(l.getBody()),h4(),m):E1.only(he.fromDom(l.getDoc()),m),V2=(l,m)=>{l.inline&&Fs(m.parent())},K0=l=>er(l)&&l.nodeName==="TABLE",Y0="bar-",HR=l=>or(l,"data-mce-resize")!=="false",b4=l=>{const m=In.fromTable(l);In.hasColumns(m)||Ve(Pu(l),p=>{const v=Hs(p,"width");Cn(p,"width",v),Uo(p,"width")})},T1=l=>Ui(l,"corner-"),z2=l=>cm(l,"corner-"),v4=l=>{const m=Zm(),p=Zm(),v=Zm();let E,A,B,V;const q=nt=>u0(l,nt),se=()=>su(l)?Nd():Om(),ye=nt=>Rf(nt).columns,Ge=nt=>Rf(nt).rows,mt=(nt,st,nn,Wn)=>{const ko=z2(st),ns=aa(ko,"e"),Es=Ui(ko,"n");if(A===""&&Zf(nt),V===""&&w_(nt),nn!==E&&A!==""){Cn(nt,"width",A);const Ai=se(),hu=q(nt),ig=su(l)||ns?ye(nt)-1:0;rw(nt,nn-E,ig,Ai,hu)}else if(dy(A)){const Ai=parseFloat(A.replace("%","")),hu=nn*Ai/E;Cn(nt,"width",hu+"%")}if(Hg(A)&&b4(nt),Wn!==B&&V!==""){Cn(nt,"height",V);const Ai=Es?0:Ge(nt)-1;Ry(nt,Wn-B,Ai)}},lt=()=>{p.on(nt=>{nt.destroy()}),v.on(nt=>{V2(l,nt)})};return l.on("init",()=>{const nt=p4(l,HR);if(v.set(nt),Wk(l)&&$b(l)){const st=se(),nn=H2.create(nt,st,q);l.mode.isReadOnly()||nn.on(),nn.events.startDrag.bind(Wn=>{m.set(l.selection.getRng())}),nn.events.beforeResize.bind(Wn=>{const ko=Wn.table.dom;Mr(l,ko,Bp(ko),Fg(ko),Y0+Wn.type)}),nn.events.afterResize.bind(Wn=>{const ko=Wn.table,ns=ko.dom;Si(ko),m.on(Es=>{l.selection.setRng(Es),l.focus()}),Ec(l,ns,Bp(ns),Fg(ns),Y0+Wn.type),l.undoManager.add()}),p.set(nn)}}),l.on("ObjectResizeStart",nt=>{const st=nt.target;if(K0(st)&&!l.mode.isReadOnly()){const nn=he.fromDom(st);Ve(l.dom.select(".mce-clonedresizable"),Wn=>{l.dom.addClass(Wn,"mce-"+Bb(l)+"-columns")}),!Rw(nn)&&xc(l)?n1(nn):!Dw(nn)&&ru(l)&&Zf(nn),Mw(nn)&&Ui(nt.origin,Y0)&&Zf(nn),E=nt.width,A=wm(l)?"":PS(l,st).getOr(""),B=nt.height,V=BS(l,st).getOr("")}}),l.on("ObjectResized",nt=>{const st=nt.target;if(K0(st)){const nn=he.fromDom(st),Wn=nt.origin;T1(Wn)&&mt(nn,Wn,nt.width,nt.height),Si(nn),Uf(l,nn.dom,Nr)}}),l.on("SwitchMode",()=>{p.on(nt=>{l.mode.isReadOnly()?(nt.off(),nt.hideBars()):(nt.on(),nt.showBars())})}),l.on("dragstart dragend",nt=>{p.on(st=>{nt.type==="dragstart"?(st.hideBars(),st.off()):(st.on(),st.showBars())})}),l.on("remove",()=>{lt()}),{refresh:nt=>{p.on(st=>st.refreshBars(he.fromDom(nt)))},hide:()=>{p.on(nt=>nt.hideBars())},show:()=>{p.on(nt=>nt.showBars())}}},Px=l=>{Mp(l);const m=v4(l),p=F0(l,m),v=qy(l,m,p);return D_(l,v),R_(l,v),_R(l,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Jt=l=>({table:Px(l)});var X0=()=>{mn.add("dom",Jt)};X0()})();(function(){var mn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,Kn=it=>Xt=>Xt.options.get(it),Xn=it=>{const Xt=it.options.register;Xt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Fn().source+"$","i")}),Xt("link_default_target",{processor:"string"}),Xt("link_default_protocol",{processor:"string",default:"https"})},po=Kn("autolink_pattern"),as=Kn("link_default_target"),Vo=Kn("link_default_protocol"),bn=Kn("allow_unsafe_link_target"),Qn=(it,Xt,_e)=>{var Ke;return _e(it,Xt.prototype)?!0:((Ke=it.constructor)===null||Ke===void 0?void 0:Ke.name)===Xt.name},Ii=it=>{const Xt=typeof it;return it===null?"null":Xt==="object"&&Array.isArray(it)?"array":Xt==="object"&&Qn(it,String,(_e,Ke)=>Ke.isPrototypeOf(_e))?"string":Xt},fs=it=>Xt=>Ii(Xt)===it,Ir=it=>Xt=>it===Xt,hc=fs("string"),er=Ir(void 0),Wc=it=>it==null,eo=it=>!Wc(it),Nt=it=>Xt=>!it(Xt),pc=Object.hasOwnProperty,Gt=(it,Xt)=>pc.call(it,Xt),ce=(it,Xt,_e)=>it.length>=Xt.length&&it.substr(_e,_e+Xt.length)===Xt,ut=(it,Xt,_e=0,Ke)=>{const $=it.indexOf(Xt,_e);return $!==-1?er(Ke)?!0:$+Xt.length<=Ke:!1},Ao=(it,Xt)=>ce(it,Xt,0),Zn="\uFEFF",le=it=>it===Zn,vn=it=>it.replace(/\uFEFF/g,"");var fn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Tn=it=>it.nodeType===3,Me=it=>it.nodeType===1,re=it=>/^[(\[{ \u00a0]$/.test(it),is=it=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(it),Hn=it=>/[?!,.;:]/.test(it),kt=(it,Xt,_e)=>{for(let Ke=Xt-1;Ke>=0;Ke--){const $=it.charAt(Ke);if(!le($)&&_e($))return Ke}return-1},k=(it,Xt)=>{let _e=it,Ke=Xt;for(;Me(_e)&&_e.childNodes[Ke];)_e=_e.childNodes[Ke],Ke=Tn(_e)?_e.data.length:_e.childNodes.length;return{container:_e,offset:Ke}},Mo=(it,Xt)=>{var _e;const Ke=it.schema.getVoidElements(),$=po(it),{dom:tr,selection:kn}=it;if(tr.getParent(kn.getNode(),"a[href]")!==null||it.mode.isReadOnly())return null;const zo=kn.getRng(),co=fn(tr,Bn=>tr.isBlock(Bn)||Gt(Ke,Bn.nodeName.toLowerCase())||tr.getContentEditable(Bn)==="false"),{container:Li,offset:Ut}=k(zo.endContainer,zo.endOffset),Vn=(_e=tr.getParent(Li,tr.isBlock))!==null&&_e!==void 0?_e:tr.getRoot(),qt=co.backwards(Li,Ut+Xt,(Bn,Oc)=>{const bo=Bn.data,_s=kt(bo,Oc,Nt(re));return _s===-1||Hn(bo[_s])?_s:_s+1},Vn);if(!qt)return null;let pe=qt.container;const Er=co.backwards(qt.container,qt.offset,(Bn,Oc)=>{pe=Bn;const bo=kt(Bn.data,Oc,re);return bo===-1?bo:bo+1},Vn),$o=tr.createRng();Er?$o.setStart(Er.container,Er.offset):$o.setStart(pe,0),$o.setEnd(qt.container,qt.offset);const Lr=vn($o.toString()).match($);if(Lr){let Bn=Lr[0];return Ao(Bn,"www.")?Bn=Vo(it)+"://"+Bn:ut(Bn,"@")&&!is(Bn)&&(Bn="mailto:"+Bn),{rng:$o,url:Bn}}else return null},et=(it,Xt)=>{const{dom:_e,selection:Ke}=it,{rng:$,url:tr}=Xt,kn=Ke.getBookmark();Ke.setRng($);const zo="createlink",co={command:zo,ui:!1,value:tr};if(!it.dispatch("BeforeExecCommand",co).isDefaultPrevented()){it.getDoc().execCommand(zo,!1,tr),it.dispatch("ExecCommand",co);const Ut=as(it);if(hc(Ut)){const Vn=Ke.getNode();_e.setAttrib(Vn,"target",Ut),Ut==="_blank"&&!bn(it)&&_e.setAttrib(Vn,"rel","noopener")}}Ke.moveToBookmark(kn),it.nodeChanged()},Oo=it=>{const Xt=Mo(it,-1);eo(Xt)&&et(it,Xt)},Kt=Oo,Ve=it=>{const Xt=Mo(it,0);eo(Xt)&&et(it,Xt)},yo=it=>{it.on("keydown",Xt=>{Xt.keyCode===13&&!Xt.isDefaultPrevented()&&Ve(it)}),it.on("keyup",Xt=>{Xt.keyCode===32?Oo(it):(Xt.keyCode===48&&Xt.shiftKey||Xt.keyCode===221)&&Kt(it)})};var ks=()=>{mn.add("autolink",it=>{Xn(it),yo(it)})};ks()})();(function(){var mn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(H,J,ie)=>{var Ne;return ie(H,J.prototype)?!0:((Ne=H.constructor)===null||Ne===void 0?void 0:Ne.name)===J.name},Kn=H=>{const J=typeof H;return H===null?"null":J==="object"&&Array.isArray(H)?"array":J==="object"&&Fn(H,String,(ie,Ne)=>Ne.isPrototypeOf(ie))?"string":J},Xn=H=>J=>Kn(J)===H,po=H=>J=>typeof J===H,as=H=>J=>H===J,Vo=Xn("string"),bn=Xn("object"),Qn=Xn("array"),Ii=as(null),fs=po("boolean"),Ir=H=>H==null,hc=H=>!Ir(H),er=po("function"),Wc=(H,J)=>{if(Qn(H)){for(let ie=0,Ne=H.length;ie<Ne;++ie)if(!J(H[ie]))return!1;return!0}return!1},eo=()=>{},Nt=H=>()=>H,pc=(H,J)=>H===J;class Gt{constructor(J,ie){this.tag=J,this.value=ie}static some(J){return new Gt(!0,J)}static none(){return Gt.singletonNone}fold(J,ie){return this.tag?ie(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?Gt.some(J(this.value)):Gt.none()}bind(J){return this.tag?J(this.value):Gt.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:Gt.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return hc(J)?Gt.some(J):Gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Gt.singletonNone=new Gt(!1);const ce=Array.prototype.indexOf,ut=Array.prototype.push,Ao=(H,J)=>ce.call(H,J),Zn=(H,J)=>Ao(H,J)>-1,le=(H,J)=>{const ie=H.length,Ne=new Array(ie);for(let Xe=0;Xe<ie;Xe++){const Pe=H[Xe];Ne[Xe]=J(Pe,Xe)}return Ne},vn=(H,J)=>{for(let ie=0,Ne=H.length;ie<Ne;ie++){const Xe=H[ie];J(Xe,ie)}},fn=(H,J,ie)=>(vn(H,(Ne,Xe)=>{ie=J(ie,Ne,Xe)}),ie),Tn=H=>{const J=[];for(let ie=0,Ne=H.length;ie<Ne;++ie){if(!Qn(H[ie]))throw new Error("Arr.flatten item "+ie+" was not an array, input: "+H);ut.apply(J,H[ie])}return J},Me=(H,J)=>Tn(le(H,J)),re=(H,J)=>{for(let ie=0;ie<H.length;ie++){const Ne=J(H[ie],ie);if(Ne.isSome())return Ne}return Gt.none()},is=(H,J,ie=pc)=>H.exists(Ne=>ie(Ne,J)),Hn=H=>{const J=[],ie=Ne=>{J.push(Ne)};for(let Ne=0;Ne<H.length;Ne++)H[Ne].each(ie);return J},kt=(H,J)=>H?Gt.some(J):Gt.none(),k=H=>J=>J.options.get(H),Mo=H=>{const J=H.options.register;J("link_assume_external_targets",{processor:ie=>{const Ne=Vo(ie)||fs(ie);return Ne?ie===!0?{value:1,valid:Ne}:ie==="http"||ie==="https"?{value:ie,valid:Ne}:{value:0,valid:Ne}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),J("link_context_toolbar",{processor:"boolean",default:!1}),J("link_list",{processor:ie=>Vo(ie)||er(ie)||Wc(ie,bn)}),J("link_default_target",{processor:"string"}),J("link_default_protocol",{processor:"string",default:"https"}),J("link_target_list",{processor:ie=>fs(ie)||Wc(ie,bn),default:!0}),J("link_rel_list",{processor:"object[]",default:[]}),J("link_class_list",{processor:"object[]",default:[]}),J("link_title",{processor:"boolean",default:!0}),J("allow_unsafe_link_target",{processor:"boolean",default:!1}),J("link_quicklink",{processor:"boolean",default:!1})},et=k("link_assume_external_targets"),Oo=k("link_context_toolbar"),Kt=k("link_list"),Ve=k("link_default_target"),yo=k("link_default_protocol"),ks=k("link_target_list"),it=k("link_rel_list"),Xt=k("link_class_list"),_e=k("link_title"),Ke=k("allow_unsafe_link_target"),$=k("link_quicklink"),tr=Object.keys,kn=Object.hasOwnProperty,zo=(H,J)=>{const ie=tr(H);for(let Ne=0,Xe=ie.length;Ne<Xe;Ne++){const Pe=ie[Ne],to=H[Pe];J(to,Pe)}},co=H=>(J,ie)=>{H[ie]=J},Li=(H,J,ie,Ne)=>{zo(H,(Xe,Pe)=>{(J(Xe,Pe)?ie:Ne)(Xe,Pe)})},Ut=(H,J)=>{const ie={};return Li(H,J,co(ie),eo),ie},Vn=(H,J)=>kn.call(H,J),qt=(H,J)=>Vn(H,J)&&H[J]!==void 0&&H[J]!==null;var pe=tinymce.util.Tools.resolve("tinymce.util.URI"),Er=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),$o=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bt=H=>hc(H)&&H.nodeName.toLowerCase()==="a",Lr=H=>Bt(H)&&!!bo(H),Bn=(H,J)=>{if(H.collapsed)return[];{const ie=H.cloneContents(),Ne=ie.firstChild,Xe=new Er(Ne,ie),Pe=[];let to=Ne;do J(to)&&Pe.push(to);while(to=Xe.next());return Pe}},Oc=H=>/^\w+:/i.test(H),bo=H=>{var J,ie;return(ie=(J=H.getAttribute("data-mce-href"))!==null&&J!==void 0?J:H.getAttribute("href"))!==null&&ie!==void 0?ie:""},_s=(H,J)=>{const ie=["noopener"],Ne=H?H.split(/\s+/):[],Xe=sn=>$o.trim(sn.sort().join(" ")),Pe=sn=>(sn=to(sn),sn.length>0?sn.concat(ie):ie),to=sn=>sn.filter(Qo=>$o.inArray(ie,Qo)===-1),_t=J?Pe(Ne):to(Ne);return _t.length>0?Xe(_t):""},fl=H=>H.replace(/\uFEFF/g,""),Bs=(H,J)=>(J=J||Dc(H.selection.getRng())[0]||H.selection.getNode(),Ss(J)?Gt.from(H.dom.select("a[href]",J)[0]):Gt.from(H.dom.getParent(J,"a[href]"))),Yo=(H,J)=>Bs(H,J).isSome(),Io=(H,J)=>{const ie=J.fold(()=>H.getContent({format:"text"}),Ne=>Ne.innerText||Ne.textContent||"");return fl(ie)},Dc=H=>Bn(H,Lr),gs=H=>$o.grep(H,Lr),jn=H=>gs(H).length>0,Pa=H=>Dc(H).length>0,js=H=>{const J=H.schema.getTextInlineElements(),ie=Pe=>Pe.nodeType===1&&!Bt(Pe)&&!Vn(J,Pe.nodeName.toLowerCase());if(Bs(H).exists(Pe=>Pe.hasAttribute("data-mce-block")))return!1;const Xe=H.selection.getRng();return Xe.collapsed?!0:Bn(Xe,ie).length===0},Ss=H=>hc(H)&&H.nodeName==="FIGURE"&&/\bimage\b/i.test(H.className),Tr=H=>fn(["title","rel","class","target"],(ie,Ne)=>(H[Ne].each(Xe=>{ie[Ne]=Xe.length>0?Xe:null}),ie),{href:H.href}),Rc=(H,J)=>(J==="http"||J==="https")&&!Oc(H)?J+"://"+H:H,li=(H,J)=>{const ie={...J};if(it(H).length===0&&!Ke(H)){const Ne=_s(ie.rel,ie.target==="_blank");ie.rel=Ne||null}return Gt.from(ie.target).isNone()&&ks(H)===!1&&(ie.target=Ve(H)),ie.href=Rc(ie.href,et(H)),ie},no=(H,J,ie,Ne)=>{ie.each(Xe=>{Vn(J,"innerText")?J.innerText=Xe:J.textContent=Xe}),H.dom.setAttribs(J,Ne),H.selection.select(J)},Fi=(H,J,ie,Ne)=>{const Xe=H.dom;Ss(J)?ja(Xe,J,Ne):ie.fold(()=>{H.execCommand("mceInsertLink",!1,Ne)},Pe=>{H.insertContent(Xe.createHTML("a",Ne,Xe.encode(Pe)))})},ct=(H,J,ie)=>{const Ne=H.selection.getNode(),Xe=Bs(H,Ne),Pe=li(H,Tr(ie));H.undoManager.transact(()=>{ie.href===J.href&&J.attach(),Xe.fold(()=>{Fi(H,Ne,ie.text,Pe)},to=>{H.focus(),no(H,to,ie.text,Pe)})})},zn=H=>{const J=H.dom,ie=H.selection,Ne=ie.getBookmark(),Xe=ie.getRng().cloneRange(),Pe=J.getParent(Xe.startContainer,"a[href]",H.getBody()),to=J.getParent(Xe.endContainer,"a[href]",H.getBody());Pe&&Xe.setStartBefore(Pe),to&&Xe.setEndAfter(to),ie.setRng(Xe),H.execCommand("unlink"),ie.moveToBookmark(Ne)},Kr=H=>{H.undoManager.transact(()=>{const J=H.selection.getNode();Ss(J)?Ca(H,J):zn(H),H.focus()})},Gs=H=>{const{class:J,href:ie,rel:Ne,target:Xe,text:Pe,title:to}=H;return Ut({class:J.getOrNull(),href:ie,rel:Ne.getOrNull(),target:Xe.getOrNull(),text:Pe.getOrNull(),title:to.getOrNull()},(_t,sn)=>Ii(_t)===!1)},Za=(H,J)=>{const ie=H.options.get,Ne={allow_html_data_urls:ie("allow_html_data_urls"),allow_script_urls:ie("allow_script_urls"),allow_svg_data_urls:ie("allow_svg_data_urls")},Xe=J.href;return{...J,href:pe.isDomSafe(Xe,"a",Ne)?Xe:""}},ya=(H,J,ie)=>{const Ne=Za(H,ie);H.hasPlugin("rtc",!0)?H.execCommand("createlink",!1,Gs(Ne)):ct(H,J,Ne)},Co=H=>{H.hasPlugin("rtc",!0)?H.execCommand("unlink"):Kr(H)},Ca=(H,J)=>{var ie;const Ne=H.dom.select("img",J)[0];if(Ne){const Xe=H.dom.getParents(Ne,"a[href]",J)[0];Xe&&((ie=Xe.parentNode)===null||ie===void 0||ie.insertBefore(Ne,Xe),H.dom.remove(Xe))}},ja=(H,J,ie)=>{var Ne;const Xe=H.select("img",J)[0];if(Xe){const Pe=H.create("a",ie);(Ne=Xe.parentNode)===null||Ne===void 0||Ne.insertBefore(Pe,Xe),Pe.appendChild(Xe)}},ho=H=>Vo(H.value)?H.value:"",zt=H=>Vo(H.text)?H.text:Vo(H.title)?H.title:"",$s=(H,J)=>{const ie=[];return $o.each(H,Ne=>{const Xe=zt(Ne);if(Ne.menu!==void 0){const Pe=$s(Ne.menu,J);ie.push({text:Xe,items:Pe})}else{const Pe=J(Ne);ie.push({text:Xe,value:Pe})}}),ie},bc=(H=ho)=>J=>Gt.from(J).map(ie=>$s(ie,H)),Xo={sanitize:H=>bc(ho)(H),sanitizeWith:bc,createUi:(H,J)=>ie=>({name:H,type:"listbox",label:J,items:ie}),getValue:ho},nr=H=>qt(H,"items"),ls=(H,J)=>re(J,ie=>nr(ie)?ls(H,ie.items):kt(ie.value===H,ie)),vc=(H,J,ie,Ne)=>{const Xe=Ne[J],Pe=H.length>0;return Xe!==void 0?ls(Xe,ie).map(to=>({url:{value:to.value,meta:{text:Pe?H:to.text,attach:eo}},text:Pe?H:to.text})):Gt.none()},Ba=(H,J)=>J==="link"?H.link:J==="anchor"?H.anchor:Gt.none(),Is={init:(H,J)=>{const ie={text:H.text,title:H.title},Ne=sn=>{var Qo;return kt(ie.title.length<=0,Gt.from((Qo=sn.meta)===null||Qo===void 0?void 0:Qo.title).getOr(""))},Xe=sn=>{var Qo;return kt(ie.text.length<=0,Gt.from((Qo=sn.meta)===null||Qo===void 0?void 0:Qo.text).getOr(sn.value))},Pe=sn=>{const Qo=Xe(sn.url),N=Ne(sn.url);return Qo.isSome()||N.isSome()?Gt.some({...Qo.map(Z=>({text:Z})).getOr({}),...N.map(Z=>({title:Z})).getOr({})}):Gt.none()},to=(sn,Qo)=>{const N=Ba(J,Qo).getOr([]);return vc(ie.text,Qo,N,sn)};return{onChange:(sn,Qo)=>{const N=Qo.name;return N==="url"?Pe(sn()):Zn(["anchor","link"],N)?to(sn(),N):((N==="text"||N==="title")&&(ie[N]=sn()[N]),Gt.none())}}},getDelta:vc};var Uo=tinymce.util.Tools.resolve("tinymce.util.Delay");const qs=(H,J,ie)=>{const Ne=H.selection.getRng();Uo.setEditorTimeout(H,()=>{H.windowManager.confirm(J,Xe=>{H.selection.setRng(Ne),ie(Xe)})})},Mc=H=>{const J=H.href;return J.indexOf("@")>0&&J.indexOf("/")===-1&&J.indexOf("mailto:")===-1?Gt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ne=>({...Ne,href:"mailto:"+J})}):Gt.none()},Ga=(H,J)=>ie=>{const Ne=ie.href;return H===1&&!Oc(Ne)||H===0&&/^\s*www(\.|\d\.)/i.test(Ne)?Gt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${J}:// prefix?`,preprocess:Pe=>({...Pe,href:J+"://"+Ne})}):Gt.none()},Zc={preprocess:(H,J)=>re([Mc,Ga(et(H),yo(H))],ie=>ie(J)).fold(()=>Promise.resolve(J),ie=>new Promise(Ne=>{qs(H,ie.message,Xe=>{Ne(Xe?ie.preprocess(J):J)})}))},he={getAnchors:H=>{const J=H.dom.select("a:not([href])"),ie=Me(J,Ne=>{const Xe=Ne.name||Ne.id;return Xe?[{text:Xe,value:"#"+Xe}]:[]});return ie.length>0?Gt.some([{text:"None",value:""}].concat(ie)):Gt.none()}},$a={getClasses:H=>{const J=Xt(H);return J.length>0?Xo.sanitize(J):Gt.none()}},Ou=H=>{try{return Gt.some(JSON.parse(H))}catch{return Gt.none()}},No={getLinks:H=>{const J=Ne=>H.convertURL(Ne.value||Ne.url||"","href"),ie=Kt(H);return new Promise(Ne=>{Vo(ie)?fetch(ie).then(Xe=>Xe.ok?Xe.text().then(Ou):Promise.reject()).then(Ne,()=>Ne(Gt.none())):er(ie)?ie(Xe=>Ne(Gt.some(Xe))):Ne(Gt.from(ie))}).then(Ne=>Ne.bind(Xo.sanitizeWith(J)).map(Xe=>Xe.length>0?[{text:"None",value:""}].concat(Xe):Xe))}},ui={getRels:(H,J)=>{const ie=it(H);if(ie.length>0){const Ne=is(J,"_blank"),Xe=Ke(H)===!1,Pe=_t=>_s(Xo.getValue(_t),Ne);return(Xe?Xo.sanitizeWith(Pe):Xo.sanitize)(ie)}return Gt.none()}},Xr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ls={getTargets:H=>{const J=ks(H);return Qn(J)?Xo.sanitize(J).orThunk(()=>Gt.some(Xr)):J===!1?Gt.none():Gt.some(Xr)}},Jo=(H,J,ie)=>{const Ne=H.getAttrib(J,ie);return Ne!==null&&Ne.length>0?Gt.some(Ne):Gt.none()},jc=(H,J)=>{const ie=H.dom,Xe=js(H)?Gt.some(Io(H.selection,J)):Gt.none(),Pe=J.bind(N=>Gt.from(ie.getAttrib(N,"href"))),to=J.bind(N=>Gt.from(ie.getAttrib(N,"target"))),_t=J.bind(N=>Jo(ie,N,"rel")),sn=J.bind(N=>Jo(ie,N,"class")),Qo=J.bind(N=>Jo(ie,N,"title"));return{url:Pe,text:Xe,title:Qo,target:to,rel:_t,linkClass:sn}},hs={collect:(H,J)=>No.getLinks(H).then(ie=>{const Ne=jc(H,J);return{anchor:Ne,catalogs:{targets:Ls.getTargets(H),rels:ui.getRels(H,Ne.target),classes:$a.getClasses(H),anchor:he.getAnchors(H),link:ie},optNode:J,flags:{titleEnabled:_e(H)}}})},di=(H,J)=>ie=>{const Ne=ie.getData();if(!Ne.url.value){Co(H),ie.close();return}const Xe=_t=>Gt.from(Ne[_t]).filter(sn=>!is(J.anchor[_t],sn)),Pe={href:Ne.url.value,text:Xe("text"),target:Xe("target"),rel:Xe("rel"),class:Xe("linkClass"),title:Xe("title")},to={href:Ne.url.value,attach:Ne.url.meta!==void 0&&Ne.url.meta.attach?Ne.url.meta.attach:eo};Zc.preprocess(H,Pe).then(_t=>{ya(H,to,_t)}),ie.close()},ra=H=>{const J=Bs(H);return hs.collect(H,J)},$n=(H,J)=>{const ie=H.anchor,Ne=ie.url.getOr("");return{url:{value:Ne,meta:{original:{value:Ne}}},text:ie.text.getOr(""),title:ie.title.getOr(""),anchor:Ne,link:Ne,rel:ie.rel.getOr(""),target:ie.target.or(J).getOr(""),linkClass:ie.linkClass.getOr("")}},ur=(H,J,ie)=>{const Ne=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Xe=H.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Pe=H.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],to=Gt.from(Ve(ie)),_t=$n(H,to),sn=H.catalogs,Qo=Is.init(_t,sn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Tn([Ne,Xe,Pe,Hn([sn.anchor.map(Xo.createUi("anchor","Anchors")),sn.rels.map(Xo.createUi("rel","Rel")),sn.targets.map(Xo.createUi("target","Open link in...")),sn.link.map(Xo.createUi("link","Link list")),sn.classes.map(Xo.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_t,onChange:(Z,{name:te})=>{Qo.onChange(Z.getData,{name:te}).each(Se=>{Z.setData(Se)})},onSubmit:J}},Ks=H=>{ra(H).then(ie=>{const Ne=di(H,ie);return ur(ie,Ne,H)}).then(ie=>{H.windowManager.open(ie)})},qa=H=>{H.addCommand("mceLink",(J,ie)=>{(ie==null?void 0:ie.dialog)===!0||!$(H)?Ks(H):H.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ca=H=>{H.addShortcut("Meta+K","",()=>{H.execCommand("mceLink")})},Ys=H=>{let J=H;return{get:()=>J,set:Xe=>{J=Xe}}},Wo=H=>{const J=Ys(Gt.none()),ie=()=>J.get().each(H);return{clear:()=>{ie(),J.set(Gt.none())},isSet:()=>J.get().isSome(),get:()=>J.get(),set:_t=>{ie(),J.set(Gt.some(_t))}}},rm=()=>{const H=Wo(eo);return{...H,on:ie=>H.get().each(ie)}},Gc=(H,J)=>H.substring(J),ao=(H,J,ie)=>J===""||H.length>=J.length&&H.substr(ie,ie+J.length)===J,hr=(H,J)=>pr(H,J)?Gc(H,J.length):H,pr=(H,J)=>ao(H,J,0);var Fs=tinymce.util.Tools.resolve("tinymce.util.VK");const mi=(H,J)=>{document.body.appendChild(H),H.dispatchEvent(J),document.body.removeChild(H)},Jr=H=>{const J=document.createElement("a");J.target="_blank",J.href=H,J.rel="noreferrer noopener";const ie=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ie),mi(J,ie)},Qr=H=>H.altKey===!0&&H.shiftKey===!1&&H.ctrlKey===!1&&H.metaKey===!1,Nc=(H,J)=>{if(J){const ie=bo(J);if(/^#/.test(ie)){const Ne=H.dom.select(`${ie},[name="${hr(ie,"#")}"]`);Ne.length&&H.selection.scrollIntoView(Ne[0],!0)}else Jr(J.href)}},Pc=H=>{const J=H.selection.getRng(),ie=J.startContainer;return Lr(ie)&&J.startContainer===J.endContainer&&H.dom.select("img",ie).length===1},hl=(H,J)=>{const ie=gs(H.dom.getParents(J));return kt(ie.length===1,ie[0])},Vi=H=>{const J=Dc(H.selection.getRng());return kt(J.length>0,J[0]).or(hl(H,H.selection.getNode()))},fi=H=>H.selection.isCollapsed()||Pc(H)?hl(H,H.selection.getStart()):Vi(H),Bc=H=>{const J=rm(),ie=()=>J.get().or(fi(H)),Ne=()=>ie().each(Xe=>Nc(H,Xe));return H.on("contextmenu",Xe=>{hl(H,Xe.target).each(J.set)}),H.on("SelectionChange",()=>{J.isSet()||fi(H).each(J.set)}),H.on("click",Xe=>{J.clear();const Pe=gs(H.dom.getParents(Xe.target));Pe.length===1&&Fs.metaKeyPressed(Xe)&&(Xe.preventDefault(),Nc(H,Pe[0]))}),H.on("keydown",Xe=>{J.clear(),!Xe.isDefaultPrevented()&&Xe.keyCode===13&&Qr(Xe)&&ie().each(Pe=>{Xe.preventDefault(),Nc(H,Pe)})}),{gotoSelectedLink:Ne}},_r=H=>()=>{H.execCommand("mceLink",!1,{dialog:!0})},gi=(H,J)=>(H.on("NodeChange",J),()=>H.off("NodeChange",J)),hi=H=>J=>{const ie=()=>{J.setActive(!H.mode.isReadOnly()&&Yo(H,H.selection.getNode())),J.setEnabled(H.selection.isEditable())};return ie(),gi(H,ie)},pl=H=>J=>{const ie=()=>{J.setEnabled(H.selection.isEditable())};return ie(),gi(H,ie)},Ka=H=>J=>{const ie=Pe=>jn(Pe)||Pa(H.selection.getRng()),Ne=H.dom.getParents(H.selection.getStart()),Xe=Pe=>{J.setEnabled(ie(Pe)&&H.selection.isEditable())};return Xe(Ne),gi(H,Pe=>Xe(Pe.parents))},Xs=(H,J)=>{H.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:_r(H),onSetup:hi(H)}),H.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:J.gotoSelectedLink,onSetup:Ka(H)}),H.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Co(H),onSetup:Ka(H)})},Ya=(H,J)=>{H.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:J.gotoSelectedLink,onSetup:Ka(H)}),H.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:_r(H),onSetup:pl(H)}),H.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Co(H),onSetup:Ka(H)})},br=H=>{const J="link unlink openlink",ie="link";H.ui.registry.addContextMenu("link",{update:Ne=>H.dom.isEditable(Ne)?jn(H.dom.getParents(Ne,"a"))?J:ie:""})},yc=(H,J)=>{const ie=Pe=>{Pe.selection.collapse(!1)},Ne=Pe=>{const to=H.selection.getNode();return Pe.setEnabled(Yo(H,to)&&H.selection.isEditable()),eo},Xe=Pe=>{const to=Bs(H),_t=js(H);if(to.isNone()&&_t){const sn=Io(H.selection,to);return kt(sn.length===0,Pe)}else return Gt.none()};H.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:hi(H)},label:"Link",predicate:Pe=>Oo(H)&&Yo(H,Pe),initValue:()=>Bs(H).fold(Nt(""),bo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Pe=>{const to=H.selection.getNode();return Pe.setActive(Yo(H,to)),hi(H)(Pe)},onAction:Pe=>{const to=Pe.getValue(),_t=Xe(to);ya(H,{href:to,attach:eo},{href:to,text:_t,title:Gt.none(),rel:Gt.none(),target:Gt.from(Ve(H)),class:Gt.none()}),ie(H),Pe.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ne,onAction:Pe=>{Co(H),Pe.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ne,onAction:Pe=>{J.gotoSelectedLink(),Pe.hide()}}]})},Yl=H=>{const J=Bc(H);Xs(H,J),Ya(H,J),br(H),yc(H,J)};var Xl=()=>{mn.add("link",H=>{Mo(H),qa(H),Yl(H),ca(H)})};Xl()})();(function(){var mn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=(w,O,I)=>{var Q;return I(w,O.prototype)?!0:((Q=w.constructor)===null||Q===void 0?void 0:Q.name)===O.name},Kn=w=>{const O=typeof w;return w===null?"null":O==="object"&&Array.isArray(w)?"array":O==="object"&&Fn(w,String,(I,Q)=>Q.isPrototypeOf(I))?"string":O},Xn=w=>O=>Kn(O)===w,po=w=>O=>typeof O===w,as=Xn("string"),Vo=Xn("object"),bn=Xn("array"),Qn=po("boolean"),Ii=w=>w==null,fs=w=>!Ii(w),Ir=po("function"),hc=po("number"),er=()=>{},Wc=(w,O)=>I=>w(O(I)),eo=w=>()=>w,Nt=(w,O)=>w===O;function pc(w,...O){return(...I)=>{const Q=O.concat(I);return w.apply(null,Q)}}const Gt=w=>O=>!w(O),ce=eo(!1);class ut{constructor(O,I){this.tag=O,this.value=I}static some(O){return new ut(!0,O)}static none(){return ut.singletonNone}fold(O,I){return this.tag?I(this.value):O()}isSome(){return this.tag}isNone(){return!this.tag}map(O){return this.tag?ut.some(O(this.value)):ut.none()}bind(O){return this.tag?O(this.value):ut.none()}exists(O){return this.tag&&O(this.value)}forall(O){return!this.tag||O(this.value)}filter(O){return!this.tag||O(this.value)?this:ut.none()}getOr(O){return this.tag?this.value:O}or(O){return this.tag?this:O}getOrThunk(O){return this.tag?this.value:O()}orThunk(O){return this.tag?this:O()}getOrDie(O){if(this.tag)return this.value;throw new Error(O??"Called getOrDie on None")}static from(O){return fs(O)?ut.some(O):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(O){this.tag&&O(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ut.singletonNone=new ut(!1);const Ao=Array.prototype.slice,Zn=Array.prototype.indexOf,le=Array.prototype.push,vn=(w,O)=>Zn.call(w,O),fn=(w,O)=>vn(w,O)>-1,Tn=(w,O)=>{for(let I=0,Q=w.length;I<Q;I++){const ae=w[I];if(O(ae,I))return!0}return!1},Me=(w,O)=>{const I=w.length,Q=new Array(I);for(let ae=0;ae<I;ae++){const ze=w[ae];Q[ae]=O(ze,ae)}return Q},re=(w,O)=>{for(let I=0,Q=w.length;I<Q;I++){const ae=w[I];O(ae,I)}},is=(w,O)=>{const I=[];for(let Q=0,ae=w.length;Q<ae;Q++){const ze=w[Q];O(ze,Q)&&I.push(ze)}return I},Hn=(w,O)=>{if(w.length===0)return[];{let I=O(w[0]);const Q=[];let ae=[];for(let ze=0,Zt=w.length;ze<Zt;ze++){const gn=w[ze],an=O(gn);an!==I&&(Q.push(ae),ae=[]),I=an,ae.push(gn)}return ae.length!==0&&Q.push(ae),Q}},kt=(w,O,I)=>(re(w,(Q,ae)=>{I=O(I,Q,ae)}),I),k=(w,O,I)=>{for(let Q=0,ae=w.length;Q<ae;Q++){const ze=w[Q];if(O(ze,Q))return ut.some(ze);if(I(ze,Q))break}return ut.none()},Mo=(w,O)=>k(w,O,ce),et=w=>{const O=[];for(let I=0,Q=w.length;I<Q;++I){if(!bn(w[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+w);le.apply(O,w[I])}return O},Oo=(w,O)=>et(Me(w,O)),Kt=w=>{const O=Ao.call(w,0);return O.reverse(),O},Ve=(w,O)=>O>=0&&O<w.length?ut.some(w[O]):ut.none(),yo=w=>Ve(w,0),ks=w=>Ve(w,w.length-1),it=(w,O)=>{const I=[],Q=Ir(O)?ae=>Tn(I,ze=>O(ze,ae)):ae=>fn(I,ae);for(let ae=0,ze=w.length;ae<ze;ae++){const Zt=w[ae];Q(Zt)||I.push(Zt)}return I},Xt=(w,O,I=Nt)=>w.exists(Q=>I(Q,O)),_e=(w,O,I=Nt)=>Ke(w,O,I).getOr(w.isNone()&&O.isNone()),Ke=(w,O,I)=>w.isSome()&&O.isSome()?ut.some(I(w.getOrDie(),O.getOrDie())):ut.none(),$=8,tr=11,kn=1,zo=3,co=(w,O)=>{const Q=(O||document).createElement("div");if(Q.innerHTML=w,!Q.hasChildNodes()||Q.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,w),new Error(ae)}return Vn(Q.childNodes[0])},Li=(w,O)=>{const Q=(O||document).createElement(w);return Vn(Q)},Ut=(w,O)=>{const Q=(O||document).createTextNode(w);return Vn(Q)},Vn=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},pe={fromHtml:co,fromTag:Li,fromText:Ut,fromDom:Vn,fromPoint:(w,O,I)=>ut.from(w.dom.elementFromPoint(O,I)).map(Vn)},Er=(w,O)=>{const I=w.dom;if(I.nodeType!==kn)return!1;{const Q=I;if(Q.matches!==void 0)return Q.matches(O);if(Q.msMatchesSelector!==void 0)return Q.msMatchesSelector(O);if(Q.webkitMatchesSelector!==void 0)return Q.webkitMatchesSelector(O);if(Q.mozMatchesSelector!==void 0)return Q.mozMatchesSelector(O);throw new Error("Browser lacks native selectors")}},$o=(w,O)=>w.dom===O.dom,Bt=(w,O)=>{const I=w.dom,Q=O.dom;return I===Q?!1:I.contains(Q)},Lr=Er,Bn=typeof window<"u"?window:Function("return this;")(),Oc=(w,O)=>{let I=O??Bn;for(let Q=0;Q<w.length&&I!==void 0&&I!==null;++Q)I=I[w[Q]];return I},bo=(w,O)=>{const I=w.split(".");return Oc(I,O)},_s=(w,O)=>bo(w,O),fl=(w,O)=>{const I=_s(w,O);if(I==null)throw new Error(w+" not available on this browser");return I},Bs=Object.getPrototypeOf,Yo=w=>fl("HTMLElement",w),Io=w=>{const O=bo("ownerDocument.defaultView",w);return Vo(w)&&(Yo(O).prototype.isPrototypeOf(w)||/^HTML\w*Element$/.test(Bs(w).constructor.name))},Dc=w=>w.dom.nodeName.toLowerCase(),gs=w=>w.dom.nodeType,jn=w=>O=>gs(O)===w,Pa=w=>gs(w)===$||Dc(w)==="#comment",js=w=>Ss(w)&&Io(w.dom),Ss=jn(kn),Tr=jn(zo),Rc=jn(tr),li=w=>O=>Ss(O)&&Dc(O)===w,no=w=>ut.from(w.dom.parentNode).map(pe.fromDom),Fi=w=>ut.from(w.dom.parentElement).map(pe.fromDom),ct=w=>ut.from(w.dom.nextSibling).map(pe.fromDom),zn=w=>Me(w.dom.childNodes,pe.fromDom),Kr=(w,O)=>{const I=w.dom.childNodes;return ut.from(I[O]).map(pe.fromDom)},Gs=w=>Kr(w,0),Za=w=>Kr(w,w.dom.childNodes.length-1),ya=w=>Rc(w)&&fs(w.dom.host),Co=w=>pe.fromDom(w.dom.getRootNode()),Ca=w=>{const O=Co(w);return ya(O)?ut.some(O):ut.none()},ja=w=>pe.fromDom(w.dom.host),ho=w=>{const O=Tr(w)?w.dom.parentNode:w.dom;if(O==null||O.ownerDocument===null)return!1;const I=O.ownerDocument;return Ca(pe.fromDom(O)).fold(()=>I.body.contains(O),Wc(ho,ja))};var zt=(w,O,I,Q,ae)=>w(I,Q)?ut.some(I):Ir(ae)&&ae(I)?ut.none():O(I,Q,ae);const $s=(w,O,I)=>{let Q=w.dom;const ae=Ir(I)?I:ce;for(;Q.parentNode;){Q=Q.parentNode;const ze=pe.fromDom(Q);if(O(ze))return ut.some(ze);if(ae(ze))break}return ut.none()},bc=(w,O,I)=>zt((ae,ze)=>ze(ae),$s,w,O,I),ql=(w,O,I)=>$s(w,Q=>Er(Q,O),I),Kl=(w,O,I)=>zt((ae,ze)=>Er(ae,ze),ql,w,O,I),Xo=w=>Kl(w,"[contenteditable]"),nr=(w,O=!1)=>ho(w)?w.dom.isContentEditable:Xo(w).fold(eo(O),I=>ls(I)==="true"),ls=w=>w.dom.contentEditable,vc=(w,O)=>{no(w).each(Q=>{Q.dom.insertBefore(O.dom,w.dom)})},Ba=(w,O)=>{ct(w).fold(()=>{no(w).each(ae=>{Is(ae,O)})},Q=>{vc(Q,O)})},or=(w,O)=>{Gs(w).fold(()=>{Is(w,O)},Q=>{w.dom.insertBefore(O.dom,Q.dom)})},Is=(w,O)=>{w.dom.appendChild(O.dom)},Uo=(w,O)=>{re(O,I=>{vc(w,I)})},qs=(w,O)=>{re(O,I=>{Is(w,I)})},Mc=w=>{w.dom.textContent="",re(zn(w),O=>{Ga(O)})},Ga=w=>{const O=w.dom;O.parentNode!==null&&O.parentNode.removeChild(O)};var gl=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Zc=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Sd=tinymce.util.Tools.resolve("tinymce.util.VK");const he=w=>Me(w,pe.fromDom),Yr=Object.keys,$a=(w,O)=>{const I=Yr(w);for(let Q=0,ae=I.length;Q<ae;Q++){const ze=I[Q],Zt=w[ze];O(Zt,ze)}},Ou=w=>(O,I)=>{w[I]=O},Du=(w,O,I,Q)=>{$a(w,(ae,ze)=>{(O(ae,ze)?I:Q)(ae,ze)})},No=(w,O)=>{const I={};return Du(w,O,Ou(I),er),I},Ru=(w,O,I)=>{if(as(I)||Qn(I)||hc(I))w.setAttribute(O,I+"");else throw console.error("Invalid call to Attribute.set. Key ",O,":: Value ",I,":: Element ",w),new Error("Attribute value was not simple")},ui=(w,O)=>{const I=w.dom;$a(O,(Q,ae)=>{Ru(I,ae,Q)})},Xr=w=>kt(w.dom.attributes,(O,I)=>(O[I.name]=I.value,O),{}),Hi=(w,O)=>pe.fromDom(w.dom.cloneNode(O)),Ls=w=>Hi(w,!0),Jo=(w,O)=>{const I=pe.fromTag(O),Q=Xr(w);return ui(I,Q),I},jc=(w,O)=>{const I=Jo(w,O);Ba(w,I);const Q=zn(w);return qs(I,Q),Ga(w),I};var kr=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),hs=tinymce.util.Tools.resolve("tinymce.util.Tools");const di=w=>O=>fs(O)&&O.nodeName.toLowerCase()===w,ra=w=>O=>fs(O)&&w.test(O.nodeName),$n=w=>fs(w)&&w.nodeType===3,ur=w=>fs(w)&&w.nodeType===1,Ks=ra(/^(OL|UL|DL)$/),qa=ra(/^(OL|UL)$/),ca=di("ol"),Ys=ra(/^(LI|DT|DD)$/),Wo=ra(/^(DT|DD)$/),rm=ra(/^(TH|TD)$/),Gc=di("br"),ao=w=>{var O;return((O=w.parentNode)===null||O===void 0?void 0:O.firstChild)===w},hr=(w,O)=>fs(O)&&O.nodeName in w.schema.getTextBlockElements(),pr=(w,O)=>fs(w)&&w.nodeName in O,Fs=(w,O)=>fs(O)&&O.nodeName in w.schema.getVoidElements(),mi=(w,O)=>Gc(O)?w.isBlock(O.nextSibling)&&!Gc(O.previousSibling):!1,Jr=(w,O,I)=>{const Q=w.isEmpty(O);return I&&w.select("span[data-mce-type=bookmark]",O).length>0?!1:Q},Qr=(w,O)=>w.isChildOf(O,w.getRoot()),Nc=w=>O=>O.options.get(w),Pc=w=>{const O=w.options.register;O("lists_indent_on_tab",{processor:"boolean",default:!0})},hl=Nc("lists_indent_on_tab"),Vi=Nc("forced_root_block"),fi=Nc("forced_root_block_attrs"),Bc=(w,O,I={})=>{const Q=w.dom,ae=w.schema.getBlockElements(),ze=Q.createFragment(),Zt=Vi(w),gn=fi(w);let an,Pt,xs=!1;for(Pt=Q.create(Zt,{...gn,...I.style?{style:I.style}:{}}),pr(O.firstChild,ae)||ze.appendChild(Pt);an=O.firstChild;){const yr=an.nodeName;!xs&&(yr!=="SPAN"||an.getAttribute("data-mce-type")!=="bookmark")&&(xs=!0),pr(an,ae)?(ze.appendChild(an),Pt=null):(Pt||(Pt=Q.create(Zt,gn),ze.appendChild(Pt)),Pt.appendChild(an))}return!xs&&Pt&&Pt.appendChild(Q.create("br",{"data-mce-bogus":"1"})),ze},_r=kr.DOM,gi=(w,O,I)=>{const Q=Pt=>{const xs=Pt.parentNode;xs&&hs.each(ae,yr=>{xs.insertBefore(yr,I.parentNode)}),_r.remove(Pt)},ae=_r.select('span[data-mce-type="bookmark"]',O),ze=Bc(w,I),Zt=_r.createRng();Zt.setStartAfter(I),Zt.setEndAfter(O);const gn=Zt.extractContents();for(let Pt=gn.firstChild;Pt;Pt=Pt.firstChild)if(Pt.nodeName==="LI"&&w.dom.isEmpty(Pt)){_r.remove(Pt);break}w.dom.isEmpty(gn)||_r.insertAfter(gn,O),_r.insertAfter(ze,O);const an=I.parentElement;an&&Jr(w.dom,an)&&Q(an),_r.remove(I),Jr(w.dom,O)&&_r.remove(O)},hi=li("dd"),pl=li("dt"),Ka=(w,O)=>{hi(O)?jc(O,"dt"):pl(O)&&Fi(O).each(I=>gi(w,I.dom,O.dom))},Xs=w=>{pl(w)&&jc(w,"dd")},Ya=(w,O,I)=>{O==="Indent"?re(I,Xs):re(I,Q=>Ka(w,Q))},br=(w,O)=>{if($n(w))return{container:w,offset:O};const I=gl.getNode(w,O);return $n(I)?{container:I,offset:O>=w.childNodes.length?I.data.length:0}:I.previousSibling&&$n(I.previousSibling)?{container:I.previousSibling,offset:I.previousSibling.data.length}:I.nextSibling&&$n(I.nextSibling)?{container:I.nextSibling,offset:0}:{container:w,offset:O}},yc=w=>{const O=w.cloneRange(),I=br(w.startContainer,w.startOffset);O.setStart(I.container,I.offset);const Q=br(w.endContainer,w.endOffset);return O.setEnd(Q.container,Q.offset),O},Yl=["OL","UL","DL"],Xl=Yl.join(","),H=(w,O)=>{const I=O||w.selection.getStart(!0);return w.dom.getParent(I,Xl,Qo(w,I))},J=(w,O)=>fs(w)&&O.length===1&&O[0]===w,ie=w=>is(w.querySelectorAll(Xl),Ks),Ne=w=>{const O=H(w),I=w.selection.getSelectedBlocks();return J(O,I)?ie(O):is(I,Q=>Ks(Q)&&O!==Q)},Xe=(w,O)=>{const I=hs.map(O,Q=>{const ae=w.dom.getParent(Q,"li,dd,dt",Qo(w,Q));return ae||Q});return it(I)},Pe=w=>{const O=w.selection.getSelectedBlocks();return is(Xe(w,O),Ys)},to=w=>is(Pe(w),Wo),_t=(w,O)=>{const I=w.dom.getParents(O,"TD,TH");return I.length>0?I[0]:w.getBody()},sn=(w,O)=>!Ks(O)&&!Ys(O)&&Tn(Yl,I=>w.isValidChild(O.nodeName,I)),Qo=(w,O)=>{const I=w.dom.getParents(O,w.dom.isBlock),Q=ze=>ze.nodeName.toLowerCase()!==Vi(w);return Mo(I,ze=>Q(ze)&&sn(w.schema,ze)).getOr(w.getBody())},N=w=>no(w).exists(O=>Ys(O.dom)&&Gs(O).exists(I=>!Ks(I.dom))&&Za(O).exists(I=>!Ks(I.dom))),Z=(w,O)=>{const I=w.dom.getParents(O,"ol,ul",Qo(w,O));return ks(I)},te=w=>{const O=Z(w,w.selection.getStart()),I=is(w.selection.getSelectedBlocks(),qa);return O.toArray().concat(I)},Se=w=>{const O=w.selection.getStart();return w.dom.getParents(O,"ol,ul",Qo(w,O))},Le=w=>{const O=te(w),I=Se(w);return Mo(I,Q=>N(pe.fromDom(Q))).fold(()=>yn(w,O),Q=>[Q])},yn=(w,O)=>{const I=Me(O,Q=>Z(w,Q).getOr(Q));return it(I)},io=w=>/\btox\-/.test(w.className),So=(w,O)=>k(w,Ks,rm).exists(I=>I.nodeName===O&&!io(I)),je=(w,O)=>O!==null&&!w.dom.isEditable(O),Do=w=>{const O=H(w);return je(w,O)||!w.selection.isEditable()},vr=(w,O)=>{const I=w.dom.getParent(O,"ol,ul,dl");return je(w,I)||!w.selection.isEditable()},zi=(w,O)=>{const I=w.selection.getNode();return O({parents:w.dom.getParents(I),element:I}),w.on("NodeChange",O),()=>w.off("NodeChange",O)},cn=(w,O)=>{const Q=document.createDocumentFragment();return re(w,ae=>{Q.appendChild(ae.dom)}),pe.fromDom(Q)},qc=(w,O,I)=>w.dispatch("ListMutation",{action:O,element:I}),sr=(w=>O=>O.replace(w,""))(/^\s+|\s+$/g),Po=w=>w.length>0,La=w=>!Po(w),uf=w=>w.style!==void 0&&Ir(w.style.getPropertyValue),wd=(w,O,I)=>{if(!as(I))throw console.error("Invalid call to CSS.set. Property ",O,":: Value ",I,":: Element ",w),new Error("CSS value must be a string: "+I);uf(w)&&w.style.setProperty(O,I)},us=(w,O,I)=>{const Q=w.dom;wd(Q,O,I)},Mu=w=>Lr(w,"OL,UL"),cm=w=>Lr(w,"LI"),ps=w=>Gs(w).exists(Mu),Ui=w=>Za(w).exists(Mu),aa=w=>"listAttributes"in w,xd=w=>"isComment"in w,W=w=>"isFragment"in w,K=w=>w.depth>0,Ce=w=>w.isSelected,Be=w=>{const O=zn(w),I=Ui(w)?O.slice(0,-1):O;return Me(I,Ls)},Ft=(w,O,I)=>no(w).filter(Ss).map(Q=>({depth:O,dirty:!1,isSelected:I,content:Be(w),itemAttributes:Xr(w),listAttributes:Xr(Q),listType:Dc(Q),isInPreviousLi:!1})),Nn=(w,O)=>{Is(w.item,O.list)},Cn=w=>{for(let O=1;O<w.length;O++)Nn(w[O-1],w[O])},Bo=(w,O)=>{Ke(ks(w),yo(O),Nn)},Hs=(w,O)=>{const I={list:pe.fromTag(O,w),item:pe.fromTag("li",w)};return Is(I.list,I.item),I},$c=(w,O,I)=>{const Q=[];for(let ae=0;ae<I;ae++)Q.push(Hs(w,aa(O)?O.listType:O.parentListType));return Q},ec=(w,O)=>{for(let I=0;I<w.length-1;I++)us(w[I].item,"list-style-type","none");ks(w).each(I=>{aa(O)&&(ui(I.list,O.listAttributes),ui(I.item,O.itemAttributes)),qs(I.item,O.content)})},Vs=(w,O)=>{Dc(w.list)!==O.listType&&(w.list=jc(w.list,O.listType)),ui(w.list,O.listAttributes)},zs=(w,O,I)=>{const Q=pe.fromTag("li",w);return ui(Q,O),qs(Q,I),Q},dr=(w,O)=>{Is(w.list,O),w.item=O},tc=(w,O,I)=>{const Q=O.slice(0,I.depth);return ks(Q).each(ae=>{if(aa(I)){const ze=zs(w,I.itemAttributes,I.content);dr(ae,ze),Vs(ae,I)}else if(W(I))qs(ae.item,I.content);else{const ze=pe.fromHtml(`<!--${I.content}-->`);Is(ae.list,ze)}}),Q},Kc=(w,O,I)=>{const Q=$c(w,I,I.depth-O.length);return Cn(Q),ec(Q,I),Bo(O,Q),O.concat(Q)},As=(w,O)=>{let I=ut.none();const Q=kt(O,(ae,ze,Zt)=>xd(ze)?Zt===0?(I=ut.some(ze),ae):tc(w,ae,ze):ze.depth>ae.length?Kc(w,ae,ze):tc(w,ae,ze),[]);return I.each(ae=>{const ze=pe.fromHtml(`<!--${ae.content}-->`);yo(Q).each(Zt=>{or(Zt.list,ze)})}),yo(Q).map(ae=>ae.list)},bs=(w,O)=>{switch(w){case"Indent":O.depth++;break;case"Outdent":O.depth--;break;case"Flatten":O.depth=0}O.dirty=!0},bl=(w,O)=>{aa(w)&&aa(O)&&(w.listType=O.listType,w.listAttributes={...O.listAttributes})},kg=w=>{w.listAttributes=No(w.listAttributes,(O,I)=>I!=="start")},Ed=(w,O)=>{const I=w[O].depth,Q=ze=>ze.depth===I&&!ze.dirty,ae=ze=>ze.depth<I;return k(Kt(w.slice(0,O)),Q,ae).orThunk(()=>k(w.slice(O+1),Q,ae))},df=w=>(re(w,(O,I)=>{Ed(w,I).fold(()=>{O.dirty&&aa(O)&&kg(O)},Q=>bl(O,Q))}),w),vb=w=>{let O=w;return{get:()=>O,set:ae=>{O=ae}}},Nu=(w,O,I,Q)=>{var ae;if(Pa(Q))return[{depth:w+1,content:(ae=Q.dom.nodeValue)!==null&&ae!==void 0?ae:"",dirty:!1,isSelected:!1,isComment:!0}];O.each(gn=>{$o(gn.start,Q)&&I.set(!0)});const ze=Ft(Q,w,I.get());O.each(gn=>{$o(gn.end,Q)&&I.set(!1)});const Zt=Za(Q).filter(Mu).map(gn=>Bu(w,O,I,gn)).getOr([]);return ze.toArray().concat(Zt)},Pu=(w,O,I,Q)=>Gs(Q).filter(Mu).fold(()=>Nu(w,O,I,Q),ae=>{const ze=kt(zn(Q),(Zt,gn,an)=>{if(an===0)return Zt;if(cm(gn))return Zt.concat(Nu(w,O,I,gn));{const Pt={isFragment:!0,depth:w,content:[gn],isSelected:!1,dirty:!1,parentListType:Dc(ae)};return Zt.concat(Pt)}},[]);return Bu(w,O,I,ae).concat(ze)}),Bu=(w,O,I,Q)=>Oo(zn(Q),ae=>{const ze=Mu(ae)?Bu:Pu,Zt=w+1;return ze(Zt,O,I,ae)}),Sa=(w,O)=>{const I=vb(!1),Q=0;return Me(w,ae=>({sourceList:ae,entries:Bu(Q,O,I,ae)}))},lp=(w,O)=>{const I=df(O);return Me(I,Q=>{const ae=xd(Q)?cn([pe.fromHtml(`<!--${Q.content}-->`)]):cn(Q.content),ze=aa(Q)?Q.itemAttributes:{};return pe.fromDom(Bc(w,ae.dom,ze))})},$u=(w,O)=>{const I=df(O);return As(w.contentDocument,I).toArray()},_g=(w,O)=>Oo(Hn(O,K),I=>yo(I).exists(K)?$u(w,I):lp(w,I)),am=(w,O)=>{re(is(w,Ce),I=>bs(O,I))},up=w=>{const O=Me(Pe(w),pe.fromDom);return Ke(Mo(O,Gt(ps)),Mo(Kt(O),Gt(ps)),(I,Q)=>({start:I,end:Q}))},Ag=(w,O,I)=>{const Q=Sa(O,up(w));re(Q,ae=>{am(ae.entries,I);const ze=_g(w,ae.entries);re(ze,Zt=>{qc(w,I==="Indent"?"IndentList":"OutdentList",Zt.dom)}),Uo(ae.sourceList,ze),Ga(ae.sourceList)})},im=(w,O)=>{const I=he(Le(w)),Q=he(to(w));let ae=!1;if(I.length||Q.length){const ze=w.selection.getBookmark();Ag(w,I,O),Ya(w,O,Q),w.selection.moveToBookmark(ze),w.selection.setRng(yc(w.selection.getRng())),w.nodeChanged(),ae=!0}return ae},Og=(w,O)=>!Do(w)&&im(w,O),dp=w=>Og(w,"Indent"),Iu=w=>Og(w,"Outdent"),mp=w=>Og(w,"Flatten"),ne="\uFEFF",Td=w=>w===ne,Fa=(w,O,I)=>$s(w,O,I).isSome(),yb=(w,O)=>Fa(w,pc($o,O));var Cb=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const lm=kr.DOM,_n=w=>{const O={},I=Q=>{let ae=w[Q?"startContainer":"endContainer"],ze=w[Q?"startOffset":"endOffset"];if(ur(ae)){const Zt=lm.create("span",{"data-mce-type":"bookmark"});ae.hasChildNodes()?(ze=Math.min(ze,ae.childNodes.length-1),Q?ae.insertBefore(Zt,ae.childNodes[ze]):lm.insertAfter(Zt,ae.childNodes[ze])):ae.appendChild(Zt),ae=Zt,ze=0}O[Q?"startContainer":"endContainer"]=ae,O[Q?"startOffset":"endOffset"]=ze};return I(!0),w.collapsed||I(),O},Ic=w=>{const O=Q=>{const ae=gn=>{var an;let Pt=(an=gn.parentNode)===null||an===void 0?void 0:an.firstChild,xs=0;for(;Pt;){if(Pt===gn)return xs;(!ur(Pt)||Pt.getAttribute("data-mce-type")!=="bookmark")&&xs++,Pt=Pt.nextSibling}return-1};let ze=w[Q?"startContainer":"endContainer"],Zt=w[Q?"startOffset":"endOffset"];if(ze){if(ur(ze)&&ze.parentNode){const gn=ze;Zt=ae(ze),ze=ze.parentNode,lm.remove(gn),!ze.hasChildNodes()&&lm.isBlock(ze)&&ze.appendChild(lm.create("br"))}w[Q?"startContainer":"endContainer"]=ze,w[Q?"startOffset":"endOffset"]=Zt}};O(!0),O();const I=lm.createRng();return I.setStart(w.startContainer,w.startOffset),w.endContainer&&I.setEnd(w.endContainer,w.endOffset),yc(I)},ia=w=>{switch(w){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Lu=(w,O,I)=>{const Q=I["list-style-type"]?I["list-style-type"]:null;w.setStyle(O,"list-style-type",Q)},fp=(w,O)=>{hs.each(O,(I,Q)=>{w.setAttribute(Q,I)})},um=(w,O,I)=>{fp(O,I["list-attributes"]),hs.each(w.select("li",O),Q=>{fp(Q,I["list-item-attributes"])})},Yc=(w,O,I)=>{Lu(w,O,I),um(w,O,I)},mf=(w,O,I)=>{hs.each(I,Q=>w.setStyle(O,Q,""))},vl=(w,O)=>fs(O)&&!pr(O,w.schema.getBlockElements()),Dg=(w,O,I,Q)=>{let ae=O[I?"startContainer":"endContainer"];const ze=O[I?"startOffset":"endOffset"];ur(ae)&&(ae=ae.childNodes[Math.min(ze,ae.childNodes.length-1)]||ae),!I&&Gc(ae.nextSibling)&&(ae=ae.nextSibling);const Zt=an=>{for(;!w.dom.isBlock(an)&&an.parentNode&&Q!==an;)an=an.parentNode;return an},gn=(an,Pt)=>{var xs;const yr=new Zc(an,Zt(an)),Qc=Pt?"next":"prev";let Uu;for(;Uu=yr[Qc]();)if(!(Fs(w,Uu)||Td(Uu.textContent)||((xs=Uu.textContent)===null||xs===void 0?void 0:xs.length)===0))return ut.some(Uu);return ut.none()};if(I&&$n(ae))if(Td(ae.textContent))ae=gn(ae,!1).getOr(ae);else for(ae.parentNode!==null&&vl(w,ae.parentNode)&&(ae=ae.parentNode);ae.previousSibling!==null&&(vl(w,ae.previousSibling)||$n(ae.previousSibling));)ae=ae.previousSibling;if(!I&&$n(ae))if(Td(ae.textContent))ae=gn(ae,!0).getOr(ae);else for(ae.parentNode!==null&&vl(w,ae.parentNode)&&(ae=ae.parentNode);ae.nextSibling!==null&&(vl(w,ae.nextSibling)||$n(ae.nextSibling));)ae=ae.nextSibling;for(;ae.parentNode!==Q;){const an=ae.parentNode;if(hr(w,ae)||/^(TD|TH)$/.test(an.nodeName))return ae;ae=an}return ae},Jl=(w,O,I)=>{const Q=[],ae=w.dom,ze=Dg(w,O,!0,I),Zt=Dg(w,O,!1,I);let gn;const an=[];for(let Pt=ze;Pt&&(an.push(Pt),Pt!==Zt);Pt=Pt.nextSibling);return hs.each(an,Pt=>{var xs;if(hr(w,Pt)){Q.push(Pt),gn=null;return}if(ae.isBlock(Pt)||Gc(Pt)){Gc(Pt)&&ae.remove(Pt),gn=null;return}const yr=Pt.nextSibling;if(Cb.isBookmarkNode(Pt)&&(Ks(yr)||hr(w,yr)||!yr&&Pt.parentNode===I)){gn=null;return}gn||(gn=ae.create("p"),(xs=Pt.parentNode)===null||xs===void 0||xs.insertBefore(gn,Pt),Q.push(gn)),gn.appendChild(Pt)}),Q},Xc=(w,O,I)=>{const Q=w.getStyle(O,"list-style-type");let ae=I?I["list-style-type"]:"";return ae=ae===null?"":ae,Q===ae},Sb=(w,O)=>{const I=w.selection.getStart(!0),Q=Dg(w,O,!0,w.getBody());return yb(pe.fromDom(Q),pe.fromDom(O.commonAncestorContainer))?O.commonAncestorContainer:I},dm=(w,O,I)=>{const Q=w.selection.getRng();let ae="LI";const ze=Qo(w,Sb(w,Q)),Zt=w.dom;if(Zt.getContentEditable(w.selection.getNode())==="false")return;O=O.toUpperCase(),O==="DL"&&(ae="DT");const gn=_n(Q),an=is(Jl(w,Q,ze),w.dom.isEditable);hs.each(an,Pt=>{let xs;const yr=Pt.previousSibling,Qc=Pt.parentNode;Ys(Qc)||(yr&&Ks(yr)&&yr.nodeName===O&&Xc(Zt,yr,I)?(xs=yr,Pt=Zt.rename(Pt,ae),yr.appendChild(Pt)):(xs=Zt.create(O),Qc.insertBefore(xs,Pt),xs.appendChild(Pt),Pt=Zt.rename(Pt,ae)),mf(Zt,Pt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Yc(Zt,xs,I),mm(w.dom,xs))}),w.selection.setRng(Ic(gn))},Fr=(w,O)=>Ks(w)&&w.nodeName===(O==null?void 0:O.nodeName),wa=(w,O,I)=>{const Q=w.getStyle(O,"list-style-type",!0),ae=w.getStyle(I,"list-style-type",!0);return Q===ae},Jc=(w,O)=>w.className===O.className,kd=(w,O,I)=>Fr(O,I)&&wa(w,O,I)&&Jc(O,I),mm=(w,O)=>{let I,Q=O.nextSibling;if(kd(w,O,Q)){const ae=Q;for(;I=ae.firstChild;)O.appendChild(I);w.remove(ae)}if(Q=O.previousSibling,kd(w,O,Q)){const ae=Q;for(;I=ae.lastChild;)O.insertBefore(I,O.firstChild);w.remove(ae)}},gp=(w,O,I,Q)=>{if(O.nodeName!==I){const ae=w.dom.rename(O,I);Yc(w.dom,ae,Q),qc(w,ia(I),ae)}else Yc(w.dom,O,Q),qc(w,ia(I),O)},fm=(w,O,I,Q)=>{if(O.classList.forEach((ae,ze,Zt)=>{ae.startsWith("tox-")&&(Zt.remove(ae),Zt.length===0&&O.removeAttribute("class"))}),O.nodeName!==I){const ae=w.dom.rename(O,I);Yc(w.dom,ae,Q),qc(w,ia(I),ae)}else Yc(w.dom,O,Q),qc(w,ia(I),O)},Wi=(w,O,I,Q,ae)=>{const ze=Ks(O);if(ze&&O.nodeName===Q&&!gm(ae)&&!io(O))mp(w);else{dm(w,Q,ae);const Zt=_n(w.selection.getRng()),gn=ze?[O,...I]:I,an=ze&&io(O)?fm:gp;hs.each(gn,Pt=>{an(w,Pt,Q,ae)}),w.selection.setRng(Ic(Zt))}},gm=w=>"list-style-type"in w,Yv=(w,O,I,Q)=>{if(O!==w.getBody())if(O)if(O.nodeName===I&&!gm(Q)&&!io(O))mp(w);else{const ae=_n(w.selection.getRng());io(O)&&O.classList.forEach((Zt,gn,an)=>{Zt.startsWith("tox-")&&(an.remove(Zt),an.length===0&&O.removeAttribute("class"))}),Yc(w.dom,O,Q);const ze=w.dom.rename(O,I);mm(w.dom,ze),w.selection.setRng(Ic(ae)),dm(w,I,Q),qc(w,ia(I),ze)}else dm(w,I,Q),qc(w,ia(I),O)},hp=(w,O,I)=>{const Q=H(w);if(vr(w,Q))return;const ae=Ne(w),ze=Vo(I)?I:{};ae.length>0?Wi(w,Q,ae,O,ze):Yv(w,Q,O,ze)},wb=kr.DOM,Xv=(w,O)=>{const I=O.parentElement;if(I&&I.nodeName==="LI"&&I.firstChild===O){const Q=I.previousSibling;Q&&Q.nodeName==="LI"?(Q.appendChild(O),Jr(w,I)&&wb.remove(I)):wb.setStyle(I,"listStyleType","none")}if(Ks(I)){const Q=I.previousSibling;Q&&Q.nodeName==="LI"&&Q.appendChild(O)}},Rg=(w,O)=>{const I=hs.grep(w.select("ol,ul",O));hs.each(I,Q=>{Xv(w,Q)})},_d=(w,O,I,Q)=>{let ae=O.startContainer;const ze=O.startOffset;if($n(ae)&&(I?ze<ae.data.length:ze>0))return ae;const Zt=w.schema.getNonEmptyElements();ur(ae)&&(ae=gl.getNode(ae,ze));const gn=new Zc(ae,Q);I&&mi(w.dom,ae)&&gn.next();const an=I?gn.next.bind(gn):gn.prev2.bind(gn);for(;ae=an();)if(ae.nodeName==="LI"&&!ae.hasChildNodes()||Zt[ae.nodeName]||$n(ae)&&ae.data.length>0)return ae;return null},pp=(w,O)=>{const I=O.childNodes;return I.length===1&&!Ks(I[0])&&w.isBlock(I[0])},ws=w=>ut.from(w).map(pe.fromDom).filter(js).exists(O=>nr(O)&&!fn(["details"],Dc(O))),Os=(w,O)=>{pp(w,O)&&ws(O.firstChild)&&w.remove(O.firstChild,!0)},Fu=(w,O,I)=>{let Q;const ae=pp(w,I)?I.firstChild:I;if(Os(w,O),!Jr(w,O,!0))for(;Q=O.firstChild;)ae.appendChild(Q)},yl=(w,O,I)=>{let Q;const ae=O.parentNode;if(!Qr(w,O)||!Qr(w,I))return;Ks(I.lastChild)&&(Q=I.lastChild),ae===I.lastChild&&Gc(ae.previousSibling)&&w.remove(ae.previousSibling);const ze=I.lastChild;ze&&Gc(ze)&&O.hasChildNodes()&&w.remove(ze),Jr(w,I,!0)&&Mc(pe.fromDom(I)),Fu(w,O,I),Q&&I.appendChild(Q);const gn=Bt(pe.fromDom(I),pe.fromDom(O))?w.getParents(O,Ks,I):[];w.remove(O),re(gn,an=>{Jr(w,an)&&an!==w.getRoot()&&w.remove(an)})},bp=(w,O,I)=>{Mc(pe.fromDom(I)),yl(w.dom,O,I),w.selection.setCursorLocation(I,0)},Ar=(w,O,I,Q)=>{const ae=w.dom;if(ae.isEmpty(Q))bp(w,I,Q);else{const ze=_n(O);yl(ae,I,Q),w.selection.setRng(Ic(ze))}},$t=(w,O,I,Q)=>{const ae=_n(O);yl(w.dom,I,Q);const ze=Ic(ae);w.selection.setRng(ze)},Hu=(w,O)=>{const I=w.dom,Q=w.selection,ae=Q.getStart(),ze=_t(w,ae),Zt=I.getParent(Q.getStart(),"LI",ze);if(Zt){const gn=Zt.parentElement;if(gn===w.getBody()&&Jr(I,gn))return!0;const an=yc(Q.getRng()),Pt=I.getParent(_d(w,an,O,ze),"LI",ze),xs=Pt&&(O?I.isChildOf(Zt,Pt):I.isChildOf(Pt,Zt));if(Pt&&Pt!==Zt&&!xs)return w.undoManager.transact(()=>{O?Ar(w,an,Pt,Zt):ao(Zt)?Iu(w):$t(w,an,Zt,Pt)}),!0;if(xs&&!O&&Pt!==Zt)return w.undoManager.transact(()=>{if(an.commonAncestorContainer.parentElement){const yr=_n(an),Qc=an.commonAncestorContainer.parentElement;Fu(I,an.commonAncestorContainer.parentElement,Pt),Qc.remove();const Uu=Ic(yr);w.selection.setRng(Uu)}}),!0;if(!Pt&&!O&&an.startOffset===0&&an.endOffset===0)return w.undoManager.transact(()=>{mp(w)}),!0}return!1},Jv=(w,O,I)=>{const Q=w.getParent(O.parentNode,w.isBlock,I);w.remove(O),Q&&w.isEmpty(Q)&&w.remove(Q)},Xa=(w,O)=>{const I=w.dom,Q=w.selection.getStart(),ae=_t(w,Q),ze=I.getParent(Q,I.isBlock,ae);if(ze&&I.isEmpty(ze,void 0,{checkRootAsContent:!0})){const Zt=yc(w.selection.getRng()),gn=I.getParent(_d(w,Zt,O,ae),"LI",ae);if(gn){const an=Qc=>fn(["td","th","caption"],Dc(Qc)),Pt=Qc=>Qc.dom===ae,xs=bc(pe.fromDom(gn),an,Pt),yr=bc(pe.fromDom(Zt.startContainer),an,Pt);return _e(xs,yr,$o)?(w.undoManager.transact(()=>{const Qc=gn.parentNode;Jv(I,ze,ae),mm(I,Qc),w.selection.select(gn,!0),w.selection.collapse(O)}),!0):!1}}return!1},mo=(w,O)=>Hu(w,O)||Xa(w,O),Vu=w=>{const O=w.selection.getStart(),I=_t(w,O);return w.dom.getParent(O,"LI,DT,DD",I)||Pe(w).length>0},ff=w=>Vu(w)?(w.undoManager.transact(()=>{let O=!0;const I=()=>O=!1;w.on("input",I),w.execCommand("Delete"),w.off("input",I),O&&w.dispatch("input"),Rg(w.dom,w.getBody())}),!0):!1,Mg=(w,O)=>{const I=w.selection;return!vr(w,I.getNode())&&(I.isCollapsed()?mo(w,O):ff(w))},vp=w=>{w.on("ExecCommand",O=>{const I=O.command.toLowerCase();(I==="delete"||I==="forwarddelete")&&Vu(w)&&Rg(w.dom,w.getBody())}),w.on("keydown",O=>{O.keyCode===Sd.BACKSPACE?Mg(w,!1)&&O.preventDefault():O.keyCode===Sd.DELETE&&Mg(w,!0)&&O.preventDefault()})},Sn=w=>({backspaceDelete:O=>{Mg(w,O)}}),Js=(w,O)=>{const I=H(w);I===null||vr(w,I)||w.undoManager.transact(()=>{Vo(O.styles)&&w.dom.setStyles(I,O.styles),Vo(O.attrs)&&$a(O.attrs,(Q,ae)=>w.dom.setAttrib(I,ae,Q))})},hm=w=>{const O=Kt(sr(w).split("")),I=Me(O,(Q,ae)=>{const ze=Q.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,ae)*ze});return kt(I,(Q,ae)=>Q+ae,0)},pm=w=>{if(w--,w<0)return"";{const O=w%26,I=Math.floor(w/26),Q=pm(I),ae=String.fromCharCode(65+O);return Q+ae}},Ha=w=>/^[A-Z]+$/.test(w),xa=w=>/^[a-z]+$/.test(w),pi=w=>/^[0-9]+$/.test(w),qo=w=>pi(w)?2:Ha(w)?0:xa(w)?1:La(w)?3:4,Zi=w=>{switch(qo(w)){case 2:return ut.some({listStyleType:ut.none(),start:w});case 0:return ut.some({listStyleType:ut.some("upper-alpha"),start:hm(w).toString()});case 1:return ut.some({listStyleType:ut.some("lower-alpha"),start:hm(w).toString()});case 3:return ut.some({listStyleType:ut.none(),start:""});case 4:return ut.none()}},Ad=w=>{const O=parseInt(w.start,10);return Xt(w.listStyleType,"upper-alpha")?pm(O):Xt(w.listStyleType,"lower-alpha")?pm(O).toLowerCase():w.start},Or=w=>{const O=H(w);!ca(O)||vr(w,O)||w.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ad({start:w.dom.getAttrib(O,"start","1"),listStyleType:ut.from(w.dom.getStyle(O,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:I=>{const Q=I.getData();Zi(Q.start).each(ae=>{w.execCommand("mceListUpdate",!1,{attrs:{start:ae.start==="1"?"":ae.start},styles:{"list-style-type":ae.listStyleType.getOr("")}})}),I.close()}})},Ql=(w,O)=>()=>{const I=H(w);return fs(I)&&I.nodeName===O},Ds=w=>{w.addCommand("mceListProps",()=>{Or(w)})},zu=w=>{w.on("BeforeExecCommand",O=>{const I=O.command.toLowerCase();I==="indent"?dp(w):I==="outdent"&&Iu(w)}),w.addCommand("InsertUnorderedList",(O,I)=>{hp(w,"UL",I)}),w.addCommand("InsertOrderedList",(O,I)=>{hp(w,"OL",I)}),w.addCommand("InsertDefinitionList",(O,I)=>{hp(w,"DL",I)}),w.addCommand("RemoveList",()=>{mp(w)}),Ds(w),w.addCommand("mceListUpdate",(O,I)=>{Vo(I)&&Js(w,I)}),w.addQueryStateHandler("InsertUnorderedList",Ql(w,"UL")),w.addQueryStateHandler("InsertOrderedList",Ql(w,"OL")),w.addQueryStateHandler("InsertDefinitionList",Ql(w,"DL"))};var bm=tinymce.util.Tools.resolve("tinymce.html.Node");const Zo=w=>w.type===3,eu=w=>w.length===0,xb=w=>{const O=(ae,ze)=>{const Zt=bm.create("li");re(ae,gn=>Zt.append(gn)),ze?w.insert(Zt,ze,!0):w.append(Zt)},I=(ae,ze)=>Zo(ze)?[...ae,ze]:!eu(ae)&&!Zo(ze)?(O(ae,ze),[]):ae,Q=kt(w.children(),I,[]);eu(Q)||O(Q)},yp=w=>{w.on("PreInit",()=>{const{parser:O}=w;O.addNodeFilter("ul,ol",I=>re(I,xb))})},Rs=w=>{w.on("keydown",O=>{O.keyCode!==Sd.TAB||Sd.metaKeyPressed(O)||w.undoManager.transact(()=>{(O.shiftKey?Iu(w):dp(w))&&O.preventDefault()})})},Ng=w=>{hl(w)&&Rs(w),vp(w)},ji=(w,O)=>I=>{const Q=ae=>{I.setActive(So(ae.parents,O)),I.setEnabled(!vr(w,ae.element)&&w.selection.isEditable())};return I.setEnabled(w.selection.isEditable()),zi(w,Q)},Cp=w=>{const O=I=>()=>w.execCommand(I);w.hasPlugin("advlist")||(w.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:O("InsertOrderedList"),onSetup:ji(w,"OL")}),w.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:O("InsertUnorderedList"),onSetup:ji(w,"UL")}))},In=(w,O)=>I=>zi(w,ae=>I.setEnabled(So(ae.parents,O)&&!vr(w,ae.element))),gf=w=>{const O={text:"List properties...",icon:"ordered-list",onAction:()=>w.execCommand("mceListProps"),onSetup:In(w,"OL")};w.ui.registry.addMenuItem("listprops",O),w.ui.registry.addContextMenu("lists",{update:I=>{const Q=H(w,I);return ca(Q)?["listprops"]:[]}})};var Pg=()=>{mn.add("lists",w=>(Pc(w),yp(w),w.hasPlugin("rtc",!0)?Ds(w):(Ng(w),zu(w)),Cp(w),gf(w),Sn(w)))};Pg()})();(function(){var mn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Fn=Object.getPrototypeOf,Kn=(N,Z,te)=>{var Se;return te(N,Z.prototype)?!0:((Se=N.constructor)===null||Se===void 0?void 0:Se.name)===Z.name},Xn=N=>{const Z=typeof N;return N===null?"null":Z==="object"&&Array.isArray(N)?"array":Z==="object"&&Kn(N,String,(te,Se)=>Se.isPrototypeOf(te))?"string":Z},po=N=>Z=>Xn(Z)===N,as=N=>Z=>typeof Z===N,Vo=N=>Z=>N===Z,bn=(N,Z)=>Ii(N)&&Kn(N,Z,(te,Se)=>Fn(te)===Se),Qn=po("string"),Ii=po("object"),fs=N=>bn(N,Object),Ir=po("array"),hc=Vo(null),er=as("boolean"),Wc=N=>N==null,eo=N=>!Wc(N),Nt=as("function"),pc=as("number"),Gt=(N,Z)=>{if(Ir(N)){for(let te=0,Se=N.length;te<Se;++te)if(!Z(N[te]))return!1;return!0}return!1},ce=()=>{};class ut{constructor(Z,te){this.tag=Z,this.value=te}static some(Z){return new ut(!0,Z)}static none(){return ut.singletonNone}fold(Z,te){return this.tag?te(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?ut.some(Z(this.value)):ut.none()}bind(Z){return this.tag?Z(this.value):ut.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:ut.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z??"Called getOrDie on None")}static from(Z){return eo(Z)?ut.some(Z):ut.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ut.singletonNone=new ut(!1);const Ao=Object.keys,Zn=Object.hasOwnProperty,le=(N,Z)=>{const te=Ao(N);for(let Se=0,Le=te.length;Se<Le;Se++){const yn=te[Se],io=N[yn];Z(io,yn)}},vn=N=>(Z,te)=>{N[te]=Z},fn=(N,Z,te,Se)=>{le(N,(Le,yn)=>{(Z(Le,yn)?te:Se)(Le,yn)})},Tn=(N,Z)=>{const te={};return fn(N,Z,vn(te),ce),te},Me=(N,Z)=>Zn.call(N,Z),re=(N,Z)=>Me(N,Z)&&N[Z]!==void 0&&N[Z]!==null,is=Array.prototype.push,Hn=N=>{const Z=[];for(let te=0,Se=N.length;te<Se;++te){if(!Ir(N[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+N);is.apply(Z,N[te])}return Z},kt=(N,Z)=>Z>=0&&Z<N.length?ut.some(N[Z]):ut.none(),k=N=>kt(N,0),Mo=(N,Z)=>{for(let te=0;te<N.length;te++){const Se=Z(N[te],te);if(Se.isSome())return Se}return ut.none()};typeof window<"u"||Function("return this;")();const et=(N,Z,te)=>{if(Qn(te)||er(te)||pc(te))N.setAttribute(Z,te+"");else throw console.error("Invalid call to Attribute.set. Key ",Z,":: Value ",te,":: Element ",N),new Error("Attribute value was not simple")},Oo=(N,Z,te)=>{et(N.dom,Z,te)},Kt=(N,Z)=>{N.dom.removeAttribute(Z)},Ve=(N,Z)=>{const Se=(Z||document).createElement("div");if(Se.innerHTML=N,!Se.hasChildNodes()||Se.childNodes.length>1){const Le="HTML does not have a single root node";throw console.error(Le,N),new Error(Le)}return it(Se.childNodes[0])},yo=(N,Z)=>{const Se=(Z||document).createElement(N);return it(Se)},ks=(N,Z)=>{const Se=(Z||document).createTextNode(N);return it(Se)},it=N=>{if(N==null)throw new Error("Node cannot be null or undefined");return{dom:N}},_e={fromHtml:Ve,fromTag:yo,fromText:ks,fromDom:it,fromPoint:(N,Z,te)=>ut.from(N.dom.elementFromPoint(Z,te)).map(it)};var Ke=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$=tinymce.util.Tools.resolve("tinymce.util.URI");const tr=N=>N.length>0,kn=N=>Z=>Z.options.get(N),zo=N=>{const Z=N.options.register;Z("image_dimensions",{processor:"boolean",default:!0}),Z("image_advtab",{processor:"boolean",default:!1}),Z("image_uploadtab",{processor:"boolean",default:!0}),Z("image_prepend_url",{processor:"string",default:""}),Z("image_class_list",{processor:"object[]"}),Z("image_description",{processor:"boolean",default:!0}),Z("image_title",{processor:"boolean",default:!1}),Z("image_caption",{processor:"boolean",default:!1}),Z("image_list",{processor:te=>{const Se=te===!1||Qn(te)||Gt(te,Ii)||Nt(te);return Se?{value:te,valid:Se}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},co=kn("image_dimensions"),Li=kn("image_advtab"),Ut=kn("image_uploadtab"),Vn=kn("image_prepend_url"),qt=kn("image_class_list"),pe=kn("image_description"),Er=kn("image_title"),$o=kn("image_caption"),Bt=kn("image_list"),Lr=kn("a11y_advanced_options"),Bn=kn("automatic_uploads"),Oc=N=>tr(N.options.get("images_upload_url")),bo=N=>eo(N.options.get("images_upload_handler")),_s=(N,Z)=>Math.max(parseInt(N,10),parseInt(Z,10)),fl=N=>new Promise(Z=>{const te=document.createElement("img"),Se=yn=>{te.onload=te.onerror=null,te.parentNode&&te.parentNode.removeChild(te),Z(yn)};te.onload=()=>{const yn=_s(te.width,te.clientWidth),io=_s(te.height,te.clientHeight),So={width:yn,height:io};Se(Promise.resolve(So))},te.onerror=()=>{Se(Promise.reject(`Failed to get image dimensions for: ${N}`))};const Le=te.style;Le.visibility="hidden",Le.position="fixed",Le.bottom=Le.left="0px",Le.width=Le.height="auto",document.body.appendChild(te),te.src=N}),Bs=N=>(N&&(N=N.replace(/px$/,"")),N),Yo=N=>(N.length>0&&/^[0-9]+$/.test(N)&&(N+="px"),N),Io=N=>{if(N.margin){const Z=String(N.margin).split(" ");switch(Z.length){case 1:N["margin-top"]=N["margin-top"]||Z[0],N["margin-right"]=N["margin-right"]||Z[0],N["margin-bottom"]=N["margin-bottom"]||Z[0],N["margin-left"]=N["margin-left"]||Z[0];break;case 2:N["margin-top"]=N["margin-top"]||Z[0],N["margin-right"]=N["margin-right"]||Z[1],N["margin-bottom"]=N["margin-bottom"]||Z[0],N["margin-left"]=N["margin-left"]||Z[1];break;case 3:N["margin-top"]=N["margin-top"]||Z[0],N["margin-right"]=N["margin-right"]||Z[1],N["margin-bottom"]=N["margin-bottom"]||Z[2],N["margin-left"]=N["margin-left"]||Z[1];break;case 4:N["margin-top"]=N["margin-top"]||Z[0],N["margin-right"]=N["margin-right"]||Z[1],N["margin-bottom"]=N["margin-bottom"]||Z[2],N["margin-left"]=N["margin-left"]||Z[3]}delete N.margin}return N},Dc=(N,Z)=>{const te=Bt(N);Qn(te)?fetch(te).then(Se=>{Se.ok&&Se.json().then(Z)}):Nt(te)?te(Z):Z(te)},gs=(N,Z,te)=>{const Se=()=>{te.onload=te.onerror=null,N.selection&&(N.selection.select(te),N.nodeChanged())};te.onload=()=>{!Z.width&&!Z.height&&co(N)&&N.dom.setAttribs(te,{width:String(te.clientWidth),height:String(te.clientHeight)}),Se()},te.onerror=Se},jn=N=>new Promise((Z,te)=>{const Se=new FileReader;Se.onload=()=>{Z(Se.result)},Se.onerror=()=>{var Le;te((Le=Se.error)===null||Le===void 0?void 0:Le.message)},Se.readAsDataURL(N)}),Pa=N=>N.nodeName==="IMG"&&(N.hasAttribute("data-mce-object")||N.hasAttribute("data-mce-placeholder")),js=(N,Z)=>{const te=N.options.get;return $.isDomSafe(Z,"img",{allow_html_data_urls:te("allow_html_data_urls"),allow_script_urls:te("allow_script_urls"),allow_svg_data_urls:te("allow_svg_data_urls")})},Ss=Ke.DOM,Tr=N=>N.style.marginLeft&&N.style.marginRight&&N.style.marginLeft===N.style.marginRight?Bs(N.style.marginLeft):"",Rc=N=>N.style.marginTop&&N.style.marginBottom&&N.style.marginTop===N.style.marginBottom?Bs(N.style.marginTop):"",li=N=>N.style.borderWidth?Bs(N.style.borderWidth):"",no=(N,Z)=>{var te;return N.hasAttribute(Z)&&(te=N.getAttribute(Z))!==null&&te!==void 0?te:""},Fi=N=>N.parentNode!==null&&N.parentNode.nodeName==="FIGURE",ct=(N,Z,te)=>{te===""||te===null?N.removeAttribute(Z):N.setAttribute(Z,te)},zn=N=>{const Z=Ss.create("figure",{class:"image"});Ss.insertAfter(Z,N),Z.appendChild(N),Z.appendChild(Ss.create("figcaption",{contentEditable:"true"},"Caption")),Z.contentEditable="false"},Kr=N=>{const Z=N.parentNode;eo(Z)&&(Ss.insertAfter(N,Z),Ss.remove(Z))},Gs=N=>{Fi(N)?Kr(N):zn(N)},Za=(N,Z)=>{const te=N.getAttribute("style"),Se=Z(te!==null?te:"");Se.length>0?(N.setAttribute("style",Se),N.setAttribute("data-mce-style",Se)):N.removeAttribute("style")},ya=(N,Z)=>(te,Se,Le)=>{const yn=te.style;yn[Se]?(yn[Se]=Yo(Le),Za(te,Z)):ct(te,Se,Le)},Co=(N,Z)=>N.style[Z]?Bs(N.style[Z]):no(N,Z),Ca=(N,Z)=>{const te=Yo(Z);N.style.marginLeft=te,N.style.marginRight=te},ja=(N,Z)=>{const te=Yo(Z);N.style.marginTop=te,N.style.marginBottom=te},ho=(N,Z)=>{const te=Yo(Z);N.style.borderWidth=te},zt=(N,Z)=>{N.style.borderStyle=Z},$s=N=>{var Z;return(Z=N.style.borderStyle)!==null&&Z!==void 0?Z:""},bc=N=>eo(N)&&N.nodeName==="FIGURE",ql=N=>N.nodeName==="IMG",Kl=N=>Ss.getAttrib(N,"alt").length===0&&Ss.getAttrib(N,"role")==="presentation",Xo=N=>Kl(N)?"":no(N,"alt"),nr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),ls=(N,Z)=>{var te;const Se=document.createElement("img");return ct(Se,"style",Z.style),(Tr(Se)||Z.hspace!=="")&&Ca(Se,Z.hspace),(Rc(Se)||Z.vspace!=="")&&ja(Se,Z.vspace),(li(Se)||Z.border!=="")&&ho(Se,Z.border),($s(Se)||Z.borderStyle!=="")&&zt(Se,Z.borderStyle),N((te=Se.getAttribute("style"))!==null&&te!==void 0?te:"")},vc=(N,Z)=>{const te=document.createElement("img");if(Mc(N,{...Z,caption:!1},te),Is(te,Z.alt,Z.isDecorative),Z.caption){const Se=Ss.create("figure",{class:"image"});return Se.appendChild(te),Se.appendChild(Ss.create("figcaption",{contentEditable:"true"},"Caption")),Se.contentEditable="false",Se}else return te},Ba=(N,Z)=>({src:no(Z,"src"),alt:Xo(Z),title:no(Z,"title"),width:Co(Z,"width"),height:Co(Z,"height"),class:no(Z,"class"),style:N(no(Z,"style")),caption:Fi(Z),hspace:Tr(Z),vspace:Rc(Z),border:li(Z),borderStyle:$s(Z),isDecorative:Kl(Z)}),or=(N,Z,te,Se,Le)=>{te[Se]!==Z[Se]&&Le(N,Se,String(te[Se]))},Is=(N,Z,te)=>{if(te){Ss.setAttrib(N,"role","presentation");const Se=_e.fromDom(N);Oo(Se,"alt","")}else{if(hc(Z)){const Se=_e.fromDom(N);Kt(Se,"alt")}else{const Se=_e.fromDom(N);Oo(Se,"alt",Z)}Ss.getAttrib(N,"role")==="presentation"&&Ss.setAttrib(N,"role","")}},Uo=(N,Z,te)=>{(te.alt!==Z.alt||te.isDecorative!==Z.isDecorative)&&Is(N,te.alt,te.isDecorative)},qs=(N,Z)=>(te,Se,Le)=>{N(te,Le),Za(te,Z)},Mc=(N,Z,te)=>{const Se=Ba(N,te);or(te,Se,Z,"caption",(Le,yn,io)=>Gs(Le)),or(te,Se,Z,"src",ct),or(te,Se,Z,"title",ct),or(te,Se,Z,"width",ya("width",N)),or(te,Se,Z,"height",ya("height",N)),or(te,Se,Z,"class",ct),or(te,Se,Z,"style",qs((Le,yn)=>ct(Le,"style",yn),N)),or(te,Se,Z,"hspace",qs(Ca,N)),or(te,Se,Z,"vspace",qs(ja,N)),or(te,Se,Z,"border",qs(ho,N)),or(te,Se,Z,"borderStyle",qs(zt,N)),Uo(te,Se,Z)},Ga=(N,Z)=>{const te=N.dom.styles.parse(Z),Se=Io(te),Le=N.dom.styles.parse(N.dom.styles.serialize(Se));return N.dom.styles.serialize(Le)},gl=N=>{const Z=N.selection.getNode(),te=N.dom.getParent(Z,"figure.image");return te?N.dom.select("img",te)[0]:Z&&(Z.nodeName!=="IMG"||Pa(Z))?null:Z},Zc=(N,Z)=>{var te;const Se=N.dom,Le=Tn(N.schema.getTextBlockElements(),(io,So)=>!N.schema.isValidChild(So,"figure")),yn=Se.getParent(Z.parentNode,io=>re(Le,io.nodeName),N.getBody());return yn&&(te=Se.split(yn,Z))!==null&&te!==void 0?te:Z},Sd=N=>{const Z=gl(N);return Z?Ba(te=>Ga(N,te),Z):nr()},he=(N,Z)=>{const te=vc(Le=>Ga(N,Le),Z);N.dom.setAttrib(te,"data-mce-id","__mcenew"),N.focus(),N.selection.setContent(te.outerHTML);const Se=N.dom.select('*[data-mce-id="__mcenew"]')[0];if(N.dom.setAttrib(Se,"data-mce-id",null),bc(Se)){const Le=Zc(N,Se);N.selection.select(Le)}else N.selection.select(Se)},Yr=(N,Z)=>{N.dom.setAttrib(Z,"src",Z.getAttribute("src"))},$a=(N,Z)=>{if(Z){const te=N.dom.is(Z.parentNode,"figure.image")?Z.parentNode:Z;N.dom.remove(te),N.focus(),N.nodeChanged(),N.dom.isEmpty(N.getBody())&&(N.setContent(""),N.selection.setCursorLocation())}},Ou=(N,Z)=>{const te=gl(N);if(te)if(Mc(Se=>Ga(N,Se),Z,te),Yr(N,te),bc(te.parentNode)){const Se=te.parentNode;Zc(N,Se),N.selection.select(te.parentNode)}else N.selection.select(te),gs(N,Z,te)},Du=(N,Z)=>{const te=Z.src;return{...Z,src:js(N,te)?te:""}},No=(N,Z)=>{const te=gl(N);if(te){const Le={...Ba(io=>Ga(N,io),te),...Z},yn=Du(N,Le);Le.src?Ou(N,yn):$a(N,te)}else Z.src&&he(N,{...nr(),...Z})},Xr=(N=>(...Z)=>{if(Z.length===0)throw new Error("Can't merge zero objects");const te={};for(let Se=0;Se<Z.length;Se++){const Le=Z[Se];for(const yn in Le)Me(Le,yn)&&(te[yn]=N(te[yn],Le[yn]))}return te})((N,Z)=>fs(N)&&fs(Z)?Xr(N,Z):Z);var Hi=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ls=tinymce.util.Tools.resolve("tinymce.util.Tools");const Jo=N=>Qn(N.value)?N.value:"",jc=N=>Qn(N.text)?N.text:Qn(N.title)?N.title:"",kr=(N,Z)=>{const te=[];return Ls.each(N,Se=>{const Le=jc(Se);if(Se.menu!==void 0){const yn=kr(Se.menu,Z);te.push({text:Le,items:yn})}else{const yn=Z(Se);te.push({text:Le,value:yn})}}),te},hs=(N=Jo)=>Z=>Z?ut.from(Z).map(te=>kr(te,N)):ut.none(),di=N=>hs(Jo)(N),ra=N=>Me(N,"items"),$n=(N,Z)=>Mo(N,te=>ra(te)?$n(te.items,Z):te.value===Z?ut.some(te):ut.none()),Ks={sanitizer:hs,sanitize:di,findEntry:(N,Z)=>N.bind(te=>$n(te,Z))},ca={makeTab:N=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ys=N=>{const Z=Ks.sanitizer(Po=>N.convertURL(Po.value||Po.url||"","src")),te=new Promise(Po=>{Dc(N,La=>{Po(Z(La).map(uf=>Hn([[{text:"None",value:""}],uf])))})}),Se=Ks.sanitize(qt(N)),Le=Li(N),yn=Ut(N),io=Oc(N),So=bo(N),je=Sd(N),Do=pe(N),vr=Er(N),zi=co(N),cn=$o(N),qc=Lr(N),Ia=Bn(N),sr=ut.some(Vn(N)).filter(Po=>Qn(Po)&&Po.length>0);return te.then(Po=>({image:je,imageList:Po,classList:Se,hasAdvTab:Le,hasUploadTab:yn,hasUploadUrl:io,hasUploadHandler:So,hasDescription:Do,hasImageTitle:vr,hasDimensions:zi,hasImageCaption:cn,prependURL:sr,hasAccessibilityOptions:qc,automaticUploads:Ia}))},Wo=N=>{const Z={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},te=N.imageList.map(vr=>({name:"images",type:"listbox",label:"Image list",items:vr})),Se={name:"alt",type:"input",label:"Alternative description",enabled:!(N.hasAccessibilityOptions&&N.image.isDecorative)},Le={name:"title",type:"input",label:"Image title"},yn={name:"dimensions",type:"sizeinput"},io={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},So=N.classList.map(vr=>({name:"classes",type:"listbox",label:"Class",items:vr})),je={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Do=vr=>vr?{type:"grid",columns:2}:{type:"panel"};return Hn([[Z],te.toArray(),N.hasAccessibilityOptions&&N.hasDescription?[io]:[],N.hasDescription?[Se]:[],N.hasImageTitle?[Le]:[],N.hasDimensions?[yn]:[],[{...Do(N.classList.isSome()&&N.hasImageCaption),items:Hn([So.toArray(),N.hasImageCaption?[je]:[]])}]])},Gc={makeTab:N=>({title:"General",name:"general",items:Wo(N)}),makeItems:Wo},hr={makeTab:N=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},pr=N=>({prevImage:Ks.findEntry(N.imageList,N.image.src),prevAlt:N.image.alt,open:!0}),Fs=N=>({src:{value:N.src,meta:{}},images:N.src,alt:N.alt,title:N.title,dimensions:{width:N.width,height:N.height},classes:N.class,caption:N.caption,style:N.style,vspace:N.vspace,border:N.border,hspace:N.hspace,borderstyle:N.borderStyle,fileinput:[],isDecorative:N.isDecorative}),mi=(N,Z)=>({src:N.src.value,alt:(N.alt===null||N.alt.length===0)&&Z?null:N.alt,title:N.title,width:N.dimensions.width,height:N.dimensions.height,class:N.classes,style:N.style,caption:N.caption,hspace:N.hspace,vspace:N.vspace,border:N.border,borderStyle:N.borderstyle,isDecorative:N.isDecorative}),Jr=(N,Z)=>/^(?:[a-zA-Z]+:)?\/\//.test(Z)?ut.none():N.prependURL.bind(te=>Z.substring(0,te.length)!==te?ut.some(te+Z):ut.none()),Qr=(N,Z)=>{const te=Z.getData();Jr(N,te.src.value).each(Se=>{Z.setData({src:{value:Se,meta:te.src.meta}})})},Nc=(N,Z,te)=>{N.hasDescription&&Qn(te.alt)&&(Z.alt=te.alt),N.hasAccessibilityOptions&&(Z.isDecorative=te.isDecorative||Z.isDecorative||!1),N.hasImageTitle&&Qn(te.title)&&(Z.title=te.title),N.hasDimensions&&(Qn(te.width)&&(Z.dimensions.width=te.width),Qn(te.height)&&(Z.dimensions.height=te.height)),Qn(te.class)&&Ks.findEntry(N.classList,te.class).each(Se=>{Z.classes=Se.value}),N.hasImageCaption&&er(te.caption)&&(Z.caption=te.caption),N.hasAdvTab&&(Qn(te.style)&&(Z.style=te.style),Qn(te.vspace)&&(Z.vspace=te.vspace),Qn(te.border)&&(Z.border=te.border),Qn(te.hspace)&&(Z.hspace=te.hspace),Qn(te.borderstyle)&&(Z.borderstyle=te.borderstyle))},Pc=(N,Z)=>{const te=Z.getData(),Se=te.src.meta;if(Se!==void 0){const Le=Xr({},te);Nc(N,Le,Se),Z.setData(Le)}},hl=(N,Z,te,Se)=>{const Le=Se.getData(),yn=Le.src.value,io=Le.src.meta||{};!io.width&&!io.height&&Z.hasDimensions&&(tr(yn)?N.imageSize(yn).then(So=>{te.open&&Se.setData({dimensions:So})}).catch(So=>console.error(So)):Se.setData({dimensions:{width:"",height:""}}))},Vi=(N,Z,te)=>{const Se=te.getData(),Le=Ks.findEntry(N.imageList,Se.src.value);Z.prevImage=Le,te.setData({images:Le.map(yn=>yn.value).getOr("")})},fi=(N,Z,te,Se)=>{Qr(Z,Se),Pc(Z,Se),hl(N,Z,te,Se),Vi(Z,te,Se)},Bc=(N,Z,te,Se)=>{const Le=Se.getData(),yn=Ks.findEntry(Z.imageList,Le.images);yn.each(io=>{Le.alt===""||te.prevImage.map(je=>je.text===Le.alt).getOr(!1)?io.value===""?Se.setData({src:io,alt:te.prevAlt}):Se.setData({src:io,alt:io.text}):Se.setData({src:io})}),te.prevImage=yn,fi(N,Z,te,Se)},_r=(N,Z,te,Se)=>{const Le=Se.getData();Se.block("Uploading image"),k(Le.fileinput).fold(()=>{Se.unblock()},yn=>{const io=URL.createObjectURL(yn),So=()=>{Se.unblock(),URL.revokeObjectURL(io)},je=Do=>{Se.setData({src:{value:Do,meta:{}}}),Se.showTab("general"),fi(N,Z,te,Se),Se.focus("src")};jn(yn).then(Do=>{const vr=N.createBlobCache(yn,io,Do);Z.automaticUploads?N.uploadImage(vr).then(zi=>{je(zi.url),So()}).catch(zi=>{So(),N.alertErr(zi,()=>{Se.focus("fileinput")})}):(N.addToBlobCache(vr),je(vr.blobUri()),Se.unblock())})})},gi=(N,Z,te)=>(Se,Le)=>{Le.name==="src"?fi(N,Z,te,Se):Le.name==="images"?Bc(N,Z,te,Se):Le.name==="alt"?te.prevAlt=Se.getData().alt:Le.name==="fileinput"?_r(N,Z,te,Se):Le.name==="isDecorative"&&Se.setEnabled("alt",!Se.getData().isDecorative)},hi=N=>()=>{N.open=!1},pl=N=>N.hasAdvTab||N.hasUploadUrl||N.hasUploadHandler?{type:"tabpanel",tabs:Hn([[Gc.makeTab(N)],N.hasAdvTab?[ca.makeTab(N)]:[],N.hasUploadTab&&(N.hasUploadUrl||N.hasUploadHandler)?[hr.makeTab(N)]:[]])}:{type:"panel",items:Gc.makeItems(N)},Ka=(N,Z,te)=>Se=>{const Le=Xr(Fs(Z.image),Se.getData()),yn={...Le,style:ls(te.normalizeCss,mi(Le,!1))};N.execCommand("mceUpdateImage",!1,mi(yn,Z.hasAccessibilityOptions)),N.editorUpload.uploadImagesAuto(),Se.close()},Xs=N=>Z=>js(N,Z)?fl(N.documentBaseURI.toAbsolute(Z)).then(te=>({width:String(te.width),height:String(te.height)})):Promise.resolve({width:"",height:""}),Ya=N=>(Z,te,Se)=>{var Le;return N.editorUpload.blobCache.create({blob:Z,blobUri:te,name:(Le=Z.name)===null||Le===void 0?void 0:Le.replace(/\.[^\.]+$/,""),filename:Z.name,base64:Se.split(",")[1]})},br=N=>Z=>{N.editorUpload.blobCache.add(Z)},yc=N=>(Z,te)=>{N.windowManager.alert(Z,te)},Yl=N=>Z=>Ga(N,Z),Xl=N=>Z=>N.dom.parseStyle(Z),H=N=>(Z,te)=>N.dom.serializeStyle(Z,te),J=N=>Z=>Hi(N).upload([Z],!1).then(te=>{var Se;return te.length===0?Promise.reject("Failed to upload image"):te[0].status===!1?Promise.reject((Se=te[0].error)===null||Se===void 0?void 0:Se.message):te[0]}),ie=N=>{const Z={imageSize:Xs(N),addToBlobCache:br(N),createBlobCache:Ya(N),alertErr:yc(N),normalizeCss:Yl(N),parseStyle:Xl(N),serializeStyle:H(N),uploadImage:J(N)};return{open:()=>{Ys(N).then(Se=>{const Le=pr(Se);return{title:"Insert/Edit Image",size:"normal",body:pl(Se),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Fs(Se.image),onSubmit:Ka(N,Se,Z),onChange:gi(Z,Se,Le),onClose:hi(Le)}}).then(N.windowManager.open)}}},Ne=N=>{N.addCommand("mceImage",ie(N).open),N.addCommand("mceUpdateImage",(Z,te)=>{N.undoManager.transact(()=>No(N,te))})},Xe=N=>{const Z=N.attr("class");return eo(Z)&&/\bimage\b/.test(Z)},Pe=N=>Z=>{let te=Z.length;const Se=Le=>{Le.attr("contenteditable",N?"true":null)};for(;te--;){const Le=Z[te];Xe(Le)&&(Le.attr("contenteditable",N?"false":null),Ls.each(Le.getAll("figcaption"),Se))}},to=N=>{N.on("PreInit",()=>{N.parser.addNodeFilter("figure",Pe(!0)),N.serializer.addNodeFilter("figure",Pe(!1))})},_t=N=>Z=>{const te=()=>{Z.setEnabled(N.selection.isEditable())};return N.on("NodeChange",te),te(),()=>{N.off("NodeChange",te)}},sn=N=>{N.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ie(N).open,onSetup:Z=>{Z.setActive(eo(gl(N)));const te=N.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",Z.setActive).unbind,Se=_t(N)(Z);return()=>{te(),Se()}}}),N.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ie(N).open,onSetup:_t(N)}),N.ui.registry.addContextMenu("image",{update:Z=>N.selection.isEditable()&&(bc(Z)||ql(Z)&&!Pa(Z))?["image"]:[]})};var Qo=()=>{mn.add("image",N=>{zo(N),to(N),sn(N),Ne(N)})};Qo()})();(function(){const mn=W=>{let K=W;return{get:()=>K,set:Ft=>{K=Ft}}};var Fn=tinymce.util.Tools.resolve("tinymce.PluginManager");const Kn=W=>({isFullscreen:()=>W.get()!==null}),Xn=(W,K,Ce)=>{var Be;return Ce(W,K.prototype)?!0:((Be=W.constructor)===null||Be===void 0?void 0:Be.name)===K.name},po=W=>{const K=typeof W;return W===null?"null":K==="object"&&Array.isArray(W)?"array":K==="object"&&Xn(W,String,(Ce,Be)=>Be.isPrototypeOf(Ce))?"string":K},as=W=>K=>po(K)===W,Vo=W=>K=>typeof K===W,bn=W=>K=>W===K,Qn=as("string"),Ii=as("object"),fs=as("array"),Ir=bn(null),hc=Vo("boolean"),er=bn(void 0),Wc=W=>W==null,eo=W=>!Wc(W),Nt=Vo("function"),pc=Vo("number"),Gt=()=>{},ce=(W,K)=>(...Ce)=>W(K.apply(null,Ce)),ut=(W,K)=>Ce=>W(K(Ce)),Ao=W=>()=>W;function Zn(W,...K){return(...Ce)=>{const Be=K.concat(Ce);return W.apply(null,Be)}}const le=Ao(!1),vn=Ao(!0);class fn{constructor(K,Ce){this.tag=K,this.value=Ce}static some(K){return new fn(!0,K)}static none(){return fn.singletonNone}fold(K,Ce){return this.tag?Ce(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?fn.some(K(this.value)):fn.none()}bind(K){return this.tag?K(this.value):fn.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:fn.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return eo(K)?fn.some(K):fn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}fn.singletonNone=new fn(!1);const Tn=Array.prototype.push,Me=(W,K)=>{const Ce=W.length,Be=new Array(Ce);for(let Ft=0;Ft<Ce;Ft++){const Nn=W[Ft];Be[Ft]=K(Nn,Ft)}return Be},re=(W,K)=>{for(let Ce=0,Be=W.length;Ce<Be;Ce++){const Ft=W[Ce];K(Ft,Ce)}},is=(W,K)=>{const Ce=[];for(let Be=0,Ft=W.length;Be<Ft;Be++){const Nn=W[Be];K(Nn,Be)&&Ce.push(Nn)}return Ce},Hn=(W,K,Ce)=>{for(let Be=0,Ft=W.length;Be<Ft;Be++){const Nn=W[Be];if(K(Nn,Be))return fn.some(Nn);if(Ce(Nn,Be))break}return fn.none()},kt=(W,K)=>Hn(W,K,le),k=W=>{const K=[];for(let Ce=0,Be=W.length;Ce<Be;++Ce){if(!fs(W[Ce]))throw new Error("Arr.flatten item "+Ce+" was not an array, input: "+W);Tn.apply(K,W[Ce])}return K},Mo=(W,K)=>k(Me(W,K)),et=(W,K)=>K>=0&&K<W.length?fn.some(W[K]):fn.none(),Oo=W=>et(W,0),Kt=(W,K)=>{for(let Ce=0;Ce<W.length;Ce++){const Be=K(W[Ce],Ce);if(Be.isSome())return Be}return fn.none()},Ve=(W,K,Ce)=>W.isSome()&&K.isSome()?fn.some(Ce(W.getOrDie(),K.getOrDie())):fn.none(),yo=W=>{const K=mn(fn.none()),Ce=()=>K.get().each(W);return{clear:()=>{Ce(),K.set(fn.none())},isSet:()=>K.get().isSome(),get:()=>K.get(),set:Bo=>{Ce(),K.set(fn.some(Bo))}}},ks=()=>yo(W=>W.unbind()),it=()=>{const W=yo(Gt);return{...W,on:Ce=>W.get().each(Ce)}},Xt=(W,K)=>{let Ce=null;return{cancel:()=>{Ir(Ce)||(clearTimeout(Ce),Ce=null)},throttle:(...Nn)=>{Ir(Ce)&&(Ce=setTimeout(()=>{Ce=null,W.apply(null,Nn)},K))}}},_e=Object.keys,Ke=(W,K)=>{const Ce=_e(W);for(let Be=0,Ft=Ce.length;Be<Ft;Be++){const Nn=Ce[Be],Cn=W[Nn];K(Cn,Nn)}},$=typeof window<"u"?window:Function("return this;")(),tr=(W,K)=>{let Ce=K??$;for(let Be=0;Be<W.length&&Ce!==void 0&&Ce!==null;++Be)Ce=Ce[W[Be]];return Ce},kn=(W,K)=>{const Ce=W.split(".");return tr(Ce,K)},zo=(W,K)=>kn(W,K),co=(W,K)=>{const Ce=zo(W,K);if(Ce==null)throw new Error(W+" not available on this browser");return Ce},Li=Object.getPrototypeOf,Ut=W=>co("HTMLElement",W),Vn=W=>{const K=kn("ownerDocument.defaultView",W);return Ii(W)&&(Ut(K).prototype.isPrototypeOf(W)||/^HTML\w*Element$/.test(Li(W).constructor.name))},qt=9,pe=11,Er=1,$o=3,Bt=W=>W.dom.nodeType,Lr=W=>K=>Bt(K)===W,Bn=W=>Oc(W)&&Vn(W.dom),Oc=Lr(Er),bo=Lr($o),_s=Lr(pe),fl=(W,K,Ce)=>{if(Qn(Ce)||hc(Ce)||pc(Ce))W.setAttribute(K,Ce+"");else throw console.error("Invalid call to Attribute.set. Key ",K,":: Value ",Ce,":: Element ",W),new Error("Attribute value was not simple")},Bs=(W,K,Ce)=>{fl(W.dom,K,Ce)},Yo=(W,K)=>{const Ce=W.dom.getAttribute(K);return Ce===null?void 0:Ce},Io=(W,K)=>{W.dom.removeAttribute(K)},Dc=W=>W.dom.classList!==void 0,gs=(W,K)=>Dc(W)&&W.dom.classList.contains(K),jn=(W,K,Ce=0,Be)=>{const Ft=W.indexOf(K,Ce);return Ft!==-1?er(Be)?!0:Ft+K.length<=Be:!1},Pa=W=>W.style!==void 0&&Nt(W.style.getPropertyValue),js=(W,K)=>{const Be=(K||document).createElement("div");if(Be.innerHTML=W,!Be.hasChildNodes()||Be.childNodes.length>1){const Ft="HTML does not have a single root node";throw console.error(Ft,W),new Error(Ft)}return Rc(Be.childNodes[0])},Ss=(W,K)=>{const Be=(K||document).createElement(W);return Rc(Be)},Tr=(W,K)=>{const Be=(K||document).createTextNode(W);return Rc(Be)},Rc=W=>{if(W==null)throw new Error("Node cannot be null or undefined");return{dom:W}},no={fromHtml:js,fromTag:Ss,fromText:Tr,fromDom:Rc,fromPoint:(W,K,Ce)=>fn.from(W.dom.elementFromPoint(K,Ce)).map(Rc)},Fi=(W,K)=>{const Ce=W.dom;if(Ce.nodeType!==Er)return!1;{const Be=Ce;if(Be.matches!==void 0)return Be.matches(K);if(Be.msMatchesSelector!==void 0)return Be.msMatchesSelector(K);if(Be.webkitMatchesSelector!==void 0)return Be.webkitMatchesSelector(K);if(Be.mozMatchesSelector!==void 0)return Be.mozMatchesSelector(K);throw new Error("Browser lacks native selectors")}},ct=W=>W.nodeType!==Er&&W.nodeType!==qt&&W.nodeType!==pe||W.childElementCount===0,zn=(W,K)=>{const Ce=document;return ct(Ce)?[]:Me(Ce.querySelectorAll(W),no.fromDom)},Kr=(W,K)=>W.dom===K.dom,Gs=W=>no.fromDom(W.dom.ownerDocument),Za=W=>fn.from(W.dom.parentNode).map(no.fromDom),ya=(W,K)=>{const Ce=Nt(K)?K:le;let Be=W.dom;const Ft=[];for(;Be.parentNode!==null&&Be.parentNode!==void 0;){const Nn=Be.parentNode,Cn=no.fromDom(Nn);if(Ft.push(Cn),Ce(Cn)===!0)break;Be=Nn}return Ft},Co=W=>{const K=Ce=>is(Ce,Be=>!Kr(W,Be));return Za(W).map(ja).map(K).getOr([])},Ca=W=>fn.from(W.dom.nextSibling).map(no.fromDom),ja=W=>Me(W.dom.childNodes,no.fromDom),ho=W=>_s(W)&&eo(W.dom.host),zt=W=>no.fromDom(W.dom.getRootNode()),$s=W=>{const K=zt(W);return ho(K)?fn.some(K):fn.none()},bc=W=>no.fromDom(W.dom.host),ql=W=>{if(eo(W.target)){const K=no.fromDom(W.target);if(Oc(K)&&Kl(K)&&W.composed&&W.composedPath){const Ce=W.composedPath();if(Ce)return Oo(Ce)}}return fn.from(W.target)},Kl=W=>eo(W.dom.shadowRoot),Xo=W=>{const K=bo(W)?W.dom.parentNode:W.dom;if(K==null||K.ownerDocument===null)return!1;const Ce=K.ownerDocument;return $s(no.fromDom(K)).fold(()=>Ce.body.contains(K),ut(Xo,bc))},nr=W=>{const K=W.dom.body;if(K==null)throw new Error("Body is not available yet");return no.fromDom(K)},ls=(W,K,Ce)=>{if(!Qn(Ce))throw console.error("Invalid call to CSS.set. Property ",K,":: Value ",Ce,":: Element ",W),new Error("CSS value must be a string: "+Ce);Pa(W)&&W.style.setProperty(K,Ce)},vc=(W,K,Ce)=>{const Be=W.dom;ls(Be,K,Ce)},Ba=(W,K)=>{const Ce=W.dom;Ke(K,(Be,Ft)=>{ls(Ce,Ft,Be)})},or=(W,K)=>{const Ce=W.dom,Ft=window.getComputedStyle(Ce).getPropertyValue(K);return Ft===""&&!Xo(W)?Is(Ce,K):Ft},Is=(W,K)=>Pa(W)?W.style.getPropertyValue(K):"",Uo=(W,K,Ce,Be,Ft,Nn,Cn)=>({target:W,x:K,y:Ce,stop:Be,prevent:Ft,kill:Nn,raw:Cn}),qs=W=>{const K=no.fromDom(ql(W).getOr(W.target)),Ce=()=>W.stopPropagation(),Be=()=>W.preventDefault(),Ft=ce(Be,Ce);return Uo(K,W.clientX,W.clientY,Ce,Be,Ft,W)},Mc=(W,K)=>Ce=>{W(Ce)&&K(qs(Ce))},Ga=(W,K,Ce,Be,Ft)=>{const Nn=Mc(Ce,Be);return W.dom.addEventListener(K,Nn,Ft),{unbind:Zn(Zc,W,K,Nn,Ft)}},gl=(W,K,Ce,Be)=>Ga(W,K,Ce,Be,!1),Zc=(W,K,Ce,Be)=>{W.dom.removeEventListener(K,Ce,Be)},Sd=vn,he=(W,K,Ce)=>gl(W,K,Sd,Ce),Yr=W=>{let K=!1,Ce;return(...Be)=>(K||(K=!0,Ce=W.apply(null,Be)),Ce)},$a=(W,K,Ce,Be)=>{const Ft=W.isiOS()&&/ipad/i.test(Ce)===!0,Nn=W.isiOS()&&!Ft,Cn=W.isiOS()||W.isAndroid(),Bo=Cn||Be("(pointer:coarse)"),Hs=Ft||!Nn&&Cn&&Be("(min-device-width:768px)"),$c=Nn||Cn&&!Hs,ec=K.isSafari()&&W.isiOS()&&/safari/i.test(Ce)===!1,Vs=!$c&&!Hs&&!ec;return{isiPad:Ao(Ft),isiPhone:Ao(Nn),isTablet:Ao(Hs),isPhone:Ao($c),isTouch:Ao(Bo),isAndroid:W.isAndroid,isiOS:W.isiOS,isWebView:Ao(ec),isDesktop:Ao(Vs)}},Ou=(W,K)=>{for(let Ce=0;Ce<W.length;Ce++){const Be=W[Ce];if(Be.test(K))return Be}},Du=(W,K)=>{const Ce=Ou(W,K);if(!Ce)return{major:0,minor:0};const Be=Ft=>Number(K.replace(Ce,"$"+Ft));return ui(Be(1),Be(2))},No=(W,K)=>{const Ce=String(K).toLowerCase();return W.length===0?Ru():Du(W,Ce)},Ru=()=>ui(0,0),ui=(W,K)=>({major:W,minor:K}),Xr={nu:ui,detect:No,unknown:Ru},Hi=(W,K)=>Kt(K.brands,Ce=>{const Be=Ce.brand.toLowerCase();return kt(W,Ft=>{var Nn;return Be===((Nn=Ft.brand)===null||Nn===void 0?void 0:Nn.toLowerCase())}).map(Ft=>({current:Ft.name,version:Xr.nu(parseInt(Ce.version,10),0)}))}),Ls=(W,K)=>{const Ce=String(K).toLowerCase();return kt(W,Be=>Be.search(Ce))},Jo=(W,K)=>Ls(W,K).map(Ce=>{const Be=Xr.detect(Ce.versionRegexes,K);return{current:Ce.name,version:Be}}),jc=(W,K)=>Ls(W,K).map(Ce=>{const Be=Xr.detect(Ce.versionRegexes,K);return{current:Ce.name,version:Be}}),kr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hs=W=>K=>jn(K,W),di=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:W=>jn(W,"edge/")&&jn(W,"chrome")&&jn(W,"safari")&&jn(W,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kr],search:W=>jn(W,"chrome")&&!jn(W,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:W=>jn(W,"msie")||jn(W,"trident")},{name:"Opera",versionRegexes:[kr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hs("firefox")},{name:"Safari",versionRegexes:[kr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:W=>(jn(W,"safari")||jn(W,"mobile/"))&&jn(W,"applewebkit")}],ra=[{name:"Windows",search:hs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:W=>jn(W,"iphone")||jn(W,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:hs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hs("linux"),versionRegexes:[]},{name:"Solaris",search:hs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:hs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$n={browsers:Ao(di),oses:Ao(ra)},ur="Edge",Ks="Chromium",qa="IE",ca="Opera",Ys="Firefox",Wo="Safari",rm=()=>Gc({current:void 0,version:Xr.unknown()}),Gc=W=>{const K=W.current,Ce=W.version,Be=Ft=>()=>K===Ft;return{current:K,version:Ce,isEdge:Be(ur),isChromium:Be(Ks),isIE:Be(qa),isOpera:Be(ca),isFirefox:Be(Ys),isSafari:Be(Wo)}},ao={unknown:rm,nu:Gc,edge:Ao(ur),chromium:Ao(Ks),ie:Ao(qa),opera:Ao(ca),firefox:Ao(Ys),safari:Ao(Wo)},hr="Windows",pr="iOS",Fs="Android",mi="Linux",Jr="macOS",Qr="Solaris",Nc="FreeBSD",Pc="ChromeOS",hl=()=>Vi({current:void 0,version:Xr.unknown()}),Vi=W=>{const K=W.current,Ce=W.version,Be=Ft=>()=>K===Ft;return{current:K,version:Ce,isWindows:Be(hr),isiOS:Be(pr),isAndroid:Be(Fs),isMacOS:Be(Jr),isLinux:Be(mi),isSolaris:Be(Qr),isFreeBSD:Be(Nc),isChromeOS:Be(Pc)}},fi={unknown:hl,nu:Vi,windows:Ao(hr),ios:Ao(pr),android:Ao(Fs),linux:Ao(mi),macos:Ao(Jr),solaris:Ao(Qr),freebsd:Ao(Nc),chromeos:Ao(Pc)},_r={detect:(W,K,Ce)=>{const Be=$n.browsers(),Ft=$n.oses(),Nn=K.bind(Hs=>Hi(Be,Hs)).orThunk(()=>Jo(Be,W)).fold(ao.unknown,ao.nu),Cn=jc(Ft,W).fold(fi.unknown,fi.nu),Bo=$a(Cn,Nn,W,Ce);return{browser:Nn,os:Cn,deviceType:Bo}}},gi=W=>window.matchMedia(W).matches;let hi=Yr(()=>_r.detect(window.navigator.userAgent,fn.from(window.navigator.userAgentData),gi));const pl=()=>hi(),Ka=(W,K)=>({left:W,top:K,translate:(Be,Ft)=>Ka(W+Be,K+Ft)}),Xs=Ka,Ya=W=>{const K=W!==void 0?W.dom:document,Ce=K.body.scrollLeft||K.documentElement.scrollLeft,Be=K.body.scrollTop||K.documentElement.scrollTop;return Xs(Ce,Be)},br=W=>{const K=W===void 0?window:W;return pl().browser.isFirefox()?fn.none():fn.from(K.visualViewport)},yc=(W,K,Ce,Be)=>({x:W,y:K,width:Ce,height:Be,right:W+Ce,bottom:K+Be}),Yl=W=>{const K=W===void 0?window:W,Ce=K.document,Be=Ya(no.fromDom(Ce));return br(K).fold(()=>{const Ft=K.document.documentElement,Nn=Ft.clientWidth,Cn=Ft.clientHeight;return yc(Be.left,Be.top,Nn,Cn)},Ft=>yc(Math.max(Ft.pageLeft,Be.left),Math.max(Ft.pageTop,Be.top),Ft.width,Ft.height))},Xl=(W,K,Ce)=>br(Ce).map(Be=>{const Ft=Nn=>K(qs(Nn));return Be.addEventListener(W,Ft),{unbind:()=>Be.removeEventListener(W,Ft)}}).getOrThunk(()=>({unbind:Gt}));var H=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),J=tinymce.util.Tools.resolve("tinymce.Env");const ie=(W,K)=>{W.dispatch("FullscreenStateChanged",{state:K}),W.dispatch("ResizeEditor")},Ne=W=>K=>K.options.get(W),Xe=W=>{const K=W.options.register;K("fullscreen_native",{processor:"boolean",default:!1})},Pe=Ne("fullscreen_native"),to=W=>{const K=no.fromDom(W.getElement());return $s(K).map(bc).getOrThunk(()=>nr(Gs(K)))},_t=W=>W.fullscreenElement!==void 0?W.fullscreenElement:W.msFullscreenElement!==void 0?W.msFullscreenElement:W.webkitFullscreenElement!==void 0?W.webkitFullscreenElement:null,sn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Qo=W=>{const K=W.dom;K.requestFullscreen?K.requestFullscreen():K.msRequestFullscreen?K.msRequestFullscreen():K.webkitRequestFullScreen&&K.webkitRequestFullScreen()},N=W=>{const K=W.dom;K.exitFullscreen?K.exitFullscreen():K.msExitFullscreen?K.msExitFullscreen():K.webkitCancelFullScreen&&K.webkitCancelFullScreen()},Z=W=>W.dom===_t(Gs(W).dom),te=(W,K,Ce)=>is(ya(W,Ce),K),Se=(W,K)=>is(Co(W),K),Le=W=>zn(W),yn=(W,K,Ce)=>te(W,Be=>Fi(Be,K),Ce),io=(W,K)=>Se(W,Ce=>Fi(Ce,K)),So="data-ephox-mobile-fullscreen-style",je="display:none!important;",Do="position:absolute!important;",vr="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",zi="background-color:rgb(255,255,255)!important;",cn=J.os.isAndroid(),qc=W=>{const K=or(W,"background-color");return K!==void 0&&K!==""?"background-color:"+K+"!important":zi},Ia=(W,K,Ce)=>{const Be=$c=>io($c,"*:not(.tox-silver-sink)"),Ft=$c=>ec=>{const Vs=Yo(ec,"style"),zs=Vs===void 0?"no-styles":Vs.trim();zs!==$c&&(Bs(ec,So,zs),Ba(ec,W.parseStyle($c)))},Nn=yn(K,"*"),Cn=Mo(Nn,Be),Bo=qc(Ce);re(Cn,Ft(je)),re(Nn,Ft(Do+vr+Bo)),Ft((cn===!0?"":Do)+vr+Bo)(K)},sr=W=>{const K=Le("["+So+"]");re(K,Ce=>{const Be=Yo(Ce,So);Be&&Be!=="no-styles"?Ba(Ce,W.parseStyle(Be)):Io(Ce,"style"),Io(Ce,So)})},Po=H.DOM,La=()=>Yl(window),uf=W=>window.scrollTo(W.x,W.y),wd=br().fold(()=>({bind:Gt,unbind:Gt}),W=>{const K=it(),Ce=ks(),Be=ks(),Ft=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Nn=()=>{window.requestAnimationFrame(()=>{K.on($c=>Ba($c,{top:W.offsetTop+"px",left:W.offsetLeft+"px",height:W.height+"px",width:W.width+"px"}))})},Cn=Xt(()=>{Ft(),Nn()},50);return{bind:$c=>{K.set($c),Cn.throttle(),Ce.set(Xl("resize",Cn.throttle)),Be.set(Xl("scroll",Cn.throttle))},unbind:()=>{K.on(()=>{Ce.clear(),Be.clear()}),K.clear()}}}),us=(W,K)=>{const Ce=document.body,Be=document.documentElement,Ft=W.getContainer(),Nn=no.fromDom(Ft),Cn=Ca(Nn).filter(As=>Bn(As)&&gs(As,"tox-silver-sink")),Bo=to(W),Hs=K.get(),$c=no.fromDom(W.getBody()),ec=J.deviceType.isTouch(),Vs=Ft.style,zs=W.iframeElement,dr=zs==null?void 0:zs.style,tc=As=>{As(Ce,"tox-fullscreen"),As(Be,"tox-fullscreen"),As(Ft,"tox-fullscreen"),$s(Nn).map(bs=>bc(bs).dom).each(bs=>{As(bs,"tox-fullscreen"),As(bs,"tox-shadowhost")})},Kc=()=>{ec&&sr(W.dom),tc(Po.removeClass),wd.unbind(),fn.from(K.get()).each(As=>As.fullscreenChangeHandler.unbind())};if(Hs)Hs.fullscreenChangeHandler.unbind(),Pe(W)&&Z(Bo)&&N(Gs(Bo)),dr.width=Hs.iframeWidth,dr.height=Hs.iframeHeight,Vs.width=Hs.containerWidth,Vs.height=Hs.containerHeight,Vs.top=Hs.containerTop,Vs.left=Hs.containerLeft,Ve(Cn,Hs.sinkCssPosition,(As,bs)=>{vc(As,"position",bs)}),Kc(),uf(Hs.scrollPos),K.set(null),ie(W,!1),W.off("remove",Kc);else{const As=he(Gs(Bo),sn(),bl=>{Pe(W)&&!Z(Bo)&&K.get()!==null&&us(W,K)}),bs={scrollPos:La(),containerWidth:Vs.width,containerHeight:Vs.height,containerTop:Vs.top,containerLeft:Vs.left,iframeWidth:dr.width,iframeHeight:dr.height,fullscreenChangeHandler:As,sinkCssPosition:Cn.map(bl=>or(bl,"position"))};ec&&Ia(W.dom,Nn,$c),dr.width=dr.height="100%",Vs.width=Vs.height="",tc(Po.addClass),Cn.each(bl=>{vc(bl,"position","fixed")}),wd.bind(Nn),W.on("remove",Kc),K.set(bs),Pe(W)&&Qo(Bo),ie(W,!0)}},Mu=(W,K)=>{W.addCommand("mceFullScreen",()=>{us(W,K)})};var cm=tinymce.util.Tools.resolve("tinymce.util.VK");const ps=(W,K)=>{W.on("init",()=>{W.on("keydown",Ce=>{Ce.keyCode===cm.TAB&&!(Ce.metaKey||Ce.ctrlKey)&&K.get()&&Ce.preventDefault()})})},Ui=(W,K)=>Ce=>{Ce.setActive(K.get()!==null);const Be=Ft=>Ce.setActive(Ft.state);return W.on("FullscreenStateChanged",Be),()=>W.off("FullscreenStateChanged",Be)},aa=(W,K)=>{const Ce=()=>W.execCommand("mceFullScreen");W.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Ce,onSetup:Ui(W,K),context:"any"}),W.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Ce,onSetup:Ui(W,K),shortcut:"Meta+Shift+F",context:"any"})};var xd=()=>{Fn.add("fullscreen",W=>{const K=mn(null);return W.inline||(Xe(W),Mu(W,K),aa(W,K),ps(W,K),W.addShortcut("Meta+Shift+F","","mceFullScreen")),Kn(K)})};xd()})();document.getElementById("password-addon")&&document.getElementById("password-addon").addEventListener("click",function(){const mn=document.getElementById("password-input"),Fn=document.querySelector("#password-addon .bi");mn.type==="password"?(mn.type="text",Fn.classList.replace("bi-eye","bi-eye-slash")):(mn.type="password",Fn.classList.replace("bi-eye-slash","bi-eye"))});function oq(){document.querySelectorAll(".dropdown-trigger").forEach(mn=>{mn.addEventListener("click",function(){document.querySelectorAll(".dropdown-menu-wrap").forEach(Kn=>Kn.classList.add("hidden"));const Fn=this.parentNode.querySelector(".dropdown-menu-wrap");Fn.classList.toggle("hidden"),Fn.classList.toggle("block")})})}oq();document.querySelectorAll(".alert-close").forEach(mn=>{mn.addEventListener("click",function(){this.parentNode.remove()})});window.addEventListener("DOMContentLoaded",()=>{const mn={selector:".tinymce-textarea",license_key:'n4f6t5i4vw2m4dsp4xw3zbqwdrudp2uxhdgm4m4d0aljamqb',menubar:!1,inline:!1,shift_enter:"br",plugins:["link","lists","autolink","fullscreen","image"],toolbar:["undo redo | bold italic underline | fontsize | openFileManager | image","forecolor backcolor | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | link fullscreen"],skin:!1,content_css:!1,content_style:"body { font-family: 'Open Sans', sans-serif; font-size: 14px; line-height: 21px; }",setup:function(Fn){Fn.ui.registry.addButton("openFileManager",{text:"File Manager",onAction:function(){document.getElementById("fileManagerModal").classList.remove("hidden"),document.getElementById("fileManagerModal").classList.add("block");const Kn="filemanager",Xn=`${baseHref}/${adminUrl}/filemanager/modal?path=`;ip(Xn,"",Kn,"")}})}};tinymce.init(mn)});function Ij(){document.querySelectorAll(".show-modal").forEach(Fn=>{Fn.addEventListener("click",function(Kn){const Xn=Fn.getAttribute("data-modal");if(document.getElementById(Xn).classList.remove("hidden"),document.getElementById(Xn).classList.add("block"),Xn==="fileManagerModal"){const as=this.getAttribute("data-url"),Vo=this.getAttribute("data-parent"),bn=this.getAttribute("data-input-id");ip(as,"",Vo,bn)}document.querySelector("body").classList.add("overflow-hidden")})})}Ij();function vq(){document.querySelectorAll(".close-modal").forEach(Fn=>{Fn.addEventListener("click",function(Kn){const Xn=Fn.getAttribute("data-modal");document.getElementById(Xn).classList.remove("block"),document.getElementById(Xn).classList.add("hidden"),document.querySelector("body").classList.remove("overflow-hidden")})})}document.querySelectorAll(".show-filemanager").forEach(mn=>{mn.addEventListener("click",function(){const Fn=this.getAttribute("data-id");document.getElementById("idDataToEdit").value=Fn})});document.querySelectorAll(".open-file-manager").forEach(mn=>{mn.addEventListener("click",function(){const Fn=this.getAttribute("data-url"),Kn=this.getAttribute("data-parent"),Xn=this.getAttribute("data-input-id");ip(Fn,"",Kn,Xn)})});if(document.getElementById("file-manager-wrapper")){const mn=document.getElementById("file-manager-wrapper").getAttribute("data-url");ip(mn,"","","")}function ip(mn,Fn="",Kn="",Xn=""){fetch(mn+Fn).then(po=>po.text()).then(po=>{document.getElementById("fileManagerContent").innerHTML=po,document.getElementById("uploadPath").value=Fn,document.getElementById("folderPath").value=Fn,yq(mn,Kn,Xn),Cq(mn,Kn,Xn),Sq(Kn,Xn),wq(mn,Kn,Xn),xq(mn,Kn,Xn),Eq(Kn,Xn),Tq(),oq(),Ij(),vq()})}function yq(mn,Fn,Kn){document.getElementById("fileInput").addEventListener("change",function(Xn){const po=new FormData(document.getElementById("uploadForm")),as=this.getAttribute("data-url");po.append("_token",csrfToken);const Vo=document.getElementById("uploadPath").value;fetch(as,{method:"POST",body:po}).then(bn=>ip(mn,Vo,Fn,Kn)).catch(bn=>console.error("ERROR",bn))})}function Cq(mn,Fn,Kn){document.getElementById("createFolderForm").addEventListener("submit",function(Xn){Xn.preventDefault();const po=new FormData(this),as=this.getAttribute("action"),Vo=document.getElementById("folderPath").value;fetch(as,{method:"POST",body:po}).then(Qn=>ip(mn,Vo,Fn,Kn)).catch(Qn=>console.error("ERROR",Qn)),document.getElementById("modalCreateNewFolder").classList.remove("block"),document.getElementById("modalCreateNewFolder").classList.add("hidden"),document.querySelector("body").classList.remove("overflow-hidden")})}function Sq(mn,Fn){document.querySelectorAll(".folder-link").forEach(Kn=>{Kn.addEventListener("click",function(){const Xn=this.getAttribute("data-url"),po=this.getAttribute("data-path");ip(Xn,po,mn,Fn)})}),document.querySelectorAll(".back-link").forEach(Kn=>{Kn.addEventListener("click",function(){const Xn=this.getAttribute("data-url"),po=this.getAttribute("data-path");ip(Xn,po,mn,Fn)})})}function wq(mn,Fn,Kn){document.querySelectorAll(".select-view-opt").forEach(Xn=>{Xn.addEventListener("click",function(){const po=this.getAttribute("data-option"),as=this.getAttribute("data-url");fetch(as,{method:"POST",headers:{"X-CSRF-TOKEN":csrfToken,"Content-Type":"application/json"},body:JSON.stringify({view:po})}).then(Vo=>ip(mn,document.getElementById("uploadPath").value,Fn,Kn)).catch(Vo=>console.error("ERROR",Vo))})})}function xq(mn,Fn,Kn){document.querySelectorAll(".delete-button").forEach(Xn=>{Xn.addEventListener("click",function(){const po=this.getAttribute("data-path"),as=this.getAttribute("data-type"),Vo=this.getAttribute("data-url");confirm(as==="folder"?"Are you sure to delete this folder?":"Are you sure to delete this file?")&&fetch(Vo,{method:"DELETE",headers:{"X-CSRF-TOKEN":csrfToken,"Content-Type":"application/json"},body:JSON.stringify({path:po})}).then(Qn=>Qn.json()).then(Qn=>{Qn.success?(alert("File/folder deleted successfully!"),ip(mn,document.getElementById("uploadPath").value,Fn,Kn)):alert("Error deleting file/folder: "+Qn.message)})})})}function Eq(mn,Fn){document.querySelectorAll(".attach-file-toform").forEach(Kn=>{Kn.addEventListener("click",function(){const Xn=this.getAttribute("data-name"),po=this.getAttribute("data-path");if(mn==="filemanager"){const as=`<p><img src="${storagePath}/${po}" alt="${Xn}" /></p>`;tinymce.activeEditor.insertContent(as)}else document.getElementById(mn).querySelector(".img-preview-upload").src=`${storagePath}/${po}`,document.getElementById(Fn).value=po})})}function Tq(){document.querySelectorAll(".copy-to-clipboard").forEach(mn=>{mn.addEventListener("click",function(){navigator.clipboard.writeText(this.getAttribute("data-path"))})})}const sq=document.getElementById("gallery-image-list-add"),kq=sq.children.length,$j=document.getElementById("add-image-gallery");if($j){let mn=kq;$j.addEventListener("click",function(){const Fn=$j.getAttribute("data-url"),Kn=document.createElement("tr");Kn.id=`data-image-${mn}`,Kn.innerHTML=`
      <td class="align-top">
        <div class="border rounded-lg w-full overflow-hidden bg-white">
          <input type="text" name="image[${mn}][title]" class="border-0 rounded-lg px-3 py-2 text-sm w-full bg-none" placeholder="type title" />
        </div>
      </td>
      <td>
        <div id="add-single-image-${mn}" class="block">
          <img id="img-preview-upload-${mn}" src="https://via.placeholder.com/100" filename="" alt="" class="w-24 h-24 object-cover mb-2 img-preview-upload" />
          <button type="button" class="p-1 px-2 text-xs text-white bg-blue rounded show-modal" data-url="${Fn}" data-modal="fileManagerModal" data-parent="add-single-image-${mn}" data-input-id="image-input-${mn}">Pilih File</button>
          <input id="image-input-${mn}" type="hidden" name="image[${mn}][image]" />
        </div>
      </td>
      <td class="align-top">
        <div class="border rounded-lg w-full overflow-hidden bg-white">
          <input type="number" name="image[${mn}][num_order]" class="border-0 rounded-lg px-3 py-2 text-sm w-full bg-none" placeholder="type number order" />
        </div>
      </td>
      <td class="align-top">
        <button class="text-red-700 text-sm btn-delete-image" data-id="data-image-${mn}">Remove</button>
      </td>
    `,sq.appendChild(Kn),mn++,Ij(),_q()})}function _q(){document.querySelectorAll(".btn-delete-image").forEach(Fn=>{Fn.addEventListener("click",function(){const Kn=Fn.getAttribute("data-id");document.getElementById(Kn).remove()})})}
